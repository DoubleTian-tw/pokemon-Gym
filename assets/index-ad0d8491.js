(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function VA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lE={exports:{}},bc={},cE={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var su=Symbol.for("react.element"),FA=Symbol.for("react.portal"),LA=Symbol.for("react.fragment"),MA=Symbol.for("react.strict_mode"),UA=Symbol.for("react.profiler"),BA=Symbol.for("react.provider"),$A=Symbol.for("react.context"),jA=Symbol.for("react.forward_ref"),zA=Symbol.for("react.suspense"),qA=Symbol.for("react.memo"),QA=Symbol.for("react.lazy"),Oy=Symbol.iterator;function KA(t){return t===null||typeof t!="object"?null:(t=Oy&&t[Oy]||t["@@iterator"],typeof t=="function"?t:null)}var hE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dE=Object.assign,fE={};function ro(t,e,n){this.props=t,this.context=e,this.refs=fE,this.updater=n||hE}ro.prototype.isReactComponent={};ro.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ro.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pE(){}pE.prototype=ro.prototype;function Qp(t,e,n){this.props=t,this.context=e,this.refs=fE,this.updater=n||hE}var Kp=Qp.prototype=new pE;Kp.constructor=Qp;dE(Kp,ro.prototype);Kp.isPureReactComponent=!0;var Vy=Array.isArray,mE=Object.prototype.hasOwnProperty,Gp={current:null},gE={key:!0,ref:!0,__self:!0,__source:!0};function yE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)mE.call(e,r)&&!gE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:su,type:t,key:i,ref:o,props:s,_owner:Gp.current}}function GA(t,e){return{$$typeof:su,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hp(t){return typeof t=="object"&&t!==null&&t.$$typeof===su}function HA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fy=/\/+/g;function Hh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HA(""+t.key):e.toString(36)}function ll(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case su:case FA:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Hh(o,0):r,Vy(s)?(n="",t!=null&&(n=t.replace(Fy,"$&/")+"/"),ll(s,e,n,"",function(l){return l})):s!=null&&(Hp(s)&&(s=GA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Vy(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Hh(i,a);o+=ll(i,e,n,u,s)}else if(u=KA(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Hh(i,a++),o+=ll(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bu(t,e,n){if(t==null)return t;var r=[],s=0;return ll(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},cl={transition:null},YA={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:cl,ReactCurrentOwner:Gp};Y.Children={map:bu,forEach:function(t,e,n){bu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bu(t,function(){e++}),e},toArray:function(t){return bu(t,function(e){return e})||[]},only:function(t){if(!Hp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=ro;Y.Fragment=LA;Y.Profiler=UA;Y.PureComponent=Qp;Y.StrictMode=MA;Y.Suspense=zA;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YA;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Gp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)mE.call(e,u)&&!gE.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:su,type:t.type,key:s,ref:i,props:r,_owner:o}};Y.createContext=function(t){return t={$$typeof:$A,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BA,_context:t},t.Consumer=t};Y.createElement=yE;Y.createFactory=function(t){var e=yE.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:jA,render:t}};Y.isValidElement=Hp;Y.lazy=function(t){return{$$typeof:QA,_payload:{_status:-1,_result:t},_init:WA}};Y.memo=function(t,e){return{$$typeof:qA,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=cl.transition;cl.transition={};try{t()}finally{cl.transition=e}};Y.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Y.useCallback=function(t,e){return Et.current.useCallback(t,e)};Y.useContext=function(t){return Et.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Et.current.useEffect(t,e)};Y.useId=function(){return Et.current.useId()};Y.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Et.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};Y.useRef=function(t){return Et.current.useRef(t)};Y.useState=function(t){return Et.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return Et.current.useTransition()};Y.version="18.2.0";cE.exports=Y;var B=cE.exports;const _r=VA(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA=B,JA=Symbol.for("react.element"),ZA=Symbol.for("react.fragment"),eP=Object.prototype.hasOwnProperty,tP=XA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nP={key:!0,ref:!0,__self:!0,__source:!0};function _E(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eP.call(e,r)&&!nP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:JA,type:t,key:i,ref:o,props:s,_owner:tP.current}}bc.Fragment=ZA;bc.jsx=_E;bc.jsxs=_E;lE.exports=bc;var I=lE.exports,Xd={},vE={exports:{}},Mt={},wE={exports:{}},EE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var G=F.length;F.push(q);e:for(;0<G;){var _e=G-1>>>1,Oe=F[_e];if(0<s(Oe,q))F[_e]=q,F[G]=Oe,G=_e;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],G=F.pop();if(G!==q){F[0]=G;e:for(var _e=0,Oe=F.length,Ys=Oe>>>1;_e<Ys;){var Dn=2*(_e+1)-1,So=F[Dn],bn=Dn+1,Xs=F[bn];if(0>s(So,G))bn<Oe&&0>s(Xs,So)?(F[_e]=Xs,F[bn]=G,_e=bn):(F[_e]=So,F[Dn]=G,_e=Dn);else if(bn<Oe&&0>s(Xs,G))F[_e]=Xs,F[bn]=G,_e=bn;else break e}}return q}function s(F,q){var G=F.sortIndex-q.sortIndex;return G!==0?G:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,h=null,d=3,f=!1,p=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(F){for(var q=n(l);q!==null;){if(q.callback===null)r(l);else if(q.startTime<=F)r(l),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(l)}}function w(F){if(_=!1,y(F),!p)if(n(u)!==null)p=!0,To(P);else{var q=n(l);q!==null&&Io(w,q.startTime-F)}}function P(F,q){p=!1,_&&(_=!1,g(C),C=-1),f=!0;var G=d;try{for(y(q),h=n(u);h!==null&&(!(h.expirationTime>q)||F&&!Ye());){var _e=h.callback;if(typeof _e=="function"){h.callback=null,d=h.priorityLevel;var Oe=_e(h.expirationTime<=q);q=t.unstable_now(),typeof Oe=="function"?h.callback=Oe:h===n(u)&&r(u),y(q)}else r(u);h=n(u)}if(h!==null)var Ys=!0;else{var Dn=n(l);Dn!==null&&Io(w,Dn.startTime-q),Ys=!1}return Ys}finally{h=null,d=G,f=!1}}var S=!1,R=null,C=-1,j=5,$=-1;function Ye(){return!(t.unstable_now()-$<j)}function nr(){if(R!==null){var F=t.unstable_now();$=F;var q=!0;try{q=R(!0,F)}finally{q?xn():(S=!1,R=null)}}else S=!1}var xn;if(typeof m=="function")xn=function(){m(nr)};else if(typeof MessageChannel<"u"){var kn=new MessageChannel,Kh=kn.port2;kn.port1.onmessage=nr,xn=function(){Kh.postMessage(null)}}else xn=function(){v(nr,0)};function To(F){R=F,S||(S=!0,xn())}function Io(F,q){C=v(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,To(P))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var q=3;break;default:q=d}var G=d;d=q;try{return F()}finally{d=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var G=d;d=F;try{return q()}finally{d=G}},t.unstable_scheduleCallback=function(F,q,G){var _e=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?_e+G:_e):G=_e,F){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=G+Oe,F={id:c++,callback:q,priorityLevel:F,startTime:G,expirationTime:Oe,sortIndex:-1},G>_e?(F.sortIndex=G,e(l,F),n(u)===null&&F===n(l)&&(_?(g(C),C=-1):_=!0,Io(w,G-_e))):(F.sortIndex=Oe,e(u,F),p||f||(p=!0,To(P))),F},t.unstable_shouldYield=Ye,t.unstable_wrapCallback=function(F){var q=d;return function(){var G=d;d=q;try{return F.apply(this,arguments)}finally{d=G}}}})(EE);wE.exports=EE;var rP=wE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE=B,Vt=rP;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IE=new Set,ma={};function js(t,e){Vi(t,e),Vi(t+"Capture",e)}function Vi(t,e){for(ma[t]=e,t=0;t<e.length;t++)IE.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jd=Object.prototype.hasOwnProperty,sP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ly={},My={};function iP(t){return Jd.call(My,t)?!0:Jd.call(Ly,t)?!1:sP.test(t)?My[t]=!0:(Ly[t]=!0,!1)}function oP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aP(t,e,n,r){if(e===null||typeof e>"u"||oP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wp=/[\-:]([a-z])/g;function Yp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wp,Yp);rt[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wp,Yp);rt[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wp,Yp);rt[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xp(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aP(e,n,s,r)&&(n=null),r||s===null?iP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=TE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nu=Symbol.for("react.element"),ci=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),Jp=Symbol.for("react.strict_mode"),Zd=Symbol.for("react.profiler"),SE=Symbol.for("react.provider"),RE=Symbol.for("react.context"),Zp=Symbol.for("react.forward_ref"),ef=Symbol.for("react.suspense"),tf=Symbol.for("react.suspense_list"),em=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),AE=Symbol.for("react.offscreen"),Uy=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=Uy&&t[Uy]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Wh;function jo(t){if(Wh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wh=e&&e[1]||""}return`
`+Wh+t}var Yh=!1;function Xh(t,e){if(!t||Yh)return"";Yh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Yh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jo(t):""}function uP(t){switch(t.tag){case 5:return jo(t.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return t=Xh(t.type,!1),t;case 11:return t=Xh(t.type.render,!1),t;case 1:return t=Xh(t.type,!0),t;default:return""}}function nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hi:return"Fragment";case ci:return"Portal";case Zd:return"Profiler";case Jp:return"StrictMode";case ef:return"Suspense";case tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RE:return(t.displayName||"Context")+".Consumer";case SE:return(t._context.displayName||"Context")+".Provider";case Zp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case em:return e=t.displayName||null,e!==null?e:nf(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return nf(t(e))}catch{}}return null}function lP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nf(e);case 8:return e===Jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function PE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cP(t){var e=PE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ou(t){t._valueTracker||(t._valueTracker=cP(t))}function CE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=PE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rf(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function By(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xE(t,e){e=e.checked,e!=null&&Xp(t,"checked",e,!1)}function sf(t,e){xE(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?of(t,e.type,n):e.hasOwnProperty("defaultValue")&&of(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $y(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function of(t,e,n){(e!=="number"||Nl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zo=Array.isArray;function Ii(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(zo(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function kE(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vu,bE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vu=Vu||document.createElement("div"),Vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hP=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(t){hP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jo[e]=Jo[t]})});function NE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jo.hasOwnProperty(t)&&Jo[t]?(""+e).trim():e+"px"}function OE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=NE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dP=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lf(t,e){if(e){if(dP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function cf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hf=null;function tm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var df=null,Si=null,Ri=null;function qy(t){if(t=au(t)){if(typeof df!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Lc(e),df(t.stateNode,t.type,e))}}function VE(t){Si?Ri?Ri.push(t):Ri=[t]:Si=t}function FE(){if(Si){var t=Si,e=Ri;if(Ri=Si=null,qy(t),e)for(t=0;t<e.length;t++)qy(e[t])}}function LE(t,e){return t(e)}function ME(){}var Jh=!1;function UE(t,e,n){if(Jh)return t(e,n);Jh=!0;try{return LE(t,e,n)}finally{Jh=!1,(Si!==null||Ri!==null)&&(ME(),FE())}}function ya(t,e){var n=t.stateNode;if(n===null)return null;var r=Lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var ff=!1;if(qn)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){ff=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{ff=!1}function fP(t,e,n,r,s,i,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Zo=!1,Ol=null,Vl=!1,pf=null,pP={onError:function(t){Zo=!0,Ol=t}};function mP(t,e,n,r,s,i,o,a,u){Zo=!1,Ol=null,fP.apply(pP,arguments)}function gP(t,e,n,r,s,i,o,a,u){if(mP.apply(this,arguments),Zo){if(Zo){var l=Ol;Zo=!1,Ol=null}else throw Error(D(198));Vl||(Vl=!0,pf=l)}}function zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function BE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qy(t){if(zs(t)!==t)throw Error(D(188))}function yP(t){var e=t.alternate;if(!e){if(e=zs(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qy(s),t;if(i===r)return Qy(s),e;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function $E(t){return t=yP(t),t!==null?jE(t):null}function jE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jE(t);if(e!==null)return e;t=t.sibling}return null}var zE=Vt.unstable_scheduleCallback,Ky=Vt.unstable_cancelCallback,_P=Vt.unstable_shouldYield,vP=Vt.unstable_requestPaint,De=Vt.unstable_now,wP=Vt.unstable_getCurrentPriorityLevel,nm=Vt.unstable_ImmediatePriority,qE=Vt.unstable_UserBlockingPriority,Fl=Vt.unstable_NormalPriority,EP=Vt.unstable_LowPriority,QE=Vt.unstable_IdlePriority,Nc=null,En=null;function TP(t){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Nc,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:RP,IP=Math.log,SP=Math.LN2;function RP(t){return t>>>=0,t===0?32:31-(IP(t)/SP|0)|0}var Fu=64,Lu=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ll(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=qo(a):(i&=o,i!==0&&(r=qo(i)))}else o=n&~s,o!==0?r=qo(o):i!==0&&(r=qo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function AP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=AP(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function mf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KE(){var t=Fu;return Fu<<=1,!(Fu&4194240)&&(Fu=64),t}function Zh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function iu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function CP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var se=0;function GE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var HE,sm,WE,YE,XE,gf=!1,Mu=[],vr=null,wr=null,Er=null,_a=new Map,va=new Map,hr=[],xP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gy(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":_a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(e.pointerId)}}function Po(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=au(e),e!==null&&sm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kP(t,e,n,r,s){switch(e){case"focusin":return vr=Po(vr,t,e,n,r,s),!0;case"dragenter":return wr=Po(wr,t,e,n,r,s),!0;case"mouseover":return Er=Po(Er,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _a.set(i,Po(_a.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,va.set(i,Po(va.get(i)||null,t,e,n,r,s)),!0}return!1}function JE(t){var e=ds(t.target);if(e!==null){var n=zs(e);if(n!==null){if(e=n.tag,e===13){if(e=BE(n),e!==null){t.blockedOn=e,XE(t.priority,function(){WE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);hf=r,n.target.dispatchEvent(r),hf=null}else return e=au(n),e!==null&&sm(e),t.blockedOn=n,!1;e.shift()}return!0}function Hy(t,e,n){hl(t)&&n.delete(e)}function DP(){gf=!1,vr!==null&&hl(vr)&&(vr=null),wr!==null&&hl(wr)&&(wr=null),Er!==null&&hl(Er)&&(Er=null),_a.forEach(Hy),va.forEach(Hy)}function Co(t,e){t.blockedOn===e&&(t.blockedOn=null,gf||(gf=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,DP)))}function wa(t){function e(s){return Co(s,t)}if(0<Mu.length){Co(Mu[0],t);for(var n=1;n<Mu.length;n++){var r=Mu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&Co(vr,t),wr!==null&&Co(wr,t),Er!==null&&Co(Er,t),_a.forEach(e),va.forEach(e),n=0;n<hr.length;n++)r=hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hr.length&&(n=hr[0],n.blockedOn===null);)JE(n),n.blockedOn===null&&hr.shift()}var Ai=Xn.ReactCurrentBatchConfig,Ml=!0;function bP(t,e,n,r){var s=se,i=Ai.transition;Ai.transition=null;try{se=1,im(t,e,n,r)}finally{se=s,Ai.transition=i}}function NP(t,e,n,r){var s=se,i=Ai.transition;Ai.transition=null;try{se=4,im(t,e,n,r)}finally{se=s,Ai.transition=i}}function im(t,e,n,r){if(Ml){var s=yf(t,e,n,r);if(s===null)ld(t,e,r,Ul,n),Gy(t,r);else if(kP(s,t,e,n,r))r.stopPropagation();else if(Gy(t,r),e&4&&-1<xP.indexOf(t)){for(;s!==null;){var i=au(s);if(i!==null&&HE(i),i=yf(t,e,n,r),i===null&&ld(t,e,r,Ul,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ld(t,e,r,null,n)}}var Ul=null;function yf(t,e,n,r){if(Ul=null,t=tm(r),t=ds(t),t!==null)if(e=zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=BE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ul=t,null}function ZE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wP()){case nm:return 1;case qE:return 4;case Fl:case EP:return 16;case QE:return 536870912;default:return 16}default:return 16}}var mr=null,om=null,dl=null;function e0(){if(dl)return dl;var t,e=om,n=e.length,r,s="value"in mr?mr.value:mr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return dl=s.slice(t,1<r?1-r:void 0)}function fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uu(){return!0}function Wy(){return!1}function Ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Uu:Wy,this.isPropagationStopped=Wy,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uu)},persist:function(){},isPersistent:Uu}),e}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},am=Ut(so),ou=Ie({},so,{view:0,detail:0}),OP=Ut(ou),ed,td,xo,Oc=Ie({},ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xo&&(xo&&t.type==="mousemove"?(ed=t.screenX-xo.screenX,td=t.screenY-xo.screenY):td=ed=0,xo=t),ed)},movementY:function(t){return"movementY"in t?t.movementY:td}}),Yy=Ut(Oc),VP=Ie({},Oc,{dataTransfer:0}),FP=Ut(VP),LP=Ie({},ou,{relatedTarget:0}),nd=Ut(LP),MP=Ie({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),UP=Ut(MP),BP=Ie({},so,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$P=Ut(BP),jP=Ie({},so,{data:0}),Xy=Ut(jP),zP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QP[t])?!!e[t]:!1}function um(){return KP}var GP=Ie({},ou,{key:function(t){if(t.key){var e=zP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:um,charCode:function(t){return t.type==="keypress"?fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HP=Ut(GP),WP=Ie({},Oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=Ut(WP),YP=Ie({},ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:um}),XP=Ut(YP),JP=Ie({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZP=Ut(JP),eC=Ie({},Oc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tC=Ut(eC),nC=[9,13,27,32],lm=qn&&"CompositionEvent"in window,ea=null;qn&&"documentMode"in document&&(ea=document.documentMode);var rC=qn&&"TextEvent"in window&&!ea,t0=qn&&(!lm||ea&&8<ea&&11>=ea),Zy=String.fromCharCode(32),e_=!1;function n0(t,e){switch(t){case"keyup":return nC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var di=!1;function sC(t,e){switch(t){case"compositionend":return r0(e);case"keypress":return e.which!==32?null:(e_=!0,Zy);case"textInput":return t=e.data,t===Zy&&e_?null:t;default:return null}}function iC(t,e){if(di)return t==="compositionend"||!lm&&n0(t,e)?(t=e0(),dl=om=mr=null,di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return t0&&e.locale!=="ko"?null:e.data;default:return null}}var oC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oC[t.type]:e==="textarea"}function s0(t,e,n,r){VE(r),e=Bl(e,"onChange"),0<e.length&&(n=new am("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ta=null,Ea=null;function aC(t){m0(t,0)}function Vc(t){var e=mi(t);if(CE(e))return t}function uC(t,e){if(t==="change")return e}var i0=!1;if(qn){var rd;if(qn){var sd="oninput"in document;if(!sd){var n_=document.createElement("div");n_.setAttribute("oninput","return;"),sd=typeof n_.oninput=="function"}rd=sd}else rd=!1;i0=rd&&(!document.documentMode||9<document.documentMode)}function r_(){ta&&(ta.detachEvent("onpropertychange",o0),Ea=ta=null)}function o0(t){if(t.propertyName==="value"&&Vc(Ea)){var e=[];s0(e,Ea,t,tm(t)),UE(aC,e)}}function lC(t,e,n){t==="focusin"?(r_(),ta=e,Ea=n,ta.attachEvent("onpropertychange",o0)):t==="focusout"&&r_()}function cC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vc(Ea)}function hC(t,e){if(t==="click")return Vc(e)}function dC(t,e){if(t==="input"||t==="change")return Vc(e)}function fC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:fC;function Ta(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jd.call(e,s)||!on(t[s],e[s]))return!1}return!0}function s_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i_(t,e){var n=s_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s_(n)}}function a0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?a0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function u0(){for(var t=window,e=Nl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nl(t.document)}return e}function cm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pC(t){var e=u0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&a0(n.ownerDocument.documentElement,n)){if(r!==null&&cm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=i_(n,i);var o=i_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mC=qn&&"documentMode"in document&&11>=document.documentMode,fi=null,_f=null,na=null,vf=!1;function o_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vf||fi==null||fi!==Nl(r)||(r=fi,"selectionStart"in r&&cm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),na&&Ta(na,r)||(na=r,r=Bl(_f,"onSelect"),0<r.length&&(e=new am("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fi)))}function Bu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pi={animationend:Bu("Animation","AnimationEnd"),animationiteration:Bu("Animation","AnimationIteration"),animationstart:Bu("Animation","AnimationStart"),transitionend:Bu("Transition","TransitionEnd")},id={},l0={};qn&&(l0=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function Fc(t){if(id[t])return id[t];if(!pi[t])return t;var e=pi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in l0)return id[t]=e[n];return t}var c0=Fc("animationend"),h0=Fc("animationiteration"),d0=Fc("animationstart"),f0=Fc("transitionend"),p0=new Map,a_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){p0.set(t,e),js(e,[t])}for(var od=0;od<a_.length;od++){var ad=a_[od],gC=ad.toLowerCase(),yC=ad[0].toUpperCase()+ad.slice(1);qr(gC,"on"+yC)}qr(c0,"onAnimationEnd");qr(h0,"onAnimationIteration");qr(d0,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(f0,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_C=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function u_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gP(r,e,void 0,t),t.currentTarget=null}function m0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;u_(s,a,l),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;u_(s,a,l),i=u}}}if(Vl)throw t=pf,Vl=!1,pf=null,t}function ce(t,e){var n=e[Sf];n===void 0&&(n=e[Sf]=new Set);var r=t+"__bubble";n.has(r)||(g0(e,t,2,!1),n.add(r))}function ud(t,e,n){var r=0;e&&(r|=4),g0(n,t,r,e)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Ia(t){if(!t[$u]){t[$u]=!0,IE.forEach(function(n){n!=="selectionchange"&&(_C.has(n)||ud(n,!1,t),ud(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$u]||(e[$u]=!0,ud("selectionchange",!1,e))}}function g0(t,e,n,r){switch(ZE(e)){case 1:var s=bP;break;case 4:s=NP;break;default:s=im}n=s.bind(null,e,n,t),s=void 0,!ff||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ld(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ds(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}UE(function(){var l=i,c=tm(n),h=[];e:{var d=p0.get(t);if(d!==void 0){var f=am,p=t;switch(t){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":f=HP;break;case"focusin":p="focus",f=nd;break;case"focusout":p="blur",f=nd;break;case"beforeblur":case"afterblur":f=nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=FP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=XP;break;case c0:case h0:case d0:f=UP;break;case f0:f=ZP;break;case"scroll":f=OP;break;case"wheel":f=tC;break;case"copy":case"cut":case"paste":f=$P;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Jy}var _=(e&4)!==0,v=!_&&t==="scroll",g=_?d!==null?d+"Capture":null:d;_=[];for(var m=l,y;m!==null;){y=m;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=ya(m,g),w!=null&&_.push(Sa(m,w,y)))),v)break;m=m.return}0<_.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:_}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==hf&&(p=n.relatedTarget||n.fromElement)&&(ds(p)||p[Qn]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?ds(p):null,p!==null&&(v=zs(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(_=Yy,w="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(_=Jy,w="onPointerLeave",g="onPointerEnter",m="pointer"),v=f==null?d:mi(f),y=p==null?d:mi(p),d=new _(w,m+"leave",f,n,c),d.target=v,d.relatedTarget=y,w=null,ds(c)===l&&(_=new _(g,m+"enter",p,n,c),_.target=y,_.relatedTarget=v,w=_),v=w,f&&p)t:{for(_=f,g=p,m=0,y=_;y;y=Js(y))m++;for(y=0,w=g;w;w=Js(w))y++;for(;0<m-y;)_=Js(_),m--;for(;0<y-m;)g=Js(g),y--;for(;m--;){if(_===g||g!==null&&_===g.alternate)break t;_=Js(_),g=Js(g)}_=null}else _=null;f!==null&&l_(h,d,f,_,!1),p!==null&&v!==null&&l_(h,v,p,_,!0)}}e:{if(d=l?mi(l):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var P=uC;else if(t_(d))if(i0)P=dC;else{P=cC;var S=lC}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=hC);if(P&&(P=P(t,l))){s0(h,P,n,c);break e}S&&S(t,d,l),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&of(d,"number",d.value)}switch(S=l?mi(l):window,t){case"focusin":(t_(S)||S.contentEditable==="true")&&(fi=S,_f=l,na=null);break;case"focusout":na=_f=fi=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,o_(h,n,c);break;case"selectionchange":if(mC)break;case"keydown":case"keyup":o_(h,n,c)}var R;if(lm)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else di?n0(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(t0&&n.locale!=="ko"&&(di||C!=="onCompositionStart"?C==="onCompositionEnd"&&di&&(R=e0()):(mr=c,om="value"in mr?mr.value:mr.textContent,di=!0)),S=Bl(l,C),0<S.length&&(C=new Xy(C,t,null,n,c),h.push({event:C,listeners:S}),R?C.data=R:(R=r0(n),R!==null&&(C.data=R)))),(R=rC?sC(t,n):iC(t,n))&&(l=Bl(l,"onBeforeInput"),0<l.length&&(c=new Xy("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:l}),c.data=R))}m0(h,e)})}function Sa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ya(t,n),i!=null&&r.unshift(Sa(t,i,s)),i=ya(t,e),i!=null&&r.push(Sa(t,i,s))),t=t.return}return r}function Js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,s?(u=ya(n,i),u!=null&&o.unshift(Sa(n,u,a))):s||(u=ya(n,i),u!=null&&o.push(Sa(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vC=/\r\n?/g,wC=/\u0000|\uFFFD/g;function c_(t){return(typeof t=="string"?t:""+t).replace(vC,`
`).replace(wC,"")}function ju(t,e,n){if(e=c_(e),c_(t)!==e&&n)throw Error(D(425))}function $l(){}var wf=null,Ef=null;function Tf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var If=typeof setTimeout=="function"?setTimeout:void 0,EC=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,TC=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(t){return h_.resolve(null).then(t).catch(IC)}:If;function IC(t){setTimeout(function(){throw t})}function cd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wa(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function d_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),fn="__reactFiber$"+io,Ra="__reactProps$"+io,Qn="__reactContainer$"+io,Sf="__reactEvents$"+io,SC="__reactListeners$"+io,RC="__reactHandles$"+io;function ds(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=d_(t);t!==null;){if(n=t[fn])return n;t=d_(t)}return e}t=n,n=t.parentNode}return null}function au(t){return t=t[fn]||t[Qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Lc(t){return t[Ra]||null}var Rf=[],gi=-1;function Qr(t){return{current:t}}function fe(t){0>gi||(t.current=Rf[gi],Rf[gi]=null,gi--)}function ae(t,e){gi++,Rf[gi]=t.current,t.current=e}var br={},ht=Qr(br),xt=Qr(!1),Rs=br;function Fi(t,e){var n=t.type.contextTypes;if(!n)return br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kt(t){return t=t.childContextTypes,t!=null}function jl(){fe(xt),fe(ht)}function f_(t,e,n){if(ht.current!==br)throw Error(D(168));ae(ht,e),ae(xt,n)}function y0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(D(108,lP(t)||"Unknown",s));return Ie({},n,r)}function zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,Rs=ht.current,ae(ht,t),ae(xt,xt.current),!0}function p_(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=y0(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,fe(xt),fe(ht),ae(ht,t)):fe(xt),ae(xt,n)}var On=null,Mc=!1,hd=!1;function _0(t){On===null?On=[t]:On.push(t)}function AC(t){Mc=!0,_0(t)}function Kr(){if(!hd&&On!==null){hd=!0;var t=0,e=se;try{var n=On;for(se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,Mc=!1}catch(s){throw On!==null&&(On=On.slice(t+1)),zE(nm,Kr),s}finally{se=e,hd=!1}}return null}var yi=[],_i=0,ql=null,Ql=0,$t=[],jt=0,As=null,Fn=1,Ln="";function rs(t,e){yi[_i++]=Ql,yi[_i++]=ql,ql=t,Ql=e}function v0(t,e,n){$t[jt++]=Fn,$t[jt++]=Ln,$t[jt++]=As,As=t;var r=Fn;t=Ln;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fn=1<<32-rn(e)+s|n<<s|r,Ln=i+t}else Fn=1<<i|n<<s|r,Ln=t}function hm(t){t.return!==null&&(rs(t,1),v0(t,1,0))}function dm(t){for(;t===ql;)ql=yi[--_i],yi[_i]=null,Ql=yi[--_i],yi[_i]=null;for(;t===As;)As=$t[--jt],$t[jt]=null,Ln=$t[--jt],$t[jt]=null,Fn=$t[--jt],$t[jt]=null}var Ot=null,Nt=null,me=!1,en=null;function w0(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function m_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Nt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:Fn,overflow:Ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Nt=null,!0):!1;default:return!1}}function Af(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pf(t){if(me){var e=Nt;if(e){var n=e;if(!m_(t,e)){if(Af(t))throw Error(D(418));e=Tr(n.nextSibling);var r=Ot;e&&m_(t,e)?w0(r,n):(t.flags=t.flags&-4097|2,me=!1,Ot=t)}}else{if(Af(t))throw Error(D(418));t.flags=t.flags&-4097|2,me=!1,Ot=t}}}function g_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function zu(t){if(t!==Ot)return!1;if(!me)return g_(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tf(t.type,t.memoizedProps)),e&&(e=Nt)){if(Af(t))throw E0(),Error(D(418));for(;e;)w0(t,e),e=Tr(e.nextSibling)}if(g_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=Ot?Tr(t.stateNode.nextSibling):null;return!0}function E0(){for(var t=Nt;t;)t=Tr(t.nextSibling)}function Li(){Nt=Ot=null,me=!1}function fm(t){en===null?en=[t]:en.push(t)}var PC=Xn.ReactCurrentBatchConfig;function Jt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Kl=Qr(null),Gl=null,vi=null,pm=null;function mm(){pm=vi=Gl=null}function gm(t){var e=Kl.current;fe(Kl),t._currentValue=e}function Cf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pi(t,e){Gl=t,pm=vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(pm!==t)if(t={context:t,memoizedValue:e,next:null},vi===null){if(Gl===null)throw Error(D(308));vi=t,Gl.dependencies={lanes:0,firstContext:t}}else vi=vi.next=t;return e}var fs=null;function ym(t){fs===null?fs=[t]:fs.push(t)}function T0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ym(e)):(n.next=s.next,s.next=n),e.interleaved=n,Kn(t,r)}function Kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function _m(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ir(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Kn(t,n)}return s=r.interleaved,s===null?(e.next=e,ym(r)):(e.next=s.next,s.next=e),r.interleaved=e,Kn(t,n)}function pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rm(t,n)}}function y_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hl(t,e,n,r){var s=t.updateQueue;lr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?i=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,c=l=u=null,a=i;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,_=a;switch(d=e,f=n,_.tag){case 1:if(p=_.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=_.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ie({},h,d);break e;case 2:lr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=f,u=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(c===null&&(u=h),s.baseState=u,s.firstBaseUpdate=l,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Cs|=o,t.lanes=o,t.memoizedState=h}}function __(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var S0=new TE.Component().refs;function xf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Uc={isMounted:function(t){return(t=t._reactInternals)?zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),s=Rr(t),i=Bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(sn(e,t,s,r),pl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),s=Rr(t),i=Bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ir(t,i,s),e!==null&&(sn(e,t,s,r),pl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=Rr(t),s=Bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ir(t,s,r),e!==null&&(sn(e,t,r,n),pl(e,t,r))}};function v_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ta(n,r)||!Ta(s,i):!0}function R0(t,e,n){var r=!1,s=br,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=kt(e)?Rs:ht.current,r=e.contextTypes,i=(r=r!=null)?Fi(t,s):br),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Uc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function w_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Uc.enqueueReplaceState(e,e.state,null)}function kf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=S0,_m(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=kt(e)?Rs:ht.current,s.context=Fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Uc.enqueueReplaceState(s,s.state,null),Hl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===S0&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function qu(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E_(t){var e=t._init;return e(t._payload)}function A0(t){function e(g,m){if(t){var y=g.deletions;y===null?(g.deletions=[m],g.flags|=16):y.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Ar(g,m),g.index=0,g.sibling=null,g}function i(g,m,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<m?(g.flags|=2,m):y):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,y,w){return m===null||m.tag!==6?(m=_d(y,g.mode,w),m.return=g,m):(m=s(m,y),m.return=g,m)}function u(g,m,y,w){var P=y.type;return P===hi?c(g,m,y.props.children,w,y.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ur&&E_(P)===m.type)?(w=s(m,y.props),w.ref=ko(g,m,y),w.return=g,w):(w=wl(y.type,y.key,y.props,null,g.mode,w),w.ref=ko(g,m,y),w.return=g,w)}function l(g,m,y,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=vd(y,g.mode,w),m.return=g,m):(m=s(m,y.children||[]),m.return=g,m)}function c(g,m,y,w,P){return m===null||m.tag!==7?(m=Ts(y,g.mode,w,P),m.return=g,m):(m=s(m,y),m.return=g,m)}function h(g,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=_d(""+m,g.mode,y),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Nu:return y=wl(m.type,m.key,m.props,null,g.mode,y),y.ref=ko(g,null,m),y.return=g,y;case ci:return m=vd(m,g.mode,y),m.return=g,m;case ur:var w=m._init;return h(g,w(m._payload),y)}if(zo(m)||Ro(m))return m=Ts(m,g.mode,y,null),m.return=g,m;qu(g,m)}return null}function d(g,m,y,w){var P=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:a(g,m,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Nu:return y.key===P?u(g,m,y,w):null;case ci:return y.key===P?l(g,m,y,w):null;case ur:return P=y._init,d(g,m,P(y._payload),w)}if(zo(y)||Ro(y))return P!==null?null:c(g,m,y,w,null);qu(g,y)}return null}function f(g,m,y,w,P){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,a(m,g,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nu:return g=g.get(w.key===null?y:w.key)||null,u(m,g,w,P);case ci:return g=g.get(w.key===null?y:w.key)||null,l(m,g,w,P);case ur:var S=w._init;return f(g,m,y,S(w._payload),P)}if(zo(w)||Ro(w))return g=g.get(y)||null,c(m,g,w,P,null);qu(m,w)}return null}function p(g,m,y,w){for(var P=null,S=null,R=m,C=m=0,j=null;R!==null&&C<y.length;C++){R.index>C?(j=R,R=null):j=R.sibling;var $=d(g,R,y[C],w);if($===null){R===null&&(R=j);break}t&&R&&$.alternate===null&&e(g,R),m=i($,m,C),S===null?P=$:S.sibling=$,S=$,R=j}if(C===y.length)return n(g,R),me&&rs(g,C),P;if(R===null){for(;C<y.length;C++)R=h(g,y[C],w),R!==null&&(m=i(R,m,C),S===null?P=R:S.sibling=R,S=R);return me&&rs(g,C),P}for(R=r(g,R);C<y.length;C++)j=f(R,g,C,y[C],w),j!==null&&(t&&j.alternate!==null&&R.delete(j.key===null?C:j.key),m=i(j,m,C),S===null?P=j:S.sibling=j,S=j);return t&&R.forEach(function(Ye){return e(g,Ye)}),me&&rs(g,C),P}function _(g,m,y,w){var P=Ro(y);if(typeof P!="function")throw Error(D(150));if(y=P.call(y),y==null)throw Error(D(151));for(var S=P=null,R=m,C=m=0,j=null,$=y.next();R!==null&&!$.done;C++,$=y.next()){R.index>C?(j=R,R=null):j=R.sibling;var Ye=d(g,R,$.value,w);if(Ye===null){R===null&&(R=j);break}t&&R&&Ye.alternate===null&&e(g,R),m=i(Ye,m,C),S===null?P=Ye:S.sibling=Ye,S=Ye,R=j}if($.done)return n(g,R),me&&rs(g,C),P;if(R===null){for(;!$.done;C++,$=y.next())$=h(g,$.value,w),$!==null&&(m=i($,m,C),S===null?P=$:S.sibling=$,S=$);return me&&rs(g,C),P}for(R=r(g,R);!$.done;C++,$=y.next())$=f(R,g,C,$.value,w),$!==null&&(t&&$.alternate!==null&&R.delete($.key===null?C:$.key),m=i($,m,C),S===null?P=$:S.sibling=$,S=$);return t&&R.forEach(function(nr){return e(g,nr)}),me&&rs(g,C),P}function v(g,m,y,w){if(typeof y=="object"&&y!==null&&y.type===hi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Nu:e:{for(var P=y.key,S=m;S!==null;){if(S.key===P){if(P=y.type,P===hi){if(S.tag===7){n(g,S.sibling),m=s(S,y.props.children),m.return=g,g=m;break e}}else if(S.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ur&&E_(P)===S.type){n(g,S.sibling),m=s(S,y.props),m.ref=ko(g,S,y),m.return=g,g=m;break e}n(g,S);break}else e(g,S);S=S.sibling}y.type===hi?(m=Ts(y.props.children,g.mode,w,y.key),m.return=g,g=m):(w=wl(y.type,y.key,y.props,null,g.mode,w),w.ref=ko(g,m,y),w.return=g,g=w)}return o(g);case ci:e:{for(S=y.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(g,m.sibling),m=s(m,y.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=vd(y,g.mode,w),m.return=g,g=m}return o(g);case ur:return S=y._init,v(g,m,S(y._payload),w)}if(zo(y))return p(g,m,y,w);if(Ro(y))return _(g,m,y,w);qu(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,y),m.return=g,g=m):(n(g,m),m=_d(y,g.mode,w),m.return=g,g=m),o(g)):n(g,m)}return v}var Mi=A0(!0),P0=A0(!1),uu={},Tn=Qr(uu),Aa=Qr(uu),Pa=Qr(uu);function ps(t){if(t===uu)throw Error(D(174));return t}function vm(t,e){switch(ae(Pa,e),ae(Aa,t),ae(Tn,uu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uf(e,t)}fe(Tn),ae(Tn,e)}function Ui(){fe(Tn),fe(Aa),fe(Pa)}function C0(t){ps(Pa.current);var e=ps(Tn.current),n=uf(e,t.type);e!==n&&(ae(Aa,t),ae(Tn,n))}function wm(t){Aa.current===t&&(fe(Tn),fe(Aa))}var ve=Qr(0);function Wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dd=[];function Em(){for(var t=0;t<dd.length;t++)dd[t]._workInProgressVersionPrimary=null;dd.length=0}var ml=Xn.ReactCurrentDispatcher,fd=Xn.ReactCurrentBatchConfig,Ps=0,Ee=null,Me=null,je=null,Yl=!1,ra=!1,Ca=0,CC=0;function st(){throw Error(D(321))}function Tm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Im(t,e,n,r,s,i){if(Ps=i,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ml.current=t===null||t.memoizedState===null?bC:NC,t=n(r,s),ra){i=0;do{if(ra=!1,Ca=0,25<=i)throw Error(D(301));i+=1,je=Me=null,e.updateQueue=null,ml.current=OC,t=n(r,s)}while(ra)}if(ml.current=Xl,e=Me!==null&&Me.next!==null,Ps=0,je=Me=Ee=null,Yl=!1,e)throw Error(D(300));return t}function Sm(){var t=Ca!==0;return Ca=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?Ee.memoizedState=je=t:je=je.next=t,je}function Yt(){if(Me===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=je===null?Ee.memoizedState:je.next;if(e!==null)je=e,Me=t;else{if(t===null)throw Error(D(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},je===null?Ee.memoizedState=je=t:je=je.next=t}return je}function xa(t,e){return typeof e=="function"?e(t):e}function pd(t){var e=Yt(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Me,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,l=i;do{var c=l.lane;if((Ps&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,Ee.lanes|=c,Cs|=c}l=l.next}while(l!==null&&l!==i);u===null?o=r:u.next=a,on(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ee.lanes|=i,Cs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function md(t){var e=Yt(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function x0(){}function k0(t,e){var n=Ee,r=Yt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,Rm(N0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,ka(9,b0.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(D(349));Ps&30||D0(n,e,s)}return s}function D0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function b0(t,e,n,r){e.value=n,e.getSnapshot=r,O0(e)&&V0(t)}function N0(t,e,n){return n(function(){O0(e)&&V0(t)})}function O0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function V0(t){var e=Kn(t,1);e!==null&&sn(e,t,1,-1)}function T_(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=DC.bind(null,Ee,t),[e.memoizedState,t]}function ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function F0(){return Yt().memoizedState}function gl(t,e,n,r){var s=dn();Ee.flags|=t,s.memoizedState=ka(1|e,n,void 0,r===void 0?null:r)}function Bc(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Me!==null){var o=Me.memoizedState;if(i=o.destroy,r!==null&&Tm(r,o.deps)){s.memoizedState=ka(e,n,i,r);return}}Ee.flags|=t,s.memoizedState=ka(1|e,n,i,r)}function I_(t,e){return gl(8390656,8,t,e)}function Rm(t,e){return Bc(2048,8,t,e)}function L0(t,e){return Bc(4,2,t,e)}function M0(t,e){return Bc(4,4,t,e)}function U0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function B0(t,e,n){return n=n!=null?n.concat([t]):null,Bc(4,4,U0.bind(null,e,t),n)}function Am(){}function $0(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function j0(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function z0(t,e,n){return Ps&21?(on(n,e)||(n=KE(),Ee.lanes|=n,Cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function xC(t,e){var n=se;se=n!==0&&4>n?n:4,t(!0);var r=fd.transition;fd.transition={};try{t(!1),e()}finally{se=n,fd.transition=r}}function q0(){return Yt().memoizedState}function kC(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Q0(t))K0(e,n);else if(n=T0(t,e,n,r),n!==null){var s=yt();sn(n,t,r,s),G0(n,e,r)}}function DC(t,e,n){var r=Rr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Q0(t))K0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,on(a,o)){var u=e.interleaved;u===null?(s.next=s,ym(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=T0(t,e,s,r),n!==null&&(s=yt(),sn(n,t,r,s),G0(n,e,r))}}function Q0(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function K0(t,e){ra=Yl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function G0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rm(t,n)}}var Xl={readContext:Wt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},bC={readContext:Wt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:I_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gl(4194308,4,U0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kC.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:T_,useDebugValue:Am,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=T_(!1),e=t[0];return t=xC.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,s=dn();if(me){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),qe===null)throw Error(D(349));Ps&30||D0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,I_(N0.bind(null,r,i,t),[t]),r.flags|=2048,ka(9,b0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dn(),e=qe.identifierPrefix;if(me){var n=Ln,r=Fn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ca++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NC={readContext:Wt,useCallback:$0,useContext:Wt,useEffect:Rm,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:M0,useMemo:j0,useReducer:pd,useRef:F0,useState:function(){return pd(xa)},useDebugValue:Am,useDeferredValue:function(t){var e=Yt();return z0(e,Me.memoizedState,t)},useTransition:function(){var t=pd(xa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:x0,useSyncExternalStore:k0,useId:q0,unstable_isNewReconciler:!1},OC={readContext:Wt,useCallback:$0,useContext:Wt,useEffect:Rm,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:M0,useMemo:j0,useReducer:md,useRef:F0,useState:function(){return md(xa)},useDebugValue:Am,useDeferredValue:function(t){var e=Yt();return Me===null?e.memoizedState=t:z0(e,Me.memoizedState,t)},useTransition:function(){var t=md(xa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:x0,useSyncExternalStore:k0,useId:q0,unstable_isNewReconciler:!1};function Bi(t,e){try{var n="",r=e;do n+=uP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function gd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Df(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VC=typeof WeakMap=="function"?WeakMap:Map;function H0(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zl||(Zl=!0,$f=r),Df(t,e)},n}function W0(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Df(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Df(t,e),typeof r!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function S_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=WC.bind(null,t,e,n),e.then(t,t))}function R_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,Ir(n,e,1))),n.lanes|=1),t)}var FC=Xn.ReactCurrentOwner,Rt=!1;function ft(t,e,n,r){e.child=t===null?P0(e,null,n,r):Mi(e,t.child,n,r)}function P_(t,e,n,r,s){n=n.render;var i=e.ref;return Pi(e,s),r=Im(t,e,n,r,i,s),n=Sm(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(me&&n&&hm(e),e.flags|=1,ft(t,e,r,s),e.child)}function C_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Om(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Y0(t,e,i,r,s)):(t=wl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(o,r)&&t.ref===e.ref)return Gn(t,e,s)}return e.flags|=1,t=Ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function Y0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ta(i,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Gn(t,e,s)}return bf(t,e,n,r,s)}function X0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Ei,bt),bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(Ei,bt),bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ae(Ei,bt),bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ae(Ei,bt),bt|=r;return ft(t,e,s,n),e.child}function J0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bf(t,e,n,r,s){var i=kt(n)?Rs:ht.current;return i=Fi(e,i),Pi(e,s),n=Im(t,e,n,r,i,s),r=Sm(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(me&&r&&hm(e),e.flags|=1,ft(t,e,n,s),e.child)}function x_(t,e,n,r,s){if(kt(n)){var i=!0;zl(e)}else i=!1;if(Pi(e,s),e.stateNode===null)yl(t,e),R0(e,n,r),kf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Wt(l):(l=kt(n)?Rs:ht.current,l=Fi(e,l));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&w_(e,o,r,l),lr=!1;var d=e.memoizedState;o.state=d,Hl(e,r,o,s),u=e.memoizedState,a!==r||d!==u||xt.current||lr?(typeof c=="function"&&(xf(e,n,c,r),u=e.memoizedState),(a=lr||v_(e,n,a,r,d,u,l))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,I0(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Jt(e.type,a),o.props=l,h=e.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wt(u):(u=kt(n)?Rs:ht.current,u=Fi(e,u));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==u)&&w_(e,o,r,u),lr=!1,d=e.memoizedState,o.state=d,Hl(e,r,o,s);var p=e.memoizedState;a!==h||d!==p||xt.current||lr?(typeof f=="function"&&(xf(e,n,f,r),p=e.memoizedState),(l=lr||v_(e,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Nf(t,e,n,r,i,s)}function Nf(t,e,n,r,s,i){J0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&p_(e,n,!1),Gn(t,e,i);r=e.stateNode,FC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mi(e,t.child,null,i),e.child=Mi(e,null,a,i)):ft(t,e,a,i),e.memoizedState=r.state,s&&p_(e,n,!0),e.child}function Z0(t){var e=t.stateNode;e.pendingContext?f_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f_(t,e.context,!1),vm(t,e.containerInfo)}function k_(t,e,n,r,s){return Li(),fm(s),e.flags|=256,ft(t,e,n,r),e.child}var Of={dehydrated:null,treeContext:null,retryLane:0};function Vf(t){return{baseLanes:t,cachePool:null,transitions:null}}function eT(t,e,n){var r=e.pendingProps,s=ve.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ae(ve,s&1),t===null)return Pf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=zc(o,r,0,null),t=Ts(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Vf(n),e.memoizedState=Of,t):Pm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return LC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ar(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ar(a,i):(i=Ts(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Vf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Of,r}return i=t.child,t=i.sibling,r=Ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pm(t,e){return e=zc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qu(t,e,n,r){return r!==null&&fm(r),Mi(e,t.child,null,n),t=Pm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=gd(Error(D(422))),Qu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=zc({mode:"visible",children:r.children},s,0,null),i=Ts(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Mi(e,t.child,null,o),e.child.memoizedState=Vf(o),e.memoizedState=Of,i);if(!(e.mode&1))return Qu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=gd(i,r,void 0),Qu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rt||a){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kn(t,s),sn(r,t,s,-1))}return Nm(),r=gd(Error(D(421))),Qu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nt=Tr(s.nextSibling),Ot=e,me=!0,en=null,t!==null&&($t[jt++]=Fn,$t[jt++]=Ln,$t[jt++]=As,Fn=t.id,Ln=t.overflow,As=e),e=Pm(e,r.children),e.flags|=4096,e)}function D_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cf(t.return,e,n)}function yd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ft(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&D_(t,n,e);else if(t.tag===19)D_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ae(ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Wl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yd(e,!0,n,null,i);break;case"together":yd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=Ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MC(t,e,n){switch(e.tag){case 3:Z0(e),Li();break;case 5:C0(e);break;case 1:kt(e.type)&&zl(e);break;case 4:vm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ae(Kl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ae(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?eT(t,e,n):(ae(ve,ve.current&1),t=Gn(t,e,n),t!==null?t.sibling:null);ae(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,X0(t,e,n)}return Gn(t,e,n)}var nT,Ff,rT,sT;nT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ff=function(){};rT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ps(Tn.current);var i=null;switch(n){case"input":s=rf(t,s),r=rf(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=af(t,s),r=af(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$l)}lf(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ma.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var u=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ma.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ce("scroll",t),i||a===u||(i=[])):(i=i||[]).push(l,u))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};sT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Do(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function UC(t,e,n){var r=e.pendingProps;switch(dm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return kt(e.type)&&jl(),it(e),null;case 3:return r=e.stateNode,Ui(),fe(xt),fe(ht),Em(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(qf(en),en=null))),Ff(t,e),it(e),null;case 5:wm(e);var s=ps(Pa.current);if(n=e.type,t!==null&&e.stateNode!=null)rT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return it(e),null}if(t=ps(Tn.current),zu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[Ra]=i,t=(e.mode&1)!==0,n){case"dialog":ce("cancel",r),ce("close",r);break;case"iframe":case"object":case"embed":ce("load",r);break;case"video":case"audio":for(s=0;s<Qo.length;s++)ce(Qo[s],r);break;case"source":ce("error",r);break;case"img":case"image":case"link":ce("error",r),ce("load",r);break;case"details":ce("toggle",r);break;case"input":By(r,i),ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ce("invalid",r);break;case"textarea":jy(r,i),ce("invalid",r)}lf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ju(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ju(r.textContent,a,t),s=["children",""+a]):ma.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ce("scroll",r)}switch(n){case"input":Ou(r),$y(r,i,!0);break;case"textarea":Ou(r),zy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$l)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[Ra]=r,nT(t,e,!1,!1),e.stateNode=t;e:{switch(o=cf(n,r),n){case"dialog":ce("cancel",t),ce("close",t),s=r;break;case"iframe":case"object":case"embed":ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<Qo.length;s++)ce(Qo[s],t);s=r;break;case"source":ce("error",t),s=r;break;case"img":case"image":case"link":ce("error",t),ce("load",t),s=r;break;case"details":ce("toggle",t),s=r;break;case"input":By(t,r),s=rf(t,r),ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ce("invalid",t);break;case"textarea":jy(t,r),s=af(t,r),ce("invalid",t);break;default:s=r}lf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?OE(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&bE(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ga(t,u):typeof u=="number"&&ga(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ma.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ce("scroll",t):u!=null&&Xp(t,i,u,o))}switch(n){case"input":Ou(t),$y(t,r,!1);break;case"textarea":Ou(t),zy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ii(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)sT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=ps(Pa.current),ps(Tn.current),zu(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:ju(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ju(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return it(e),null;case 13:if(fe(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&Nt!==null&&e.mode&1&&!(e.flags&128))E0(),Li(),e.flags|=98560,i=!1;else if(i=zu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[fn]=e}else Li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else en!==null&&(qf(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Ue===0&&(Ue=3):Nm())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return Ui(),Ff(t,e),t===null&&Ia(e.stateNode.containerInfo),it(e),null;case 10:return gm(e.type._context),it(e),null;case 17:return kt(e.type)&&jl(),it(e),null;case 19:if(fe(ve),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Do(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wl(t),o!==null){for(e.flags|=128,Do(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ae(ve,ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&De()>$i&&(e.flags|=128,r=!0,Do(i,!1),e.lanes=4194304)}else{if(!r)if(t=Wl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Do(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!me)return it(e),null}else 2*De()-i.renderingStartTime>$i&&n!==1073741824&&(e.flags|=128,r=!0,Do(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,n=ve.current,ae(ve,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return bm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bt&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function BC(t,e){switch(dm(e),e.tag){case 1:return kt(e.type)&&jl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ui(),fe(xt),fe(ht),Em(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wm(e),null;case 13:if(fe(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fe(ve),null;case 4:return Ui(),null;case 10:return gm(e.type._context),null;case 22:case 23:return bm(),null;case 24:return null;default:return null}}var Ku=!1,at=!1,$C=typeof WeakSet=="function"?WeakSet:Set,L=null;function wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function Lf(t,e,n){try{n()}catch(r){Re(t,e,r)}}var b_=!1;function jC(t,e){if(wf=Ml,t=u0(),cm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++l===s&&(a=o),d===i&&++c===r&&(u=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ef={focusedElem:t,selectionRange:n},Ml=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var _=p.memoizedProps,v=p.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:Jt(e.type,_),v);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(w){Re(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return p=b_,b_=!1,p}function sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Lf(e,n,i)}s=s.next}while(s!==r)}}function $c(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iT(t){var e=t.alternate;e!==null&&(t.alternate=null,iT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Ra],delete e[Sf],delete e[SC],delete e[RC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oT(t){return t.tag===5||t.tag===3||t.tag===4}function N_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$l));else if(r!==4&&(t=t.child,t!==null))for(Uf(t,e,n),t=t.sibling;t!==null;)Uf(t,e,n),t=t.sibling}function Bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bf(t,e,n),t=t.sibling;t!==null;)Bf(t,e,n),t=t.sibling}var Xe=null,Zt=!1;function rr(t,e,n){for(n=n.child;n!==null;)aT(t,e,n),n=n.sibling}function aT(t,e,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Nc,n)}catch{}switch(n.tag){case 5:at||wi(n,e);case 6:var r=Xe,s=Zt;Xe=null,rr(t,e,n),Xe=r,Zt=s,Xe!==null&&(Zt?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Zt?(t=Xe,n=n.stateNode,t.nodeType===8?cd(t.parentNode,n):t.nodeType===1&&cd(t,n),wa(t)):cd(Xe,n.stateNode));break;case 4:r=Xe,s=Zt,Xe=n.stateNode.containerInfo,Zt=!0,rr(t,e,n),Xe=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Lf(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!at&&(wi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Re(n,e,a)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,rr(t,e,n),at=r):rr(t,e,n);break;default:rr(t,e,n)}}function O_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $C),e.forEach(function(r){var s=XC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,Zt=!1;break e;case 3:Xe=a.stateNode.containerInfo,Zt=!0;break e;case 4:Xe=a.stateNode.containerInfo,Zt=!0;break e}a=a.return}if(Xe===null)throw Error(D(160));aT(i,o,s),Xe=null,Zt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(l){Re(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uT(e,t),e=e.sibling}function uT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),cn(t),r&4){try{sa(3,t,t.return),$c(3,t)}catch(_){Re(t,t.return,_)}try{sa(5,t,t.return)}catch(_){Re(t,t.return,_)}}break;case 1:Xt(e,t),cn(t),r&512&&n!==null&&wi(n,n.return);break;case 5:if(Xt(e,t),cn(t),r&512&&n!==null&&wi(n,n.return),t.flags&32){var s=t.stateNode;try{ga(s,"")}catch(_){Re(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&xE(s,i),cf(a,o);var l=cf(a,i);for(o=0;o<u.length;o+=2){var c=u[o],h=u[o+1];c==="style"?OE(s,h):c==="dangerouslySetInnerHTML"?bE(s,h):c==="children"?ga(s,h):Xp(s,c,h,l)}switch(a){case"input":sf(s,i);break;case"textarea":kE(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Ii(s,!!i.multiple,f,!1):d!==!!i.multiple&&(i.defaultValue!=null?Ii(s,!!i.multiple,i.defaultValue,!0):Ii(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ra]=i}catch(_){Re(t,t.return,_)}}break;case 6:if(Xt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(D(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Re(t,t.return,_)}}break;case 3:if(Xt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wa(e.containerInfo)}catch(_){Re(t,t.return,_)}break;case 4:Xt(e,t),cn(t);break;case 13:Xt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(km=De())),r&4&&O_(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(at=(l=at)||c,Xt(e,t),at=l):Xt(e,t),cn(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(L=t,c=t.child;c!==null;){for(h=L=c;L!==null;){switch(d=L,f=d.child,d.tag){case 0:case 11:case 14:case 15:sa(4,d,d.return);break;case 1:wi(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(_){Re(r,n,_)}}break;case 5:wi(d,d.return);break;case 22:if(d.memoizedState!==null){F_(h);continue}}f!==null?(f.return=d,L=f):F_(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=NE("display",o))}catch(_){Re(t,t.return,_)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(_){Re(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Xt(e,t),cn(t),r&4&&O_(t);break;case 21:break;default:Xt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oT(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ga(s,""),r.flags&=-33);var i=N_(t);Bf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=N_(t);Uf(t,a,o);break;default:throw Error(D(161))}}catch(u){Re(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zC(t,e,n){L=t,lT(t)}function lT(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ku;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||at;a=Ku;var l=at;if(Ku=o,(at=u)&&!l)for(L=s;L!==null;)o=L,u=o.child,o.tag===22&&o.memoizedState!==null?L_(s):u!==null?(u.return=o,L=u):L_(s);for(;i!==null;)L=i,lT(i),i=i.sibling;L=s,Ku=a,at=l}V_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):V_(t)}}function V_(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:at||$c(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!at)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&__(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}__(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&wa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}at||e.flags&512&&Mf(e)}catch(d){Re(e,e.return,d)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function F_(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function L_(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$c(4,e)}catch(u){Re(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Re(e,s,u)}}var i=e.return;try{Mf(e)}catch(u){Re(e,i,u)}break;case 5:var o=e.return;try{Mf(e)}catch(u){Re(e,o,u)}}}catch(u){Re(e,e.return,u)}if(e===t){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var qC=Math.ceil,Jl=Xn.ReactCurrentDispatcher,Cm=Xn.ReactCurrentOwner,Gt=Xn.ReactCurrentBatchConfig,te=0,qe=null,Fe=null,tt=0,bt=0,Ei=Qr(0),Ue=0,Da=null,Cs=0,jc=0,xm=0,ia=null,St=null,km=0,$i=1/0,Nn=null,Zl=!1,$f=null,Sr=null,Gu=!1,gr=null,ec=0,oa=0,jf=null,_l=-1,vl=0;function yt(){return te&6?De():_l!==-1?_l:_l=De()}function Rr(t){return t.mode&1?te&2&&tt!==0?tt&-tt:PC.transition!==null?(vl===0&&(vl=KE()),vl):(t=se,t!==0||(t=window.event,t=t===void 0?16:ZE(t.type)),t):1}function sn(t,e,n,r){if(50<oa)throw oa=0,jf=null,Error(D(185));iu(t,n,r),(!(te&2)||t!==qe)&&(t===qe&&(!(te&2)&&(jc|=n),Ue===4&&dr(t,tt)),Dt(t,r),n===1&&te===0&&!(e.mode&1)&&($i=De()+500,Mc&&Kr()))}function Dt(t,e){var n=t.callbackNode;PP(t,e);var r=Ll(t,t===qe?tt:0);if(r===0)n!==null&&Ky(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ky(n),e===1)t.tag===0?AC(M_.bind(null,t)):_0(M_.bind(null,t)),TC(function(){!(te&6)&&Kr()}),n=null;else{switch(GE(r)){case 1:n=nm;break;case 4:n=qE;break;case 16:n=Fl;break;case 536870912:n=QE;break;default:n=Fl}n=yT(n,cT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cT(t,e){if(_l=-1,vl=0,te&6)throw Error(D(327));var n=t.callbackNode;if(Ci()&&t.callbackNode!==n)return null;var r=Ll(t,t===qe?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=tc(t,r);else{e=r;var s=te;te|=2;var i=dT();(qe!==t||tt!==e)&&(Nn=null,$i=De()+500,Es(t,e));do try{GC();break}catch(a){hT(t,a)}while(1);mm(),Jl.current=i,te=s,Fe!==null?e=0:(qe=null,tt=0,e=Ue)}if(e!==0){if(e===2&&(s=mf(t),s!==0&&(r=s,e=zf(t,s))),e===1)throw n=Da,Es(t,0),dr(t,r),Dt(t,De()),n;if(e===6)dr(t,r);else{if(s=t.current.alternate,!(r&30)&&!QC(s)&&(e=tc(t,r),e===2&&(i=mf(t),i!==0&&(r=i,e=zf(t,i))),e===1))throw n=Da,Es(t,0),dr(t,r),Dt(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:ss(t,St,Nn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=km+500-De(),10<e)){if(Ll(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=If(ss.bind(null,t,St,Nn),e);break}ss(t,St,Nn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qC(r/1960))-r,10<r){t.timeoutHandle=If(ss.bind(null,t,St,Nn),r);break}ss(t,St,Nn);break;case 5:ss(t,St,Nn);break;default:throw Error(D(329))}}}return Dt(t,De()),t.callbackNode===n?cT.bind(null,t):null}function zf(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(Es(t,e).flags|=256),t=tc(t,e),t!==2&&(e=St,St=n,e!==null&&qf(e)),t}function qf(t){St===null?St=t:St.push.apply(St,t)}function QC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~xm,e&=~jc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function M_(t){if(te&6)throw Error(D(327));Ci();var e=Ll(t,0);if(!(e&1))return Dt(t,De()),null;var n=tc(t,e);if(t.tag!==0&&n===2){var r=mf(t);r!==0&&(e=r,n=zf(t,r))}if(n===1)throw n=Da,Es(t,0),dr(t,e),Dt(t,De()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ss(t,St,Nn),Dt(t,De()),null}function Dm(t,e){var n=te;te|=1;try{return t(e)}finally{te=n,te===0&&($i=De()+500,Mc&&Kr())}}function xs(t){gr!==null&&gr.tag===0&&!(te&6)&&Ci();var e=te;te|=1;var n=Gt.transition,r=se;try{if(Gt.transition=null,se=1,t)return t()}finally{se=r,Gt.transition=n,te=e,!(te&6)&&Kr()}}function bm(){bt=Ei.current,fe(Ei)}function Es(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,EC(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(dm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&jl();break;case 3:Ui(),fe(xt),fe(ht),Em();break;case 5:wm(r);break;case 4:Ui();break;case 13:fe(ve);break;case 19:fe(ve);break;case 10:gm(r.type._context);break;case 22:case 23:bm()}n=n.return}if(qe=t,Fe=t=Ar(t.current,null),tt=bt=e,Ue=0,Da=null,xm=jc=Cs=0,St=ia=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fs=null}return t}function hT(t,e){do{var n=Fe;try{if(mm(),ml.current=Xl,Yl){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Yl=!1}if(Ps=0,je=Me=Ee=null,ra=!1,Ca=0,Cm.current=null,n===null||n.return===null){Ue=1,Da=e,Fe=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=tt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=R_(o);if(f!==null){f.flags&=-257,A_(f,o,a,i,e),f.mode&1&&S_(i,l,e),e=f,u=l;var p=e.updateQueue;if(p===null){var _=new Set;_.add(u),e.updateQueue=_}else p.add(u);break e}else{if(!(e&1)){S_(i,l,e),Nm();break e}u=Error(D(426))}}else if(me&&a.mode&1){var v=R_(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),A_(v,o,a,i,e),fm(Bi(u,a));break e}}i=u=Bi(u,a),Ue!==4&&(Ue=2),ia===null?ia=[i]:ia.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=H0(i,u,e);y_(i,g);break e;case 1:a=u;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Sr===null||!Sr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=W0(i,a,e);y_(i,w);break e}}i=i.return}while(i!==null)}pT(n)}catch(P){e=P,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(1)}function dT(){var t=Jl.current;return Jl.current=Xl,t===null?Xl:t}function Nm(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),qe===null||!(Cs&268435455)&&!(jc&268435455)||dr(qe,tt)}function tc(t,e){var n=te;te|=2;var r=dT();(qe!==t||tt!==e)&&(Nn=null,Es(t,e));do try{KC();break}catch(s){hT(t,s)}while(1);if(mm(),te=n,Jl.current=r,Fe!==null)throw Error(D(261));return qe=null,tt=0,Ue}function KC(){for(;Fe!==null;)fT(Fe)}function GC(){for(;Fe!==null&&!_P();)fT(Fe)}function fT(t){var e=gT(t.alternate,t,bt);t.memoizedProps=t.pendingProps,e===null?pT(t):Fe=e,Cm.current=null}function pT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BC(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Fe=null;return}}else if(n=UC(n,e,bt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);Ue===0&&(Ue=5)}function ss(t,e,n){var r=se,s=Gt.transition;try{Gt.transition=null,se=1,HC(t,e,n,r)}finally{Gt.transition=s,se=r}return null}function HC(t,e,n,r){do Ci();while(gr!==null);if(te&6)throw Error(D(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(CP(t,i),t===qe&&(Fe=qe=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gu||(Gu=!0,yT(Fl,function(){return Ci(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=se;se=1;var a=te;te|=4,Cm.current=null,jC(t,n),uT(n,t),pC(Ef),Ml=!!wf,Ef=wf=null,t.current=n,zC(n),vP(),te=a,se=o,Gt.transition=i}else t.current=n;if(Gu&&(Gu=!1,gr=t,ec=s),i=t.pendingLanes,i===0&&(Sr=null),TP(n.stateNode),Dt(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zl)throw Zl=!1,t=$f,$f=null,t;return ec&1&&t.tag!==0&&Ci(),i=t.pendingLanes,i&1?t===jf?oa++:(oa=0,jf=t):oa=0,Kr(),null}function Ci(){if(gr!==null){var t=GE(ec),e=Gt.transition,n=se;try{if(Gt.transition=null,se=16>t?16:t,gr===null)var r=!1;else{if(t=gr,gr=null,ec=0,te&6)throw Error(D(331));var s=te;for(te|=4,L=t.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(L=l;L!==null;){var c=L;switch(c.tag){case 0:case 11:case 15:sa(8,c,i)}var h=c.child;if(h!==null)h.return=c,L=h;else for(;L!==null;){c=L;var d=c.sibling,f=c.return;if(iT(c),c===l){L=null;break}if(d!==null){d.return=f,L=d;break}L=f}}}var p=i.alternate;if(p!==null){var _=p.child;if(_!==null){p.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(_!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sa(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,L=g;break e}L=i.return}}var m=t.current;for(L=m;L!==null;){o=L;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,L=y;else e:for(o=m;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$c(9,a)}}catch(P){Re(a,a.return,P)}if(a===o){L=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,L=w;break e}L=a.return}}if(te=s,Kr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Nc,t)}catch{}r=!0}return r}finally{se=n,Gt.transition=e}}return!1}function U_(t,e,n){e=Bi(n,e),e=H0(t,e,1),t=Ir(t,e,1),e=yt(),t!==null&&(iu(t,1,e),Dt(t,e))}function Re(t,e,n){if(t.tag===3)U_(t,t,n);else for(;e!==null;){if(e.tag===3){U_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sr===null||!Sr.has(r))){t=Bi(n,t),t=W0(e,t,1),e=Ir(e,t,1),t=yt(),e!==null&&(iu(e,1,t),Dt(e,t));break}}e=e.return}}function WC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(tt&n)===n&&(Ue===4||Ue===3&&(tt&130023424)===tt&&500>De()-km?Es(t,0):xm|=n),Dt(t,e)}function mT(t,e){e===0&&(t.mode&1?(e=Lu,Lu<<=1,!(Lu&130023424)&&(Lu=4194304)):e=1);var n=yt();t=Kn(t,e),t!==null&&(iu(t,e,n),Dt(t,n))}function YC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mT(t,n)}function XC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),mT(t,n)}var gT;gT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,MC(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,me&&e.flags&1048576&&v0(e,Ql,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yl(t,e),t=e.pendingProps;var s=Fi(e,ht.current);Pi(e,n),s=Im(null,e,r,t,s,n);var i=Sm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(r)?(i=!0,zl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_m(e),s.updater=Uc,e.stateNode=s,s._reactInternals=e,kf(e,r,t,n),e=Nf(null,e,r,!0,i,n)):(e.tag=0,me&&i&&hm(e),ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ZC(r),t=Jt(r,t),s){case 0:e=bf(null,e,r,t,n);break e;case 1:e=x_(null,e,r,t,n);break e;case 11:e=P_(null,e,r,t,n);break e;case 14:e=C_(null,e,r,Jt(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),bf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),x_(t,e,r,s,n);case 3:e:{if(Z0(e),t===null)throw Error(D(387));r=e.pendingProps,i=e.memoizedState,s=i.element,I0(t,e),Hl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Bi(Error(D(423)),e),e=k_(t,e,r,n,s);break e}else if(r!==s){s=Bi(Error(D(424)),e),e=k_(t,e,r,n,s);break e}else for(Nt=Tr(e.stateNode.containerInfo.firstChild),Ot=e,me=!0,en=null,n=P0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Li(),r===s){e=Gn(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return C0(e),t===null&&Pf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Tf(r,s)?o=null:i!==null&&Tf(r,i)&&(e.flags|=32),J0(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Pf(e),null;case 13:return eT(t,e,n);case 4:return vm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mi(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),P_(t,e,r,s,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ae(Kl,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!xt.current){e=Gn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Bn(-1,n&-n),u.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Cf(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Cf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Pi(e,n),s=Wt(s),r=r(s),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,s=Jt(r,e.pendingProps),s=Jt(r.type,s),C_(t,e,r,s,n);case 15:return Y0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),yl(t,e),e.tag=1,kt(r)?(t=!0,zl(e)):t=!1,Pi(e,n),R0(e,r,s),kf(e,r,s,n),Nf(null,e,r,!0,t,n);case 19:return tT(t,e,n);case 22:return X0(t,e,n)}throw Error(D(156,e.tag))};function yT(t,e){return zE(t,e)}function JC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new JC(t,e,n,r)}function Om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZC(t){if(typeof t=="function")return Om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zp)return 11;if(t===em)return 14}return 2}function Ar(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Om(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hi:return Ts(n.children,s,i,e);case Jp:o=8,s|=8;break;case Zd:return t=qt(12,n,e,s|2),t.elementType=Zd,t.lanes=i,t;case ef:return t=qt(13,n,e,s),t.elementType=ef,t.lanes=i,t;case tf:return t=qt(19,n,e,s),t.elementType=tf,t.lanes=i,t;case AE:return zc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SE:o=10;break e;case RE:o=9;break e;case Zp:o=11;break e;case em:o=14;break e;case ur:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ts(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function zc(t,e,n,r){return t=qt(22,t,r,e),t.elementType=AE,t.lanes=n,t.stateNode={isHidden:!1},t}function _d(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function vd(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ex(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zh(0),this.expirationTimes=Zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vm(t,e,n,r,s,i,o,a,u){return t=new ex(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_m(i),t}function tx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ci,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _T(t){if(!t)return br;t=t._reactInternals;e:{if(zs(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(kt(n))return y0(t,n,e)}return e}function vT(t,e,n,r,s,i,o,a,u){return t=Vm(n,r,!0,t,s,i,o,a,u),t.context=_T(null),n=t.current,r=yt(),s=Rr(n),i=Bn(r,s),i.callback=e??null,Ir(n,i,s),t.current.lanes=s,iu(t,s,r),Dt(t,r),t}function qc(t,e,n,r){var s=e.current,i=yt(),o=Rr(s);return n=_T(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ir(s,e,o),t!==null&&(sn(t,s,o,i),pl(t,s,o)),o}function nc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function B_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fm(t,e){B_(t,e),(t=t.alternate)&&B_(t,e)}function nx(){return null}var wT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lm(t){this._internalRoot=t}Qc.prototype.render=Lm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));qc(t,e,null,null)};Qc.prototype.unmount=Lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){qc(null,t,null,null)}),e[Qn]=null}};function Qc(t){this._internalRoot=t}Qc.prototype.unstable_scheduleHydration=function(t){if(t){var e=YE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hr.length&&e!==0&&e<hr[n].priority;n++);hr.splice(n,0,t),n===0&&JE(t)}};function Mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $_(){}function rx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=nc(o);i.call(l)}}var o=vT(e,r,t,0,null,!1,!1,"",$_);return t._reactRootContainer=o,t[Qn]=o.current,Ia(t.nodeType===8?t.parentNode:t),xs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=nc(u);a.call(l)}}var u=Vm(t,0,!1,null,null,!1,!1,"",$_);return t._reactRootContainer=u,t[Qn]=u.current,Ia(t.nodeType===8?t.parentNode:t),xs(function(){qc(e,u,n,r)}),u}function Gc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=nc(o);a.call(u)}}qc(e,o,t,s)}else o=rx(n,e,t,s,r);return nc(o)}HE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(rm(e,n|1),Dt(e,De()),!(te&6)&&($i=De()+500,Kr()))}break;case 13:xs(function(){var r=Kn(t,1);if(r!==null){var s=yt();sn(r,t,1,s)}}),Fm(t,1)}};sm=function(t){if(t.tag===13){var e=Kn(t,134217728);if(e!==null){var n=yt();sn(e,t,134217728,n)}Fm(t,134217728)}};WE=function(t){if(t.tag===13){var e=Rr(t),n=Kn(t,e);if(n!==null){var r=yt();sn(n,t,e,r)}Fm(t,e)}};YE=function(){return se};XE=function(t,e){var n=se;try{return se=t,e()}finally{se=n}};df=function(t,e,n){switch(e){case"input":if(sf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Lc(r);if(!s)throw Error(D(90));CE(r),sf(r,s)}}}break;case"textarea":kE(t,n);break;case"select":e=n.value,e!=null&&Ii(t,!!n.multiple,e,!1)}};LE=Dm;ME=xs;var sx={usingClientEntryPoint:!1,Events:[au,mi,Lc,VE,FE,Dm]},bo={findFiberByHostInstance:ds,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ix={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$E(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||nx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Nc=Hu.inject(ix),En=Hu}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sx;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mm(e))throw Error(D(200));return tx(t,e,null,n)};Mt.createRoot=function(t,e){if(!Mm(t))throw Error(D(299));var n=!1,r="",s=wT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vm(t,1,!1,null,null,n,!1,r,s),t[Qn]=e.current,Ia(t.nodeType===8?t.parentNode:t),new Lm(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=$E(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return xs(t)};Mt.hydrate=function(t,e,n){if(!Kc(e))throw Error(D(200));return Gc(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!Mm(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=wT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=vT(e,null,t,1,n??null,s,!1,i,o),t[Qn]=e.current,Ia(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Qc(e)};Mt.render=function(t,e,n){if(!Kc(e))throw Error(D(200));return Gc(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!Kc(t))throw Error(D(40));return t._reactRootContainer?(xs(function(){Gc(null,null,t,!1,function(){t._reactRootContainer=null,t[Qn]=null})}),!0):!1};Mt.unstable_batchedUpdates=Dm;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kc(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return Gc(t,e,n,!1,r)};Mt.version="18.2.0-next-9e3b772b8-20220608";function ET(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ET)}catch(t){console.error(t)}}ET(),vE.exports=Mt;var ox=vE.exports,j_=ox;Xd.createRoot=j_.createRoot,Xd.hydrateRoot=j_.hydrateRoot;const ax="/pokemon-Gym/assets/logo-ff59a452.png",Um="onlyImage",oo="onlyText",Bm="imageText",$m="colorText",jm="onlyColor",TT="defaultNothing",ux="",tn="SelectGroup",lx="",zm="BeenSelectGroup",cx="",Hc="DamageGroup",hx=[{id:1,href:"#",title:"Home",myclass:""},{id:2,href:"#",title:"",myclass:""},{id:3,href:"#",title:"",myclass:""},{id:4,href:"#",title:"/",myclass:"link-success"}],wd=[{id:1,title:ux},{id:2,title:lx},{id:3,title:cx}],dx=[{id:1,default:!0,type:Um,title:""},{id:2,default:!1,type:oo,title:""},{id:3,default:!1,type:Bm,title:""}],fx=[{id:3,default:!0,type:$m,title:""},{id:1,default:!1,type:jm,title:""},{id:2,default:!1,type:oo,title:""},{id:4,default:!1,type:TT,title:""}],IT={enType:"all",zhType:"",bgColor:"#17CCF0"},qm=[{enType:"normal",zhType:"",bgColor:"#a8a8a8"},{enType:"fighting",zhType:"",bgColor:"#c03028"},{enType:"flying",zhType:"",bgColor:"#9096f0"},{enType:"poison",zhType:"",bgColor:"#a040a0"},{enType:"ground",zhType:"",bgColor:"#e0b668"},{enType:"rock",zhType:"",bgColor:"#b8a038"},{enType:"bug",zhType:"",bgColor:"#9cb820"},{enType:"ghost",zhType:"",bgColor:"#705898"},{enType:"steel",zhType:"",bgColor:"#6d8f9c"},{enType:"fire",zhType:"",bgColor:"#f08030"},{enType:"water",zhType:"",bgColor:"#6890f0"},{enType:"grass",zhType:"",bgColor:"#22c02a"},{enType:"electric",zhType:"",bgColor:"#f8d030"},{enType:"psychic",zhType:"",bgColor:"#f85888"},{enType:"ice",zhType:"",bgColor:"#98d8d8"},{enType:"dragon",zhType:"",bgColor:"#7038f8"},{enType:"dark",zhType:"",bgColor:"#504843"},{enType:"fairy",zhType:"",bgColor:"#f09ad9"}],px=()=>I.jsx("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark",children:I.jsxs("div",{className:"container-md",children:[I.jsxs("a",{className:"navbar-brand",href:"#",children:[I.jsx("img",{src:ax,width:"30",height:"30",className:"d-inline-block align-top",alt:"pokemon go"}),I.jsx("span",{className:"text-capitalize",children:"pokemon go"})]}),I.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapsibleNavbar",children:I.jsx("span",{className:"navbar-toggler-icon"})}),I.jsx("div",{className:"collapse navbar-collapse justify-content-end",id:"collapsibleNavbar",children:I.jsx("ul",{className:"navbar-nav ",children:hx.map(t=>{const{id:e,href:n,title:r,myclass:s}=t;return I.jsx("li",{className:"nav-item",children:I.jsx("a",{className:`nav-link ${s}`,href:n,children:r})},e)})})})]})});var ST={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},z_=_r.createContext&&_r.createContext(ST),Pr=globalThis&&globalThis.__assign||function(){return Pr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Pr.apply(this,arguments)},mx=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};function RT(t){return t&&t.map(function(e,n){return _r.createElement(e.tag,Pr({key:n},e.attr),RT(e.child))})}function AT(t){return function(e){return _r.createElement(gx,Pr({attr:Pr({},t.attr)},e),RT(t.child))}}function gx(t){var e=function(n){var r=t.attr,s=t.size,i=t.title,o=mx(t,["attr","size","title"]),a=s||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),_r.createElement("svg",Pr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Pr(Pr({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&_r.createElement("title",null,i),t.children)};return z_!==void 0?_r.createElement(z_.Consumer,null,function(n){return e(n)}):e(ST)}function yx(t){return AT({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 7h-9"}},{tag:"path",attr:{d:"M14 17H5"}},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"}},{tag:"circle",attr:{cx:"7",cy:"7",r:"3"}}]})(t)}let Cr=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const _x="/pokemon-Gym/assets/25-759ceafd.png";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},CT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,l=u?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|l>>6,f=l&63;u||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||h==null)throw new wx;const d=i<<2|a>>4;if(r.push(d),l!==64){const f=a<<4&240|l>>2;if(r.push(f),h!==64){const p=l<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ex=function(t){const e=PT(t);return CT.encodeByteArray(e,!0)},rc=function(t){return Ex(t).replace(/\./g,"")},Tx=function(t){try{return CT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sc(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Ix(n)||(t[n]=sc(t[n],e[n]));return t}function Ix(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=()=>Sx().__FIREBASE_DEFAULTS__,Ax=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Px=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tx(t[1]);return e&&JSON.parse(e)},xT=()=>{try{return Rx()||Ax()||Px()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kT=()=>{var t;return(t=xT())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[rc(JSON.stringify(n)),rc(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bT(){var t;const e=(t=xT())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xx(){return typeof self=="object"&&self.self===self}function kx(){return!bT()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NT(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="FirebaseError";class Gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bx,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Nx(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Gr(s,a,r)}}function Nx(t,e){return t.replace(Ox,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Ox=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Kf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Q_(i)&&Q_(o)){if(!Kf(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Q_(t){return t!==null&&typeof t=="object"}function Vx(t,e){const n=new Fx(t,e);return n.subscribe.bind(n)}class Fx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Lx(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ed),s.error===void 0&&(s.error=Ed),s.complete===void 0&&(s.complete=Ed);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ed(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t){return t&&t._delegate?t._delegate:t}class Hn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Cx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bx(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ux(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ux(t){return t===is?void 0:t}function Bx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Mx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=[];var X;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(X||(X={}));const OT={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},jx=X.INFO,zx={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},qx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zx[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=jx,this._logHandler=qx,this._userLogHandler=null,Qm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}}function Qx(t){Qm.forEach(e=>{e.setLogLevel(t)})}function Kx(t,e){for(const n of Qm){let r=null;e&&e.level&&(r=OT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");i>=(r??s.logLevel)&&t({level:X[i].toLowerCase(),message:a,args:o,type:s.name})}}}const Gx=(t,e)=>e.some(n=>t instanceof n);let K_,G_;function Hx(){return K_||(K_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wx(){return G_||(G_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VT=new WeakMap,Gf=new WeakMap,FT=new WeakMap,Td=new WeakMap,Gm=new WeakMap;function Yx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&VT.set(n,t)}).catch(()=>{}),Gm.set(e,t),e}function Xx(t){if(Gf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Gf.set(t,e)}let Hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jx(t){Hf=t(Hf)}function Zx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Id(this),e,...n);return FT.set(r,e.sort?e.sort():[e]),xr(r)}:Wx().includes(t)?function(...e){return t.apply(Id(this),e),xr(VT.get(this))}:function(...e){return xr(t.apply(Id(this),e))}}function ek(t){return typeof t=="function"?Zx(t):(t instanceof IDBTransaction&&Xx(t),Gx(t,Hx())?new Proxy(t,Hf):t)}function xr(t){if(t instanceof IDBRequest)return Yx(t);if(Td.has(t))return Td.get(t);const e=ek(t);return e!==t&&(Td.set(t,e),Gm.set(e,t)),e}const Id=t=>Gm.get(t);function tk(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=xr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(xr(o.result),u.oldVersion,u.newVersion,xr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const nk=["get","getKey","getAll","getAllKeys","count"],rk=["put","add","delete","clear"],Sd=new Map;function H_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sd.get(e))return Sd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nk.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&u.done]))[0]};return Sd.set(e,i),i}Jx(t=>({...t,get:(e,n,r)=>H_(e,n)||t.get(e,n,r),has:(e,n)=>!!H_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ik(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ik(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wf="@firebase/app",W_="0.9.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Km("@firebase/app"),ok="@firebase/app-compat",ak="@firebase/analytics-compat",uk="@firebase/analytics",lk="@firebase/app-check-compat",ck="@firebase/app-check",hk="@firebase/auth",dk="@firebase/auth-compat",fk="@firebase/database",pk="@firebase/database-compat",mk="@firebase/functions",gk="@firebase/functions-compat",yk="@firebase/installations",_k="@firebase/installations-compat",vk="@firebase/messaging",wk="@firebase/messaging-compat",Ek="@firebase/performance",Tk="@firebase/performance-compat",Ik="@firebase/remote-config",Sk="@firebase/remote-config-compat",Rk="@firebase/storage",Ak="@firebase/storage-compat",Pk="@firebase/firestore",Ck="@firebase/firestore-compat",xk="firebase",kk="10.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]",Dk={[Wf]:"fire-core",[ok]:"fire-core-compat",[uk]:"fire-analytics",[ak]:"fire-analytics-compat",[ck]:"fire-app-check",[lk]:"fire-app-check-compat",[hk]:"fire-auth",[dk]:"fire-auth-compat",[fk]:"fire-rtdb",[pk]:"fire-rtdb-compat",[mk]:"fire-fn",[gk]:"fire-fn-compat",[yk]:"fire-iid",[_k]:"fire-iid-compat",[vk]:"fire-fcm",[wk]:"fire-fcm-compat",[Ek]:"fire-perf",[Tk]:"fire-perf-compat",[Ik]:"fire-rc",[Sk]:"fire-rc-compat",[Rk]:"fire-gcs",[Ak]:"fire-gcs-compat",[Pk]:"fire-fst",[Ck]:"fire-fst-compat","fire-js":"fire-js",[xk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Map,ba=new Map;function ic(t,e){try{t.container.addComponent(e)}catch(n){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function LT(t,e){t.container.addOrOverwriteComponent(e)}function Ds(t){const e=t.name;if(ba.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;ba.set(e,t);for(const n of Or.values())ic(n,t);return!0}function MT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bk(t,e,n=Nr){MT(t,e).clearInstance(n)}function Nk(){ba.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},$n=new Wc("app","Firebase",Ok);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vk=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=kk;function Hm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nr,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $n.create("bad-app-name",{appName:String(s)});if(n||(n=kT()),!n)throw $n.create("no-options");const i=Or.get(s);if(i){if(Kf(n,i.options)&&Kf(r,i.config))return i;throw $n.create("duplicate-app",{appName:s})}const o=new $x(s);for(const u of ba.values())o.addComponent(u);const a=new Vk(n,r,o);return Or.set(s,a),a}function Fk(t=Nr){const e=Or.get(t);if(!e&&t===Nr&&kT())return Hm();if(!e)throw $n.create("no-app",{appName:t});return e}function Lk(){return Array.from(Or.values())}async function UT(t){const e=t.name;Or.has(e)&&(Or.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function In(t,e,n){var r;let s=(r=Dk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(a.join(" "));return}Ds(new Hn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function BT(t,e){if(t!==null&&typeof t!="function")throw $n.create("invalid-log-argument");Kx(t,e)}function $T(t){Qx(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="firebase-heartbeat-database",Uk=1,Na="firebase-heartbeat-store";let Rd=null;function jT(){return Rd||(Rd=tk(Mk,Uk,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Na)}}}).catch(t=>{throw $n.create("idb-open",{originalErrorMessage:t.message})})),Rd}async function Bk(t){try{return await(await jT()).transaction(Na).objectStore(Na).get(zT(t))}catch(e){if(e instanceof Gr)ks.warn(e.message);else{const n=$n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(n.message)}}}async function Y_(t,e){try{const r=(await jT()).transaction(Na,"readwrite");await r.objectStore(Na).put(e,zT(t)),await r.done}catch(n){if(n instanceof Gr)ks.warn(n.message);else{const r=$n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ks.warn(r.message)}}}function zT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=1024,jk=30*24*60*60*1e3;class zk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=X_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=jk}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=X_(),{heartbeatsToSend:n,unsentEntries:r}=qk(this._heartbeatsCache.heartbeats),s=rc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function X_(){return new Date().toISOString().substring(0,10)}function qk(t,e=$k){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),J_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),J_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Qk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NT()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Bk(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Y_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Y_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function J_(t){return rc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){Ds(new Hn("platform-logger",e=>new sk(e),"PRIVATE")),Ds(new Hn("heartbeat",e=>new zk(e),"PRIVATE")),In(Wf,W_,t),In(Wf,W_,"esm2017"),In("fire-js","")}Kk("");const Gk=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Gr,SDK_VERSION:Yc,_DEFAULT_ENTRY_NAME:Nr,_addComponent:ic,_addOrOverwriteComponent:LT,_apps:Or,_clearComponents:Nk,_components:ba,_getProvider:MT,_registerComponent:Ds,_removeServiceInstance:bk,deleteApp:UT,getApp:Fk,getApps:Lk,initializeApp:Hm,onLog:BT,registerVersion:In,setLogLevel:$T},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this._delegate=e,this.firebase=n,ic(e,new Hn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),UT(this._delegate)))}_getService(e,n=Nr){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Nr){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){ic(this._delegate,e)}_addOrOverwriteComponent(e){LT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Z_=new Wc("app-compat","Firebase",Wk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:In,setLogLevel:$T,onLog:BT,apps:null,SDK_VERSION:Yc,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:Gk}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function s(l){if(l=l||Nr,!q_(e,l))throw Z_.create("no-app",{appName:l});return e[l]}s.App=t;function i(l,c={}){const h=Hm(l,c);if(q_(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(l=>e[l])}function a(l){const c=l.name,h=c.replace("-compat","");if(Ds(l)&&l.type==="PUBLIC"){const d=(f=s())=>{if(typeof f[h]!="function")throw Z_.create("invalid-app-argument",{appName:c});return f[h]()};l.serviceProps!==void 0&&sc(d,l.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,c).apply(this,l.multipleInstances?f:[])}}return l.type==="PUBLIC"?n[h]:null}function u(l,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(){const t=Yk(Hk);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:qT,extendNamespace:e,createSubscribe:Vx,ErrorFactory:Wc,deepExtend:sc});function e(n){sc(t,n)}return t}const Xk=qT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=new Km("@firebase/app-compat"),Jk="@firebase/app-compat",Zk="0.2.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){In(Jk,Zk,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(xx()&&self.firebase!==void 0){ev.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&ev.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const ao=Xk;eD();var tD="firebase",nD="10.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao.registerVersion(tD,nD,"app-compat");var rD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O,Wm=Wm||{},z=rD||self;function Xc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function lu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function sD(t){return Object.prototype.hasOwnProperty.call(t,Ad)&&t[Ad]||(t[Ad]=++iD)}var Ad="closure_uid_"+(1e9*Math.random()>>>0),iD=0;function oD(t,e,n){return t.call.apply(t.bind,arguments)}function aD(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function lt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?lt=oD:lt=aD,lt.apply(null,arguments)}function Wu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ge(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Hr(){this.s=this.s,this.o=this.o}var uD=0;Hr.prototype.s=!1;Hr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),uD!=0)&&sD(this)};Hr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const QT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Ym(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function tv(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Xc(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function ct(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var lD=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{z.addEventListener("test",()=>{},e),z.removeEventListener("test",()=>{},e)}catch{}return t}();function Oa(t){return/^[\s\xa0]*$/.test(t)}function Jc(){var t=z.navigator;return t&&(t=t.userAgent)?t:""}function pn(t){return Jc().indexOf(t)!=-1}function Xm(t){return Xm[" "](t),t}Xm[" "]=function(){};function cD(t,e){var n=nb;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var hD=pn("Opera"),ji=pn("Trident")||pn("MSIE"),KT=pn("Edge"),Yf=KT||ji,GT=pn("Gecko")&&!(Jc().toLowerCase().indexOf("webkit")!=-1&&!pn("Edge"))&&!(pn("Trident")||pn("MSIE"))&&!pn("Edge"),dD=Jc().toLowerCase().indexOf("webkit")!=-1&&!pn("Edge");function HT(){var t=z.document;return t?t.documentMode:void 0}var Xf;e:{var Pd="",Cd=function(){var t=Jc();if(GT)return/rv:([^\);]+)(\)|;)/.exec(t);if(KT)return/Edge\/([\d\.]+)/.exec(t);if(ji)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(dD)return/WebKit\/(\S+)/.exec(t);if(hD)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Cd&&(Pd=Cd?Cd[1]:""),ji){var xd=HT();if(xd!=null&&xd>parseFloat(Pd)){Xf=String(xd);break e}}Xf=Pd}var Jf;if(z.document&&ji){var nv=HT();Jf=nv||parseInt(Xf,10)||void 0}else Jf=void 0;var fD=Jf;function Va(t,e){if(ct.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(GT){e:{try{Xm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:pD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Va.$.h.call(this)}}Ge(Va,ct);var pD={2:"touch",3:"pen",4:"mouse"};Va.prototype.h=function(){Va.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var cu="closure_listenable_"+(1e6*Math.random()|0),mD=0;function gD(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++mD,this.fa=this.ia=!1}function Zc(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Jm(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function yD(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function WT(t){const e={};for(const n in t)e[n]=t[n];return e}const rv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function YT(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<rv.length;i++)n=rv[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function eh(t){this.src=t,this.g={},this.h=0}eh.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=ep(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new gD(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Zf(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=QT(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Zc(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ep(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Zm="closure_lm_"+(1e6*Math.random()|0),kd={};function XT(t,e,n,r,s){if(r&&r.once)return ZT(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)XT(t,e[i],n,r,s);return null}return n=ng(n),t&&t[cu]?t.O(e,n,lu(r)?!!r.capture:!!r,s):JT(t,e,n,!1,r,s)}function JT(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=lu(s)?!!s.capture:!!s,a=tg(t);if(a||(t[Zm]=a=new eh(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=_D(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)lD||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(tI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function _D(){function t(n){return e.call(t.src,t.listener,n)}const e=vD;return t}function ZT(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)ZT(t,e[i],n,r,s);return null}return n=ng(n),t&&t[cu]?t.P(e,n,lu(r)?!!r.capture:!!r,s):JT(t,e,n,!0,r,s)}function eI(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)eI(t,e[i],n,r,s);else r=lu(r)?!!r.capture:!!r,n=ng(n),t&&t[cu]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=ep(i,n,r,s),-1<n&&(Zc(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=tg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ep(e,n,r,s)),(n=-1<t?e[t]:null)&&eg(n))}function eg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[cu])Zf(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=tg(e))?(Zf(n,t),n.h==0&&(n.src=null,e[Zm]=null)):Zc(t)}}}function tI(t){return t in kd?kd[t]:kd[t]="on"+t}function vD(t,e){if(t.fa)t=!0;else{e=new Va(e,this);var n=t.listener,r=t.la||t.src;t.ia&&eg(t),t=n.call(r,e)}return t}function tg(t){return t=t[Zm],t instanceof eh?t:null}var Dd="__closure_events_fn_"+(1e9*Math.random()>>>0);function ng(t){return typeof t=="function"?t:(t[Dd]||(t[Dd]=function(e){return t.handleEvent(e)}),t[Dd])}function Ke(){Hr.call(this),this.i=new eh(this),this.S=this,this.J=null}Ge(Ke,Hr);Ke.prototype[cu]=!0;Ke.prototype.removeEventListener=function(t,e,n,r){eI(this,t,e,n,r)};function nt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ct(e,t);else if(e instanceof ct)e.target=e.target||t;else{var s=e;e=new ct(r,t),YT(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Yu(o,r,!0,e)&&s}if(o=e.g=t,s=Yu(o,r,!0,e)&&s,s=Yu(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Yu(o,r,!1,e)&&s}Ke.prototype.N=function(){if(Ke.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zc(n[r]);delete t.g[e],t.h--}}this.J=null};Ke.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ke.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Yu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&Zf(t.i,o),s=a.call(u,r)!==!1&&s}}return s&&!r.defaultPrevented}var rg=z.JSON.stringify;class wD{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function ED(){var t=sg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class TD{constructor(){this.h=this.g=null}add(e,n){const r=nI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var nI=new wD(()=>new ID,t=>t.reset());class ID{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function SD(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function RD(t){z.setTimeout(()=>{throw t},0)}let Fa,La=!1,sg=new TD,rI=()=>{const t=z.Promise.resolve(void 0);Fa=()=>{t.then(AD)}};var AD=()=>{for(var t;t=ED();){try{t.h.call(t.g)}catch(n){RD(n)}var e=nI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}La=!1};function th(t,e){Ke.call(this),this.h=t||1,this.g=e||z,this.j=lt(this.qb,this),this.l=Date.now()}Ge(th,Ke);O=th.prototype;O.ga=!1;O.T=null;O.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),nt(this,"tick"),this.ga&&(ig(this),this.start()))}};O.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ig(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}O.N=function(){th.$.N.call(this),ig(this),delete this.g};function og(t,e,n){if(typeof t=="function")n&&(t=lt(t,n));else if(t&&typeof t.handleEvent=="function")t=lt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:z.setTimeout(t,e||0)}function sI(t){t.g=og(()=>{t.g=null,t.i&&(t.i=!1,sI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class PD extends Hr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sI(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(t){Hr.call(this),this.h=t,this.g={}}Ge(Ma,Hr);var sv=[];function iI(t,e,n,r){Array.isArray(n)||(n&&(sv[0]=n.toString()),n=sv);for(var s=0;s<n.length;s++){var i=XT(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function oI(t){Jm(t.g,function(e,n){this.g.hasOwnProperty(n)&&eg(e)},t),t.g={}}Ma.prototype.N=function(){Ma.$.N.call(this),oI(this)};Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function nh(){this.g=!0}nh.prototype.Ea=function(){this.g=!1};function CD(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function xD(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Ti(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+DD(t,n)+(r?" "+r:"")})}function kD(t,e){t.info(function(){return"TIMEOUT: "+e})}nh.prototype.info=function(){};function DD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return rg(n)}catch{return e}}var qs={},iv=null;function rh(){return iv=iv||new Ke}qs.Ta="serverreachability";function aI(t){ct.call(this,qs.Ta,t)}Ge(aI,ct);function Ua(t){const e=rh();nt(e,new aI(e))}qs.STAT_EVENT="statevent";function uI(t,e){ct.call(this,qs.STAT_EVENT,t),this.stat=e}Ge(uI,ct);function gt(t){const e=rh();nt(e,new uI(e,t))}qs.Ua="timingevent";function lI(t,e){ct.call(this,qs.Ua,t),this.size=e}Ge(lI,ct);function hu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){t()},e)}var sh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},cI={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ag(){}ag.prototype.h=null;function ov(t){return t.h||(t.h=t.i())}function hI(){}var du={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ug(){ct.call(this,"d")}Ge(ug,ct);function lg(){ct.call(this,"c")}Ge(lg,ct);var tp;function ih(){}Ge(ih,ag);ih.prototype.g=function(){return new XMLHttpRequest};ih.prototype.i=function(){return{}};tp=new ih;function fu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ma(this),this.P=bD,t=Yf?125:void 0,this.V=new th(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dI}function dI(){this.i=null,this.g="",this.h=!1}var bD=45e3,np={},oc={};O=fu.prototype;O.setTimeout=function(t){this.P=t};function rp(t,e,n){t.L=1,t.v=ah(Wn(e)),t.s=n,t.S=!0,fI(t,null)}function fI(t,e){t.G=Date.now(),pu(t),t.A=Wn(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),EI(n.i,"t",r),t.C=0,n=t.l.J,t.h=new dI,t.g=jI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new PD(lt(t.Pa,t,t.g),t.O)),iI(t.U,t.g,"readystatechange",t.nb),e=t.I?WT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Ua(),CD(t.j,t.u,t.A,t.m,t.W,t.s)}O.nb=function(t){t=t.target;const e=this.M;e&&gn(t)==3?e.l():this.Pa(t)};O.Pa=function(t){try{if(t==this.g)e:{const c=gn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||Yf||this.g&&(this.h.h||this.g.ja()||cv(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Ua(3):Ua(2)),oh(this);var n=this.g.da();this.ca=n;t:if(pI(this)){var r=cv(this.g);t="";var s=r.length,i=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ms(this),aa(this);var o="";break t}this.h.i=new z.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,xD(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oa(a)){var l=a;break t}}l=null}if(n=l)Ti(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sp(this,n);else{this.i=!1,this.o=3,gt(12),ms(this),aa(this);break e}}this.S?(mI(this,c,o),Yf&&this.i&&c==3&&(iI(this.U,this.V,"tick",this.mb),this.V.start())):(Ti(this.j,this.m,o,null),sp(this,o)),c==4&&ms(this),this.i&&!this.J&&(c==4?MI(this.l,this):(this.i=!1,pu(this)))}else ZD(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,gt(12)):(this.o=0,gt(13)),ms(this),aa(this)}}}catch{}finally{}};function pI(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function mI(t,e,n){let r=!0,s;for(;!t.J&&t.C<n.length;)if(s=ND(t,n),s==oc){e==4&&(t.o=4,gt(14),r=!1),Ti(t.j,t.m,null,"[Incomplete Response]");break}else if(s==np){t.o=4,gt(15),Ti(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ti(t.j,t.m,s,null),sp(t,s);pI(t)&&s!=oc&&s!=np&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),mg(e),e.M=!0,gt(11))):(Ti(t.j,t.m,n,"[Invalid Chunked Response]"),ms(t),aa(t))}O.mb=function(){if(this.g){var t=gn(this.g),e=this.g.ja();this.C<e.length&&(oh(this),mI(this,t,e),this.i&&t!=4&&pu(this))}};function ND(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?oc:(n=Number(e.substring(n,r)),isNaN(n)?np:(r+=1,r+n>e.length?oc:(e=e.slice(r,r+n),t.C=r+n,e)))}O.cancel=function(){this.J=!0,ms(this)};function pu(t){t.Y=Date.now()+t.P,gI(t,t.P)}function gI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=hu(lt(t.lb,t),e)}function oh(t){t.B&&(z.clearTimeout(t.B),t.B=null)}O.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(kD(this.j,this.A),this.L!=2&&(Ua(),gt(17)),ms(this),this.o=2,aa(this)):gI(this,this.Y-t)};function aa(t){t.l.H==0||t.J||MI(t.l,t)}function ms(t){oh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,ig(t.V),oI(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function sp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||ip(n.i,t))){if(!t.K&&ip(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)lc(n),hh(n);else break e;pg(n),gt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=hu(lt(n.ib,n),6e3));if(1>=SI(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else gs(n,11)}else if((t.K||n.g==t)&&lc(n),!Oa(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let l=s[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var i=r.i;i.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(cg(i,i.h),i.h=null))}if(r.F){const _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,he(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=$I(r,r.J?r.pa:null,r.Y),o.K){RI(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(oh(a),pu(a)),r.g=o}else FI(r);0<n.j.length&&dh(n)}else l[0]!="stop"&&l[0]!="close"||gs(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?gs(n,7):fg(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Ua(4)}catch{}}function OD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Xc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function VD(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Xc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function yI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Xc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=VD(t),r=OD(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var _I=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Is(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Is){this.h=t.h,ac(this,t.j),this.s=t.s,this.g=t.g,uc(this,t.m),this.l=t.l;var e=t.i,n=new Ba;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),av(this,n),this.o=t.o}else t&&(e=String(t).match(_I))?(this.h=!1,ac(this,e[1]||"",!0),this.s=Ko(e[2]||""),this.g=Ko(e[3]||"",!0),uc(this,e[4]),this.l=Ko(e[5]||"",!0),av(this,e[6]||"",!0),this.o=Ko(e[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}Is.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Go(e,uv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Go(e,uv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Go(n,n.charAt(0)=="/"?UD:MD,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Go(n,$D)),t.join("")};function Wn(t){return new Is(t)}function ac(t,e,n){t.j=n?Ko(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function uc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function av(t,e,n){e instanceof Ba?(t.i=e,jD(t.i,t.h)):(n||(e=Go(e,BD)),t.i=new Ba(e,t.h))}function he(t,e,n){t.i.set(e,n)}function ah(t){return he(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ko(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Go(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,LD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function LD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var uv=/[#\/\?@]/g,MD=/[#\?:]/g,UD=/[#\?]/g,BD=/[#\?@]/g,$D=/#/g;function Ba(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Wr(t){t.g||(t.g=new Map,t.h=0,t.i&&FD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}O=Ba.prototype;O.add=function(t,e){Wr(this),this.i=null,t=uo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function vI(t,e){Wr(t),e=uo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function wI(t,e){return Wr(t),e=uo(t,e),t.g.has(e)}O.forEach=function(t,e){Wr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};O.ta=function(){Wr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};O.Z=function(t){Wr(this);let e=[];if(typeof t=="string")wI(this,t)&&(e=e.concat(this.g.get(uo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};O.set=function(t,e){return Wr(this),this.i=null,t=uo(this,t),wI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};O.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function EI(t,e,n){vI(t,e),0<n.length&&(t.i=null,t.g.set(uo(t,e),Ym(n)),t.h+=n.length)}O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function uo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function jD(t,e){e&&!t.j&&(Wr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(vI(this,r),EI(this,s,n))},t)),t.j=e}var zD=class{constructor(t,e){this.g=t,this.map=e}};function TI(t){this.l=t||qD,z.PerformanceNavigationTiming?(t=z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qD=10;function II(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function SI(t){return t.h?1:t.g?t.g.size:0}function ip(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function cg(t,e){t.g?t.g.add(e):t.h=e}function RI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}TI.prototype.cancel=function(){if(this.i=AI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function AI(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Ym(t.i)}var QD=class{stringify(t){return z.JSON.stringify(t,void 0)}parse(t){return z.JSON.parse(t,void 0)}};function KD(){this.g=new QD}function GD(t,e,n){const r=n||"";try{yI(t,function(s,i){let o=s;lu(s)&&(o=rg(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function HD(t,e){const n=new nh;if(z.Image){const r=new Image;r.onload=Wu(Xu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Wu(Xu,n,r,"TestLoadImage: error",!1,e),r.onabort=Wu(Xu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wu(Xu,n,r,"TestLoadImage: timeout",!1,e),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Xu(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function uh(t){this.l=t.ec||null,this.j=t.ob||!1}Ge(uh,ag);uh.prototype.g=function(){return new lh(this.l,this.j)};uh.prototype.i=function(t){return function(){return t}}({});function lh(t,e){Ke.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=hg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ge(lh,Ke);var hg=0;O=lh.prototype;O.open=function(t,e){if(this.readyState!=hg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,$a(this)};O.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mu(this)),this.readyState=hg};O.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;PI(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function PI(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}O.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?mu(this):$a(this),this.readyState==3&&PI(this)}};O.Za=function(t){this.g&&(this.response=this.responseText=t,mu(this))};O.Ya=function(t){this.g&&(this.response=t,mu(this))};O.ka=function(){this.g&&mu(this)};function mu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,$a(t)}O.setRequestHeader=function(t,e){this.v.append(t,e)};O.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};O.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function $a(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(lh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var WD=z.JSON.parse;function Ce(t){Ke.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=CI,this.L=this.M=!1}Ge(Ce,Ke);var CI="",YD=/^https?$/i,XD=["POST","PUT"];O=Ce.prototype;O.Oa=function(t){this.M=t};O.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tp.g(),this.C=this.u?ov(this.u):ov(tp),this.g.onreadystatechange=lt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){lv(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=z.FormData&&t instanceof z.FormData,!(0<=QT(XD,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{DI(this),0<this.B&&((this.L=JD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.ua,this)):this.A=og(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){lv(this,i)}};function JD(t){return ji&&typeof t.timeout=="number"&&t.ontimeout!==void 0}O.ua=function(){typeof Wm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nt(this,"timeout"),this.abort(8))};function lv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xI(t),ch(t)}function xI(t){t.F||(t.F=!0,nt(t,"complete"),nt(t,"error"))}O.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,nt(this,"complete"),nt(this,"abort"),ch(this))};O.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ch(this,!0)),Ce.$.N.call(this)};O.La=function(){this.s||(this.G||this.v||this.l?kI(this):this.kb())};O.kb=function(){kI(this)};function kI(t){if(t.h&&typeof Wm<"u"&&(!t.C[1]||gn(t)!=4||t.da()!=2)){if(t.v&&gn(t)==4)og(t.La,0,t);else if(nt(t,"readystatechange"),gn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(_I)[1]||null;!s&&z.self&&z.self.location&&(s=z.self.location.protocol.slice(0,-1)),r=!YD.test(s?s.toLowerCase():"")}n=r}if(n)nt(t,"complete"),nt(t,"success");else{t.m=6;try{var i=2<gn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",xI(t)}}finally{ch(t)}}}}function ch(t,e){if(t.g){DI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||nt(t,"ready");try{n.onreadystatechange=r}catch{}}}function DI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(z.clearTimeout(t.A),t.A=null)}O.isActive=function(){return!!this.g};function gn(t){return t.g?t.g.readyState:0}O.da=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}};O.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};O.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),WD(e)}};function cv(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case CI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function ZD(t){const e={};t=(t.g&&2<=gn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Oa(t[r]))continue;var n=SD(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}yD(e,function(r){return r.join(", ")})}O.Ia=function(){return this.m};O.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function bI(t){let e="";return Jm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function dg(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=bI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):he(t,e,n))}function No(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function NI(t){this.Ga=0,this.j=[],this.l=new nh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=No("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=No("baseRetryDelayMs",5e3,t),this.hb=No("retryDelaySeedMs",1e4,t),this.eb=No("forwardChannelMaxRetries",2,t),this.xa=No("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new TI(t&&t.concurrentRequestLimit),this.Ja=new KD,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}O=NI.prototype;O.ra=8;O.H=1;function fg(t){if(OI(t),t.H==3){var e=t.W++,n=Wn(t.I);if(he(n,"SID",t.K),he(n,"RID",e),he(n,"TYPE","terminate"),gu(t,n),e=new fu(t,t.l,e),e.L=2,e.v=ah(Wn(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&z.Image&&(new Image().src=e.v,n=!0),n||(e.g=jI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),pu(e)}BI(t)}function hh(t){t.g&&(mg(t),t.g.cancel(),t.g=null)}function OI(t){hh(t),t.u&&(z.clearTimeout(t.u),t.u=null),lc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&z.clearTimeout(t.m),t.m=null)}function dh(t){if(!II(t.i)&&!t.m){t.m=!0;var e=t.Na;Fa||rI(),La||(Fa(),La=!0),sg.add(e,t),t.C=0}}function eb(t,e){return SI(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=hu(lt(t.Na,t,e),UI(t,t.C)),t.C++,!0)}O.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new fu(this,this.l,t);let i=this.s;if(this.U&&(i?(i=WT(i),YT(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=VI(this,s,e),n=Wn(this.I),he(n,"RID",t),he(n,"CVER",22),this.F&&he(n,"X-HTTP-Session-Id",this.F),gu(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(bI(i)))+"&"+e:this.o&&dg(n,this.o,i)),cg(this.i,s),this.bb&&he(n,"TYPE","init"),this.P?(he(n,"$req",e),he(n,"SID","null"),s.aa=!0,rp(s,n,null)):rp(s,n,e),this.H=2}}else this.H==3&&(t?hv(this,t):this.j.length==0||II(this.i)||hv(this))};function hv(t,e){var n;e?n=e.m:n=t.W++;const r=Wn(t.I);he(r,"SID",t.K),he(r,"RID",n),he(r,"AID",t.V),gu(t,r),t.o&&t.s&&dg(r,t.o,t.s),n=new fu(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=VI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),cg(t.i,n),rp(n,r,e)}function gu(t,e){t.na&&Jm(t.na,function(n,r){he(e,r,n)}),t.h&&yI({},function(n,r){he(e,r,n)})}function VI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?lt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let u=0;u<n;u++){let l=s[u].g;const c=s[u].map;if(l-=i,0>l)i=Math.max(0,s[u].g-100),a=!1;else try{GD(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function FI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fa||rI(),La||(Fa(),La=!0),sg.add(e,t),t.A=0}}function pg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=hu(lt(t.Ma,t),UI(t,t.A)),t.A++,!0)}O.Ma=function(){if(this.u=null,LI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=hu(lt(this.jb,this),t)}};O.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gt(10),hh(this),LI(this))};function mg(t){t.B!=null&&(z.clearTimeout(t.B),t.B=null)}function LI(t){t.g=new fu(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Wn(t.wa);he(e,"RID","rpc"),he(e,"SID",t.K),he(e,"AID",t.V),he(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&he(e,"TO",t.qa),he(e,"TYPE","xmlhttp"),gu(t,e),t.o&&t.s&&dg(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=ah(Wn(e)),n.s=null,n.S=!0,fI(n,t)}O.ib=function(){this.v!=null&&(this.v=null,hh(this),pg(this),gt(19))};function lc(t){t.v!=null&&(z.clearTimeout(t.v),t.v=null)}function MI(t,e){var n=null;if(t.g==e){lc(t),mg(t),t.g=null;var r=2}else if(ip(t.i,e))n=e.F,RI(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=rh(),nt(r,new lI(r,n)),dh(t)}else FI(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&eb(t,e)||r==2&&pg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:gs(t,5);break;case 4:gs(t,10);break;case 3:gs(t,6);break;default:gs(t,2)}}}function UI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function gs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=lt(t.pb,t);n||(n=new Is("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||ac(n,"https"),ah(n)),HD(n.toString(),r)}else gt(2);t.H=0,t.h&&t.h.za(e),BI(t),OI(t)}O.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gt(2)):(this.l.info("Failed to ping google.com"),gt(1))};function BI(t){if(t.H=0,t.ma=[],t.h){const e=AI(t.i);(e.length!=0||t.j.length!=0)&&(tv(t.ma,e),tv(t.ma,t.j),t.i.i.length=0,Ym(t.j),t.j.length=0),t.h.ya()}}function $I(t,e,n){var r=n instanceof Is?Wn(n):new Is(n);if(r.g!="")e&&(r.g=e+"."+r.g),uc(r,r.m);else{var s=z.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Is(null);r&&ac(i,r),e&&(i.g=e),s&&uc(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&he(r,n,e),he(r,"VER",t.ra),gu(t,r),r}function jI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ce(new uh({ob:!0})):new Ce(t.va),e.Oa(t.J),e}O.isActive=function(){return!!this.h&&this.h.isActive(this)};function zI(){}O=zI.prototype;O.Ba=function(){};O.Aa=function(){};O.za=function(){};O.ya=function(){};O.isActive=function(){return!0};O.Va=function(){};function cc(){if(ji&&!(10<=Number(fD)))throw Error("Environmental error: no available transport.")}cc.prototype.g=function(t,e){return new Ft(t,e)};function Ft(t,e){Ke.call(this),this.g=new NI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Oa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Oa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new lo(this)}Ge(Ft,Ke);Ft.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=$I(t,null,t.Y),dh(t)};Ft.prototype.close=function(){fg(this.g)};Ft.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=rg(t),t=n);e.j.push(new zD(e.fb++,t)),e.H==3&&dh(e)};Ft.prototype.N=function(){this.g.h=null,delete this.j,fg(this.g),delete this.g,Ft.$.N.call(this)};function qI(t){ug.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ge(qI,ug);function QI(){lg.call(this),this.status=1}Ge(QI,lg);function lo(t){this.g=t}Ge(lo,zI);lo.prototype.Ba=function(){nt(this.g,"a")};lo.prototype.Aa=function(t){nt(this.g,new qI(t))};lo.prototype.za=function(t){nt(this.g,new QI)};lo.prototype.ya=function(){nt(this.g,"b")};function tb(){this.blockSize=-1}function an(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ge(an,tb);an.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function bd(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}an.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)bd(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){bd(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){bd(this,r),s=0;break}}this.h=s,this.i+=e};an.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ie(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var nb={};function gg(t){return-128<=t&&128>t?cD(t,function(e){return new ie([e|0],0>e?-1:0)}):new ie([t|0],0>t?-1:0)}function yn(t){if(isNaN(t)||!isFinite(t))return xi;if(0>t)return Ze(yn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=op;return new ie(e,0)}function KI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ze(KI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=yn(Math.pow(e,8)),r=xi,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=yn(Math.pow(e,i)),r=r.R(i).add(yn(o))):(r=r.R(n),r=r.add(yn(o)))}return r}var op=4294967296,xi=gg(0),ap=gg(1),dv=gg(16777216);O=ie.prototype;O.ea=function(){if(zt(this))return-Ze(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:op+r)*e,e*=op}return t};O.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Mn(this))return"0";if(zt(this))return"-"+Ze(this).toString(t);for(var e=yn(Math.pow(t,6)),n=this,r="";;){var s=dc(n,e).g;n=hc(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Mn(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};O.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Mn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function zt(t){return t.h==-1}O.X=function(t){return t=hc(this,t),zt(t)?-1:Mn(t)?0:1};function Ze(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ie(n,~t.h).add(ap)}O.abs=function(){return zt(this)?Ze(this):this};O.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ie(n,n[n.length-1]&-2147483648?-1:0)};function hc(t,e){return t.add(Ze(e))}O.R=function(t){if(Mn(this)||Mn(t))return xi;if(zt(this))return zt(t)?Ze(this).R(Ze(t)):Ze(Ze(this).R(t));if(zt(t))return Ze(this.R(Ze(t)));if(0>this.X(dv)&&0>t.X(dv))return yn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,u=t.D(s)&65535;n[2*r+2*s]+=o*u,Ju(n,2*r+2*s),n[2*r+2*s+1]+=i*u,Ju(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Ju(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Ju(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ie(n,0)};function Ju(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Oo(t,e){this.g=t,this.h=e}function dc(t,e){if(Mn(e))throw Error("division by zero");if(Mn(t))return new Oo(xi,xi);if(zt(t))return e=dc(Ze(t),e),new Oo(Ze(e.g),Ze(e.h));if(zt(e))return e=dc(t,Ze(e)),new Oo(Ze(e.g),e.h);if(30<t.g.length){if(zt(t)||zt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ap,r=e;0>=r.X(t);)n=fv(n),r=fv(r);var s=Zs(n,1),i=Zs(r,1);for(r=Zs(r,2),n=Zs(n,2);!Mn(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Zs(r,1),n=Zs(n,1)}return e=hc(t,s.R(e)),new Oo(s,e)}for(s=xi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=yn(n),o=i.R(e);zt(o)||0<o.X(t);)n-=r,i=yn(n),o=i.R(e);Mn(i)&&(i=ap),s=s.add(i),t=hc(t,o)}return new Oo(s,t)}O.gb=function(t){return dc(this,t).h};O.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ie(n,this.h&t.h)};O.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ie(n,this.h|t.h)};O.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ie(n,this.h^t.h)};function fv(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ie(n,t.h)}function Zs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ie(s,t.h)}cc.prototype.createWebChannel=cc.prototype.g;Ft.prototype.send=Ft.prototype.u;Ft.prototype.open=Ft.prototype.m;Ft.prototype.close=Ft.prototype.close;sh.NO_ERROR=0;sh.TIMEOUT=8;sh.HTTP_ERROR=6;cI.COMPLETE="complete";hI.EventType=du;du.OPEN="a";du.CLOSE="b";du.ERROR="c";du.MESSAGE="d";Ke.prototype.listen=Ke.prototype.O;Ce.prototype.listenOnce=Ce.prototype.P;Ce.prototype.getLastError=Ce.prototype.Sa;Ce.prototype.getLastErrorCode=Ce.prototype.Ia;Ce.prototype.getStatus=Ce.prototype.da;Ce.prototype.getResponseJson=Ce.prototype.Wa;Ce.prototype.getResponseText=Ce.prototype.ja;Ce.prototype.send=Ce.prototype.ha;Ce.prototype.setWithCredentials=Ce.prototype.Oa;an.prototype.digest=an.prototype.l;an.prototype.reset=an.prototype.reset;an.prototype.update=an.prototype.j;ie.prototype.add=ie.prototype.add;ie.prototype.multiply=ie.prototype.R;ie.prototype.modulo=ie.prototype.gb;ie.prototype.compare=ie.prototype.X;ie.prototype.toNumber=ie.prototype.ea;ie.prototype.toString=ie.prototype.toString;ie.prototype.getBits=ie.prototype.D;ie.fromNumber=yn;ie.fromString=KI;var rb=function(){return new cc},sb=function(){return rh()},Nd=sh,ib=cI,ob=qs,pv={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Zu=hI,ab=Ce,ub=an,ki=ie;const mv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="10.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Km("@firebase/firestore");function ii(){return Vr.logLevel}function lb(t){Vr.setLogLevel(t)}function k(t,...e){if(Vr.logLevel<=X.DEBUG){const n=e.map(yg);Vr.debug(`Firestore (${co}): ${t}`,...n)}}function be(t,...e){if(Vr.logLevel<=X.ERROR){const n=e.map(yg);Vr.error(`Firestore (${co}): ${t}`,...n)}}function un(t,...e){if(Vr.logLevel<=X.WARN){const n=e.map(yg);Vr.warn(`Firestore (${co}): ${t}`,...n)}}function yg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+t;throw be(e),new Error(e)}function U(t,e){t||V()}function cb(t,e){t||V()}function N(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends Gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}}class db{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fb{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Qe;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qe,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qe)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(U(typeof r.accessToken=="string"),new GI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return U(e===null||typeof e=="string"),new ze(e)}}class pb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,k("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(U(typeof n.token=="string"),this.R=n.token,new gb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_b(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Q(t,e){return t<e?-1:t>e?1:0}function zi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function WI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new x(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new x(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.timestamp=e}static fromTimestamp(e){return new M(e)}static min(){return new M(new ye(0,0))}static max(){return new M(new ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r){n===void 0?n=0:n>e.length&&V(),r===void 0?r=e.length-n:r>e.length-n&&V(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ee extends ja{construct(e,n,r){return new ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new x(T.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ee(n)}static emptyPath(){return new ee([])}}const vb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pe extends ja{construct(e,n,r){return new Pe(e,n,r)}static isValidIdentifier(e){return vb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new x(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new x(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new x(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new x(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pe(n)}static emptyPath(){return new Pe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e){this.path=e}static fromPath(e){return new b(ee.fromString(e))}static fromName(e){return new b(ee.fromString(e).popFirst(5))}static empty(){return new b(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new b(new ee(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function up(t){return t.fields.find(e=>e.kind===2)}function os(t){return t.fields.filter(e=>e.kind!==2)}fc.UNKNOWN_ID=-1;class El{constructor(e,n){this.fieldPath=e,this.kind=n}}class za{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new za(0,Lt.min())}}function YI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=M.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new Lt(s,b.empty(),e)}function XI(t){return new Lt(t.readTime,t.key,-1)}class Lt{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Lt(M.min(),b.empty(),-1)}static max(){return new Lt(M.max(),b.empty(),-1)}}function _g(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:Q(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr(t){if(t.code!==T.FAILED_PRECONDITION||t.message!==JI)throw t;k("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,r)=>{n(e)})}static reject(e){return new E((n,r)=>{r(e)})}static waitFor(e){return new E((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=E.resolve(!1);for(const r of e)n=n.next(s=>s?E.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new E((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const l=u;n(e[l]).next(c=>{o[l]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new E((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.m=new Qe,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new ua(e,n.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=vg(r.target.error);this.m.reject(new ua(e,s))}}static open(e,n,r,s){try{return new fh(n,e.transaction(s,r))}catch(i){throw new ua(n,i)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Eb(n)}}class nn{constructor(e,n,r){this.name=e,this.version=n,this.S=r,nn.D(Qf())===12.2&&be("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),as(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!NT())return!1;if(nn.v())return!0;const e=Qf(),n=nn.D(e),r=0<n&&n<10,s=nn.F(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static F(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async N(e){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ua(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new x(T.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new x(T.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ua(e,o))},s.onupgradeneeded=i=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.S.B(o,s.transaction,i.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const a=fh.open(this.db,e,i?"readonly":"readwrite",r),u=s(a).next(l=>(a.p(),l)).catch(l=>(a.abort(l),E.reject(l))).toPromise();return u.catch(()=>{}),await a.g,u}catch(a){const u=a,l=u.name!=="FirebaseError"&&o<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class wb{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return as(this.q.delete())}}class ua extends x{constructor(e,n){super(T.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xr(t){return t.name==="IndexedDbTransactionError"}class Eb{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(k("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),as(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),as(this.store.add(e))}get(e){return as(this.store.get(e)).next(n=>(n===void 0&&(n=null),k("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),as(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),as(this.store.count())}G(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const s=this.cursor(r),i=[];return this.j(s,(o,a)=>{i.push(a)}).next(()=>i)}{const s=this.store.getAll(r.range);return new E((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new E((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}J(e,n){k("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.j(s,(i,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.j(s,n)}X(e){const n=this.cursor({});return new E((r,s)=>{n.onerror=i=>{const o=vg(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}j(e,n){const r=[];return new E((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const u=new wb(a),l=n(a.primaryKey,a.value,u);if(l instanceof E){const c=l.catch(h=>(u.done(),E.reject(h)));r.push(c)}u.isDone?s():u.U===null?a.continue():a.continue(u.U)}}).next(()=>E.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function as(t){return new E((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=vg(r.target.error);n(s)}})}let gv=!1;function vg(t){const e=nn.D(Qf());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gv||(gv=!0,setTimeout(()=>{throw r},0)),r}}return t}class Tb{constructor(e,n){this.asyncQueue=e,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){k("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{k("IndexBackiller",`Documents written: ${await this.ee.ne()}`)}catch(n){Xr(n)?k("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Yr(n)}await this.te(6e4)})}}class Ib{constructor(e,n){this.localStore=e,this.persistence=n}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,e))}re(e,n){const r=new Set;let s=n,i=!0;return E.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return k("IndexBackiller",`Processing collection: ${o}`),this.ie(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ie(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(s,i)).next(a=>(k("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}se(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=XI(i);_g(o,r)>0&&(r=o)}),new Lt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}At.ae=-1;function yu(t){return t==null}function qa(t){return t===0&&1/t==-1/0}function e1(t){return typeof t=="number"&&Number.isInteger(t)&&!qa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yv(e)),e=Sb(t.get(n),e);return yv(e)}function Sb(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function yv(t){return t+""}function _n(t){const e=t.length;if(U(e>=2),e===2)return U(t.charAt(0)===""&&t.charAt(1)===""),ee.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&V(),t.charAt(o+1)){case"":const a=t.substring(i,o);let u;s.length===0?u=a:(s+=a,u=s,s=""),r.push(u);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:V()}i=o+2}return new ee(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e){return[t,_t(e)]}function t1(t,e,n){return[t,_t(e),n]}const Rb={},Ab=["prefixPath","collectionGroup","readTime","documentId"],Pb=["prefixPath","collectionGroup","documentId"],Cb=["collectionGroup","readTime","prefixPath","documentId"],xb=["canonicalId","targetId"],kb=["targetId","path"],Db=["path","targetId"],bb=["collectionId","parent"],Nb=["indexId","uid"],Ob=["uid","sequenceNumber"],Vb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fb=["indexId","uid","orderedDocumentKey"],Lb=["userId","collectionPath","documentId"],Mb=["userId","collectionPath","largestBatchId"],Ub=["userId","collectionGroup","largestBatchId"],n1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bb=[...n1,"documentOverlays"],r1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],s1=r1,$b=[...s1,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends ZI{constructor(e,n){super(),this.ue=e,this.currentSequenceNumber=n}}function He(t,e){const n=N(t);return nn.O(n.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function i1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new el(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new el(this.root,e,this.comparator,!1)}getReverseIterator(){return new el(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new el(this.root,e,this.comparator,!0)}}class el{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();const e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.comparator=e,this.data=new le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(e){return new wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ue)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ue(this.comparator);return n.data=e,n}}class wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ei(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.fields=e,e.sort(Pe.comparator)}static empty(){return new Pt([])}unionWith(e){let n=new ue(Pe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new o1("Invalid base64 string: "+i):i}}(e);return new Be(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Be(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Q(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const zb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(U(!!t),typeof t=="string"){let e=0;const n=zb.exec(t);if(U(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?Be.fromBase64String(t):Be.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wg(t){const e=t.mapValue.fields.__previous_value__;return ph(e)?wg(e):e}function Qa(t){const e=Fr(t.mapValue.fields.__local_write_time__.timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,r,s,i,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Mr{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mr("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Il={nullValue:"NULL_VALUE"};function bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ph(t)?4:a1(t)?9007199254740991:10:V()}function An(t,e){if(t===e)return!0;const n=bs(t);if(n!==bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qa(t).isEqual(Qa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fr(s.timestampValue),a=Fr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Lr(s.bytesValue).isEqual(Lr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),a=Ae(i.doubleValue);return o===a?qa(o)===qa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zi(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(vv(o)!==vv(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!An(o[u],a[u])))return!1;return!0}(t,e);default:return V()}}function Ka(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function Ur(t,e){if(t===e)return 0;const n=bs(t),r=bs(e);if(n!==r)return Q(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Q(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ae(i.integerValue||i.doubleValue),u=Ae(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Ev(t.timestampValue,e.timestampValue);case 4:return Ev(Qa(t),Qa(e));case 5:return Q(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Lr(i),u=Lr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Q(a[l],u[l]);if(c!==0)return c}return Q(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Q(Ae(i.latitude),Ae(o.latitude));return a!==0?a:Q(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Ur(a[l],u[l]);if(c)return c}return Q(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===yr.mapValue&&o===yr.mapValue)return 0;if(i===yr.mapValue)return 1;if(o===yr.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let h=0;h<u.length&&h<c.length;++h){const d=Q(u[h],c[h]);if(d!==0)return d;const f=Ur(a[u[h]],l[c[h]]);if(f!==0)return f}return Q(u.length,c.length)}(t.mapValue,e.mapValue);default:throw V()}}function Ev(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Q(t,e);const n=Fr(t),r=Fr(e),s=Q(n.seconds,r.seconds);return s!==0?s:Q(n.nanos,r.nanos)}function qi(t){return cp(t)}function cp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=cp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${cp(n.fields[o])}`;return s+"}"}(t.mapValue):V()}function Ns(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hp(t){return!!t&&"integerValue"in t}function Ga(t){return!!t&&"arrayValue"in t}function Tv(t){return!!t&&"nullValue"in t}function Iv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sl(t){return!!t&&"mapValue"in t}function la(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=la(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=la(t.arrayValue.values[n]);return e}return Object.assign({},t)}function a1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Qb(t){return"nullValue"in t?Il:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ns(Mr.empty(),b.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:V()}function Kb(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ns(Mr.empty(),b.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?yr:V()}function Sv(t,e){const n=Ur(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Rv(t,e){const n=Ur(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.value=e}static empty(){return new et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(n)}setAll(e){let n=Pe.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=la(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Sl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Sl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Qs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new et(la(this.value))}}function u1(t){const e=[];return Qs(t.fields,(n,r)=>{const s=new Pe([n]);if(Sl(r)){const i=u1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Pt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new de(e,0,M.min(),M.min(),M.min(),et.empty(),0)}static newFoundDocument(e,n,r,s){return new de(e,1,n,M.min(),r,s,0)}static newNoDocument(e,n){return new de(e,2,n,M.min(),M.min(),et.empty(),0)}static newUnknownDocument(e,n){return new de(e,3,n,M.min(),M.min(),et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(M.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=M.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof de&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new de(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this.position=e,this.inclusive=n}}function Av(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=b.comparator(b.fromName(o.referenceValue),n.key):r=Ur(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n="asc"){this.field=e,this.dir=n}}function Gb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{}class W extends l1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Hb(e,n,r):n==="array-contains"?new Xb(e,r):n==="in"?new m1(e,r):n==="not-in"?new Jb(e,r):n==="array-contains-any"?new Zb(e,r):new W(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Wb(e,r):new Yb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ur(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(Ur(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class re extends l1{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new re(e,n)}matches(e){return Qi(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Qi(t){return t.op==="and"}function dp(t){return t.op==="or"}function Eg(t){return c1(t)&&Qi(t)}function c1(t){for(const e of t.filters)if(e instanceof re)return!1;return!0}function fp(t){if(t instanceof W)return t.field.canonicalString()+t.op.toString()+qi(t.value);if(Eg(t))return t.filters.map(e=>fp(e)).join(",");{const e=t.filters.map(n=>fp(n)).join(",");return`${t.op}(${e})`}}function h1(t,e){return t instanceof W?function(r,s){return s instanceof W&&r.op===s.op&&r.field.isEqual(s.field)&&An(r.value,s.value)}(t,e):t instanceof re?function(r,s){return s instanceof re&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&h1(o,s.filters[a]),!0):!1}(t,e):void V()}function d1(t,e){const n=t.filters.concat(e);return re.create(n,t.op)}function f1(t){return t instanceof W?function(n){return`${n.field.canonicalString()} ${n.op} ${qi(n.value)}`}(t):t instanceof re?function(n){return n.op.toString()+" {"+n.getFilters().map(f1).join(" ,")+"}"}(t):"Filter"}class Hb extends W{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){const n=b.comparator(e.key,this.key);return this.matchesComparison(n)}}class Wb extends W{constructor(e,n){super(e,"in",n),this.keys=p1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Yb extends W{constructor(e,n){super(e,"not-in",n),this.keys=p1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}class Xb extends W{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ga(n)&&Ka(n.arrayValue,this.value)}}class m1 extends W{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ka(this.value.arrayValue,n)}}class Jb extends W{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ka(this.value.arrayValue,n)}}class Zb extends W{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ga(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.he=null}}function pp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new eN(t,e,n,r,s,i,o)}function Os(t){const e=N(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),yu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qi(r)).join(",")),e.he=n}return e.he}function _u(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Gb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pv(t.startAt,e.startAt)&&Pv(t.endAt,e.endAt)}function pc(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function mc(t,e){return t.filters.filter(n=>n instanceof W&&n.field.isEqual(e))}function Cv(t,e,n){let r=Il,s=!0;for(const i of mc(t,e)){let o=Il,a=!0;switch(i.op){case"<":case"<=":o=Qb(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Il}Sv({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Sv({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function xv(t,e,n){let r=yr,s=!0;for(const i of mc(t,e)){let o=yr,a=!0;switch(i.op){case">=":case">":o=Kb(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=yr}Rv({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Rv({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function g1(t,e,n,r,s,i,o,a){return new Jn(t,e,n,r,s,i,o,a)}function ho(t){return new Jn(t)}function kv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tg(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function mh(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Ig(t){return t.collectionGroup!==null}function bi(t){const e=N(t);if(e.Pe===null){e.Pe=[];const n=mh(e),r=Tg(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Di(n)),e.Pe.push(new Di(Pe.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.Pe.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Di(Pe.keyField(),i))}}}return e.Pe}function vt(t){const e=N(t);return e.Ie||(e.Ie=tN(e,bi(t))),e.Ie}function tN(t,e){if(t.limitType==="F")return pp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Di(s.field,i)});const n=t.endAt?new Br(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Br(t.startAt.position,t.startAt.inclusive):null;return pp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mp(t,e){e.getFirstInequalityField(),mh(t);const n=t.filters.concat([e]);return new Jn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gc(t,e,n){return new Jn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vu(t,e){return _u(vt(t),vt(e))&&t.limitType===e.limitType}function y1(t){return`${Os(vt(t))}|lt:${t.limitType}`}function oi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>f1(s)).join(", ")}]`),yu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>qi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>qi(s)).join(",")),`Target(${r})`}(vt(t))}; limitType=${t.limitType})`}function wu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):b.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const l=Av(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,bi(r),s)||r.endAt&&!function(o,a,u){const l=Av(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,bi(r),s))}(t,e)}function _1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v1(t){return(e,n)=>{let r=!1;for(const s of bi(t)){const i=nN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function nN(t,e,n){const r=t.field.isKeyField()?b.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),l=a.data.field(i);return u!==null&&l!==null?Ur(u,l):V()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return V()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return i1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new le(b.comparator);function Ct(){return rN}const w1=new le(b.comparator);function Ho(...t){let e=w1;for(const n of t)e=e.insert(n.key,n);return e}function E1(t){let e=w1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vn(){return ca()}function T1(){return ca()}function ca(){return new Jr(t=>t.toString(),(t,e)=>t.isEqual(e))}const sN=new le(b.comparator),iN=new ue(b.comparator);function K(...t){let e=iN;for(const n of t)e=e.add(n);return e}const oN=new ue(Q);function Sg(){return oN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qa(e)?"-0":e}}function S1(t){return{integerValue:""+t}}function R1(t,e){return e1(e)?S1(e):I1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this._=void 0}}function aN(t,e,n){return t instanceof Ki?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ph(i)&&(i=wg(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Vs?P1(t,e):t instanceof Fs?C1(t,e):function(s,i){const o=A1(s,i),a=Dv(o)+Dv(s.Te);return hp(o)&&hp(s.Te)?S1(a):I1(s.serializer,a)}(t,e)}function uN(t,e,n){return t instanceof Vs?P1(t,e):t instanceof Fs?C1(t,e):n}function A1(t,e){return t instanceof Gi?function(r){return hp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ki extends gh{}class Vs extends gh{constructor(e){super(),this.elements=e}}function P1(t,e){const n=x1(e);for(const r of t.elements)n.some(s=>An(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fs extends gh{constructor(e){super(),this.elements=e}}function C1(t,e){let n=x1(e);for(const r of t.elements)n=n.filter(s=>!An(s,r));return{arrayValue:{values:n}}}class Gi extends gh{constructor(e,n){super(),this.serializer=e,this.Te=n}}function Dv(t){return Ae(t.integerValue||t.doubleValue)}function x1(t){return Ga(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.field=e,this.transform=n}}function lN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Vs&&s instanceof Vs||r instanceof Fs&&s instanceof Fs?zi(r.elements,s.elements,An):r instanceof Gi&&s instanceof Gi?An(r.Te,s.Te):r instanceof Ki&&s instanceof Ki}(t.transform,e.transform)}class cN{constructor(e,n){this.version=e,this.transformResults=n}}class ge{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ge}static exists(e){return new ge(void 0,e)}static updateTime(e){return new ge(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let yh=class{};function k1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new po(t.key,ge.none()):new fo(t.key,t.data,ge.none());{const n=t.data,r=et.empty();let s=new ue(Pe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Zn(t.key,r,new Pt(s.toArray()),ge.none())}}function hN(t,e,n){t instanceof fo?function(s,i,o){const a=s.value.clone(),u=Nv(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zn?function(s,i,o){if(!Rl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Nv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(D1(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ha(t,e,n,r){return t instanceof fo?function(i,o,a,u){if(!Rl(i.precondition,o))return a;const l=i.value.clone(),c=Ov(i.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zn?function(i,o,a,u){if(!Rl(i.precondition,o))return a;const l=Ov(i.fieldTransforms,u,o),c=o.data;return c.setAll(D1(i)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Rl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function dN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=A1(r.transform,s||null);i!=null&&(n===null&&(n=et.empty()),n.set(r.field,i))}return n||null}function bv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zi(r,s,(i,o)=>lN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fo extends yh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zn extends yh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function D1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Nv(t,e,n){const r=new Map;U(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,uN(o,a,n[s]))}return r}function Ov(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,aN(i,o,e))}return r}class po extends yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rg extends yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&hN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=T1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=k1(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(M.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),K())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(n,r)=>bv(n,r))&&zi(this.baseMutations,e.baseMutations,(n,r)=>bv(n,r))}}class Pg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){U(e.mutations.length===r.length);let s=function(){return sN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Pg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,J;function b1(t){switch(t){default:return V();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function N1(t){if(t===void 0)return be("GRPC error has no .code"),T.UNKNOWN;switch(t){case Ve.OK:return T.OK;case Ve.CANCELLED:return T.CANCELLED;case Ve.UNKNOWN:return T.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return T.INTERNAL;case Ve.UNAVAILABLE:return T.UNAVAILABLE;case Ve.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Ve.NOT_FOUND:return T.NOT_FOUND;case Ve.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Ve.ABORTED:return T.ABORTED;case Ve.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Ve.DATA_LOSS:return T.DATA_LOSS;default:return V()}}(J=Ve||(Ve={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new ki([4294967295,4294967295],0);function Vv(t){const e=O1().encode(t),n=new ub;return n.update(e),new Uint8Array(n.digest())}function Fv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ki([n,r],0),new ki([s,i],0)]}class xg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(r<0)throw new Wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ki.fromNumber(this.Ae)}Ve(e,n,r){let s=e.add(n.multiply(ki.fromNumber(r)));return s.compare(pN)===1&&(s=new ki([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=Vv(e),[r,s]=Fv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);if(!this.me(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new xg(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=Vv(e),[r,s]=Fv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ve(r,s,i);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tu(M.min(),s,new le(Q),Ct(),K())}}class Iu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Iu(r,n,K(),K(),K())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,r,s){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=s}}class V1{constructor(e,n){this.targetId=e,this.ye=n}}class F1{constructor(e,n,r=Be.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Lv{constructor(){this.we=0,this.Se=Uv(),this.be=Be.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return this.we!==0}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=K(),n=K(),r=K();return this.Se.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:V()}}),new Iu(this.be,this.De,e,n,r)}Oe(){this.Ce=!1,this.Se=Uv()}Ne(e,n){this.Ce=!0,this.Se=this.Se.insert(e,n)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class mN{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Ct(),this.Ue=Mv(),this.We=new le(Q)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,s)=>{this.Ye(s)&&n(s)})}Xe(e){const n=e.targetId,r=e.ye.count,s=this.et(n);if(s){const i=s.target;if(pc(i))if(r===0){const o=new b(i.path);this.je(n,o,de.newNoDocument(o,M.min()))}else U(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),u=a?this.rt(a,e,o):1;if(u!==0){this.Ze(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,l)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Lr(r).toUint8Array()}catch(u){if(u instanceof o1)return un("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new xg(o,s,i)}catch(u){return un(u instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.je(n,i,null),s++)}),s}_t(e){const n=new Map;this.Ke.forEach((i,o)=>{const a=this.et(o);if(a){if(i.current&&pc(a.target)){const u=new b(a.target.path);this.$e.get(u)!==null||this.ut(o,u)||this.je(o,u,de.newNoDocument(u,e))}i.Fe&&(n.set(o,i.xe()),i.Oe())}});let r=K();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.et(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.$e.forEach((i,o)=>o.setReadTime(e));const s=new Tu(e,n,this.We,this.$e,r);return this.$e=Ct(),this.Ue=Mv(),this.We=new le(Q),s}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const s=this.Je(e);this.ut(e,n)?s.Ne(n,1):s.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new Lv,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new ue(Q),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||k("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Lv),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function Mv(){return new le(b.comparator)}function Uv(){return new le(b.comparator)}const gN=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),yN=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),_N=(()=>({and:"AND",or:"OR"}))();class vN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gp(t,e){return t.useProto3Json||yu(e)?e:{value:e}}function Hi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wN(t,e){return Hi(t,e.toTimestamp())}function Ne(t){return U(!!t),M.fromTimestamp(function(n){const r=Fr(n);return new ye(r.seconds,r.nanos)}(t))}function kg(t,e){return function(r){return new ee(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function M1(t){const e=ee.fromString(t);return U(G1(e)),e}function Ha(t,e){return kg(t.databaseId,e.path)}function Sn(t,e){const n=M1(e);if(n.get(1)!==t.databaseId.projectId)throw new x(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new x(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(B1(n))}function yp(t,e){return kg(t.databaseId,e)}function U1(t){const e=M1(t);return e.length===4?ee.emptyPath():B1(e)}function Wa(t){return new ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B1(t){return U(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Bv(t,e,n){return{name:Ha(t,e),fields:n.value.mapValue.fields}}function $1(t,e,n){const r=Sn(t,e.name),s=Ne(e.updateTime),i=e.createTime?Ne(e.createTime):M.min(),o=new et({mapValue:{fields:e.fields}}),a=de.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function EN(t,e){return"found"in e?function(r,s){U(!!s.found),s.found.name,s.found.updateTime;const i=Sn(r,s.found.name),o=Ne(s.found.updateTime),a=s.found.createTime?Ne(s.found.createTime):M.min(),u=new et({mapValue:{fields:s.found.fields}});return de.newFoundDocument(i,o,a,u)}(t,e):"missing"in e?function(r,s){U(!!s.missing),U(!!s.readTime);const i=Sn(r,s.missing),o=Ne(s.readTime);return de.newNoDocument(i,o)}(t,e):V()}function TN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:V()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,c){return l.useProto3Json?(U(c===void 0||typeof c=="string"),Be.fromBase64String(c||"")):(U(c===void 0||c instanceof Uint8Array),Be.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?T.UNKNOWN:N1(l.code);return new x(c,l.message||"")}(o);n=new F1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sn(t,r.document.name),i=Ne(r.document.updateTime),o=r.document.createTime?Ne(r.document.createTime):M.min(),a=new et({mapValue:{fields:r.document.fields}}),u=de.newFoundDocument(s,i,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new Al(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sn(t,r.document),i=r.readTime?Ne(r.readTime):M.min(),o=de.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Al([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sn(t,r.document),i=r.removedTargetIds||[];n=new Al([],i,s,null)}else{if(!("filter"in e))return V();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new fN(s,i),a=r.targetId;n=new V1(a,o)}}return n}function Ya(t,e){let n;if(e instanceof fo)n={update:Bv(t,e.key,e.value)};else if(e instanceof po)n={delete:Ha(t,e.key)};else if(e instanceof Zn)n={update:Bv(t,e.key,e.data),updateMask:CN(e.fieldMask)};else{if(!(e instanceof Rg))return V();n={verify:Ha(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw V()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:wN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:V()}(t,e.precondition)),n}function _p(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?ge.updateTime(Ne(i.updateTime)):i.exists!==void 0?ge.exists(i.exists):ge.none()}(e.currentDocument):ge.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let u=null;if("setToServerValue"in a)U(a.setToServerValue==="REQUEST_TIME"),u=new Ki;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];u=new Vs(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];u=new Fs(c)}else"increment"in a?u=new Gi(o,a.increment):V();const l=Pe.fromServerFormat(a.fieldPath);return new Eu(l,u)}(t,s)):[];if(e.update){e.update.name;const s=Sn(t,e.update.name),i=new et({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const l=u.fieldPaths||[];return new Pt(l.map(c=>Pe.fromServerFormat(c)))}(e.updateMask);return new Zn(s,i,o,n,r)}return new fo(s,i,n,r)}if(e.delete){const s=Sn(t,e.delete);return new po(s,n)}if(e.verify){const s=Sn(t,e.verify);return new Rg(s,n)}return V()}function IN(t,e){return t&&t.length>0?(U(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Ne(s.updateTime):Ne(i);return o.isEqual(M.min())&&(o=Ne(i)),new cN(o,s.transformResults||[])}(n,e))):[]}function j1(t,e){return{documents:[yp(t,e.path)]}}function z1(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=yp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=yp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(u){if(u.length!==0)return K1(re.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:ai(h.field),direction:RN(h.dir)}}(l))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=gp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function q1(t){let e=U1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){U(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=function(h){const d=Q1(h);return d instanceof re&&Eg(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new Di(ui(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,yu(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(h){const d=!!h.before,f=h.values||[];return new Br(f,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){const d=!h.before,f=h.values||[];return new Br(f,d)}(n.endAt)),g1(e,s,o,i,a,"F",u,l)}function SN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ui(n.unaryFilter.field);return W.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ui(n.unaryFilter.field);return W.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ui(n.unaryFilter.field);return W.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ui(n.unaryFilter.field);return W.create(o,"!=",{nullValue:"NULL_VALUE"});default:return V()}}(t):t.fieldFilter!==void 0?function(n){return W.create(ui(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return re.create(n.compositeFilter.filters.map(r=>Q1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return V()}}(n.compositeFilter.op))}(t):V()}function RN(t){return gN[t]}function AN(t){return yN[t]}function PN(t){return _N[t]}function ai(t){return{fieldPath:t.canonicalString()}}function ui(t){return Pe.fromServerFormat(t.fieldPath)}function K1(t){return t instanceof W?function(n){if(n.op==="=="){if(Iv(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NAN"}};if(Tv(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Iv(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NAN"}};if(Tv(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ai(n.field),op:AN(n.op),value:n.value}}}(t):t instanceof re?function(n){const r=n.getFilters().map(s=>K1(s));return r.length===1?r[0]:{compositeFilter:{op:PN(n.op),filters:r}}}(t):V()}function CN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function G1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r,s,i=M.min(),o=M.min(),a=Be.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Un(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.ht=e}}function xN(t,e){let n;if(e.document)n=$1(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=b.fromSegments(e.noDocument.path),s=Ms(e.noDocument.readTime);n=de.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return V();{const r=b.fromSegments(e.unknownDocument.path),s=Ms(e.unknownDocument.version);n=de.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new ye(s[0],s[1]);return M.fromTimestamp(i)}(e.readTime)),n}function $v(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:yc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Ha(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Hi(i,o.version.toTimestamp()),createTime:Hi(i,o.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ls(e.version)};else{if(!e.isUnknownDocument())return V();r.unknownDocument={path:n.path.toArray(),version:Ls(e.version)}}return r}function yc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ls(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ms(t){const e=new ye(t.seconds,t.nanoseconds);return M.fromTimestamp(e)}function us(t,e){const n=(e.baseMutations||[]).map(i=>_p(t.ht,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>_p(t.ht,i)),s=ye.fromMillis(e.localWriteTimeMs);return new Ag(e.batchId,s,n,r)}function Yo(t){const e=Ms(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ms(t.lastLimboFreeSnapshotVersion):M.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return U(i.documents.length===1),vt(ho(U1(i.documents[0])))}(t.query):function(i){return vt(q1(i))}(t.query),new Un(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Be.fromBase64String(t.resumeToken))}function W1(t,e){const n=Ls(e.snapshotVersion),r=Ls(e.lastLimboFreeSnapshotVersion);let s;s=pc(e.target)?j1(t.ht,e.target):z1(t.ht,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Os(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Dg(t){const e=q1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gc(e,e.limit,"L"):e}function Od(t,e){return new Cg(e.largestBatchId,_p(t.ht,e.overlayMutation))}function jv(t,e){const n=e.path.lastSegment();return[t,_t(e.path.popLast()),n]}function zv(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Ls(r.readTime),documentKey:_t(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{getBundleMetadata(e,n){return qv(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Ms(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return qv(e).put(function(s){return{bundleId:s.id,createTime:Ls(Ne(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return Qv(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Dg(i.bundledQuery),readTime:Ms(i.readTime)}}(r)})}saveNamedQuery(e,n){return Qv(e).put(function(s){return{name:s.name,readTime:Ls(Ne(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function qv(t){return He(t,"bundles")}function Qv(t){return He(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.serializer=e,this.userId=n}static Pt(e,n){const r=n.uid||"";return new _h(e,r)}getOverlay(e,n){return Vo(e).get(jv(this.userId,n)).next(r=>r?Od(this.serializer,r):null)}getOverlays(e,n){const r=vn();return E.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Cg(n,o);s.push(this.It(e,a))}),E.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(_t(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Vo(e).J("collectionPathOverlayIndex",a))}),E.waitFor(i)}getOverlaysForCollection(e,n,r){const s=vn(),i=_t(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Vo(e).G("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=Od(this.serializer,u);s.set(l.getKey(),l)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=vn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Vo(e).Z({index:"collectionGroupOverlayIndex",range:a},(u,l,c)=>{const h=Od(this.serializer,l);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>i)}It(e,n){return Vo(e).put(function(s,i,o){const[a,u,l]=jv(i,o.mutation.key);return{userId:i,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ya(s.ht,o.mutation)}}(this.serializer,this.userId,n))}}function Vo(t){return He(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){}dt(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.At(n,5);else if("booleanValue"in e)this.At(n,10),n.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(n,15),n.Rt(Ae(e.integerValue));else if("doubleValue"in e){const r=Ae(e.doubleValue);isNaN(r)?this.At(n,13):(this.At(n,15),qa(r)?n.Rt(0):n.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(n,20),typeof r=="string"?n.Vt(r):(n.Vt(`${r.seconds||""}`),n.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,n),this.gt(n);else if("bytesValue"in e)this.At(n,30),n.yt(Lr(e.bytesValue)),this.gt(n);else if("referenceValue"in e)this.wt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(n,45),n.Rt(r.latitude||0),n.Rt(r.longitude||0)}else"mapValue"in e?a1(e)?this.At(n,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,n),this.gt(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.gt(n)):V()}ft(e,n){this.At(n,25),this.Dt(e,n)}Dt(e,n){n.Vt(e)}St(e,n){const r=e.fields||{};this.At(n,55);for(const s of Object.keys(r))this.ft(s,n),this.Tt(r[s],n)}bt(e,n){const r=e.values||[];this.At(n,50);for(const s of r)this.Tt(s,n)}wt(e,n){this.At(n,37),b.fromName(e).path.forEach(r=>{this.At(n,60),this.Dt(r,n)})}At(e,n){e.Rt(n)}gt(e){e.Rt(2)}}ls.Ct=new ls;function DN(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Kv(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=DN(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class bN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=Kv(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=Kv(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class NN{constructor(e){this.jt=e}yt(e){this.jt.vt(e)}Vt(e){this.jt.Bt(e)}Rt(e){this.jt.kt(e)}Et(){this.jt.$t()}}class ON{constructor(e){this.jt=e}yt(e){this.jt.xt(e)}Vt(e){this.jt.Lt(e)}Rt(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Fo{constructor(){this.jt=new bN,this.Ht=new NN(this.jt),this.Jt=new ON(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new cs(this.indexId,this.documentKey,this.arrayValue,r)}}function sr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Gv(t.arrayValue,e.arrayValue),n!==0?n:(n=Gv(t.directionalValue,e.directionalValue),n!==0?n:b.comparator(t.documentKey,e.documentKey)))}function Gv(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const n of e.filters){const r=n;r.isInequality()?this.tn=r:this.en.push(r)}}nn(e){U(e.collectionGroup===this.collectionId);const n=up(e);if(n!==void 0&&!this.rn(n))return!1;const r=os(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.rn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.tn!==void 0){if(!s.has(this.tn.field.canonicalString())){const a=r[i];if(!this.sn(this.tn,a)||!this.on(this.Xt[o++],a))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.Xt.length||!this.on(this.Xt[o++],a))return!1}return!0}_n(){let e=new ue(Pe.comparator);const n=[];for(const r of this.en)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new El(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new El(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new El(r.field,r.dir==="asc"?0:1)));return new fc(fc.UNKNOWN_ID,this.collectionId,n,za.empty())}rn(e){for(const n of this.en)if(this.sn(n,e))return!0;return!1}sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}on(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){var e,n;if(U(t instanceof W||t instanceof re),t instanceof W){if(t instanceof m1){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>W.create(t.field,"==",i)))||[];return re.create(s,"or")}return t}const r=t.filters.map(s=>Y1(s));return re.create(r,t.op)}function VN(t){if(t.getFilters().length===0)return[];const e=Ep(Y1(t));return U(X1(e)),vp(e)||wp(e)?[e]:e.getFilters()}function vp(t){return t instanceof W}function wp(t){return t instanceof re&&Eg(t)}function X1(t){return vp(t)||wp(t)||function(n){if(n instanceof re&&dp(n)){for(const r of n.getFilters())if(!vp(r)&&!wp(r))return!1;return!0}return!1}(t)}function Ep(t){if(U(t instanceof W||t instanceof re),t instanceof W)return t;if(t.filters.length===1)return Ep(t.filters[0]);const e=t.filters.map(r=>Ep(r));let n=re.create(e,t.op);return n=_c(n),X1(n)?n:(U(n instanceof re),U(Qi(n)),U(n.filters.length>1),n.filters.reduce((r,s)=>bg(r,s)))}function bg(t,e){let n;return U(t instanceof W||t instanceof re),U(e instanceof W||e instanceof re),n=t instanceof W?e instanceof W?function(s,i){return re.create([s,i],"and")}(t,e):Wv(t,e):e instanceof W?Wv(e,t):function(s,i){if(U(s.filters.length>0&&i.filters.length>0),Qi(s)&&Qi(i))return d1(s,i.getFilters());const o=dp(s)?s:i,a=dp(s)?i:s,u=o.filters.map(l=>bg(l,a));return re.create(u,"or")}(t,e),_c(n)}function Wv(t,e){if(Qi(e))return d1(e,t.getFilters());{const n=e.filters.map(r=>bg(t,r));return re.create(n,"or")}}function _c(t){if(U(t instanceof W||t instanceof re),t instanceof W)return t;const e=t.getFilters();if(e.length===1)return _c(e[0]);if(c1(t))return t;const n=e.map(s=>_c(s)),r=[];return n.forEach(s=>{s instanceof W?r.push(s):s instanceof re&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:re.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.an=new Ng}addToCollectionParentIndex(e,n){return this.an.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}deleteAllFieldIndexes(e){return E.resolve()}createTargetIndexes(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(Lt.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(Lt.min())}updateCollectionGroup(e,n,r){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class Ng{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ue(ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ue(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Uint8Array(0);class LN{constructor(e,n){this.user=e,this.databaseId=n,this.un=new Ng,this.cn=new Jr(r=>Os(r),(r,s)=>_u(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.un.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.un.add(n)});const i={collectionId:r,parent:_t(s)};return Yv(e).put(i)}return E.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[WI(n),""],!1,!0);return Yv(e).G(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(_n(o.parent))}return r})}addFieldIndex(e,n){const r=Lo(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ni(e);return i.next(a=>{o.put(zv(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Lo(e),s=ni(e),i=ti(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Lo(e),r=ti(e),s=ni(e);return n.J().next(()=>r.J()).next(()=>s.J())}createTargetIndexes(e,n){return E.forEach(this.ln(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new Hv(r);return this.addFieldIndex(e,i._n())}}))}getDocumentsMatchingTarget(e,n){const r=ti(e);let s=!0;const i=new Map;return E.forEach(this.ln(n),o=>this.hn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=K();const a=[];return E.forEach(i,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(u)} to execute ${Os(n)}`);const c=function(y,w){const P=up(w);if(P===void 0)return null;for(const S of mc(y,P.fieldPath))switch(S.op){case"array-contains-any":return S.value.arrayValue.values||[];case"array-contains":return[S.value]}return null}(l,u),h=function(y,w){const P=new Map;for(const S of os(w))for(const R of mc(y,S.fieldPath))switch(R.op){case"==":case"in":P.set(S.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return P.set(S.fieldPath.canonicalString(),R.value),Array.from(P.values())}return null}(l,u),d=function(y,w){const P=[];let S=!0;for(const R of os(w)){const C=R.kind===0?Cv(y,R.fieldPath,y.startAt):xv(y,R.fieldPath,y.startAt);P.push(C.value),S&&(S=C.inclusive)}return new Br(P,S)}(l,u),f=function(y,w){const P=[];let S=!0;for(const R of os(w)){const C=R.kind===0?xv(y,R.fieldPath,y.endAt):Cv(y,R.fieldPath,y.endAt);P.push(C.value),S&&(S=C.inclusive)}return new Br(P,S)}(l,u),p=this.Pn(u,l,d),_=this.Pn(u,l,f),v=this.In(u,l,h),g=this.dn(u.indexId,c,p,d.inclusive,_,f.inclusive,v);return E.forEach(g,m=>r.H(m,n.limit).next(y=>{y.forEach(w=>{const P=b.fromSegments(w.documentKey);o.has(P)||(o=o.add(P),a.push(P))})}))}).next(()=>a)}return E.resolve(null)})}ln(e){let n=this.cn.get(e);return n||(e.filters.length===0?n=[e]:n=VN(re.create(e.filters,"and")).map(r=>pp(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,n),n)}dn(e,n,r,s,i,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,i.length),l=u/(n!=null?n.length:1),c=[];for(let h=0;h<u;++h){const d=n?this.Tn(n[h/l]):tl,f=this.En(e,d,r[h%l],s),p=this.An(e,d,i[h%l],o),_=a.map(v=>this.En(e,d,v,!0));c.push(...this.createRange(f,p,_))}return c}En(e,n,r,s){const i=new cs(e,b.empty(),n,r);return s?i:i.Zt()}An(e,n,r,s){const i=new cs(e,b.empty(),n,r);return s?i.Zt():i}hn(e,n){const r=new Hv(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.nn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.ln(n);return E.forEach(s,i=>this.hn(e,i).next(o=>{o?r!==0&&o.fields.length<function(u){let l=new ue(Pe.comparator),c=!1;for(const h of u.filters)for(const d of h.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?c=!0:l=l.add(d.field));for(const h of u.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(c?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Rn(e,n){const r=new Fo;for(const s of os(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);ls.Ct.dt(i,o)}return r.zt()}Tn(e){const n=new Fo;return ls.Ct.dt(e,n.Yt(0)),n.zt()}Vn(e,n){const r=new Fo;return ls.Ct.dt(Ns(this.databaseId,n),r.Yt(function(i){const o=os(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}In(e,n,r){if(r===null)return[];let s=[];s.push(new Fo);let i=0;for(const o of os(e)){const a=r[i++];for(const u of s)if(this.mn(n,o.fieldPath)&&Ga(a))s=this.fn(s,o,a);else{const l=u.Yt(o.kind);ls.Ct.dt(a,l)}}return this.gn(s)}Pn(e,n,r){return this.In(e,n,r.position)}gn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}fn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const u=new Fo;u.seed(a.zt()),ls.Ct.dt(o,u.Yt(n.kind)),i.push(u)}return i}mn(e,n){return!!e.filters.find(r=>r instanceof W&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Lo(e),s=ni(e);return(n?r.G("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.G()).next(i=>{const o=[];return E.forEach(i,a=>s.get([a.indexId,this.uid]).next(u=>{o.push(function(c,h){const d=h?new za(h.sequenceNumber,new Lt(Ms(h.readTime),new b(_n(h.documentKey)),h.largestBatchId)):za.empty(),f=c.fields.map(([p,_])=>new El(Pe.fromServerFormat(p),_));return new fc(c.indexId,c.collectionGroup,f,d)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Q(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Lo(e),i=ni(e);return this.pn(e).next(o=>s.G("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>E.forEach(a,u=>i.put(zv(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return E.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?E.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),E.forEach(a,u=>this.yn(e,s,u).next(l=>{const c=this.wn(i,u);return l.isEqual(c)?E.resolve():this.Sn(e,i,u,l,c)}))))})}bn(e,n,r,s){return ti(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.Vn(r,n.key),documentKey:n.key.path.toArray()})}Dn(e,n,r,s){return ti(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.Vn(r,n.key),n.key.path.toArray()])}yn(e,n,r){const s=ti(e);let i=new ue(sr);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,n)])},(o,a)=>{i=i.add(new cs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}wn(e,n){let r=new ue(sr);const s=this.Rn(n,e);if(s==null)return r;const i=up(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Ga(o))for(const a of o.arrayValue.values||[])r=r.add(new cs(n.indexId,e.key,this.Tn(a),s))}else r=r.add(new cs(n.indexId,e.key,tl,s));return r}Sn(e,n,r,s,i){k("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,l,c,h,d){const f=u.getIterator(),p=l.getIterator();let _=ei(f),v=ei(p);for(;_||v;){let g=!1,m=!1;if(_&&v){const y=c(_,v);y<0?m=!0:y>0&&(g=!0)}else _!=null?m=!0:g=!0;g?(h(v),v=ei(p)):m?(d(_),_=ei(f)):(_=ei(f),v=ei(p))}}(s,i,sr,a=>{o.push(this.bn(e,n,r,a))},a=>{o.push(this.Dn(e,n,r,a))}),E.waitFor(o)}pn(e){let n=1;return ni(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>sr(o,a)).filter((o,a,u)=>!a||sr(o,u[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=sr(o,e),u=sr(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&u<0)s.push(o),s.push(o.Zt());else if(u>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,tl,[]],u=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,tl,[]];i.push(IDBKeyRange.bound(a,u))}return i}Cn(e,n){return sr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Xv)}getMinOffset(e,n){return E.mapArray(this.ln(n),r=>this.hn(e,r).next(s=>s||V())).next(Xv)}}function Yv(t){return He(t,"collectionParents")}function ti(t){return He(t,"indexEntries")}function Lo(t){return He(t,"indexConfiguration")}function ni(t){return He(t,"indexState")}function Xv(t){U(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;_g(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Lt(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class It{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new It(e,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Z({range:o},(c,h,d)=>(a++,d.delete()));i.push(u.next(()=>{U(a===1)}));const l=[];for(const c of n.mutations){const h=t1(e,c.key.path,n.batchId);i.push(s.delete(h)),l.push(c.key)}return E.waitFor(i).next(()=>l)}function vc(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw V();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(41943040,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);class vh{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.vn={}}static Pt(e,n,r,s){U(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new vh(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).Z({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=li(e),o=ir(e);return o.add({}).next(a=>{U(typeof a=="number");const u=new Ag(a,n,r,s),l=function(f,p,_){const v=_.baseMutations.map(m=>Ya(f.ht,m)),g=_.mutations.map(m=>Ya(f.ht,m));return{userId:p,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:v,mutations:g}}(this.serializer,this.userId,u),c=[];let h=new ue((d,f)=>Q(d.canonicalString(),f.canonicalString()));for(const d of s){const f=t1(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(l)),c.push(i.put(f,Rb))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.vn[a]=u.keys()}),E.waitFor(c).next(()=>u)})}lookupMutationBatch(e,n){return ir(e).get(n).next(r=>r?(U(r.userId===this.userId),us(this.serializer,r)):null)}Fn(e,n){return this.vn[n]?E.resolve(this.vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.vn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ir(e).Z({index:"userMutationsIndex",range:s},(o,a,u)=>{a.userId===this.userId&&(U(a.batchId>=r),i=us(this.serializer,a)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ir(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).G("userMutationsIndex",n).next(r=>r.map(s=>us(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Tl(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return li(e).Z({range:s},(o,a,u)=>{const[l,c,h]=o,d=_n(c);if(l===this.userId&&n.path.isEqual(d))return ir(e).get(h).next(f=>{if(!f)throw V();U(f.userId===this.userId),i.push(us(this.serializer,f))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ue(Q);const s=[];return n.forEach(i=>{const o=Tl(this.userId,i.path),a=IDBKeyRange.lowerBound(o),u=li(e).Z({range:a},(l,c,h)=>{const[d,f,p]=l,_=_n(f);d===this.userId&&i.path.isEqual(_)?r=r.add(p):h.done()});s.push(u)}),E.waitFor(s).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Tl(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new ue(Q);return li(e).Z({range:o},(u,l,c)=>{const[h,d,f]=u,p=_n(d);h===this.userId&&r.isPrefixOf(p)?p.length===s&&(a=a.add(f)):c.done()}).next(()=>this.Mn(e,a))}Mn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(ir(e).get(i).next(o=>{if(o===null)throw V();U(o.userId===this.userId),r.push(us(this.serializer,o))}))}),E.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return J1(e.ue,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.xn(n.batchId)}),E.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return E.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return li(e).Z({range:r},(i,o,a)=>{if(i[0]===this.userId){const u=_n(i[1]);s.push(u)}else a.done()}).next(()=>{U(s.length===0)})})}containsKey(e,n){return Z1(e,this.userId,n)}On(e){return eS(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Z1(t,e,n){const r=Tl(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return li(t).Z({range:i,Y:!0},(a,u,l)=>{const[c,h,d]=a;c===e&&h===s&&(o=!0),l.done()}).next(()=>o)}function ir(t){return He(t,"mutations")}function li(t){return He(t,"documentMutations")}function eS(t){return He(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new Us(0)}static Ln(){return new Us(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.kn(e).next(n=>{const r=new Us(n.highestTargetId);return n.highestTargetId=r.next(),this.qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(n=>M.fromTimestamp(new ye(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.kn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.qn(e,s)))}addTargetData(e,n){return this.Qn(e,n).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(n,r),this.qn(e,r))))}updateTargetData(e,n){return this.Qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ri(e).delete(n.targetId)).next(()=>this.kn(e)).next(r=>(U(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return ri(e).Z((o,a)=>{const u=Yo(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(s++,i.push(this.removeTargetData(e,u)))}).next(()=>E.waitFor(i)).next(()=>s)}forEachTarget(e,n){return ri(e).Z((r,s)=>{const i=Yo(s);n(i)})}kn(e){return Zv(e).get("targetGlobalKey").next(n=>(U(n!==null),n))}qn(e,n){return Zv(e).put("targetGlobalKey",n)}Qn(e,n){return ri(e).put(W1(this.serializer,n))}Kn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Os(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return ri(e).Z({range:s,index:"queryTargetsIndex"},(o,a,u)=>{const l=Yo(a);_u(n,l.target)&&(i=l,u.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=fr(e);return n.forEach(o=>{const a=_t(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),E.waitFor(s)}removeMatchingKeys(e,n,r){const s=fr(e);return E.forEach(n,i=>{const o=_t(i.path);return E.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=fr(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=fr(e);let i=K();return s.Z({range:r,Y:!0},(o,a,u)=>{const l=_n(o[1]),c=new b(l);i=i.add(c)}).next(()=>i)}containsKey(e,n){const r=_t(n.path),s=IDBKeyRange.bound([r],[WI(r)],!1,!0);let i=0;return fr(e).Z({index:"documentTargetsIndex",Y:!0,range:s},([o,a],u,l)=>{o!==0&&(i++,l.done())}).next(()=>i>0)}lt(e,n){return ri(e).get(n).next(r=>r?Yo(r):null)}}function ri(t){return He(t,"targets")}function Zv(t){return He(t,"targetGlobal")}function fr(t){return He(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew([t,e],[n,r]){const s=Q(t,n);return s===0?Q(e,r):s}class UN{constructor(e){this.$n=e,this.buffer=new ue(ew),this.Un=0}Wn(){return++this.Un}Gn(e){const n=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ew(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.zn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return this.zn!==null}jn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.zn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xr(n)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Yr(n)}await this.jn(3e5)})}}class $N{constructor(e,n){this.Hn=e,this.params=n}calculateTargetCount(e,n){return this.Hn.Jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return E.resolve(At.ae);const r=new UN(n);return this.Hn.forEachTarget(e,s=>r.Gn(s.sequenceNumber)).next(()=>this.Hn.Yn(e,s=>r.Gn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Hn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Hn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),E.resolve(Jv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jv):this.Zn(e,n))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,n){let r,s,i,o,a,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),ii()<=X.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),E.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function jN(t,e){return new $N(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.db=e,this.garbageCollector=jN(this,n)}Jn(e){const n=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Xn(e){let n=0;return this.Yn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Yn(e,n){return this.er(e,(r,s)=>n(s))}addReference(e,n,r){return nl(e,r)}removeReference(e,n,r){return nl(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return nl(e,n)}tr(e,n){return function(s,i){let o=!1;return eS(s).X(a=>Z1(s,a,i).next(u=>(u&&(o=!0),E.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.er(e,(o,a)=>{if(a<=n){const u=this.tr(e,o).next(l=>{if(!l)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,M.min()),fr(e).delete(function(h){return[0,_t(h.path)]}(o))))});s.push(u)}}).next(()=>E.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return nl(e,n)}er(e,n){const r=fr(e);let s,i=At.ae;return r.Z({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{o===0?(i!==At.ae&&n(new b(_n(s)),i),i=l,s=u):i=At.ae}).next(()=>{i!==At.ae&&n(new b(_n(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nl(t,e){return fr(t).put(function(r,s){return{targetId:0,path:_t(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.changes=new Jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,de.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?E.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ns(e).put(r)}removeEntry(e,n,r){return ns(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],yc(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.nr(e,r)))}getEntry(e,n){let r=de.newInvalidDocument(n);return ns(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mo(n))},(s,i)=>{r=this.rr(n,i)}).next(()=>r)}ir(e,n){let r={size:0,document:de.newInvalidDocument(n)};return ns(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mo(n))},(s,i)=>{r={document:this.rr(n,i),size:vc(i)}}).next(()=>r)}getEntries(e,n){let r=Ct();return this.sr(e,n,(s,i)=>{const o=this.rr(s,i);r=r.insert(s,o)}).next(()=>r)}_r(e,n){let r=Ct(),s=new le(b.comparator);return this.sr(e,n,(i,o)=>{const a=this.rr(i,o);r=r.insert(i,a),s=s.insert(i,vc(o))}).next(()=>({documents:r,ar:s}))}sr(e,n,r){if(n.isEmpty())return E.resolve();let s=new ue(rw);n.forEach(u=>s=s.add(u));const i=IDBKeyRange.bound(Mo(s.first()),Mo(s.last())),o=s.getIterator();let a=o.getNext();return ns(e).Z({index:"documentKeyIndex",range:i},(u,l,c)=>{const h=b.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&rw(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?c.W(Mo(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),yc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ns(e).G(IDBKeyRange.bound(a,u,!0)).next(l=>{i==null||i.incrementDocumentReadCount(l.length);let c=Ct();for(const h of l){const d=this.rr(b.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d.isFoundDocument()&&(wu(n,d)||s.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,n,r,s){let i=Ct();const o=nw(n,r),a=nw(n,Lt.max());return ns(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,c)=>{const h=this.rr(b.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);i=i.insert(h.key,h),i.size===s&&c.done()}).next(()=>i)}newChangeBuffer(e){return new QN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return tw(e).get("remoteDocumentGlobalKey").next(n=>(U(!!n),n))}nr(e,n){return tw(e).put("remoteDocumentGlobalKey",n)}rr(e,n){if(n){const r=xN(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(M.min())))return r}return de.newInvalidDocument(e)}}function nS(t){return new qN(t)}class QN extends tS{constructor(e,n){super(),this.ur=e,this.trackRemovals=n,this.cr=new Jr(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ue((i,o)=>Q(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.cr.get(i);if(n.push(this.ur.removeEntry(e,i,a.readTime)),o.isValidDocument()){const u=$v(this.ur.serializer,o);s=s.add(i.path.popLast());const l=vc(u);r+=l-a.size,n.push(this.ur.addEntry(e,i,u))}else if(r-=a.size,this.trackRemovals){const u=$v(this.ur.serializer,o.convertToNoDocument(M.min()));n.push(this.ur.addEntry(e,i,u))}}),s.forEach(i=>{n.push(this.ur.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.ur.updateMetadata(e,r)),E.waitFor(n)}getFromCache(e,n){return this.ur.ir(e,n).next(r=>(this.cr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ur._r(e,n).next(({documents:r,ar:s})=>(s.forEach((i,o)=>{this.cr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function tw(t){return He(t,"remoteDocumentGlobal")}function ns(t){return He(t,"remoteDocumentsV14")}function Mo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nw(t,e){const n=e.documentKey.path.toArray();return[t,yc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function rw(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Q(n[i],r[i]),s)return s;return s=Q(n.length,r.length),s||(s=Q(n[n.length-2],r[r.length-2]),s||Q(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ha(r.mutation,s,Pt.empty(),ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,K()).next(()=>r))}getLocalViewOfDocuments(e,n,r=K()){const s=vn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ho();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,K()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ct();const o=ca(),a=function(){return ca()}();return n.forEach((u,l)=>{const c=r.get(l.key);s.has(l.key)&&(c===void 0||c.mutation instanceof Zn)?i=i.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),ha(c.mutation,l,c.mutation.getFieldMask(),ye.now())):o.set(l.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var h;return a.set(l,new KN(c,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ca();let s=new le((o,a)=>o-a),i=K();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Pt.empty();c=a.applyToLocalView(l,c),r.set(u,c);const h=(s.get(a.batchId)||K()).add(u);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,h=T1();c.forEach(d=>{if(!i.has(d)){const f=k1(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return E.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return b.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ig(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):E.resolve(vn());let a=-1,u=i;return o.next(l=>E.forEach(l,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?E.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,u,l,K())).next(c=>({batchId:a,changes:E1(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let s=Ho();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ho();return this.indexManager.getCollectionParents(e,i).next(a=>E.forEach(a,u=>{const l=function(h,d){return new Jn(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r,s).next(c=>{c.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,de.newInvalidDocument(c)))});let a=Ho();return o.forEach((u,l)=>{const c=i.get(u);c!==void 0&&ha(c.mutation,l,Pt.empty(),ye.now()),wu(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return E.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ne(s.createTime)}}(n)),E.resolve()}getNamedQuery(e,n){return E.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(s){return{name:s.name,query:Dg(s.bundledQuery),readTime:Ne(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.overlays=new le(b.comparator),this.Pr=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vn();return E.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.It(e,n,i)}),E.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Pr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Pr.delete(r)),E.resolve()}getOverlaysForCollection(e,n,r){const s=vn(),i=n.length+1,o=new b(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return E.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new le((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=i.get(l.largestBatchId);c===null&&(c=vn(),i=i.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=vn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=s)););return E.resolve(a)}It(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Pr.get(s.largestBatchId).delete(r.key);this.Pr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cg(n,r));let i=this.Pr.get(n);i===void 0&&(i=K(),this.Pr.set(n,i)),this.Pr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.Ir=new ue($e.dr),this.Tr=new ue($e.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new $e(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new b(new ee([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Rr(o),i.push(o.key)}),i}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new b(new ee([])),r=new $e(n,e),s=new $e(n,e+1);let i=K();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new $e(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return b.comparator(e.key,n.key)||Q(e.yr,n.yr)}static Er(e,n){return Q(e.yr,n.yr)||b.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new ue($e.dr)}checkEmpty(e){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ag(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Sr=this.Sr.add(new $e(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Dr(r),i=s<0?0:s;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.Sr.forEachInRange([r,s],o=>{const a=this.br(o.yr);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ue(Q);return n.forEach(s=>{const i=new $e(s,0),o=new $e(s,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([i,o],a=>{r=r.add(a.yr)})}),E.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;b.isDocumentKey(i)||(i=i.child(""));const o=new $e(new b(i),0);let a=new ue(Q);return this.Sr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===s&&(a=a.add(u.yr)),!0)},o),E.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.br(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){U(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return E.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new $e(n,0),s=this.Sr.firstAfterOrEqual(r);return E.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,E.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.Fr=e,this.docs=function(){return new le(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return E.resolve(r?r.document.mutableCopy():de.newInvalidDocument(n))}getEntries(e,n){let r=Ct();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():de.newInvalidDocument(s))}),E.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ct();const o=n.path,a=new b(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||_g(XI(c),r)<=0||(s.has(c.key)||wu(n,c))&&(i=i.insert(c.key,c.mutableCopy()))}return E.resolve(i)}getAllFromCollectionGroup(e,n,r,s){V()}Mr(e,n){return E.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XN(this)}getSize(e){return E.resolve(this.size)}}class XN extends tS{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ur.addEntry(e,s)):this.ur.removeEntry(r)}),E.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.persistence=e,this.Or=new Jr(n=>Os(n),_u),this.lastRemoteSnapshotVersion=M.min(),this.highestTargetId=0,this.Nr=0,this.Br=new Og,this.targetCount=0,this.Lr=Us.Bn()}forEachTarget(e,n){return this.Or.forEach((r,s)=>n(s)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),E.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Us(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.Qn(n),E.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Or.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),E.waitFor(i).next(()=>s)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return E.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),E.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),E.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return E.resolve(r)}containsKey(e,n){return E.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n){this.kr={},this.overlays={},this.qr=new At(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new JN(this),this.indexManager=new FN,this.remoteDocumentCache=function(s){return new YN(s)}(r=>this.referenceDelegate.$r(r)),this.serializer=new H1(n),this.Ur=new GN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new WN(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){k("MemoryPersistence","Starting transaction:",e);const s=new ZN(this.qr.next());return this.referenceDelegate.Wr(),r(s).next(i=>this.referenceDelegate.Gr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}zr(e,n){return E.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class ZN extends ZI{constructor(e){super(),this.currentSequenceNumber=e}}class wh{constructor(e){this.persistence=e,this.jr=new Og,this.Hr=null}static Jr(e){return new wh(e)}get Yr(){if(this.Hr)return this.Hr;throw V()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),E.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),E.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(s=>this.Yr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Yr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Yr,r=>{const s=b.fromPath(r);return this.Zr(e,s).next(i=>{i||n.removeEntry(s,M.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return E.or([()=>E.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.serializer=e}B(e,n,r,s){const i=new fh("createOrUpgrade",n);r<1&&s>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_v,{unique:!0}),u.createObjectStore("documentMutations")}(e),sw(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=E.resolve();return r<3&&s>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),sw(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:M.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(u,l){return l.store("mutations").G().next(c=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_v,{unique:!0});const h=l.store("mutations"),d=c.map(f=>h.put(f));return E.waitFor(d)})}(e,i))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ei(i))),r<6&&s>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ti(i)))),r<7&&s>=7&&(o=o.next(()=>this.ni(i))),r<8&&s>=8&&(o=o.next(()=>this.ri(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.ii(i))),r<11&&s>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(u){const l=u.createObjectStore("documentOverlays",{keyPath:Lb});l.createIndex("collectionPathOverlayIndex",Mb,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Ub,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:Ab});l.createIndex("documentKeyIndex",Pb),l.createIndex("collectionGroupIndex",Cb)}(e)).next(()=>this.si(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.oi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Nb}).createIndex("sequenceNumberIndex",Ob,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Vb}).createIndex("documentKeyIndex",Fb,{unique:!1})}(e))),o}ti(e){let n=0;return e.store("remoteDocuments").Z((r,s)=>{n+=vc(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ei(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next(s=>E.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",o).next(a=>E.forEach(a,u=>{U(u.userId===i.userId);const l=us(this.serializer,u);return J1(e,i.userId,l).next(()=>{})}))}))}ni(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.Z((o,a)=>{const u=new ee(o),l=function(h){return[0,_t(h)]}(u);i.push(n.get(l).next(c=>c?E.resolve():(h=>n.put({targetId:0,path:_t(h),sequenceNumber:s.highestListenSequenceNumber}))(u)))}).next(()=>E.waitFor(i))})}ri(e,n){e.createObjectStore("collectionParents",{keyPath:bb});const r=n.store("collectionParents"),s=new Ng,i=o=>{if(s.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:_t(u)})}};return n.store("remoteDocuments").Z({Y:!0},(o,a)=>{const u=new ee(o);return i(u.popLast())}).next(()=>n.store("documentMutations").Z({Y:!0},([o,a,u],l)=>{const c=_n(a);return i(c.popLast())}))}ii(e){const n=e.store("targets");return n.Z((r,s)=>{const i=Yo(s),o=W1(this.serializer,i);return n.put(o)})}si(e,n){const r=n.store("remoteDocuments"),s=[];return r.Z((i,o)=>{const a=n.store("remoteDocumentsV14"),u=function(h){return h.document?new b(ee.fromString(h.document.name).popFirst(5)):h.noDocument?b.fromSegments(h.noDocument.path):h.unknownDocument?b.fromSegments(h.unknownDocument.path):V()}(o).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(l))}).next(()=>E.waitFor(s))}oi(e,n){const r=n.store("mutations"),s=nS(this.serializer),i=new sS(wh.Jr,this.serializer.ht);return r.G().next(o=>{const a=new Map;return o.forEach(u=>{var l;let c=(l=a.get(u.userId))!==null&&l!==void 0?l:K();us(this.serializer,u).keys().forEach(h=>c=c.add(h)),a.set(u.userId,c)}),E.forEach(a,(u,l)=>{const c=new ze(l),h=_h.Pt(this.serializer,c),d=i.getIndexManager(c),f=vh.Pt(c,this.serializer,d,i.referenceDelegate);return new rS(s,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new lp(n,At.ae),u).next()})})}}function sw(t){t.createObjectStore("targetDocuments",{keyPath:kb}).createIndex("documentTargetsIndex",Db,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xb,{unique:!0}),t.createObjectStore("targetGlobal")}const Vd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vg{constructor(e,n,r,s,i,o,a,u,l,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this._i=i,this.window=o,this.document=a,this.ai=l,this.ui=c,this.ci=h,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=d=>Promise.resolve(),!Vg.C())throw new x(T.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zN(this,s),this.Ti=n+"main",this.serializer=new H1(u),this.Ei=new nn(this.Ti,this.ci,new eO(this.serializer)),this.Kr=new MN(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nS(this.serializer),this.Ur=new kN,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,c===!1&&be("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ri().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(T.FAILED_PRECONDITION,Vd);return this.Vi(),this.mi(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Kr.getHighestSequenceNumber(e))}).then(e=>{this.qr=new At(e,this.ai)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}gi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.k(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(async()=>{this.started&&await this.Ri()}))}Ri(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.pi(e).next(n=>{n||(this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.yi(e)).next(n=>this.isPrimary&&!n?this.wi(e).next(()=>!1):!!n&&this.Si(e).next(()=>!0))).catch(e=>{if(Xr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this._i.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}pi(e){return Uo(e).get("owner").next(n=>E.resolve(this.bi(n)))}Di(e){return rl(e).delete(this.clientId)}async Ci(){if(this.isPrimary&&!this.vi(this.Ii,18e5)){this.Ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=He(n,"clientMetadata");return r.G().next(s=>{const i=this.Fi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return E.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ai)for(const n of e)this.Ai.removeItem(this.Mi(n.clientId))}}fi(){this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ri().then(()=>this.Ci()).then(()=>this.fi()))}bi(e){return!!e&&e.ownerId===this.clientId}yi(e){return this.ui?E.resolve(!0):Uo(e).get("owner").next(n=>{if(n!==null&&this.vi(n.leaseTimestampMs,5e3)&&!this.xi(n.ownerId)){if(this.bi(n)&&this.networkEnabled)return!0;if(!this.bi(n)){if(!n.allowTabSynchronization)throw new x(T.FAILED_PRECONDITION,Vd);return!1}}return!(!this.networkEnabled||!this.inForeground)||rl(e).G().next(r=>this.Fi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&k("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new lp(e,At.ae);return this.wi(n).next(()=>this.Di(n))}),this.Ei.close(),this.Li()}Fi(e,n){return e.filter(r=>this.vi(r.updateTimeMs,n)&&!this.xi(r.clientId))}ki(){return this.runTransaction("getActiveClients","readonly",e=>rl(e).G().next(n=>this.Fi(n,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getMutationQueue(e,n){return vh.Pt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LN(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return _h.Pt(this.serializer,e)}getBundleCache(){return this.Ur}runTransaction(e,n,r){k("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(u){return u===15?$b:u===14?s1:u===13?r1:u===12?Bb:u===11?n1:void V()}(this.ci);let o;return this.Ei.runTransaction(e,s,i,a=>(o=new lp(a,this.qr?this.qr.next():At.ae),n==="readwrite-primary"?this.pi(o).next(u=>!!u||this.yi(o)).next(u=>{if(!u)throw be(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)),new x(T.FAILED_PRECONDITION,JI);return r(o)}).next(u=>this.Si(o).next(()=>u)):this.qi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}qi(e){return Uo(e).get("owner").next(n=>{if(n!==null&&this.vi(n.leaseTimestampMs,5e3)&&!this.xi(n.ownerId)&&!this.bi(n)&&!(this.ui||this.allowTabSynchronization&&n.allowTabSynchronization))throw new x(T.FAILED_PRECONDITION,Vd)})}Si(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uo(e).put("owner",n)}static C(){return nn.C()}wi(e){const n=Uo(e);return n.get("owner").next(r=>this.bi(r)?(k("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):E.resolve())}vi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(be(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Vi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.hi=()=>{this._i.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ri()))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}mi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.li=()=>{this.Oi();const n=/(?:Version|Mobile)\/1[456]/;kx()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this._i.enterRestrictedMode(!0),this._i.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.li))}Bi(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}xi(e){var n;try{const r=((n=this.Ai)===null||n===void 0?void 0:n.getItem(this.Mi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return be("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Oi(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){be("Failed to set zombie client id.",e)}}Li(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch{}}Mi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uo(t){return He(t,"owner")}function rl(t){return He(t,"clientMetadata")}function Fg(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=s}static $i(e,n){let r=K(),s=K();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Lg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Hi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ji(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new tO;return this.Yi(e,n,o).next(a=>{if(i.result=a,this.Wi)return this.Zi(e,n,o,a.size)})}).next(()=>i.result)}Zi(e,n,r,s){return r.documentReadCount<this.Gi?(ii()<=X.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",oi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),E.resolve()):(ii()<=X.DEBUG&&k("QueryEngine","Query:",oi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.zi*s?(ii()<=X.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",oi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vt(n))):E.resolve())}Hi(e,n){if(kv(n))return E.resolve(null);let r=vt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=gc(n,null,"F"),r=vt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=K(...i);return this.ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Xi(n,a);return this.es(n,l,o,u.readTime)?this.Hi(e,gc(n,null,"F")):this.ts(e,l,n,u)}))})))}Ji(e,n,r,s){return kv(n)||s.isEqual(M.min())?E.resolve(null):this.ji.getDocuments(e,r).next(i=>{const o=this.Xi(n,i);return this.es(n,o,r,s)?E.resolve(null):(ii()<=X.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oi(n)),this.ts(e,o,n,YI(s,-1)).next(a=>a))})}Xi(e,n){let r=new ue(v1(e));return n.forEach((s,i)=>{wu(e,i)&&(r=r.add(i))}),r}es(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Yi(e,n,r){return ii()<=X.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",oi(n)),this.ji.getDocumentsMatchingQuery(e,n,Lt.min(),r)}ts(e,n,r,s){return this.ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,r,s){this.persistence=e,this.ns=n,this.serializer=s,this.rs=new le(Q),this.ss=new Jr(i=>Os(i),_u),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rS(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function oS(t,e,n,r){return new nO(t,e,n,r)}async function aS(t,e){const n=N(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=K();for(const l of s){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of i){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({cs:l,removedBatchIds:o,addedBatchIds:a}))})})}function rO(t,e){const n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n._s.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const h=l.batch,d=h.keys();let f=E.resolve();return d.forEach(p=>{f=f.next(()=>c.getEntry(u,p)).next(_=>{const v=l.docVersions.get(p);U(v!==null),_.version.compareTo(v)<0&&(h.applyToRemoteDocument(_,l),_.isValidDocument()&&(_.setReadTime(l.commitVersion),c.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=K();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function uS(t){const e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function sO(t,e){const n=N(t),r=e.snapshotVersion;let s=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n._s.newChangeBuffer({trackRemovals:!0});s=n.rs;const a=[];e.targetChanges.forEach((c,h)=>{const d=s.get(h);if(!d)return;a.push(n.Kr.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Kr.addMatchingKeys(i,c.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Be.EMPTY_BYTE_STRING,M.min()).withLastLimboFreeSnapshotVersion(M.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),s=s.insert(h,f),function(_,v,g){return _.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(d,f,c)&&a.push(n.Kr.updateTargetData(i,f))});let u=Ct(),l=K();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(lS(i,o,e.documentUpdates).next(c=>{u=c.ls,l=c.hs})),!r.isEqual(M.min())){const c=n.Kr.getLastRemoteSnapshotVersion(i).next(h=>n.Kr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return E.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,l)).next(()=>u)}).then(i=>(n.rs=s,i))}function lS(t,e,n){let r=K(),s=K();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ct();return n.forEach((a,u)=>{const l=i.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(M.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ls:o,hs:s}})}function iO(t,e){const n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wi(t,e){const n=N(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Kr.getTargetData(r,e).next(i=>i?(s=i,E.resolve(s)):n.Kr.allocateTargetId(r).next(o=>(s=new Un(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Kr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.rs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.rs=n.rs.insert(r.targetId,r),n.ss.set(e,r.targetId)),r})}async function Yi(t,e,n){const r=N(t),s=r.rs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xr(o))throw o;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(s.target)}function wc(t,e,n){const r=N(t);let s=M.min(),i=K();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const h=N(u),d=h.ss.get(c);return d!==void 0?E.resolve(h.rs.get(d)):h.Kr.getTargetData(l,c)}(r,o,vt(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,n?s:M.min(),n?i:K())).next(a=>(dS(r,_1(e),a),{documents:a,Ps:i})))}function cS(t,e){const n=N(t),r=N(n.Kr),s=n.rs.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.lt(i,e).next(o=>o?o.target:null))}function hS(t,e){const n=N(t),r=n.os.get(e)||M.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n._s.getAllFromCollectionGroup(s,e,YI(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(dS(n,e,s),s))}function dS(t,e,n){let r=t.os.get(e)||M.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.os.set(e,r)}async function oO(t,e,n,r){const s=N(t);let i=K(),o=Ct();for(const l of n){const c=e.Is(l.metadata.name);l.document&&(i=i.add(c));const h=e.ds(l);h.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(c,h)}const a=s._s.newChangeBuffer({trackRemovals:!0}),u=await Wi(s,function(c){return vt(ho(ee.fromString(`__bundle__/docs/${c}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",l=>lS(l,a,o).next(c=>(a.apply(l),c)).next(c=>s.Kr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>s.Kr.addMatchingKeys(l,i,u.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(l,c.ls,c.hs)).next(()=>c.ls)))}async function aO(t,e,n=K()){const r=await Wi(t,vt(Dg(e.bundledQuery))),s=N(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=Ne(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ur.saveNamedQuery(i,e);const a=r.withResumeToken(Be.EMPTY_BYTE_STRING,o);return s.rs=s.rs.insert(a.targetId,a),s.Kr.updateTargetData(i,a).next(()=>s.Kr.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Kr.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ur.saveNamedQuery(i,e))})}function iw(t,e){return`firestore_clients_${t}_${e}`}function ow(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fd(t,e){return`firestore_targets_${t}_${e}`}class Ec{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Es(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new x(s.error.code,s.error.message))),o?new Ec(e,n,s.state,i):(be("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class da{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new x(r.error.code,r.error.message))),i?new da(e,r.state,s):(be("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tc{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Sg();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=e1(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Tc(e,i):(be("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Mg{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Mg(n.clientId,n.onlineState):(be("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tp{constructor(){this.activeTargetIds=Sg()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ld{constructor(e,n,r,s,i){this.window=e,this._i=n,this.persistenceKey=r,this.fs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new le(Q),this.started=!1,this.ws=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ss=iw(this.persistenceKey,this.fs),this.bs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new Tp),this.Ds=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Cs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.vs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Fs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Ms=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.ki();for(const r of e){if(r===this.fs)continue;const s=this.getItem(iw(this.persistenceKey,r));if(s){const i=Tc.Es(r,s);i&&(this.ys=this.ys.insert(i.clientId,i))}}this.xs();const n=this.storage.getItem(this.Fs);if(n){const r=this.Os(n);r&&this.Ns(r)}for(const r of this.ws)this.ps(r);this.ws=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ys)}isActiveQueryTarget(e){let n=!1;return this.ys.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.ks(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Fd(this.persistenceKey,e));if(r){const s=da.Es(e,r);s&&(n=s.state)}}return this.qs.Rs(e),this.xs(),n}removeLocalQueryTarget(e){this.qs.Vs(e),this.xs()}isLocalQueryTarget(e){return this.qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fd(this.persistenceKey,e))}updateQueryState(e,n,r){this.Qs(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.ks(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Ks(e)}notifyBundleLoaded(e){this.$s(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return k("SharedClientState","READ",e,n),n}setItem(e,n){k("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ps(e){const n=e;if(n.storageArea===this.storage){if(k("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void be("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ds.test(n.key)){if(n.newValue==null){const r=this.Us(n.key);return this.Ws(r,null)}{const r=this.Gs(n.key,n.newValue);if(r)return this.Ws(r.clientId,r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(this.vs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(n.key===this.Fs){if(n.newValue!==null){const r=this.Os(n.newValue);if(r)return this.Ns(r)}}else if(n.key===this.bs){const r=function(i){let o=At.ae;if(i!=null)try{const a=JSON.parse(i);U(typeof a=="number"),o=a}catch(a){be("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==At.ae&&this.sequenceNumberHandler(r)}else if(n.key===this.Ms){const r=this.Ys(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Zs(s)))}}}else this.ws.push(n)})}}get qs(){return this.ys.get(this.fs)}xs(){this.setItem(this.Ss,this.qs.As())}Ls(e,n,r){const s=new Ec(this.currentUser,e,n,r),i=ow(this.persistenceKey,this.currentUser,e);this.setItem(i,s.As())}ks(e){const n=ow(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Ks(e){const n={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(n))}Qs(e,n,r){const s=Fd(this.persistenceKey,e),i=new da(e,n,r);this.setItem(s,i.As())}$s(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Ms,n)}Us(e){const n=this.Ds.exec(e);return n?n[1]:null}Gs(e,n){const r=this.Us(e);return Tc.Es(r,n)}zs(e,n){const r=this.Cs.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Ec.Es(new ze(i),s,n)}Hs(e,n){const r=this.vs.exec(e),s=Number(r[1]);return da.Es(s,n)}Os(e){return Mg.Es(e)}Ys(e){return JSON.parse(e)}async js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Xs(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Js(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}Ws(e,n){const r=n?this.ys.insert(e,n):this.ys.remove(e),s=this.Bs(this.ys),i=this.Bs(r),o=[],a=[];return i.forEach(u=>{s.has(u)||o.push(u)}),s.forEach(u=>{i.has(u)||a.push(u)}),this.syncEngine.no(o,a).then(()=>{this.ys=r})}Ns(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let n=Sg();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class fS{constructor(){this.ro=new Tp,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new Tp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{so(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sl=null;function Md(){return sl===null?sl=function(){return 268435456+Math.round(2147483648*Math.random())}():sl++,"0x"+sl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class hO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${s}/databases/${i}`,this.wo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get So(){return!1}bo(n,r,s,i,o){const a=Md(),u=this.Do(n,r);k("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(l,i,o),this.vo(n,u,l,s).then(c=>(k("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw un("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",s),c})}Fo(n,r,s,i,o,a){return this.bo(n,r,s,i,o)}Co(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}Do(n,r){const s=lO[n];return`${this.po}/v1/${r}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const i=Md();return new Promise((o,a)=>{const u=new ab;u.setWithCredentials(!0),u.listenOnce(ib.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nd.NO_ERROR:const c=u.getResponseJson();k(ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(c)),o(c);break;case Nd.TIMEOUT:k(ot,`RPC '${e}' ${i} timed out`),a(new x(T.DEADLINE_EXCEEDED,"Request time out"));break;case Nd.HTTP_ERROR:const h=u.getStatus();if(k(ot,`RPC '${e}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(v){const g=v.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(g)>=0?g:T.UNKNOWN}(f.status);a(new x(p,f.message))}else a(new x(T.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new x(T.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{k(ot,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(s);k(ot,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",l,r,15)})}Mo(e,n,r){const s=Md(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rb(),a=sb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=i.join("");k(ot,`Creating RPC '${e}' stream ${s}: ${c}`,u);const h=o.createWebChannel(c,u);let d=!1,f=!1;const p=new cO({ho:v=>{f?k(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(d||(k(ot,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),k(ot,`RPC '${e}' stream ${s} sending:`,v),h.send(v))},Po:()=>h.close()}),_=(v,g,m)=>{v.listen(g,y=>{try{m(y)}catch(w){setTimeout(()=>{throw w},0)}})};return _(h,Zu.EventType.OPEN,()=>{f||k(ot,`RPC '${e}' stream ${s} transport opened.`)}),_(h,Zu.EventType.CLOSE,()=>{f||(f=!0,k(ot,`RPC '${e}' stream ${s} transport closed`),p.mo())}),_(h,Zu.EventType.ERROR,v=>{f||(f=!0,un(ot,`RPC '${e}' stream ${s} transport errored:`,v),p.mo(new x(T.UNAVAILABLE,"The operation could not be completed")))}),_(h,Zu.EventType.MESSAGE,v=>{var g;if(!f){const m=v.data[0];U(!!m);const y=m,w=y.error||((g=y[0])===null||g===void 0?void 0:g.error);if(w){k(ot,`RPC '${e}' stream ${s} received error:`,w);const P=w.status;let S=function(j){const $=Ve[j];if($!==void 0)return N1($)}(P),R=w.message;S===void 0&&(S=T.INTERNAL,R="Unknown error status: "+P+" with message "+w.message),f=!0,p.mo(new x(S,R)),h.close()}else k(ot,`RPC '${e}' stream ${s} received:`,m),p.fo(m)}}),_(a,ob.STAT_EVENT,v=>{v.stat===pv.PROXY?k(ot,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===pv.NOPROXY&&k(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.Vo()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(){return typeof window<"u"?window:null}function Pl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){return new vN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n,r=1e3,s=1.5,i=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=s,this.No=i,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),s=Math.max(0,n-r);s>0&&k("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,s,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r,s,i,o,a,u){this._i=e,this.Uo=r,this.Wo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new Ug(e,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(e,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,e!==4?this.Ho.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(be(n.toString()),be("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Go===n&&this.__(r,s)},r=>{e(()=>{const s=new x(T.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(s)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(s=>{r(()=>this.a_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dO extends mS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}u_(e,n){return this.connection.Mo("Listen",e,n)}onMessage(e){this.Ho.reset();const n=TN(this.serializer,e),r=function(i){if(!("targetChange"in i))return M.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?M.min():o.readTime?Ne(o.readTime):M.min()}(e);return this.listener.c_(n,r)}l_(e){const n={};n.database=Wa(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=pc(u)?{documents:j1(i,u)}:{query:z1(i,u)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=L1(i,o.resumeToken);const l=gp(i,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(M.min())>0){a.readTime=Hi(i,o.snapshotVersion.toTimestamp());const l=gp(i,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=SN(this.serializer,e);r&&(n.labels=r),this.n_(n)}h_(e){const n={};n.database=Wa(this.serializer),n.removeTarget=e,this.n_(n)}}class fO extends mS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,n){return this.connection.Mo("Write",e,n)}onMessage(e){if(U(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const n=IN(e.writeResults,e.commitTime),r=Ne(e.commitTime);return this.listener.T_(r,n)}return U(!e.writeResults||e.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=Wa(this.serializer),this.n_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ya(this.serializer,r))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.R_=!1}V_(){if(this.R_)throw new x(T.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.bo(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(T.UNKNOWN,s.toString())})}Fo(e,n,r,s){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Fo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new x(T.UNKNOWN,i.toString())})}terminate(){this.R_=!0}}class mO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,e==="Online"&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(be(n),this.p_=!1):k("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=i,this.x_.so(o=>{r.enqueueAndForget(async()=>{Zr(this)&&(k("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=N(u);l.F_.add(4),await mo(l),l.O_.set("Unknown"),l.F_.delete(4),await Ru(l)}(this))})}),this.O_=new mO(r,s)}}async function Ru(t){if(Zr(t))for(const e of t.M_)await e(!0)}async function mo(t){for(const e of t.M_)await e(!1)}function Eh(t,e){const n=N(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),jg(n)?$g(n):yo(n).Yo()&&Bg(n,e))}function Xa(t,e){const n=N(t),r=yo(n);n.v_.delete(e),r.Yo()&&gS(n,e),n.v_.size===0&&(r.Yo()?r.e_():Zr(n)&&n.O_.set("Unknown"))}function Bg(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(M.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(t).l_(e)}function gS(t,e){t.N_.Le(e),yo(t).h_(e)}function $g(t){t.N_=new mN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),yo(t).start(),t.O_.y_()}function jg(t){return Zr(t)&&!yo(t).Jo()&&t.v_.size>0}function Zr(t){return N(t).F_.size===0}function yS(t){t.N_=void 0}async function yO(t){t.v_.forEach((e,n)=>{Bg(t,e)})}async function _O(t,e){yS(t),jg(t)?(t.O_.b_(e),$g(t)):t.O_.set("Unknown")}async function vO(t,e,n){if(t.O_.set("Online"),e instanceof F1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.v_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.v_.delete(a),s.N_.removeTarget(a))}(t,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ic(t,r)}else if(e instanceof Al?t.N_.Ge(e):e instanceof V1?t.N_.Xe(e):t.N_.He(e),!n.isEqual(M.min()))try{const r=await uS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.N_._t(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=i.v_.get(l);c&&i.v_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=i.v_.get(u);if(!c)return;i.v_.set(u,c.withResumeToken(Be.EMPTY_BYTE_STRING,c.snapshotVersion)),gS(i,u);const h=new Un(c.target,u,l,c.sequenceNumber);Bg(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){k("RemoteStore","Failed to raise snapshot:",r),await Ic(t,r)}}async function Ic(t,e,n){if(!Xr(e))throw e;t.F_.add(1),await mo(t),t.O_.set("Offline"),n||(n=()=>uS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{k("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await Ru(t)})}function _S(t,e){return e().catch(n=>Ic(t,n,e))}async function go(t){const e=N(t),n=$r(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;wO(e);)try{const s=await iO(e.localStore,r);if(s===null){e.C_.length===0&&n.e_();break}r=s.batchId,EO(e,s)}catch(s){await Ic(e,s)}vS(e)&&wS(e)}function wO(t){return Zr(t)&&t.C_.length<10}function EO(t,e){t.C_.push(e);const n=$r(t);n.Yo()&&n.I_&&n.d_(e.mutations)}function vS(t){return Zr(t)&&!$r(t).Jo()&&t.C_.length>0}function wS(t){$r(t).start()}async function TO(t){$r(t).A_()}async function IO(t){const e=$r(t);for(const n of t.C_)e.d_(n.mutations)}async function SO(t,e,n){const r=t.C_.shift(),s=Pg.from(r,e,n);await _S(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await go(t)}async function RO(t,e){e&&$r(t).I_&&await async function(r,s){if(function(o){return b1(o)&&o!==T.ABORTED}(s.code)){const i=r.C_.shift();$r(r).Xo(),await _S(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await go(r)}}(t,e),vS(t)&&wS(t)}async function uw(t,e){const n=N(t);n.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");const r=Zr(n);n.F_.add(3),await mo(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await Ru(n)}async function Ip(t,e){const n=N(t);e?(n.F_.delete(2),await Ru(n)):e||(n.F_.add(2),await mo(n),n.O_.set("Unknown"))}function yo(t){return t.B_||(t.B_=function(n,r,s){const i=N(n);return i.V_(),new dO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Io:yO.bind(null,t),Eo:_O.bind(null,t),c_:vO.bind(null,t)}),t.M_.push(async e=>{e?(t.B_.Xo(),jg(t)?$g(t):t.O_.set("Unknown")):(await t.B_.stop(),yS(t))})),t.B_}function $r(t){return t.L_||(t.L_=function(n,r,s){const i=N(n);return i.V_(),new fO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Io:TO.bind(null,t),Eo:RO.bind(null,t),E_:IO.bind(null,t),T_:SO.bind(null,t)}),t.M_.push(async e=>{e?(t.L_.Xo(),await go(t)):(await t.L_.stop(),t.C_.length>0&&(k("RemoteStore",`Stopping write stream with ${t.C_.length} pending writes`),t.C_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new zg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _o(t,e){if(be("AsyncQueue",`${e}: ${t}`),Xr(t))return new x(T.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=Ho(),this.sortedSet=new le(this.comparator)}static emptySet(e){return new Ni(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ni;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.k_=new le(b.comparator)}track(e){const n=e.doc.key,r=this.k_.get(n);r?e.type!==0&&r.type===3?this.k_=this.k_.insert(n,e):e.type===3&&r.type!==1?this.k_=this.k_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.k_=this.k_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.k_=this.k_.remove(n):e.type===1&&r.type===2?this.k_=this.k_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):V():this.k_=this.k_.insert(n,e)}q_(){const e=[];return this.k_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xi{constructor(e,n,r,s,i,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xi(e,n,Ni.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.Q_=void 0,this.listeners=[]}}class PO{constructor(){this.queries=new Jr(e=>y1(e),vu),this.onlineState="Unknown",this.K_=new Set}}async function qg(t,e){const n=N(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new AO),s)try{i.Q_=await n.onListen(r)}catch(o){const a=_o(o,`Initialization of query '${oi(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.U_(n.onlineState),i.Q_&&e.W_(i.Q_)&&Kg(n)}async function Qg(t,e){const n=N(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function CO(t,e){const n=N(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.W_(s)&&(r=!0);o.Q_=s}}r&&Kg(n)}function xO(t,e,n){const r=N(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Kg(t){t.K_.forEach(e=>{e.next()})}class Gg{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.serializer=e}Is(e){return Sn(this.serializer,e)}ds(e){return e.metadata.exists?$1(this.serializer,e.document,!1):de.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ne(e)}}class DO{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ES(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const r=ee.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,r=new cw(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.Is(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||K()).add(i);n.set(o,a)}}return n}async complete(){const e=await oO(this.localStore,new cw(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(const r of this.queries)await aO(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function ES(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.key=e}}class IS{constructor(e){this.key=e}}class SS{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=K(),this.mutatedKeys=K(),this.ua=v1(e),this.ca=new Ni(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new lw,s=n?n.ca:this.ca;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,l=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const d=s.get(c),f=wu(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;d&&f?d.data.isEqual(f.data)?p!==_&&(r.track({type:3,doc:f}),v=!0):this.Ia(d,f)||(r.track({type:2,doc:f}),v=!0,(u&&this.ua(f,u)>0||l&&this.ua(f,l)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),v=!0):d&&!f&&(r.track({type:1,doc:d}),v=!0,(u||l)&&(a=!0)),v&&(f?(o=o.add(f),i=_?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{ca:o,Pa:r,es:a,mutatedKeys:i}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const i=e.Pa.q_();i.sort((l,c)=>function(d,f){const p=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return p(d)-p(f)}(l.type,c.type)||this.ua(l.doc,c.doc)),this.da(r);const o=n?this.Ta():[],a=this.aa.size===0&&this.current?1:0,u=a!==this._a;return this._a=a,i.length!==0||u?{snapshot:new Xi(this.query,e.ca,s,i,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new lw,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=K(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new IS(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new TS(r))}),n}Ra(e){this.oa=e.Ps,this.aa=K();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Xi.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class bO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NO{constructor(e){this.key=e,this.ma=!1}}class OO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Jr(a=>y1(a),vu),this.pa=new Map,this.ya=new Set,this.wa=new le(b.comparator),this.Sa=new Map,this.ba=new Og,this.Da={},this.Ca=new Map,this.va=Us.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function VO(t,e){const n=Jg(t);let r,s;const i=n.ga.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await Wi(n.localStore,vt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await Hg(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Eh(n.remoteStore,o)}return s}async function Hg(t,e,n,r,s){t.Ma=(h,d,f)=>async function(_,v,g,m){let y=v.view.ha(g);y.es&&(y=await wc(_.localStore,v.query,!1).then(({documents:S})=>v.view.ha(S,y)));const w=m&&m.targetChanges.get(v.targetId),P=v.view.applyChanges(y,_.isPrimaryClient,w);return Sp(_,v.targetId,P.Ea),P.snapshot}(t,h,d,f);const i=await wc(t.localStore,e,!0),o=new SS(e,i.Ps),a=o.ha(i.documents),u=Iu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),l=o.applyChanges(a,t.isPrimaryClient,u);Sp(t,n,l.Ea);const c=new bO(e,n,o);return t.ga.set(e,c),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}async function FO(t,e){const n=N(t),r=n.ga.get(e),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(i=>!vu(i,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Yi(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Xa(n.remoteStore,r.targetId),Ji(n,r.targetId)}).catch(Yr)):(Ji(n,r.targetId),await Yi(n.localStore,r.targetId,!0))}async function LO(t,e,n){const r=Zg(t);try{const s=await function(o,a){const u=N(o),l=ye.now(),c=a.reduce((f,p)=>f.add(p.key),K());let h,d;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Ct(),_=K();return u._s.getEntries(f,c).next(v=>{p=v,p.forEach((g,m)=>{m.isValidDocument()||(_=_.add(g))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,p)).next(v=>{h=v;const g=[];for(const m of a){const y=dN(m,h.get(m.key).overlayedDocument);y!=null&&g.push(new Zn(m.key,y,u1(y.value.mapValue),ge.exists(!0)))}return u.mutationQueue.addMutationBatch(f,l,g,a)}).next(v=>{d=v;const g=v.applyToLocalDocumentSet(h,_);return u.documentOverlayCache.saveOverlays(f,v.batchId,g)})}).then(()=>({batchId:d.batchId,changes:E1(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let l=o.Da[o.currentUser.toKey()];l||(l=new le(Q)),l=l.insert(a,u),o.Da[o.currentUser.toKey()]=l}(r,s.batchId,n),await er(r,s.changes),await go(r.remoteStore)}catch(s){const i=_o(s,"Failed to persist write");n.reject(i)}}async function RS(t,e){const n=N(t);try{const r=await sO(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Sa.get(i);o&&(U(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?U(o.ma):s.removedDocuments.size>0&&(U(o.ma),o.ma=!1))}),await er(n,r,e)}catch(r){await Yr(r)}}function hw(t,e,n){const r=N(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((i,o)=>{const a=o.view.U_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=N(o);u.onlineState=a;let l=!1;u.queries.forEach((c,h)=>{for(const d of h.listeners)d.U_(a)&&(l=!0)}),l&&Kg(u)}(r.eventManager,e),s.length&&r.fa.c_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MO(t,e,n){const r=N(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Sa.get(e),i=s&&s.key;if(i){let o=new le(b.comparator);o=o.insert(i,de.newNoDocument(i,M.min()));const a=K().add(i),u=new Tu(M.min(),new Map,new le(Q),o,a);await RS(r,u),r.wa=r.wa.remove(i),r.Sa.delete(e),Xg(r)}else await Yi(r.localStore,e,!1).then(()=>Ji(r,e,n)).catch(Yr)}async function UO(t,e){const n=N(t),r=e.batch.batchId;try{const s=await rO(n.localStore,e);Yg(n,r,null),Wg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await er(n,s)}catch(s){await Yr(s)}}async function BO(t,e,n){const r=N(t);try{const s=await function(o,a){const u=N(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(h=>(U(h!==null),c=h.keys(),u.mutationQueue.removeMutationBatch(l,h))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,e);Yg(r,e,n),Wg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await er(r,s)}catch(s){await Yr(s)}}async function $O(t,e){const n=N(t);Zr(n.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=N(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();const s=n.Ca.get(r)||[];s.push(e),n.Ca.set(r,s)}catch(r){const s=_o(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Wg(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function Yg(t,e,n){const r=N(t);let s=r.Da[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Da[r.currentUser.toKey()]=s}}function Ji(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach(r=>{t.ba.containsKey(r)||AS(t,r)})}function AS(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(Xa(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Xg(t))}function Sp(t,e,n){for(const r of n)r instanceof TS?(t.ba.addReference(r.key,e),jO(t,r)):r instanceof IS?(k("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||AS(t,r.key)):V()}function jO(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(k("SyncEngine","New document in limbo: "+n),t.ya.add(r),Xg(t))}function Xg(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new b(ee.fromString(e)),r=t.va.next();t.Sa.set(r,new NO(n)),t.wa=t.wa.insert(n,r),Eh(t.remoteStore,new Un(vt(ho(n.path)),r,"TargetPurposeLimboResolution",At.ae))}}async function er(t,e,n){const r=N(t),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,u)=>{o.push(r.Ma(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){s.push(l);const c=Lg.$i(u.targetId,l);i.push(c)}}))}),await Promise.all(o),r.fa.c_(s),await async function(u,l){const c=N(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>E.forEach(l,d=>E.forEach(d.Qi,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>E.forEach(d.Ki,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Xr(h))throw h;k("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const f=c.rs.get(d),p=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(p);c.rs=c.rs.insert(d,_)}}}(r.localStore,i))}async function zO(t,e){const n=N(t);if(!n.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());const r=await aS(n.localStore,e);n.currentUser=e,function(i,o){i.Ca.forEach(a=>{a.forEach(u=>{u.reject(new x(T.CANCELLED,o))})}),i.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await er(n,r.cs)}}function qO(t,e){const n=N(t),r=n.Sa.get(e);if(r&&r.ma)return K().add(r.key);{let s=K();const i=n.pa.get(e);if(!i)return s;for(const o of i){const a=n.ga.get(o);s=s.unionWith(a.view.la)}return s}}async function QO(t,e){const n=N(t),r=await wc(n.localStore,e.query,!0),s=e.view.Ra(r);return n.isPrimaryClient&&Sp(n,e.targetId,s.Ea),s}async function KO(t,e){const n=N(t);return hS(n.localStore,e).then(r=>er(n,r))}async function GO(t,e,n,r){const s=N(t),i=await function(a,u){const l=N(a),c=N(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>c.Fn(h,u).next(d=>d?l.localDocuments.getDocuments(h,d):E.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await go(s.remoteStore):n==="acknowledged"||n==="rejected"?(Yg(s,e,r||null),Wg(s,e),function(a,u){N(N(a).mutationQueue).xn(u)}(s.localStore,e)):V(),await er(s,i)):k("SyncEngine","Cannot apply mutation batch with id: "+e)}async function HO(t,e){const n=N(t);if(Jg(n),Zg(n),e===!0&&n.Fa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await dw(n,r.toArray());n.Fa=!0,await Ip(n.remoteStore,!0);for(const i of s)Eh(n.remoteStore,i)}else if(e===!1&&n.Fa!==!1){const r=[];let s=Promise.resolve();n.pa.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Ji(n,o),Yi(n.localStore,o,!0))),Xa(n.remoteStore,o)}),await s,await dw(n,r),function(o){const a=N(o);a.Sa.forEach((u,l)=>{Xa(a.remoteStore,l)}),a.ba.gr(),a.Sa=new Map,a.wa=new le(b.comparator)}(n),n.Fa=!1,await Ip(n.remoteStore,!1)}}async function dw(t,e,n){const r=N(t),s=[],i=[];for(const o of e){let a;const u=r.pa.get(o);if(u&&u.length!==0){a=await Wi(r.localStore,vt(u[0]));for(const l of u){const c=r.ga.get(l),h=await QO(r,c);h.snapshot&&i.push(h.snapshot)}}else{const l=await cS(r.localStore,o);a=await Wi(r.localStore,l),await Hg(r,PS(l),o,!1,a.resumeToken)}s.push(a)}return r.fa.c_(i),s}function PS(t){return g1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function WO(t){return function(n){return N(N(n).persistence).ki()}(N(t).localStore)}async function YO(t,e,n,r){const s=N(t);if(s.Fa)return void k("SyncEngine","Ignoring unexpected query state notification.");const i=s.pa.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await hS(s.localStore,_1(i[0])),a=Tu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Be.EMPTY_BYTE_STRING);await er(s,o,a);break}case"rejected":await Yi(s.localStore,e,!0),Ji(s,e,r);break;default:V()}}async function XO(t,e,n){const r=Jg(t);if(r.Fa){for(const s of e){if(r.pa.has(s)){k("SyncEngine","Adding an already active target "+s);continue}const i=await cS(r.localStore,s),o=await Wi(r.localStore,i);await Hg(r,PS(i),o.targetId,!1,o.resumeToken),Eh(r.remoteStore,o)}for(const s of n)r.pa.has(s)&&await Yi(r.localStore,s,!1).then(()=>{Xa(r.remoteStore,s),Ji(r,s)}).catch(Yr)}}function Jg(t){const e=N(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MO.bind(null,e),e.fa.c_=CO.bind(null,e.eventManager),e.fa.xa=xO.bind(null,e.eventManager),e}function Zg(t){const e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BO.bind(null,e),e}function JO(t,e,n){const r=N(t);(async function(i,o,a){try{const u=await o.getMetadata();if(await function(f,p){const _=N(f),v=Ne(p.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",g=>_.Ur.getBundleMetadata(g,p.id)).then(g=>!!g&&g.createTime.compareTo(v)>=0)}(i.localStore,u))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(ES(u));const l=new DO(u,i.localStore,o.serializer);let c=await o.Oa();for(;c;){const d=await l.na(c);d&&a._updateProgress(d),c=await o.Oa()}const h=await l.complete();return await er(i,h.sa,void 0),await function(f,p){const _=N(f);return _.persistence.runTransaction("Save bundle","readwrite",v=>_.Ur.saveBundleMetadata(v,p))}(i.localStore,u),a._completeWith(h.progress),Promise.resolve(h.ia)}catch(u){return un("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class Rp{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return oS(this.persistence,new iS,e.initialUser,this.serializer)}createPersistence(e){return new sS(wh.Jr,this.serializer)}createSharedClientState(e){return new fS}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class CS extends Rp{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Zg(this.Na.syncEngine),await go(this.Na.remoteStore),await this.persistence.gi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return oS(this.persistence,new iS,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new BN(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Ib(n,this.persistence);return new Tb(e.asyncQueue,r)}createPersistence(e){const n=Fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new Vg(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,pS(),Pl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new fS}}class ZO extends CS{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Na.syncEngine;this.sharedClientState instanceof Ld&&(this.sharedClientState.syncEngine={Xs:GO.bind(null,n),eo:YO.bind(null,n),no:XO.bind(null,n),ki:WO.bind(null,n),Zs:KO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.gi(async r=>{await HO(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=pS();if(!Ld.C(n))throw new x(T.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ld(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ey{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zO.bind(null,this.syncEngine),await Ip(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PO}()}createDatastore(e){const n=Su(e.databaseInfo.databaseId),r=function(i){return new hO(i)}(e.databaseInfo);return function(i,o,a,u){return new pO(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new gO(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hw(this.syncEngine,n,0),function(){return aw.C()?new aw:new uO}())}createSyncEngine(e,n){return function(s,i,o,a,u,l,c){const h=new OO(s,i,o,a,u,l);return c&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=N(n);k("RemoteStore","RemoteStore shutting down."),r.F_.add(5),await mo(r),r.x_.shutdown(),r.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):be("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Qe,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(e===null)return null;const n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);const s=await this.Ua(r);return new kO(JSON.parse(s),e.length+r)}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(this.buffer.length===0)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ga(){const e=await this.ka.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new x(T.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(s,i){const o=N(s),a=Wa(o.serializer)+"/documents",u={documents:i.map(d=>Ha(o.serializer,d))},l=await o.Fo("BatchGetDocuments",a,u,i.length),c=new Map;l.forEach(d=>{const f=EN(o.serializer,d);c.set(f.key.toString(),f)});const h=[];return i.forEach(d=>{const f=c.get(d.toString());U(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new po(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=b.fromPath(r);this.mutations.push(new Rg(s,this.precondition(s)))}),await async function(r,s){const i=N(r),o=Wa(i.serializer)+"/documents",a={writes:s.map(u=>Ya(i.serializer,u))};await i.bo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw V();n=M.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new x(T.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(M.min())?ge.exists(!1):ge.updateTime(n):ge.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(M.min()))throw new x(T.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ge.updateTime(n)}return ge.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.za=r.maxAttempts,this.Ho=new Ug(this.asyncQueue,"transaction_retry")}run(){this.za-=1,this.ja()}ja(){this.Ho.Qo(async()=>{const e=new tV(this.datastore),n=this.Ha(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Ja(s)}))}).catch(r=>{this.Ja(r)})})}Ha(e){try{const n=this.updateFunction(e);return!yu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ja(e){this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.ja(),Promise.resolve()))):this.deferred.reject(e)}Ya(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!b1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ze.UNAUTHENTICATED,this.clientId=HI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{k("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(k("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_o(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cl(t,e){t.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ap(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ty(t);k("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>uw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>uw(e.remoteStore,i)),t._onlineComponents=e}function xS(t){return t.name==="FirebaseError"?t.code===T.FAILED_PRECONDITION||t.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function ty(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!xS(n))throw n;un("Error using user provided cache. Falling back to memory cache: "+n),await Cl(t,new Rp)}}else k("FirestoreClient","Using default OfflineComponentProvider"),await Cl(t,new Rp);return t._offlineComponents}async function Ih(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),await Ap(t,t._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),await Ap(t,new ey))),t._onlineComponents}function kS(t){return ty(t).then(e=>e.persistence)}function ny(t){return ty(t).then(e=>e.localStore)}function DS(t){return Ih(t).then(e=>e.remoteStore)}function ry(t){return Ih(t).then(e=>e.syncEngine)}function sV(t){return Ih(t).then(e=>e.datastore)}async function Zi(t){const e=await Ih(t),n=e.eventManager;return n.onListen=VO.bind(null,e.syncEngine),n.onUnlisten=FO.bind(null,e.syncEngine),n}function iV(t){return t.asyncQueue.enqueue(async()=>{const e=await kS(t),n=await DS(t);return e.setNetworkEnabled(!0),function(s){const i=N(s);return i.F_.delete(0),Ru(i)}(n)})}function oV(t){return t.asyncQueue.enqueue(async()=>{const e=await kS(t),n=await DS(t);return e.setNetworkEnabled(!1),async function(s){const i=N(s);i.F_.add(0),await mo(i),i.O_.set("Offline")}(n)})}function aV(t,e){const n=new Qe;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await function(l,c){const h=N(l);return h.persistence.runTransaction("read document","readonly",d=>h.localDocuments.getDocument(d,c))}(s,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new x(T.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const u=_o(a,`Failed to get document '${i} from cache`);o.reject(u)}}(await ny(t),e,n)),n.promise}function bS(t,e,n={}){const r=new Qe;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,l){const c=new Th({next:d=>{o.enqueueAndForget(()=>Qg(i,h));const f=d.docs.has(a);!f&&d.fromCache?l.reject(new x(T.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&u&&u.source==="server"?l.reject(new x(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new Gg(ho(a.path),c,{includeMetadataChanges:!0,Z_:!0});return qg(i,h)}(await Zi(t),t.asyncQueue,e,n,r)),r.promise}function uV(t,e){const n=new Qe;return t.asyncQueue.enqueueAndForget(async()=>async function(s,i,o){try{const a=await wc(s,i,!0),u=new SS(i,a.Ps),l=u.ha(a.documents),c=u.applyChanges(l,!1);o.resolve(c.snapshot)}catch(a){const u=_o(a,`Failed to execute query '${i} against cache`);o.reject(u)}}(await ny(t),e,n)),n.promise}function NS(t,e,n={}){const r=new Qe;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,l){const c=new Th({next:d=>{o.enqueueAndForget(()=>Qg(i,h)),d.fromCache&&u.source==="server"?l.reject(new x(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new Gg(a,c,{includeMetadataChanges:!0,Z_:!0});return qg(i,h)}(await Zi(t),t.asyncQueue,e,n,r)),r.promise}function lV(t,e){const n=new Th(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,i){N(s).K_.add(i),i.next()}(await Zi(t),n)),()=>{n.La(),t.asyncQueue.enqueueAndForget(async()=>function(s,i){N(s).K_.delete(i)}(await Zi(t),n))}}function cV(t,e,n,r){const s=function(o,a){let u;return u=typeof o=="string"?O1().encode(o):o,function(c,h){return new eV(c,h)}(function(c,h){if(c instanceof Uint8Array)return fw(c,h);if(c instanceof ArrayBuffer)return fw(new Uint8Array(c),h);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Su(e));t.asyncQueue.enqueueAndForget(async()=>{JO(await ry(t),s,r)})}function hV(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const i=N(r);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ur.getNamedQuery(o,s))}(await ny(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e,n){if(!n)throw new x(T.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VS(t,e,n,r){if(e===!0&&r===!0)throw new x(T.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mw(t){if(!b.isDocumentKey(t))throw new x(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gw(t){if(b.isDocumentKey(t))throw new x(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":V()}function ne(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new x(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sh(t);throw new x(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function FS(t,e){if(e<=0)throw new x(T.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new x(T.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new x(T.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new x(T.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Au{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new x(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hb;switch(r.type){case"firstParty":return new mb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pw.get(n);r&&(k("ComponentProvider","Removing Datastore"),pw.delete(n),r.terminate())}(this),Promise.resolve()}}function dV(t,e,n,r={}){var s;const i=(t=ne(t,Au))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ze.MOCK_USER;else{a=DT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new x(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ze(l)}t._authCredentials=new db(new GI(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wt=class LS{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new LS(this.firestore,e,this._query)}},Te=class MS{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new MS(this.firestore,e,this._key)}},kr=class US extends wt{constructor(e,n,r){super(e,n,ho(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Te(this.firestore,null,new b(e))}withConverter(e){return new US(this.firestore,e,this._path)}};function BS(t,e,...n){if(t=oe(t),sy("collection","path",e),t instanceof Au){const r=ee.fromString(e,...n);return gw(r),new kr(t,null,r)}{if(!(t instanceof Te||t instanceof kr))throw new x(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ee.fromString(e,...n));return gw(r),new kr(t.firestore,null,r)}}function fV(t,e){if(t=ne(t,Au),sy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new x(T.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wt(t,null,function(r){return new Jn(ee.emptyPath(),r)}(e))}function Sc(t,e,...n){if(t=oe(t),arguments.length===1&&(e=HI.V()),sy("doc","path",e),t instanceof Au){const r=ee.fromString(e,...n);return mw(r),new Te(t,null,new b(r))}{if(!(t instanceof Te||t instanceof kr))throw new x(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ee.fromString(e,...n));return mw(r),new Te(t.firestore,t instanceof kr?t.converter:null,new b(r))}}function $S(t,e){return t=oe(t),e=oe(e),(t instanceof Te||t instanceof kr)&&(e instanceof Te||e instanceof kr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function jS(t,e){return t=oe(t),e=oe(e),t instanceof wt&&e instanceof wt&&t.firestore===e.firestore&&vu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new Ug(this,"async_queue_retry"),this.ou=()=>{const n=Pl();n&&k("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=Pl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=Pl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new Qe;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(e){if(!Xr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{this.nu=r,this.ru=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw be("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const s=zg.createAndSchedule(this,e,n,r,i=>this.cu(i));return this.tu.push(s),s}_u(){this.nu&&V()}verifyOperationInProgress(){}async lu(){let e;do e=this.Za,await e;while(e!==this.Za)}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}function Pp(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class mV{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=-1;let xe=class extends Au{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new pV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||zS(this),this._firestoreClient.terminate()}};function We(t){return t._firestoreClient||zS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function zS(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,l,c){return new qb(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,OS(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new rV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function yV(t,e){QS(t=ne(t,xe));const n=We(t);if(n._uninitializedComponentsProvider)throw new x(T.FAILED_PRECONDITION,"SDK cache is already specified.");un("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),s=new ey;return qS(n,s,new CS(s,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function _V(t){QS(t=ne(t,xe));const e=We(t);if(e._uninitializedComponentsProvider)throw new x(T.FAILED_PRECONDITION,"SDK cache is already specified.");un("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new ey;return qS(e,r,new ZO(r,n.cacheSizeBytes))}function qS(t,e,n){const r=new Qe;return t.asyncQueue.enqueue(async()=>{try{await Cl(t,n),await Ap(t,e),r.resolve()}catch(s){const i=s;if(!xS(i))throw i;un("Error enabling indexeddb cache. Falling back to memory cache: "+i),r.reject(i)}}).then(()=>r.promise)}function vV(t){if(t._initialized&&!t._terminated)throw new x(T.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qe;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!nn.C())return Promise.resolve();const s=r+"main";await nn.delete(s)}(Fg(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function wV(t){return function(n){const r=new Qe;return n.asyncQueue.enqueueAndForget(async()=>$O(await ry(n),r)),r.promise}(We(t=ne(t,xe)))}function EV(t){return iV(We(t=ne(t,xe)))}function TV(t){return oV(We(t=ne(t,xe)))}function IV(t,e){const n=We(t=ne(t,xe)),r=new mV;return cV(n,t._databaseId,e,r),r}function SV(t,e){return hV(We(t=ne(t,xe)),e).then(n=>n?new wt(t,null,n.query):null)}function QS(t){if(t._initialized||t._terminated)throw new x(T.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Be.fromBase64String(e))}catch(n){throw new x(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(Be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new x(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ks=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new x(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new x(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Q(this._lat,e._lat)||Q(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^__.*__$/;class AV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new fo(e,this.data,n,this.fieldTransforms)}}class KS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}class Ah{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.du(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new Ah(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Eu({path:r,Ru:!1});return s.Vu(e),s}mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Eu({path:r,Ru:!1});return s.du(),s}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return Rc(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(e.length===0)throw this.gu("Document fields must not be empty");if(GS(this.Tu)&&RV.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class PV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Su(e)}wu(e,n,r,s=!1){return new Ah({Tu:e,methodName:n,yu:r,path:Pe.emptyPath(),Ru:!1,pu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gs(t){const e=t._freezeSettings(),n=Su(t._databaseId);return new PV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ph(t,e,n,r,s,i={}){const o=t.wu(i.merge||i.mergeFields?2:0,e,n,s);uy("Data must be an object, but it was:",o,r);const a=YS(r,o);let u,l;if(i.merge)u=new Pt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const d=Cp(e,h,n);if(!o.contains(d))throw new x(T.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);JS(c,d)||c.push(d)}u=new Pt(c),l=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,l=o.fieldTransforms;return new AV(new et(a),u,l)}class Pu extends Ks{_toFieldTransform(e){if(e.Tu!==2)throw e.Tu===1?e.gu(`${this._methodName}() can only appear at the top level of your update data`):e.gu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pu}}function HS(t,e,n){return new Ah({Tu:3,yu:e.settings.yu,methodName:t._methodName,Ru:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iy extends Ks{_toFieldTransform(e){return new Eu(e.path,new Ki)}isEqual(e){return e instanceof iy}}class CV extends Ks{constructor(e,n){super(e),this.Su=n}_toFieldTransform(e){const n=HS(this,e,!0),r=this.Su.map(i=>Hs(i,n)),s=new Vs(r);return new Eu(e.path,s)}isEqual(e){return this===e}}class xV extends Ks{constructor(e,n){super(e),this.Su=n}_toFieldTransform(e){const n=HS(this,e,!0),r=this.Su.map(i=>Hs(i,n)),s=new Fs(r);return new Eu(e.path,s)}isEqual(e){return this===e}}class kV extends Ks{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=new Gi(e.serializer,R1(e.serializer,this.bu));return new Eu(e.path,n)}isEqual(e){return this===e}}function oy(t,e,n,r){const s=t.wu(1,e,n);uy("Data must be an object, but it was:",s,r);const i=[],o=et.empty();Qs(r,(u,l)=>{const c=ly(e,u,n);l=oe(l);const h=s.mu(c);if(l instanceof Pu)i.push(c);else{const d=Hs(l,h);d!=null&&(i.push(c),o.set(c,d))}});const a=new Pt(i);return new KS(o,a,s.fieldTransforms)}function ay(t,e,n,r,s,i){const o=t.wu(1,e,n),a=[Cp(e,r,n)],u=[s];if(i.length%2!=0)throw new x(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(Cp(e,i[d])),u.push(i[d+1]);const l=[],c=et.empty();for(let d=a.length-1;d>=0;--d)if(!JS(l,a[d])){const f=a[d];let p=u[d];p=oe(p);const _=o.mu(f);if(p instanceof Pu)l.push(f);else{const v=Hs(p,_);v!=null&&(l.push(f),c.set(f,v))}}const h=new Pt(l);return new KS(c,h,o.fieldTransforms)}function WS(t,e,n,r=!1){return Hs(n,t.wu(r?4:3,e))}function Hs(t,e){if(XS(t=oe(t)))return uy("Unsupported field value:",e,t),YS(t,e);if(t instanceof Ks)return function(r,s){if(!GS(s.Tu))throw s.gu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&e.Tu!==4)throw e.gu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=Hs(a,s.fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ye.fromDate(r);return{timestampValue:Hi(s.serializer,i)}}if(r instanceof ye){const i=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hi(s.serializer,i)}}if(r instanceof Rh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:L1(s.serializer,r._byteString)};if(r instanceof Te){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:kg(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.gu(`Unsupported field value: ${Sh(r)}`)}(t,e)}function YS(t,e){const n={};return i1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(t,(r,s)=>{const i=Hs(s,e.Au(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function XS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof Rh||t instanceof Pn||t instanceof Te||t instanceof Ks)}function uy(t,e,n){if(!XS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Sh(n);throw r==="an object"?e.gu(t+" a custom object"):e.gu(t+" "+r)}}function Cp(t,e,n){if((e=oe(e))instanceof jr)return e._internalPath;if(typeof e=="string")return ly(t,e);throw Rc("Field path arguments must be of type string or ",t,!1,void 0,n)}const DV=new RegExp("[~\\*/\\[\\]]");function ly(t,e,n){if(e.search(DV)>=0)throw Rc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jr(...e.split("."))._internalPath}catch{throw Rc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new x(T.INVALID_ARGUMENT,a+t+u)}function JS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ch("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bV extends Ja{data(){return super.data()}}function Ch(t,e){return typeof e=="string"?ly(t,e):e instanceof jr?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new x(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cy{}class Cu extends cy{}function or(t,e,...n){let r=[];e instanceof cy&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof hy).length,a=i.filter(u=>u instanceof xh).length;if(o>1||o>0&&a>0)throw new x(T.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class xh extends Cu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xh(e,n,r)}_apply(e){const n=this._parse(e);return tR(e._query,n),new wt(e.firestore,e.converter,mp(e._query,n))}_parse(e){const n=Gs(e.firestore);return function(i,o,a,u,l,c,h){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new x(T.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){vw(h,c);const f=[];for(const p of h)f.push(_w(u,i,p));d={arrayValue:{values:f}}}else d=_w(u,i,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||vw(h,c),d=WS(a,o,h,c==="in"||c==="not-in");return W.create(l,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function NV(t,e,n){const r=e,s=Ch("where",t);return xh._create(s,r,n)}class hy extends cy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:re.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)tR(o,u),o=mp(o,u)}(e._query,n),new wt(e.firestore,e.converter,mp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dy extends Cu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dy(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new x(T.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new x(T.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Di(i,o);return function(l,c){if(Tg(l)===null){const h=mh(l);h!==null&&nR(l,h,c.field)}}(s,a),a}(e._query,this._field,this._direction);return new wt(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Jn(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function OV(t,e="asc"){const n=e,r=Ch("orderBy",t);return dy._create(r,n)}class kh extends Cu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kh(e,n,r)}_apply(e){return new wt(e.firestore,e.converter,gc(e._query,this._limit,this._limitType))}}function VV(t){return FS("limit",t),kh._create("limit",t,"F")}function FV(t){return FS("limitToLast",t),kh._create("limitToLast",t,"L")}class Dh extends Cu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Dh(e,n,r)}_apply(e){const n=eR(e,this.type,this._docOrFields,this._inclusive);return new wt(e.firestore,e.converter,function(s,i){return new Jn(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function LV(...t){return Dh._create("startAt",t,!0)}function MV(...t){return Dh._create("startAfter",t,!1)}class bh extends Cu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new bh(e,n,r)}_apply(e){const n=eR(e,this.type,this._docOrFields,this._inclusive);return new wt(e.firestore,e.converter,function(s,i){return new Jn(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)}(e._query,n))}}function UV(...t){return bh._create("endBefore",t,!1)}function BV(...t){return bh._create("endAt",t,!0)}function eR(t,e,n,r){if(n[0]=oe(n[0]),n[0]instanceof Ja)return function(i,o,a,u,l){if(!u)throw new x(T.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const h of bi(i))if(h.field.isKeyField())c.push(Ns(o,u.key));else{const d=u.data.field(h.field);if(ph(d))throw new x(T.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const f=h.field.canonicalString();throw new x(T.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}c.push(d)}return new Br(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Gs(t.firestore);return function(o,a,u,l,c,h){const d=o.explicitOrderBy;if(c.length>d.length)throw new x(T.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<c.length;p++){const _=c[p];if(d[p].field.isKeyField()){if(typeof _!="string")throw new x(T.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof _}`);if(!Ig(o)&&_.indexOf("/")!==-1)throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${_}' contains a slash.`);const v=o.path.child(ee.fromString(_));if(!b.isDocumentKey(v))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const g=new b(v);f.push(Ns(a,g))}else{const v=WS(u,l,_);f.push(v)}}return new Br(f,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function _w(t,e,n){if(typeof(n=oe(n))=="string"){if(n==="")throw new x(T.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ig(e)&&n.indexOf("/")!==-1)throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ee.fromString(n));if(!b.isDocumentKey(r))throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ns(t,new b(r))}if(n instanceof Te)return Ns(t,n._key);throw new x(T.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(n)}.`)}function vw(t,e){if(!Array.isArray(t)||t.length===0)throw new x(T.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tR(t,e){if(e.isInequality()){const r=mh(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new x(T.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=Tg(t);i!==null&&nR(t,s,i)}const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new x(T.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(T.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function nR(t,e,n){if(!n.isEqual(e))throw new x(T.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class fy{convertValue(e,n="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Rh(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qa(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ee.fromString(e);U(G1(r));const s=new Mr(r.get(1),r.get(3)),i=new b(r.popFirst(5));return s.isEqual(n)||be(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class $V extends fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Te(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Yn=class extends Ja{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ch("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},fa=class extends Yn{data(e={}){return super.data(e)}},zr=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ys(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fa(this._firestore,this._userDataWriter,r.key,r,new ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new fa(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ys(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new fa(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ys(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:jV(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function jV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}function rR(t,e){return t instanceof Yn&&e instanceof Yn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof zr&&e instanceof zr&&t._firestore===e._firestore&&jS(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){t=ne(t,Te);const e=ne(t.firestore,xe);return bS(We(e),t._key).then(n=>py(e,t,n))}class Ws extends fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Te(this.firestore,null,n)}}function qV(t){t=ne(t,Te);const e=ne(t.firestore,xe),n=We(e),r=new Ws(e);return aV(n,t._key).then(s=>new Yn(e,r,t._key,s,new ys(s!==null&&s.hasLocalMutations,!0),t.converter))}function QV(t){t=ne(t,Te);const e=ne(t.firestore,xe);return bS(We(e),t._key,{source:"server"}).then(n=>py(e,t,n))}function KV(t){t=ne(t,wt);const e=ne(t.firestore,xe),n=We(e),r=new Ws(e);return ZS(t._query),NS(n,t._query).then(s=>new zr(e,r,t,s))}function GV(t){t=ne(t,wt);const e=ne(t.firestore,xe),n=We(e),r=new Ws(e);return uV(n,t._query).then(s=>new zr(e,r,t,s))}function HV(t){t=ne(t,wt);const e=ne(t.firestore,xe),n=We(e),r=new Ws(e);return NS(n,t._query,{source:"server"}).then(s=>new zr(e,r,t,s))}function ww(t,e,n){t=ne(t,Te);const r=ne(t.firestore,xe),s=Nh(t.converter,e,n);return xu(r,[Ph(Gs(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ge.none())])}function Ew(t,e,n,...r){t=ne(t,Te);const s=ne(t.firestore,xe),i=Gs(s);let o;return o=typeof(e=oe(e))=="string"||e instanceof jr?ay(i,"updateDoc",t._key,e,n,r):oy(i,"updateDoc",t._key,e),xu(s,[o.toMutation(t._key,ge.exists(!0))])}function WV(t){return xu(ne(t.firestore,xe),[new po(t._key,ge.none())])}function YV(t,e){const n=ne(t.firestore,xe),r=Sc(t),s=Nh(t.converter,e);return xu(n,[Ph(Gs(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ge.exists(!1))]).then(()=>r)}function sR(t,...e){var n,r,s;t=oe(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Pp(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Pp(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let u,l,c;if(t instanceof Te)l=ne(t.firestore,xe),c=ho(t._key.path),u={next:h=>{e[o]&&e[o](py(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ne(t,wt);l=ne(h.firestore,xe),c=h._query;const d=new Ws(l);u={next:f=>{e[o]&&e[o](new zr(l,d,h,f))},error:e[o+1],complete:e[o+2]},ZS(t._query)}return function(d,f,p,_){const v=new Th(_),g=new Gg(f,v,p);return d.asyncQueue.enqueueAndForget(async()=>qg(await Zi(d),g)),()=>{v.La(),d.asyncQueue.enqueueAndForget(async()=>Qg(await Zi(d),g))}}(We(l),c,a,u)}function XV(t,e){return lV(We(t=ne(t,xe)),Pp(e)?e:{next:e})}function xu(t,e){return function(r,s){const i=new Qe;return r.asyncQueue.enqueueAndForget(async()=>LO(await ry(r),s,i)),i.promise}(We(t),e)}function py(t,e,n){const r=n.docs.get(e._key),s=new Ws(t);return new Yn(t,s,e._key,r,new ys(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZV=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gs(e)}set(e,n,r){this._verifyNotCommitted();const s=pr(e,this._firestore),i=Nh(s.converter,n,r),o=Ph(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,ge.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=pr(e,this._firestore);let o;return o=typeof(n=oe(n))=="string"||n instanceof jr?ay(this._dataReader,"WriteBatch.update",i._key,n,r,s):oy(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,ge.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=pr(e,this._firestore);return this._mutations=this._mutations.concat(new po(n._key,ge.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new x(T.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function pr(t,e){if((t=oe(t)).firestore!==e)throw new x(T.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e2=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Gs(n)}get(n){const r=pr(n,this._firestore),s=new $V(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return V();const o=i[0];if(o.isFoundDocument())return new Ja(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new Ja(this._firestore,s,r._key,null,r.converter);throw V()})}set(n,r,s){const i=pr(n,this._firestore),o=Nh(i.converter,r,s),a=Ph(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=pr(n,this._firestore);let a;return a=typeof(r=oe(r))=="string"||r instanceof jr?ay(this._dataReader,"Transaction.update",o._key,r,s,i):oy(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=pr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=pr(e,this._firestore),r=new Ws(this._firestore);return super.get(e).then(s=>new Yn(this._firestore,r,n._key,s._document,new ys(!1,!1),n.converter))}};function t2(t,e,n){t=ne(t,xe);const r=Object.assign(Object.assign({},JV),n);return function(i){if(i.maxAttempts<1)throw new x(T.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const u=new Qe;return i.asyncQueue.enqueueAndForget(async()=>{const l=await sV(i);new nV(i.asyncQueue,l,a,o,u).run()}),u.promise}(We(t),s=>e(new e2(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){return new Pu("deleteField")}function r2(){return new iy("serverTimestamp")}function s2(...t){return new CV("arrayUnion",t)}function i2(...t){return new xV("arrayRemove",t)}function o2(t){return new kV("increment",t)}(function(e,n=!0){(function(s){co=s})(Yc),Ds(new Hn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new xe(new fb(r.getProvider("auth-internal")),new yb(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new x(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mr(l.options.projectId,c)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),In(mv,"4.2.0",e),In(mv,"4.2.0","esm2017")})();const a2={apiKey:"AIzaSyD7w6wRVPsf0DaH2YARMaFKXWJHjPsSd3s",authDomain:"pokemon-go-gym.firebaseapp.com",projectId:"pokemon-go-gym",storageBucket:"pokemon-go-gym.appspot.com",messagingSenderId:"48932195856",appId:"1:48932195856:web:93f21318228a7976e34495"};ao.initializeApp(a2);const u2="@firebase/firestore-compat",l2="0.3.18";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new x("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){if(typeof Uint8Array>"u")throw new x("unimplemented","Uint8Arrays are not available in this environment.")}function Iw(){if(!jb())throw new x("unimplemented","Blobs are unavailable in Firestore in this environment.")}let iR=class xp{constructor(e){this._delegate=e}static fromBase64String(e){return Iw(),new xp(Pn.fromBase64String(e))}static fromUint8Array(e){return Tw(),new xp(Pn.fromUint8Array(e))}toBase64(){return Iw(),this._delegate.toBase64()}toUint8Array(){return Tw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t){return c2(t,["next","error","complete"])}function c2(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{enableIndexedDbPersistence(e,n){return yV(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return _V(e._delegate)}clearIndexedDbPersistence(e){return vV(e._delegate)}}class oR{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&un("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){dV(this._delegate,e,n,r)}enableNetwork(){return EV(this._delegate)}disableNetwork(){return TV(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VS("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return wV(this._delegate)}onSnapshotsInSync(e){return XV(this._delegate,e)}get app(){if(!this._appCompat)throw new x("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new eo(this,BS(this._delegate,e))}catch(n){throw pt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Qt(this,Sc(this._delegate,e))}catch(n){throw pt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tu(this,fV(this._delegate,e))}catch(n){throw pt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return t2(this._delegate,n=>e(new aR(this,n)))}batch(){return We(this._delegate),new uR(new ZV(this._delegate,e=>xu(this._delegate,e)))}loadBundle(e){return IV(this._delegate,e)}namedQuery(e){return SV(this._delegate,e).then(n=>n?new tu(this,n):null)}}class Oh extends fy{constructor(e){super(),this.firestore=e}convertBytes(e){return new iR(new Pn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Qt.forKey(n,this.firestore,null)}}function d2(t){lb(t)}class aR{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Oh(e)}get(e){const n=_s(e);return this._delegate.get(n).then(r=>new Za(this._firestore,new Yn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=_s(e);return r?(my("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=_s(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=_s(e);return this._delegate.delete(n),this}}class uR{constructor(e){this._delegate=e}set(e,n,r){const s=_s(e);return r?(my("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=_s(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=_s(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Bs{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new fa(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eu(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Bs.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Bs(e,new Oh(e),n),s.set(n,i)),i}}Bs.INSTANCES=new WeakMap;class Qt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Oh(e)}static forPath(e,n,r){if(e.length%2!==0)throw new x("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qt(n,new Te(n._delegate,r,new b(e)))}static forKey(e,n,r){return new Qt(n,new Te(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new eo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new eo(this.firestore,BS(this._delegate,e))}catch(n){throw pt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=oe(e),e instanceof Te?$S(this._delegate,e):!1}set(e,n){n=my("DocumentReference.set",n);try{return n?ww(this._delegate,e,n):ww(this._delegate,e)}catch(r){throw pt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Ew(this._delegate,e):Ew(this._delegate,e,n,...r)}catch(s){throw pt(s,"updateDoc()","DocumentReference.update()")}}delete(){return WV(this._delegate)}onSnapshot(...e){const n=lR(e),r=cR(e,s=>new Za(this.firestore,new Yn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return sR(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=qV(this._delegate):(e==null?void 0:e.source)==="server"?n=QV(this._delegate):n=zV(this._delegate),n.then(r=>new Za(this.firestore,new Yn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qt(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pt(t,e,n){return t.message=t.message.replace(e,n),t}function lR(t){for(const e of t)if(typeof e=="object"&&!kp(e))return e;return{}}function cR(t,e){var n,r;let s;return kp(t[0])?s=t[0]:kp(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class Za{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Qt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return rR(this._delegate,e._delegate)}}class eu extends Za{data(e){const n=this._delegate.data(e);return cb(n!==void 0),n}}let tu=class hn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Oh(e)}where(e,n,r){try{return new hn(this.firestore,or(this._delegate,NV(e,n,r)))}catch(s){throw pt(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new hn(this.firestore,or(this._delegate,OV(e,n)))}catch(r){throw pt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hn(this.firestore,or(this._delegate,VV(e)))}catch(n){throw pt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new hn(this.firestore,or(this._delegate,FV(e)))}catch(n){throw pt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hn(this.firestore,or(this._delegate,LV(...e)))}catch(n){throw pt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hn(this.firestore,or(this._delegate,MV(...e)))}catch(n){throw pt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hn(this.firestore,or(this._delegate,UV(...e)))}catch(n){throw pt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hn(this.firestore,or(this._delegate,BV(...e)))}catch(n){throw pt(n,"endAt()","Query.endAt()")}}isEqual(e){return jS(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=GV(this._delegate):(e==null?void 0:e.source)==="server"?n=HV(this._delegate):n=KV(this._delegate),n.then(r=>new Dp(this.firestore,new zr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=lR(e),r=cR(e,s=>new Dp(this.firestore,new zr(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return sR(this._delegate,n,r)}withConverter(e){return new hn(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};class f2{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new eu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dp{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new tu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new f2(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new eu(this._firestore,r))})}isEqual(e){return rR(this._delegate,e._delegate)}}class eo extends tu{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qt(this.firestore,e):null}doc(e){try{return e===void 0?new Qt(this.firestore,Sc(this._delegate)):new Qt(this.firestore,Sc(this._delegate,e))}catch(n){throw pt(n,"doc()","CollectionReference.doc()")}}add(e){return YV(this._delegate,e).then(n=>new Qt(this.firestore,n))}isEqual(e){return $S(this._delegate,e._delegate)}withConverter(e){return new eo(this.firestore,e?this._delegate.withConverter(Bs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _s(t){return ne(t,Te)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(...e){this._delegate=new jr(...e)}static documentId(){return new gy(Pe.keyField().canonicalString())}isEqual(e){return e=oe(e),e instanceof jr?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._delegate=e}static serverTimestamp(){const e=r2();return e._methodName="FieldValue.serverTimestamp",new hs(e)}static delete(){const e=n2();return e._methodName="FieldValue.delete",new hs(e)}static arrayUnion(...e){const n=s2(...e);return n._methodName="FieldValue.arrayUnion",new hs(n)}static arrayRemove(...e){const n=i2(...e);return n._methodName="FieldValue.arrayRemove",new hs(n)}static increment(e){const n=o2(e);return n._methodName="FieldValue.increment",new hs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2={Firestore:oR,GeoPoint:Rh,Timestamp:ye,Blob:iR,Transaction:aR,WriteBatch:uR,DocumentReference:Qt,DocumentSnapshot:Za,Query:tu,QueryDocumentSnapshot:eu,QuerySnapshot:Dp,CollectionReference:eo,FieldPath:gy,FieldValue:hs,setLogLevel:d2,CACHE_SIZE_UNLIMITED:gV};function m2(t,e){t.INTERNAL.registerComponent(new Hn("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},p2)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){m2(t,(e,n)=>new oR(e,n,new h2)),t.registerVersion(u2,l2)}g2(ao);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="firebasestorage.googleapis.com",dR="storageBucket",y2=2*60*1e3,_2=10*60*1e3,v2=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se extends Gr{constructor(e,n,r=0){super(Ud(e),`Firebase Storage: ${n} (${Ud(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Se.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ud(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pe||(pe={}));function Ud(t){return"storage/"+t}function yy(){const t="An unknown error occurred, please check the error payload for server response.";return new Se(pe.UNKNOWN,t)}function w2(t){return new Se(pe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function E2(t){return new Se(pe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function T2(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Se(pe.UNAUTHENTICATED,t)}function I2(){return new Se(pe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function S2(t){return new Se(pe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fR(){return new Se(pe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pR(){return new Se(pe.CANCELED,"User canceled the upload/download.")}function R2(t){return new Se(pe.INVALID_URL,"Invalid URL '"+t+"'.")}function A2(t){return new Se(pe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function P2(){return new Se(pe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dR+"' property when initializing the app?")}function mR(){return new Se(pe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function C2(){return new Se(pe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function x2(){return new Se(pe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function k2(t){return new Se(pe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Oi(t){return new Se(pe.INVALID_ARGUMENT,t)}function gR(){return new Se(pe.APP_DELETED,"The Firebase app was deleted.")}function yR(t){return new Se(pe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pa(t,e){return new Se(pe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bo(t){throw new Se(pe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ut.makeFromUrl(e,n)}catch{return new ut(e,"")}if(r.path==="")return r;throw A2(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${s}/o${d}`,"i"),p={bucket:1,path:3},_=n===hR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",g=new RegExp(`^https?://${_}/${s}/${v}`,"i"),y=[{regex:a,indices:u,postModify:i},{regex:f,indices:p,postModify:l},{regex:g,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<y.length;w++){const P=y[w],S=P.regex.exec(e);if(S){const R=S[P.indices.bucket];let C=S[P.indices.path];C||(C=""),r=new ut(R,C),P.postModify(r);break}}if(r==null)throw R2(e);return r}}class D2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...v){l||(l=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(f,u())},v)}function d(){i&&clearTimeout(i)}function f(v,...g){if(l){d();return}if(v){d(),c.call(null,v,...g);return}if(u()||o){d(),c.call(null,v,...g);return}r<64&&(r*=2);let y;a===1?(a=2,y=0):y=(r+Math.random())*1e3,h(y)}let p=!1;function _(v){p||(p=!0,d(),!l&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function N2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t){return t!==void 0}function V2(t){return typeof t=="function"}function F2(t){return typeof t=="object"&&!Array.isArray(t)}function Vh(t){return typeof t=="string"||t instanceof String}function Sw(t){return _y()&&t instanceof Blob}function _y(){return typeof Blob<"u"&&!bT()}function bp(t,e,n,r){if(r<e)throw Oi(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Oi(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function _R(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ss;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ss||(Ss={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,s,i,o,a,u,l,c,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new il(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ss.NO_ERROR,u=i.getStatus();if(!a||vR(u,this.additionalRetryCodes_)&&this.retry){const c=i.getErrorCode()===Ss.ABORT;r(!1,new il(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new il(l,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());O2(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=yy();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?gR():pR();o(u)}else{const u=fR();o(u)}};this.canceled_?n(!1,new il(!1,null,!0)):this.backoffId_=b2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class il{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function M2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function U2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function B2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function j2(t,e,n,r,s,i,o=!0){const a=_R(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return B2(l,e),M2(l,n),U2(l,i),$2(l,r),new L2(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function q2(...t){const e=z2();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(_y())return new Blob(t);throw new Se(pe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Q2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(t){if(typeof atob>"u")throw k2("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bd{constructor(e,n){this.data=e,this.contentType=n||null}}function wR(t,e){switch(t){case Kt.RAW:return new Bd(ER(e));case Kt.BASE64:case Kt.BASE64URL:return new Bd(TR(t,e));case Kt.DATA_URL:return new Bd(H2(e),W2(e))}throw yy()}function ER(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function G2(t){let e;try{e=decodeURIComponent(t)}catch{throw pa(Kt.DATA_URL,"Malformed data URL.")}return ER(e)}function TR(t,e){switch(t){case Kt.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw pa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Kt.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw pa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=K2(e)}catch(s){throw s.message.includes("polyfill")?s:pa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class IR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw pa(Kt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Y2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function H2(t){const e=new IR(t);return e.base64?TR(Kt.BASE64,e.rest):G2(e.rest)}function W2(t){return new IR(t).contentType}function Y2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){let r=0,s="";Sw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Sw(this.data_)){const r=this.data_,s=Q2(r,e,n);return s===null?null:new Vn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Vn(r,!0)}}static getBlob(...e){if(_y()){const n=e.map(r=>r instanceof Vn?r.data_:r);return new Vn(q2.apply(null,n))}else{const n=e.map(o=>Vh(o)?wR(Kt.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Vn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t){let e;try{e=JSON.parse(t)}catch{return null}return F2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function J2(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function SR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e){return e}class dt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Z2}}let ol=null;function eF(t){return!Vh(t)||t.length<2?t:SR(t)}function Fh(){if(ol)return ol;const t=[];t.push(new dt("bucket")),t.push(new dt("generation")),t.push(new dt("metageneration")),t.push(new dt("name","fullPath",!0));function e(i,o){return eF(o)}const n=new dt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new dt("size");return s.xform=r,t.push(s),t.push(new dt("timeCreated")),t.push(new dt("updated")),t.push(new dt("md5Hash",null,!0)),t.push(new dt("cacheControl",null,!0)),t.push(new dt("contentDisposition",null,!0)),t.push(new dt("contentEncoding",null,!0)),t.push(new dt("contentLanguage",null,!0)),t.push(new dt("contentType",null,!0)),t.push(new dt("metadata","customMetadata",!0)),ol=t,ol}function tF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new ut(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function nF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return tF(r,t),r}function RR(t,e,n){const r=vy(e);return r===null?null:nF(t,r,n)}function rF(t,e,n,r){const s=vy(e);if(s===null||!Vh(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(l=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=es(d,n,r),p=_R({alt:"media",token:l});return f+p})[0]}function wy(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="prefixes",Aw="items";function sF(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Rw])for(const s of n[Rw]){const i=s.replace(/\/$/,""),o=t._makeStorageReference(new ut(e,i));r.prefixes.push(o)}if(n[Aw])for(const s of n[Aw]){const i=t._makeStorageReference(new ut(e,s.name));r.items.push(i)}return r}function iF(t,e,n){const r=vy(n);return r===null?null:sF(t,e,r)}class tr{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t){if(!t)throw yy()}function Lh(t,e){function n(r,s){const i=RR(t,s,e);return Rn(i!==null),i}return n}function oF(t,e){function n(r,s){const i=iF(t,e,s);return Rn(i!==null),i}return n}function aF(t,e){function n(r,s){const i=RR(t,s,e);return Rn(i!==null),rF(i,s,t.host,t._protocol)}return n}function vo(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=I2():s=T2():n.getStatus()===402?s=E2(t.bucket):n.getStatus()===403?s=S2(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Mh(t){const e=vo(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=w2(t.path)),i.serverResponse=s.serverResponse,i}return n}function AR(t,e,n){const r=e.fullServerUrl(),s=es(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new tr(s,i,Lh(t,n),o);return a.errorHandler=Mh(e),a}function uF(t,e,n,r,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=e.bucketOnlyServerUrl(),a=es(o,t.host,t._protocol),u="GET",l=t.maxOperationRetryTime,c=new tr(a,u,oF(t,e.bucket),l);return c.urlParams=i,c.errorHandler=vo(e),c}function lF(t,e,n){const r=e.fullServerUrl(),s=es(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new tr(s,i,aF(t,n),o);return a.errorHandler=Mh(e),a}function cF(t,e,n,r){const s=e.fullServerUrl(),i=es(s,t.host,t._protocol),o="PATCH",a=wy(n,r),u={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,c=new tr(i,o,Lh(t,r),l);return c.headers=u,c.body=a,c.errorHandler=Mh(e),c}function hF(t,e){const n=e.fullServerUrl(),r=es(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,l){}const a=new tr(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=Mh(e),a}function dF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function PR(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=dF(null,e)),r}function fF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let y="";for(let w=0;w<2;w++)y=y+Math.random().toString().slice(2);return y}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=PR(e,r,s),c=wy(l,n),h="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",f=Vn.getBlob(h,r,d);if(f===null)throw mR();const p={name:l.fullPath},_=es(i,t.host,t._protocol),v="POST",g=t.maxUploadRetryTime,m=new tr(_,v,Lh(t,n),g);return m.urlParams=p,m.headers=o,m.body=f.uploadData(),m.errorHandler=vo(e),m}class Ac{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Ey(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Rn(!1)}return Rn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function pF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=PR(e,r,s),a={name:o.fullPath},u=es(i,t.host,t._protocol),l="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=wy(o,n),d=t.maxUploadRetryTime;function f(_){Ey(_);let v;try{v=_.getResponseHeader("X-Goog-Upload-URL")}catch{Rn(!1)}return Rn(Vh(v)),v}const p=new tr(u,l,f,d);return p.urlParams=a,p.headers=c,p.body=h,p.errorHandler=vo(e),p}function mF(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(l){const c=Ey(l,["active","final"]);let h=null;try{h=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Rn(!1)}h||Rn(!1);const d=Number(h);return Rn(!isNaN(d)),new Ac(d,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,u=new tr(n,o,i,a);return u.headers=s,u.errorHandler=vo(e),u}const Pw=256*1024;function gF(t,e,n,r,s,i,o,a){const u=new Ac(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw C2();const l=u.total-u.current;let c=l;s>0&&(c=Math.min(c,s));const h=u.current,d=h+c;let f="";c===0?f="finalize":l===c?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${u.current}`},_=r.slice(h,d);if(_===null)throw mR();function v(w,P){const S=Ey(w,["active","final"]),R=u.current+c,C=r.size();let j;return S==="final"?j=Lh(e,i)(w,P):j=null,new Ac(R,C,S==="final",j)}const g="POST",m=e.maxUploadRetryTime,y=new tr(n,g,v,m);return y.headers=p,y.body=_.uploadData(),y.progressCallback=a||null,y.errorHandler=vo(t),y}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF={STATE_CHANGED:"state_changed"},mt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $d(t){switch(t){case"running":case"pausing":case"canceling":return mt.RUNNING;case"paused":return mt.PAUSED;case"success":return mt.SUCCESS;case"canceled":return mt.CANCELED;case"error":return mt.ERROR;default:return mt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n,r){if(V2(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class vF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ss.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ss.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ss.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Bo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wF extends vF{initXhr(){this.xhr_.responseType="text"}}function mn(){return new wF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Fh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(pe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(vR(s.status,[]))if(i)s=fR();else{this.sleepTime=Math.max(this.sleepTime*2,v2),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(pe.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=pF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,mn,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=mF(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,mn,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Pw*this._chunkMultiplier,n=new Ac(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=gF(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const a=this._ref.storage._makeRequest(o,mn,s,i,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Pw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=AR(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,mn,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=fF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,mn,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=pR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=$d(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new _F(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch($d(this._state)){case mt.SUCCESS:si(this._resolve.bind(null,this.snapshot))();break;case mt.CANCELED:case mt.ERROR:const n=this._reject;si(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($d(this._state)){case mt.RUNNING:case mt.PAUSED:e.next&&si(e.next.bind(e,this.snapshot))();break;case mt.SUCCESS:e.complete&&si(e.complete.bind(e))();break;case mt.CANCELED:case mt.ERROR:e.error&&si(e.error.bind(e,this._error))();break;default:e.error&&si(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this._service=e,n instanceof ut?this._location=n:this._location=ut.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new $s(e,n)}get root(){const e=new ut(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SR(this._location.path)}get storage(){return this._service}get parent(){const e=X2(this._location.path);if(e===null)return null;const n=new ut(this._location.bucket,e);return new $s(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw yR(e)}}function EF(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new CR(t,new Vn(e),n)}function TF(t){const e={prefixes:[],items:[]};return xR(t,e).then(()=>e)}async function xR(t,e,n){const s=await kR(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await xR(t,e,s.nextPageToken)}function kR(t,e){e!=null&&typeof e.maxResults=="number"&&bp("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=uF(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,mn)}function IF(t){t._throwIfRoot("getMetadata");const e=AR(t.storage,t._location,Fh());return t.storage.makeRequestWithTokens(e,mn)}function SF(t,e){t._throwIfRoot("updateMetadata");const n=cF(t.storage,t._location,e,Fh());return t.storage.makeRequestWithTokens(n,mn)}function RF(t){t._throwIfRoot("getDownloadURL");const e=lF(t.storage,t._location,Fh());return t.storage.makeRequestWithTokens(e,mn).then(n=>{if(n===null)throw x2();return n})}function AF(t){t._throwIfRoot("deleteObject");const e=hF(t.storage,t._location);return t.storage.makeRequestWithTokens(e,mn)}function DR(t,e){const n=J2(t._location.path,e),r=new ut(t._location.bucket,n);return new $s(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t){return/^[A-Za-z]+:\/\//.test(t)}function CF(t,e){return new $s(t,e)}function bR(t,e){if(t instanceof Ty){const n=t;if(n._bucket==null)throw P2();const r=new $s(n,n._bucket);return e!=null?bR(r,e):r}else return e!==void 0?DR(t,e):t}function xF(t,e){if(e&&PF(e)){if(t instanceof Ty)return CF(t,e);throw Oi("To use ref(service, url), the first argument must be a Storage instance.")}else return bR(t,e)}function Cw(t,e){const n=e==null?void 0:e[dR];return n==null?null:ut.makeFromBucketSpec(n,t)}function kF(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:DT(s,t.app.options.projectId))}class Ty{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=hR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y2,this._maxUploadRetryTime=_2,this._requests=new Set,s!=null?this._bucket=ut.makeFromBucketSpec(s,this._host):this._bucket=Cw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ut.makeFromBucketSpec(this._url,e):this._bucket=Cw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $s(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new D2(gR());{const o=j2(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const xw="@firebase/storage",kw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF="storage";function bF(t,e,n){return t=oe(t),EF(t,e,n)}function NF(t){return t=oe(t),IF(t)}function OF(t,e){return t=oe(t),SF(t,e)}function VF(t,e){return t=oe(t),kR(t,e)}function FF(t){return t=oe(t),TF(t)}function LF(t){return t=oe(t),RF(t)}function MF(t){return t=oe(t),AF(t)}function Dw(t,e){return t=oe(t),xF(t,e)}function UF(t,e){return DR(t,e)}function BF(t,e,n,r={}){kF(t,e,n,r)}function $F(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ty(n,r,s,e,Yc)}function jF(){Ds(new Hn(DF,$F,"PUBLIC").setMultipleInstances(!0)),In(xw,kw,""),In(xw,kw,"esm2017")}jF();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new al(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new al(r,this,this._ref))},n)}on(e,n,r,s){let i;return n&&(typeof n=="function"?i=o=>n(new al(o,this,this._ref)):i={next:n.next?o=>n.next(new al(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,i,r||void 0,s||void 0)}}class Nw{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new jn(e,this._service))}get items(){return this._delegate.items.map(e=>new jn(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=UF(this._delegate,e);return new jn(n,this.storage)}get root(){return new jn(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new jn(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new bw(bF(this._delegate,e,n),this)}putString(e,n=Kt.RAW,r){this._throwIfRoot("putString");const s=wR(n,e),i=Object.assign({},r);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),new bw(new CR(this._delegate,new Vn(s.data,!0),i),this)}listAll(){return FF(this._delegate).then(e=>new Nw(e,this.storage))}list(e){return VF(this._delegate,e||void 0).then(n=>new Nw(n,this.storage))}getMetadata(){return NF(this._delegate)}updateMetadata(e){return OF(this._delegate,e)}getDownloadURL(){return LF(this._delegate)}delete(){return this._throwIfRoot("delete"),MF(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw yR(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Ow(e))throw Oi("ref() expected a child path but got a URL, use refFromURL instead.");return new jn(Dw(this._delegate,e),this)}refFromURL(e){if(!Ow(e))throw Oi("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ut.makeFromUrl(e,this._delegate.host)}catch{throw Oi("refFromUrl() expected a valid full URL but got an invalid one.")}return new jn(Dw(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){BF(this._delegate,e,n,r)}}function Ow(t){return/^[A-Za-z]+:\/\//.test(t)}const zF="@firebase/storage-compat",qF="0.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF="storage-compat";function KF(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new NR(n,r)}function GF(t){const e={TaskState:mt,TaskEvent:yF,StringFormat:Kt,Storage:NR,Reference:jn};t.INTERNAL.registerComponent(new Hn(QF,KF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(zF,qF)}GF(ao);const Iy=ao.firestore(),HF=async(t,e)=>{try{return(await t.get()).exists?(console.log(`${e} is ready exist!`),!0):(console.log(`${e} is not exist!`),!1)}catch(n){throw n}},WF=(t,e,n)=>{const{Types:r,zhName:s,enName:i,pokeId:o,sprite:a}=n,u=Iy.batch();u.set(t,{sprite:a,pokeId:o,zhName:s,enName:i,types:r,num_shards:e});for(let l=0;l<e;l++){const c=t.collection("shards").doc(l.toString());u.set(c,{count:0})}return u.commit()},YF=(t,e)=>{const n=Math.floor(Math.random()*e).toString();return t.collection("shards").doc(n).update("count",ao.firestore.FieldValue.increment(1))},XF=async()=>{console.log("get all pokemon order");try{const t=await Iy.collection("popular_pokemon").get();if(!t)return;const e=t.docs.map(async r=>{const s=r.data().zhName,i=r.data().enName,o=r.data().types,a=r.data().pokeId,u=r.data().sprite,c=await r.ref.collection("shards").get();if(!c)return;let h=0;return c.forEach(d=>{h+=d.data().count}),{total:h,Types:o,enName:i,zhName:s,pokeId:a,sprite:u}});return await Promise.all(e)}catch(t){throw t}},JF=async t=>{console.log("post data to firebase");const{zhName:e}=t,n=10,r=Iy.collection("popular_pokemon").doc(e);await HF(r,e)||WF(r,n,t).then(i=>console.log(`Create new pokemon ${e} successful.`)).catch(i=>console.log(`Something wrong when create pokemon, msg:${i.message}`)),await YF(r,n).then(i=>console.log(`${e} count is increase`)).catch(i=>console.log(i.message))},ZF=()=>{const{handlePopularPokemon:t}=ln();B.useEffect(()=>{XF().then(e=>{e.sort((n,r)=>r.total-n.total),t(e)})},[])},eL=()=>{const{bestDamage:t,popularPokemon:e,handleFilterBestPokemon:n}=ln();B.useEffect(()=>{const r=(e??[]).filter(s=>{let i=!1;if(s.Types.forEach(o=>{t.forEach(a=>{a.zhType===o.zhType&&(i=!0)})}),i)return s});n(r)},[t])},OR=B.createContext(),tL=({children:t})=>{const[e,n]=B.useState(""),r=H=>{n(()=>H)},[s,i]=B.useState([]),[o,a]=B.useState(!1),[u,l]=B.useState(0),[c,h]=B.useState(!1),d=H=>{i(ke=>[...ke,...H])},f=H=>{a(()=>H??o)},p=(H=20)=>{l(ke=>ke+H)},_=H=>{h(()=>H)},[v,g]=B.useState([]);B.useState([]);const m=H=>{g(ke=>{const ts=[...ke];return ts.some(Gh=>Gh.enName===H.enName)?ts.filter(Gh=>Gh.enName!==H.enName):(JF(H),[...ts,H])})},y=H=>{g(ke=>ke.filter(ts=>ts.enName!==H.enName))},[w,P]=B.useState([]),S=H=>{P(()=>H)},R=dx.filter(H=>H.default===!0)[0],[C,j]=B.useState({type:R.type,title:R.title}),[$,Ye]=B.useState({type:R.type,title:R.title}),[nr,xn]=B.useState({type:R.type,title:R.title}),kn=fx.filter(H=>H.default===!0)[0],[Kh,To]=B.useState({type:kn.type,title:kn.title}),[Io,F]=B.useState({type:kn.type,title:kn.title}),[q,G]=B.useState({type:kn.type,title:kn.title}),_e=(H,ke)=>{j({type:H,title:ke})},Oe=(H,ke)=>{Ye({type:H,title:ke})},Ys=(H,ke)=>{xn({type:H,title:ke})},Dn=(H,ke)=>{To({type:H,title:ke})},So=(H,ke)=>{F({type:H,title:ke})},bn=(H,ke)=>{G({type:H,title:ke})},[Xs,PA]=B.useState(IT),CA=({enType:H,zhType:ke,bgColor:ts})=>{PA(()=>({enType:H,zhType:ke,bgColor:ts}))},[xA,kA]=B.useState([]),[DA,bA]=B.useState([]),NA=H=>{kA(()=>H)},OA=H=>{bA(()=>H)};return I.jsx(OR.Provider,{value:{searchPokemon:e,handleSearchPokemon:r,storePokemon:s,handleStorePokemon:d,isLoadingPokemon:o,handleIsLoadingPokemon:f,page:u,handleNextPage:p,searchMorePokemon:c,handleSearchMorePokemon:_,selectImg:v,AddRemoveImg:m,RemoveImg:y,bestDamage:w,handleBestDamage:S,showInfo_select:C,showType_select:Kh,showInfo_beenSelect:$,showType_beenSelect:Io,showInfo_bestDamage:nr,showType_bestDamage:q,filterType:Xs,handleShowInfo_select:_e,handleShowType_select:Dn,handleShowInfo_beenSelect:Oe,handleShowType_beenSelect:So,handleShowInfo_bestDamage:Ys,handleShowType_bestDamage:bn,handleFilterType:CA,popularPokemon:xA,filterBestPokemon:DA,handlePopularPokemon:NA,handleFilterBestPokemon:OA},children:t})},ln=()=>B.useContext(OR),Vw=({children:t})=>I.jsx("div",{className:"btn-group btn-group-sm",role:"group","aria-label":"Setting text and image",style:{marginBottom:"0.5rem"},children:t}),vs=({children:t,selectType:e,handleOnClick:n,types:r})=>{const{type:s,title:i}=r;return I.jsx("button",{type:"button",className:`btn btn-outline-info button-hover ${e.type===s?"active":""}`,onClick:()=>{n(s,i)},children:t})},nL=({id:t})=>{const{showType_select:e,showType_beenSelect:n,showType_bestDamage:r,handleShowType_select:s,handleShowType_beenSelect:i,handleShowType_bestDamage:o}=ln();let a=null,u=null;switch(t){case tn:a=e,u=s;break;case zm:a=n,u=i;break;case Hc:a=r,u=o;break}return I.jsxs(I.Fragment,{children:[I.jsx(vs,{types:{type:$m,title:""},selectType:a,handleOnClick:u,children:I.jsx(Fw,{color:"#22c02a",text:""})}),I.jsx(vs,{types:{type:jm,title:""},selectType:a,handleOnClick:u,children:I.jsx(Fw,{color:"#22c02a",text:" "})}),I.jsx(vs,{types:{type:oo,title:""},selectType:a,handleOnClick:u,children:I.jsx(Pc,{text:""})}),I.jsx(vs,{types:{type:TT,title:""},selectType:a,handleOnClick:u,children:I.jsx(Pc,{text:""})})]})},Fw=({color:t,text:e})=>I.jsx("div",{className:"button-type-color",children:I.jsx("span",{style:{backgroundColor:t},children:e})}),rL=({id:t})=>{const{showInfo_select:e,showInfo_beenSelect:n,showInfo_bestDamage:r,handleShowInfo_select:s,handleShowInfo_beenSelect:i,handleShowInfo_bestDamage:o}=ln();let a=null,u=null;switch(t){case tn:a=e,u=s;break;case zm:a=n,u=i;break;case Hc:a=r,u=o;break}return I.jsxs(I.Fragment,{children:[I.jsx(vs,{types:{type:Um,title:""},selectType:a,handleOnClick:u,children:I.jsx(VR,{})}),I.jsx(vs,{types:{type:Bm,title:""},selectType:a,handleOnClick:u,children:I.jsx(sL,{text:"Name"})}),I.jsx(vs,{types:{type:oo,title:""},selectType:a,handleOnClick:u,children:I.jsx(Pc,{text:"Name"})})]})},VR=()=>I.jsx("img",{src:_x,alt:"",title:"",className:"buttonImage"}),Pc=({text:t})=>I.jsx("span",{children:t}),sL=({text:t})=>I.jsxs("div",{className:"buttonImageText",children:[I.jsx(VR,{}),I.jsx(Pc,{text:t})]}),iL=()=>{const{filterType:t,handleFilterType:e}=ln();return I.jsxs("div",{className:"dropdown",children:[I.jsx("button",{className:"btn btn-outline-info dropdown-toggle button-hover",type:"button",id:"dropdownBtnFilterType","data-bs-toggle":"dropdown","aria-expanded":"false",children:I.jsxs("span",{children:[" : ",t.zhType||"error"]})}),I.jsx("div",{className:"dropdown-menu ","aria-labelledby":"dropdownBtnFilterType",style:{width:"auto",height:"150px",overflowY:"auto"},children:I.jsxs("ul",{children:[I.jsx("li",{children:I.jsx("button",{className:"dropdown-item dropdown-type",type:"button",style:{backgroundColor:"#17CCF0"},onClick:()=>e(IT),children:I.jsx("span",{children:""})})}),qm.map(n=>{const{zhType:r,bgColor:s}=n;return I.jsx("li",{children:I.jsx("button",{type:"button",className:"dropdown-item dropdown-type",style:{backgroundColor:s},onClick:()=>e(n),children:I.jsx("span",{children:r})})},Cr())})]})})]})},oL=({id:t})=>I.jsxs(I.Fragment,{children:[I.jsx(Vw,{children:I.jsx(rL,{id:t})}),I.jsx(Vw,{children:I.jsx(nL,{id:t})}),t===tn&&I.jsx(iL,{})]}),aL=()=>{const{searchPokemon:t,handleSearchPokemon:e}=ln();return I.jsx("div",{className:"search-btn input-group input-group-sm ",children:I.jsx("input",{type:"search",className:"form-control",id:"form-select",placeholder:" Search",value:t,onChange:n=>e(n.target.value)})})},uL=({title:t,id:e})=>I.jsxs("div",{className:"group-info",children:[I.jsxs("div",{children:[I.jsx("a",{href:`#${t}`,"data-bs-toggle":"collapse",children:I.jsx(yx,{className:"btn setting-icon"})}),I.jsx("div",{id:t,className:"collapse",children:I.jsx("div",{className:"card card-body",children:I.jsx(oL,{id:e})})})]}),I.jsx("span",{className:"title",children:t}),e===tn&&I.jsx(aL,{})]}),lL=B.memo(uL);function cL(t){return AT({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"}}]})(t)}const FR="error",hL="white",LR="black",dL=({color:t,text:e})=>I.jsx("a",{href:"#",children:I.jsx("span",{style:{color:t??hL},children:e??FR})}),fL=({bgColor:t})=>I.jsx("a",{href:"#",children:I.jsx("span",{className:"type",style:{backgroundColor:t??LR},children:""})}),MR=({bgColor:t,text:e})=>I.jsx("a",{href:"#",children:I.jsx("span",{className:"type",style:{backgroundColor:t??LR},children:e??FR})}),pL=({item:t,isActive:e,handleClick:n,children:r})=>I.jsxs("div",{className:`characterText ${e}`,onClick:()=>n(t),children:[I.jsx("span",{className:"characterName",children:(t==null?void 0:t.zhName)??defaultNotFound}),r]}),mL=({item:t,isActive:e,handleClick:n,children:r})=>I.jsxs("div",{style:{display:"flex"},children:[r,I.jsx("img",{src:(t==null?void 0:t.sprite)??"",alt:(t==null?void 0:t.zhName)??defaultNotFound,title:(t==null?void 0:t.zhName)??defaultNotFound,className:`characterImg ${e}`,onClick:()=>n(t)})]}),gL=({item:t,isActive:e,handleClick:n,children:r})=>I.jsxs("div",{className:`characterImgText ${e}`,onClick:()=>n(t),children:[I.jsxs("div",{children:[I.jsx("span",{className:"characterName",children:(t==null?void 0:t.zhName)??defaultNotFound}),r]}),I.jsx("img",{src:(t==null?void 0:t.sprite)??"",alt:(t==null?void 0:t.zhName)??defaultNotFound,title:(t==null?void 0:t.zhName)??defaultNotFound})]}),jd=({title:t,typeClass:e,children:n,id:r})=>{const s=B.useRef(null),{isLoadingPokemon:i,handleNextPage:o,handleIsLoadingPokemon:a,searchPokemon:u,bestDamage:l,filterType:c}=ln(),h=()=>{const d=s.current;u!==""||c.enType!=="all"||!i&&d.scrollTop+d.offsetHeight>=d.scrollHeight&&(a(!0),o())};return B.useEffect(()=>{if(r!=tn)return;const d=document.getElementById(tn);return d.addEventListener("scroll",h),()=>{d.removeEventListener("scroll",h)}},[]),I.jsxs("div",{className:"col",children:[I.jsx(lL,{title:t,id:r}),I.jsxs("div",{id:r,ref:s,className:"groups",children:[I.jsx("div",{className:`group-img group-${e}`,children:n}),r===tn&&i&&I.jsx("div",{className:"loading-container",children:I.jsx("div",{className:"loading"})}),r===tn&&(u!==""||c.enType!=="all")&&I.jsxs("div",{className:"search-more-container",children:[I.jsx("p",{children:"?"}),I.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>{a(!0),o()},children:""})]}),r===Hc&&l.length>0&&I.jsxs("div",{className:"best-damage-container",children:[I.jsx(cL,{className:"thumb-icon"}),I.jsx("span",{style:{paddingLeft:"0.5rem"},children:""}),I.jsx("ul",{children:l.map(d=>I.jsx("li",{style:{margin:"0 0.1rem"},children:I.jsx(MR,{bgColor:d==null?void 0:d.bgColor,text:d==null?void 0:d.zhType})},Cr()))})]})]})]})},zd=({item:t,showType_select:e,styleObj:n})=>(t==null?void 0:t.Types)===void 0?I.jsx("span",{children:"error"}):I.jsx("ul",{style:n,children:((t==null?void 0:t.Types)??[]).map(r=>{switch(e){case jm:return I.jsx("li",{children:I.jsx(fL,{bgColor:r==null?void 0:r.bgColor})},Cr());case oo:return I.jsx("li",{children:I.jsx(dL,{color:r==null?void 0:r.bgColor,text:r==null?void 0:r.zhType})},Cr());case $m:return I.jsx("li",{children:I.jsx(MR,{bgColor:r==null?void 0:r.bgColor,text:r==null?void 0:r.zhType})},Cr())}})}),qd=({showInfo_select:t,showType_select:e,displayCharacter:n,handleClick:r,id:s})=>{const{selectImg:i,searchPokemon:o,filterType:a}=ln();let u=n;return s===tn&&(o!==""&&(u=u.filter(l=>l.zhName.includes(o))),a.enType!=="all"&&(u=u.filter(l=>l.Types.filter(h=>h.enType===a.enType).length>0))),u.map(l=>{const h=i.some(d=>d.enName===l.enName)?"hero-active":"";switch(t){case oo:return I.jsx(pL,{isActive:h,handleClick:r,item:l,children:I.jsx(zd,{styleObj:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"},item:l,showType_select:e,showInfo_select:t})},Cr());case Bm:return I.jsx(gL,{isActive:h,item:l,handleClick:r,children:I.jsx(zd,{styleObj:{display:"flex",flexDirection:"row",justifyContent:"start",gap:"0.3rem"},item:l,showType_select:e,showInfo_select:t})},Cr());case Um:return I.jsx(mL,{isActive:h,handleClick:r,item:l,children:I.jsx(zd,{styleObj:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},item:l,showType_select:e,showInfo_select:t})},Cr())}})};class wo{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const nu=typeof window>"u"||"Deno"in window;function Bt(){}function yL(t,e){return typeof t=="function"?t(e):t}function Np(t){return typeof t=="number"&&t>=0&&t!==1/0}function Lw(t,e){return t.filter(n=>!e.includes(n))}function _L(t,e,n){const r=t.slice(0);return r[e]=n,r}function UR(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Xo(t,e,n){return Uh(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function cr(t,e,n){return Uh(t)?[{...e,queryKey:t},n]:[t||{},e]}function Mw(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(Uh(o)){if(r){if(e.queryHash!==Sy(o,e.options))return!1}else if(!Cc(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof s<"u"&&s!==e.state.fetchStatus||i&&!i(e))}function Uw(t,e){const{exact:n,fetching:r,predicate:s,mutationKey:i}=t;if(Uh(i)){if(!e.options.mutationKey)return!1;if(n){if(ws(e.options.mutationKey)!==ws(i))return!1}else if(!Cc(e.options.mutationKey,i))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||s&&!s(e))}function Sy(t,e){return((e==null?void 0:e.queryKeyHashFn)||ws)(t)}function ws(t){return JSON.stringify(t,(e,n)=>Vp(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Cc(t,e){return BR(t,e)}function BR(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!BR(t[n],e[n])):!1}function $R(t,e){if(t===e)return t;const n=Bw(t)&&Bw(e);if(n||Vp(t)&&Vp(e)){const r=n?t.length:Object.keys(t).length,s=n?e:Object.keys(e),i=s.length,o=n?[]:{};let a=0;for(let u=0;u<i;u++){const l=n?u:s[u];o[l]=$R(t[l],e[l]),o[l]===t[l]&&a++}return r===i&&a===r?t:o}return e}function Op(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Bw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Vp(t){if(!$w(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!$w(n)||!n.hasOwnProperty("isPrototypeOf"))}function $w(t){return Object.prototype.toString.call(t)==="[object Object]"}function Uh(t){return Array.isArray(t)}function jR(t){return new Promise(e=>{setTimeout(e,t)})}function jw(t){jR(0).then(t)}function vL(){if(typeof AbortController=="function")return new AbortController}function Fp(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$R(t,e):e}class wL extends wo{constructor(){super(),this.setup=e=>{if(!nu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const xc=new wL,zw=["online","offline"];class EL extends wo{constructor(){super(),this.setup=e=>{if(!nu&&window.addEventListener){const n=()=>e();return zw.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{zw.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const kc=new EL;function TL(t){return Math.min(1e3*2**t,3e4)}function Bh(t){return(t??"online")==="online"?kc.isOnline():!0}class zR{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function xl(t){return t instanceof zR}function qR(t){let e=!1,n=0,r=!1,s,i,o;const a=new Promise((v,g)=>{i=v,o=g}),u=v=>{r||(f(new zR(v)),t.abort==null||t.abort())},l=()=>{e=!0},c=()=>{e=!1},h=()=>!xc.isFocused()||t.networkMode!=="always"&&!kc.isOnline(),d=v=>{r||(r=!0,t.onSuccess==null||t.onSuccess(v),s==null||s(),i(v))},f=v=>{r||(r=!0,t.onError==null||t.onError(v),s==null||s(),o(v))},p=()=>new Promise(v=>{s=g=>{const m=r||!h();return m&&v(g),m},t.onPause==null||t.onPause()}).then(()=>{s=void 0,r||t.onContinue==null||t.onContinue()}),_=()=>{if(r)return;let v;try{v=t.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(d).catch(g=>{var m,y;if(r)return;const w=(m=t.retry)!=null?m:3,P=(y=t.retryDelay)!=null?y:TL,S=typeof P=="function"?P(n,g):P,R=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,g);if(e||!R){f(g);return}n++,t.onFail==null||t.onFail(n,g),jR(S).then(()=>{if(h())return p()}).then(()=>{e?f(g):_()})})};return Bh(t.networkMode)?_():p().then(_),{promise:a,cancel:u,continue:()=>(s==null?void 0:s())?a:Promise.resolve(),cancelRetry:l,continueRetry:c}}const Ry=console;function IL(){let t=[],e=0,n=c=>{c()},r=c=>{c()};const s=c=>{let h;e++;try{h=c()}finally{e--,e||a()}return h},i=c=>{e?t.push(c):jw(()=>{n(c)})},o=c=>(...h)=>{i(()=>{c(...h)})},a=()=>{const c=t;t=[],c.length&&jw(()=>{r(()=>{c.forEach(h=>{n(h)})})})};return{batch:s,batchCalls:o,schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c}}}const we=IL();class QR{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Np(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(nu?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class SL extends QR{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Ry,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||RL(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const r=Fp(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(e),r?r.then(Bt).catch(Bt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!UR(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var r,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return(i=this.retryer)==null||i.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const o=vL(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},u=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};u(a);const l=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:l};if(u(c),(r=this.options.behavior)==null||r.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=c.fetchOptions)==null?void 0:s.meta)){var h;this.dispatch({type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta})}const d=f=>{if(xl(f)&&f.silent||this.dispatch({type:"error",error:f}),!xl(f)){var p,_,v,g;(p=(_=this.cache.config).onError)==null||p.call(_,f,this),(v=(g=this.cache.config).onSettled)==null||v.call(g,this.state.data,f,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=qR({fn:c.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:f=>{var p,_,v,g;if(typeof f>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(f),(p=(_=this.cache.config).onSuccess)==null||p.call(_,f,this),(v=(g=this.cache.config).onSettled)==null||v.call(g,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(f,p)=>{this.dispatch({type:"failed",failureCount:f,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=r=>{var s,i;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:Bh(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(i=e.dataUpdatedAt)!=null?i:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return xl(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),we.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function RL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class AL extends wo{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,r){var s;const i=n.queryKey,o=(s=n.queryHash)!=null?s:Sy(i,n);let a=this.get(o);return a||(a=new SL({cache:this,logger:e.getLogger(),queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){we.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[r]=cr(e,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(s=>Mw(r,s))}findAll(e,n){const[r]=cr(e,n);return Object.keys(r).length>0?this.queries.filter(s=>Mw(r,s)):this.queries}notify(e){we.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){we.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){we.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class PL extends QR{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Ry,this.observers=[],this.state=e.state||CL(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var R;return this.retryer=qR({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(C,j)=>{this.dispatch({type:"failed",failureCount:C,error:j})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(R=this.options.retry)!=null?R:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,s,i,o,a,u,l,c;if(!n){var h,d,f,p;this.dispatch({type:"loading",variables:this.options.variables}),await((h=(d=this.mutationCache.config).onMutate)==null?void 0:h.call(d,this.state.variables,this));const C=await((f=(p=this.options).onMutate)==null?void 0:f.call(p,this.state.variables));C!==this.state.context&&this.dispatch({type:"loading",context:C,variables:this.state.variables})}const R=await e();return await((r=(s=this.mutationCache.config).onSuccess)==null?void 0:r.call(s,R,this.state.variables,this.state.context,this)),await((i=(o=this.options).onSuccess)==null?void 0:i.call(o,R,this.state.variables,this.state.context)),await((a=(u=this.mutationCache.config).onSettled)==null?void 0:a.call(u,R,null,this.state.variables,this.state.context,this)),await((l=(c=this.options).onSettled)==null?void 0:l.call(c,R,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:R}),R}catch(R){try{var _,v,g,m,y,w,P,S;throw await((_=(v=this.mutationCache.config).onError)==null?void 0:_.call(v,R,this.state.variables,this.state.context,this)),await((g=(m=this.options).onError)==null?void 0:g.call(m,R,this.state.variables,this.state.context)),await((y=(w=this.mutationCache.config).onSettled)==null?void 0:y.call(w,void 0,R,this.state.variables,this.state.context,this)),await((P=(S=this.options).onSettled)==null?void 0:P.call(S,void 0,R,this.state.variables,this.state.context)),R}finally{this.dispatch({type:"error",error:R})}}}dispatch(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Bh(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=n(this.state),we.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function CL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class xL extends wo{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,r){const s=new PL({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){we.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>Uw(e,n))}findAll(e){return this.mutations.filter(n=>Uw(e,n))}notify(e){we.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return we.batch(()=>n.reduce((r,s)=>r.then(()=>s.continue().catch(Bt)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function kL(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,s,i,o;const a=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,u=(r=t.fetchOptions)==null||(s=r.meta)==null?void 0:s.fetchMore,l=u==null?void 0:u.pageParam,c=(u==null?void 0:u.direction)==="forward",h=(u==null?void 0:u.direction)==="backward",d=((i=t.state.data)==null?void 0:i.pages)||[],f=((o=t.state.data)==null?void 0:o.pageParams)||[];let p=f,_=!1;const v=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>{var R;if((R=t.signal)!=null&&R.aborted)_=!0;else{var C;(C=t.signal)==null||C.addEventListener("abort",()=>{_=!0})}return t.signal}})},g=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),m=(S,R,C,j)=>(p=j?[R,...p]:[...p,R],j?[C,...S]:[...S,C]),y=(S,R,C,j)=>{if(_)return Promise.reject("Cancelled");if(typeof C>"u"&&!R&&S.length)return Promise.resolve(S);const $={queryKey:t.queryKey,pageParam:C,meta:t.options.meta};v($);const Ye=g($);return Promise.resolve(Ye).then(xn=>m(S,C,xn,j))};let w;if(!d.length)w=y([]);else if(c){const S=typeof l<"u",R=S?l:qw(t.options,d);w=y(d,S,R)}else if(h){const S=typeof l<"u",R=S?l:DL(t.options,d);w=y(d,S,R,!0)}else{p=[];const S=typeof t.options.getNextPageParam>"u";w=(a&&d[0]?a(d[0],0,d):!0)?y([],S,f[0]):Promise.resolve(m([],f[0],d[0]));for(let C=1;C<d.length;C++)w=w.then(j=>{if(a&&d[C]?a(d[C],C,d):!0){const Ye=S?f[C]:qw(t.options,j);return y(j,S,Ye)}return Promise.resolve(m(j,f[C],d[C]))})}return w.then(S=>({pages:S,pageParams:p}))}}}}function qw(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function DL(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class bL{constructor(e={}){this.queryCache=e.queryCache||new AL,this.mutationCache=e.mutationCache||new xL,this.logger=e.logger||Ry,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=xc.subscribe(()=>{xc.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=kc.subscribe(()=>{kc.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[r]=cr(e,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state.data}ensureQueryData(e,n,r){const s=Xo(e,n,r),i=this.getQueryData(s.queryKey);return i?Promise.resolve(i):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:r})=>{const s=r.data;return[n,s]})}setQueryData(e,n,r){const s=this.queryCache.find(e),i=s==null?void 0:s.state.data,o=yL(n,i);if(typeof o>"u")return;const a=Xo(e),u=this.defaultQueryOptions(a);return this.queryCache.build(this,u).setData(o,{...r,manual:!0})}setQueriesData(e,n,r){return we.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,n,r)]))}getQueryState(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state}removeQueries(e,n){const[r]=cr(e,n),s=this.queryCache;we.batch(()=>{s.findAll(r).forEach(i=>{s.remove(i)})})}resetQueries(e,n,r){const[s,i]=cr(e,n,r),o=this.queryCache,a={type:"active",...s};return we.batch(()=>(o.findAll(s).forEach(u=>{u.reset()}),this.refetchQueries(a,i)))}cancelQueries(e,n,r){const[s,i={}]=cr(e,n,r);typeof i.revert>"u"&&(i.revert=!0);const o=we.batch(()=>this.queryCache.findAll(s).map(a=>a.cancel(i)));return Promise.all(o).then(Bt).catch(Bt)}invalidateQueries(e,n,r){const[s,i]=cr(e,n,r);return we.batch(()=>{var o,a;if(this.queryCache.findAll(s).forEach(l=>{l.invalidate()}),s.refetchType==="none")return Promise.resolve();const u={...s,type:(o=(a=s.refetchType)!=null?a:s.type)!=null?o:"active"};return this.refetchQueries(u,i)})}refetchQueries(e,n,r){const[s,i]=cr(e,n,r),o=we.batch(()=>this.queryCache.findAll(s).filter(u=>!u.isDisabled()).map(u=>{var l;return u.fetch(void 0,{...i,cancelRefetch:(l=i==null?void 0:i.cancelRefetch)!=null?l:!0,meta:{refetchPage:s.refetchPage}})}));let a=Promise.all(o).then(Bt);return i!=null&&i.throwOnError||(a=a.catch(Bt)),a}fetchQuery(e,n,r){const s=Xo(e,n,r),i=this.defaultQueryOptions(s);typeof i.retry>"u"&&(i.retry=!1);const o=this.queryCache.build(this,i);return o.isStaleByTime(i.staleTime)?o.fetch(i):Promise.resolve(o.state.data)}prefetchQuery(e,n,r){return this.fetchQuery(e,n,r).then(Bt).catch(Bt)}fetchInfiniteQuery(e,n,r){const s=Xo(e,n,r);return s.behavior=kL(),this.fetchQuery(s)}prefetchInfiniteQuery(e,n,r){return this.fetchInfiniteQuery(e,n,r).then(Bt).catch(Bt)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const r=this.queryDefaults.find(s=>ws(e)===ws(s.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(r=>Cc(e,r.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(e,n){const r=this.mutationDefaults.find(s=>ws(e)===ws(s.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(r=>Cc(e,r.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=Sy(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class KR extends wo{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),Qw(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Lp(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Lp(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const r=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Op(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const i=this.hasListeners();i&&Kw(this.currentQuery,s,this.options,r)&&this.executeFetch(),this.updateResult(n),i&&(this.currentQuery!==s||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();i&&(this.currentQuery!==s||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),r=this.createResult(n,e);return OL(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Bt)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),nu||this.currentResult.isStale||!Np(this.options.staleTime))return;const n=UR(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(nu||this.options.enabled===!1||!Np(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||xc.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const r=this.currentQuery,s=this.options,i=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,u=e!==r,l=u?e.state:this.currentQueryInitialState,c=u?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:d,error:f,errorUpdatedAt:p,fetchStatus:_,status:v}=h,g=!1,m=!1,y;if(n._optimisticResults){const C=this.hasListeners(),j=!C&&Qw(e,n),$=C&&Kw(e,r,n,s);(j||$)&&(_=Bh(e.options.networkMode)?"fetching":"paused",d||(v="loading")),n._optimisticResults==="isRestoring"&&(_="idle")}if(n.keepPreviousData&&!h.dataUpdatedAt&&c!=null&&c.isSuccess&&v!=="error")y=c.data,d=c.dataUpdatedAt,v=c.status,g=!0;else if(n.select&&typeof h.data<"u")if(i&&h.data===(o==null?void 0:o.data)&&n.select===this.selectFn)y=this.selectResult;else try{this.selectFn=n.select,y=n.select(h.data),y=Fp(i==null?void 0:i.data,y,n),this.selectResult=y,this.selectError=null}catch(C){this.selectError=C}else y=h.data;if(typeof n.placeholderData<"u"&&typeof y>"u"&&v==="loading"){let C;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))C=i.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof C<"u")try{C=n.select(C),this.selectError=null}catch(j){this.selectError=j}typeof C<"u"&&(v="success",y=Fp(i==null?void 0:i.data,C,n),m=!0)}this.selectError&&(f=this.selectError,y=this.selectResult,p=Date.now(),v="error");const w=_==="fetching",P=v==="loading",S=v==="error";return{status:v,fetchStatus:_,isLoading:P,isSuccess:v==="success",isError:S,isInitialLoading:P&&w,data:y,dataUpdatedAt:d,error:f,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>l.dataUpdateCount||h.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!P,isLoadingError:S&&h.dataUpdatedAt===0,isPaused:_==="paused",isPlaceholderData:m,isPreviousData:g,isRefetchError:S&&h.dataUpdatedAt!==0,isStale:Ay(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Op(r,n))return;this.currentResult=r;const s={cache:!0},i=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!this.trackedProps.size)return!0;const u=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&u.add("error"),Object.keys(this.currentResult).some(l=>{const c=l;return this.currentResult[c]!==n[c]&&u.has(c)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),this.notify({...s,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!xl(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){we.batch(()=>{if(e.onSuccess){var n,r,s,i;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(s=(i=this.options).onSettled)==null||s.call(i,this.currentResult.data,null)}else if(e.onError){var o,a,u,l;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(u=(l=this.options).onSettled)==null||u.call(l,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function NL(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Qw(t,e){return NL(t,e)||t.state.dataUpdatedAt>0&&Lp(t,e,e.refetchOnMount)}function Lp(t,e,n){if(e.enabled!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Ay(t,e)}return!1}function Kw(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Ay(t,n)}function Ay(t,e){return t.isStaleByTime(e.staleTime)}function OL(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:!Op(t.getCurrentResult(),e)}class VL extends wo{constructor(e,n){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},n&&this.setQueries(n)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(n=>{this.onUpdate(e,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,n){this.queries=e,we.batch(()=>{const r=this.observers,s=this.findMatchingObservers(this.queries);s.forEach(l=>l.observer.setOptions(l.defaultedQueryOptions,n));const i=s.map(l=>l.observer),o=Object.fromEntries(i.map(l=>[l.options.queryHash,l])),a=i.map(l=>l.getCurrentResult()),u=i.some((l,c)=>l!==r[c]);r.length===i.length&&!u||(this.observers=i,this.observersMap=o,this.result=a,this.hasListeners()&&(Lw(r,i).forEach(l=>{l.destroy()}),Lw(i,r).forEach(l=>{l.subscribe(c=>{this.onUpdate(l,c)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(n=>n.observer.getOptimisticResult(n.defaultedQueryOptions))}findMatchingObservers(e){const n=this.observers,r=new Map(n.map(f=>[f.options.queryHash,f])),s=e.map(f=>this.client.defaultQueryOptions(f)),i=s.flatMap(f=>{const p=r.get(f.queryHash);return p!=null?[{defaultedQueryOptions:f,observer:p}]:[]}),o=new Set(i.map(f=>f.defaultedQueryOptions.queryHash)),a=s.filter(f=>!o.has(f.queryHash)),u=new Set(i.map(f=>f.observer)),l=n.filter(f=>!u.has(f)),c=f=>{const p=this.client.defaultQueryOptions(f),_=this.observersMap[p.queryHash];return _??new KR(this.client,p)},h=a.map((f,p)=>{if(f.keepPreviousData){const _=l[p];if(_!==void 0)return{defaultedQueryOptions:f,observer:_}}return{defaultedQueryOptions:f,observer:c(f)}}),d=(f,p)=>s.indexOf(f.defaultedQueryOptions)-s.indexOf(p.defaultedQueryOptions);return i.concat(h).sort(d)}onUpdate(e,n){const r=this.observers.indexOf(e);r!==-1&&(this.result=_L(this.result,r,n),this.notify())}notify(){we.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}var GR={exports:{}},HR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to=B;function FL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var LL=typeof Object.is=="function"?Object.is:FL,ML=to.useState,UL=to.useEffect,BL=to.useLayoutEffect,$L=to.useDebugValue;function jL(t,e){var n=e(),r=ML({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return BL(function(){s.value=n,s.getSnapshot=e,Qd(s)&&i({inst:s})},[t,n,e]),UL(function(){return Qd(s)&&i({inst:s}),t(function(){Qd(s)&&i({inst:s})})},[t]),$L(n),n}function Qd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!LL(t,n)}catch{return!0}}function zL(t,e){return e()}var qL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zL:jL;HR.useSyncExternalStore=to.useSyncExternalStore!==void 0?to.useSyncExternalStore:qL;GR.exports=HR;var QL=GR.exports;const WR=QL.useSyncExternalStore,Gw=B.createContext(void 0),YR=B.createContext(!1);function XR(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Gw),window.ReactQueryClientContext):Gw)}const Py=({context:t}={})=>{const e=B.useContext(XR(t,B.useContext(YR)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},KL=({client:t,children:e,context:n,contextSharing:r=!1})=>{B.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const s=XR(n,r);return B.createElement(YR.Provider,{value:!n&&r},B.createElement(s.Provider,{value:t},e))},JR=B.createContext(!1),ZR=()=>B.useContext(JR);JR.Provider;function GL(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const HL=B.createContext(GL()),eA=()=>B.useContext(HL);function WL(t,e){return typeof t=="function"?t(...e):!!t}const tA=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},nA=t=>{B.useEffect(()=>{t.clearReset()},[t])},rA=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&WL(n,[t.error,r]),sA=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},iA=(t,e)=>t.isLoading&&t.isFetching&&!e,Mp=(t,e,n)=>(t==null?void 0:t.suspense)&&iA(e,n),Up=(t,e,n)=>e.fetchOptimistic(t).then(({data:r})=>{t.onSuccess==null||t.onSuccess(r),t.onSettled==null||t.onSettled(r,null)}).catch(r=>{n.clearReset(),t.onError==null||t.onError(r),t.onSettled==null||t.onSettled(void 0,r)});function Kd({queries:t,context:e}){const n=Py({context:e}),r=ZR(),s=eA(),i=B.useMemo(()=>t.map(d=>{const f=n.defaultQueryOptions(d);return f._optimisticResults=r?"isRestoring":"optimistic",f}),[t,n,r]);i.forEach(d=>{sA(d),tA(d,s)}),nA(s);const[o]=B.useState(()=>new VL(n,i)),a=o.getOptimisticResult(i);WR(B.useCallback(d=>r?()=>{}:o.subscribe(we.batchCalls(d)),[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),B.useEffect(()=>{o.setQueries(i,{listeners:!1})},[i,o]);const l=a.some((d,f)=>Mp(i[f],d,r))?a.flatMap((d,f)=>{const p=i[f],_=o.getObservers()[f];if(p&&_){if(Mp(p,d,r))return Up(p,_,s);iA(d,r)&&Up(p,_,s)}return[]}):[];if(l.length>0)throw Promise.all(l);const c=o.getQueries(),h=a.find((d,f)=>{var p,_;return rA({result:d,errorResetBoundary:s,useErrorBoundary:(p=(_=i[f])==null?void 0:_.useErrorBoundary)!=null?p:!1,query:c[f]})});if(h!=null&&h.error)throw h.error;return a}function YL(t,e){const n=Py({context:t.context}),r=ZR(),s=eA(),i=n.defaultQueryOptions(t);i._optimisticResults=r?"isRestoring":"optimistic",i.onError&&(i.onError=we.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=we.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=we.batchCalls(i.onSettled)),sA(i),tA(i,s),nA(s);const[o]=B.useState(()=>new e(n,i)),a=o.getOptimisticResult(i);if(WR(B.useCallback(u=>{const l=r?()=>{}:o.subscribe(we.batchCalls(u));return o.updateResult(),l},[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),B.useEffect(()=>{o.setOptions(i,{listeners:!1})},[i,o]),Mp(i,a,r))throw Up(i,o,s);if(rA({result:a,errorResetBoundary:s,useErrorBoundary:i.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return i.notifyOnChangeProps?a:o.trackResult(a)}function Hw(t,e,n){const r=Xo(t,e,n);return YL(r,KR)}function oA(t,e){return function(){return t.apply(e,arguments)}}const{toString:XL}=Object.prototype,{getPrototypeOf:Cy}=Object,$h=(t=>e=>{const n=XL.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cn=t=>(t=t.toLowerCase(),e=>$h(e)===t),jh=t=>e=>typeof e===t,{isArray:Eo}=Array,ru=jh("undefined");function JL(t){return t!==null&&!ru(t)&&t.constructor!==null&&!ru(t.constructor)&&Ht(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const aA=Cn("ArrayBuffer");function ZL(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&aA(t.buffer),e}const eM=jh("string"),Ht=jh("function"),uA=jh("number"),zh=t=>t!==null&&typeof t=="object",tM=t=>t===!0||t===!1,kl=t=>{if($h(t)!=="object")return!1;const e=Cy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},nM=Cn("Date"),rM=Cn("File"),sM=Cn("Blob"),iM=Cn("FileList"),oM=t=>zh(t)&&Ht(t.pipe),aM=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ht(t.append)&&((e=$h(t))==="formdata"||e==="object"&&Ht(t.toString)&&t.toString()==="[object FormData]"))},uM=Cn("URLSearchParams"),lM=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ku(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Eo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function lA(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const cA=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),hA=t=>!ru(t)&&t!==cA;function Bp(){const{caseless:t}=hA(this)&&this||{},e={},n=(r,s)=>{const i=t&&lA(e,s)||s;kl(e[i])&&kl(r)?e[i]=Bp(e[i],r):kl(r)?e[i]=Bp({},r):Eo(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&ku(arguments[r],n);return e}const cM=(t,e,n,{allOwnKeys:r}={})=>(ku(e,(s,i)=>{n&&Ht(s)?t[i]=oA(s,n):t[i]=s},{allOwnKeys:r}),t),hM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),dM=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},fM=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Cy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},pM=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},mM=t=>{if(!t)return null;if(Eo(t))return t;let e=t.length;if(!uA(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},gM=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Cy(Uint8Array)),yM=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},_M=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},vM=Cn("HTMLFormElement"),wM=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Ww=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),EM=Cn("RegExp"),dA=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ku(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},TM=t=>{dA(t,(e,n)=>{if(Ht(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ht(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},IM=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Eo(t)?r(t):r(String(t).split(e)),n},SM=()=>{},RM=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Gd="abcdefghijklmnopqrstuvwxyz",Yw="0123456789",fA={DIGIT:Yw,ALPHA:Gd,ALPHA_DIGIT:Gd+Gd.toUpperCase()+Yw},AM=(t=16,e=fA.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function PM(t){return!!(t&&Ht(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const CM=t=>{const e=new Array(10),n=(r,s)=>{if(zh(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Eo(r)?[]:{};return ku(r,(o,a)=>{const u=n(o,s+1);!ru(u)&&(i[a]=u)}),e[s]=void 0,i}}return r};return n(t,0)},xM=Cn("AsyncFunction"),kM=t=>t&&(zh(t)||Ht(t))&&Ht(t.then)&&Ht(t.catch),A={isArray:Eo,isArrayBuffer:aA,isBuffer:JL,isFormData:aM,isArrayBufferView:ZL,isString:eM,isNumber:uA,isBoolean:tM,isObject:zh,isPlainObject:kl,isUndefined:ru,isDate:nM,isFile:rM,isBlob:sM,isRegExp:EM,isFunction:Ht,isStream:oM,isURLSearchParams:uM,isTypedArray:gM,isFileList:iM,forEach:ku,merge:Bp,extend:cM,trim:lM,stripBOM:hM,inherits:dM,toFlatObject:fM,kindOf:$h,kindOfTest:Cn,endsWith:pM,toArray:mM,forEachEntry:yM,matchAll:_M,isHTMLForm:vM,hasOwnProperty:Ww,hasOwnProp:Ww,reduceDescriptors:dA,freezeMethods:TM,toObjectSet:IM,toCamelCase:wM,noop:SM,toFiniteNumber:RM,findKey:lA,global:cA,isContextDefined:hA,ALPHABET:fA,generateString:AM,isSpecCompliantForm:PM,toJSONObject:CM,isAsyncFn:xM,isThenable:kM};function Z(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}A.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const pA=Z.prototype,mA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mA[t]={value:t}});Object.defineProperties(Z,mA);Object.defineProperty(pA,"isAxiosError",{value:!0});Z.from=(t,e,n,r,s,i)=>{const o=Object.create(pA);return A.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),Z.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const DM=null;function $p(t){return A.isPlainObject(t)||A.isArray(t)}function gA(t){return A.endsWith(t,"[]")?t.slice(0,-2):t}function Xw(t,e,n){return t?t.concat(e).map(function(s,i){return s=gA(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function bM(t){return A.isArray(t)&&!t.some($p)}const NM=A.toFlatObject(A,{},null,function(e){return/^is[A-Z]/.test(e)});function qh(t,e,n){if(!A.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,v){return!A.isUndefined(v[_])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(e);if(!A.isFunction(s))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(A.isDate(p))return p.toISOString();if(!u&&A.isBlob(p))throw new Z("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(p)||A.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,_,v){let g=p;if(p&&!v&&typeof p=="object"){if(A.endsWith(_,"{}"))_=r?_:_.slice(0,-2),p=JSON.stringify(p);else if(A.isArray(p)&&bM(p)||(A.isFileList(p)||A.endsWith(_,"[]"))&&(g=A.toArray(p)))return _=gA(_),g.forEach(function(y,w){!(A.isUndefined(y)||y===null)&&e.append(o===!0?Xw([_],w,i):o===null?_:_+"[]",l(y))}),!1}return $p(p)?!0:(e.append(Xw(v,_,i),l(p)),!1)}const h=[],d=Object.assign(NM,{defaultVisitor:c,convertValue:l,isVisitable:$p});function f(p,_){if(!A.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+_.join("."));h.push(p),A.forEach(p,function(g,m){(!(A.isUndefined(g)||g===null)&&s.call(e,g,A.isString(m)?m.trim():m,_,d))===!0&&f(g,_?_.concat(m):[m])}),h.pop()}}if(!A.isObject(t))throw new TypeError("data must be an object");return f(t),e}function Jw(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function xy(t,e){this._pairs=[],t&&qh(t,this,e)}const yA=xy.prototype;yA.append=function(e,n){this._pairs.push([e,n])};yA.toString=function(e){const n=e?function(r){return e.call(this,r,Jw)}:Jw;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function OM(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _A(t,e,n){if(!e)return t;const r=n&&n.encode||OM,s=n&&n.serialize;let i;if(s?i=s(e,n):i=A.isURLSearchParams(e)?e.toString():new xy(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class VM{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){A.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Zw=VM,vA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FM=typeof URLSearchParams<"u"?URLSearchParams:xy,LM=typeof FormData<"u"?FormData:null,MM=typeof Blob<"u"?Blob:null,UM=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),BM=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),wn={isBrowser:!0,classes:{URLSearchParams:FM,FormData:LM,Blob:MM},isStandardBrowserEnv:UM,isStandardBrowserWebWorkerEnv:BM,protocols:["http","https","file","blob","url","data"]};function $M(t,e){return qh(t,new wn.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return wn.isNode&&A.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function jM(t){return A.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zM(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function wA(t){function e(n,r,s,i){let o=n[i++];const a=Number.isFinite(+o),u=i>=n.length;return o=!o&&A.isArray(s)?s.length:o,u?(A.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!A.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&A.isArray(s[o])&&(s[o]=zM(s[o])),!a)}if(A.isFormData(t)&&A.isFunction(t.entries)){const n={};return A.forEachEntry(t,(r,s)=>{e(jM(r),s,n,0)}),n}return null}function qM(t,e,n){if(A.isString(t))try{return(e||JSON.parse)(t),A.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ky={transitional:vA,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=A.isObject(e);if(i&&A.isHTMLForm(e)&&(e=new FormData(e)),A.isFormData(e))return s&&s?JSON.stringify(wA(e)):e;if(A.isArrayBuffer(e)||A.isBuffer(e)||A.isStream(e)||A.isFile(e)||A.isBlob(e))return e;if(A.isArrayBufferView(e))return e.buffer;if(A.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return $M(e,this.formSerializer).toString();if((a=A.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return qh(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),qM(e)):e}],transformResponse:[function(e){const n=this.transitional||ky.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&A.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Z.from(a,Z.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wn.classes.FormData,Blob:wn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],t=>{ky.headers[t]={}});const Dy=ky,QM=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KM=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&QM[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},eE=Symbol("internals");function $o(t){return t&&String(t).trim().toLowerCase()}function Dl(t){return t===!1||t==null?t:A.isArray(t)?t.map(Dl):String(t)}function GM(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const HM=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Hd(t,e,n,r,s){if(A.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!A.isString(e)){if(A.isString(r))return e.indexOf(r)!==-1;if(A.isRegExp(r))return r.test(e)}}function WM(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function YM(t,e){const n=A.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class Qh{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,u,l){const c=$o(u);if(!c)throw new Error("header name must be a non-empty string");const h=A.findKey(s,c);(!h||s[h]===void 0||l===!0||l===void 0&&s[h]!==!1)&&(s[h||u]=Dl(a))}const o=(a,u)=>A.forEach(a,(l,c)=>i(l,c,u));return A.isPlainObject(e)||e instanceof this.constructor?o(e,n):A.isString(e)&&(e=e.trim())&&!HM(e)?o(KM(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=$o(e),e){const r=A.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return GM(s);if(A.isFunction(n))return n.call(this,s,r);if(A.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=$o(e),e){const r=A.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Hd(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=$o(o),o){const a=A.findKey(r,o);a&&(!n||Hd(r,r[a],a,n))&&(delete r[a],s=!0)}}return A.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Hd(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return A.forEach(this,(s,i)=>{const o=A.findKey(r,i);if(o){n[o]=Dl(s),delete n[i];return}const a=e?WM(i):String(i).trim();a!==i&&delete n[i],n[a]=Dl(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return A.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&A.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[eE]=this[eE]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=$o(o);r[a]||(YM(s,o),r[a]=!0)}return A.isArray(e)?e.forEach(i):i(e),this}}Qh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(Qh.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});A.freezeMethods(Qh);const zn=Qh;function Wd(t,e){const n=this||Dy,r=e||n,s=zn.from(r.headers);let i=r.data;return A.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function EA(t){return!!(t&&t.__CANCEL__)}function Du(t,e,n){Z.call(this,t??"canceled",Z.ERR_CANCELED,e,n),this.name="CanceledError"}A.inherits(Du,Z,{__CANCEL__:!0});function XM(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Z("Request failed with status code "+n.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const JM=wn.isStandardBrowserEnv?function(){return{write:function(n,r,s,i,o,a){const u=[];u.push(n+"="+encodeURIComponent(r)),A.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),A.isString(i)&&u.push("path="+i),A.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function ZM(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function e4(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function TA(t,e){return t&&!ZM(e)?e4(t,e):e}const t4=wn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=A.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function n4(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function r4(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const l=Date.now(),c=r[i];o||(o=l),n[s]=u,r[s]=l;let h=i,d=0;for(;h!==s;)d+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),l-o<e)return;const f=c&&l-c;return f?Math.round(d*1e3/f):void 0}}function tE(t,e){let n=0;const r=r4(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,u=r(a),l=i<=o;n=i;const c={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:u||void 0,estimated:u&&o&&l?(o-i)/u:void 0,event:s};c[e?"download":"upload"]=!0,t(c)}}const s4=typeof XMLHttpRequest<"u",i4=s4&&function(t){return new Promise(function(n,r){let s=t.data;const i=zn.from(t.headers).normalize(),o=t.responseType;let a;function u(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let l;A.isFormData(s)&&(wn.isStandardBrowserEnv||wn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.getContentType(/^\s*multipart\/form-data/)?A.isString(l=i.getContentType())&&i.setContentType(l.replace(/^\s*(multipart\/form-data);+/,"$1")):i.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(p+":"+_))}const h=TA(t.baseURL,t.url);c.open(t.method.toUpperCase(),_A(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const p=zn.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:p,config:t,request:c};XM(function(m){n(m),u()},function(m){r(m),u()},v),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(r(new Z("Request aborted",Z.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new Z("Network Error",Z.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let _=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const v=t.transitional||vA;t.timeoutErrorMessage&&(_=t.timeoutErrorMessage),r(new Z(_,v.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,t,c)),c=null},wn.isStandardBrowserEnv){const p=(t.withCredentials||t4(h))&&t.xsrfCookieName&&JM.read(t.xsrfCookieName);p&&i.set(t.xsrfHeaderName,p)}s===void 0&&i.setContentType(null),"setRequestHeader"in c&&A.forEach(i.toJSON(),function(_,v){c.setRequestHeader(v,_)}),A.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",tE(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",tE(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=p=>{c&&(r(!p||p.type?new Du(null,t,c):p),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const f=n4(h);if(f&&wn.protocols.indexOf(f)===-1){r(new Z("Unsupported protocol "+f+":",Z.ERR_BAD_REQUEST,t));return}c.send(s||null)})},jp={http:DM,xhr:i4};A.forEach(jp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const nE=t=>`- ${t}`,o4=t=>A.isFunction(t)||t===null||t===!1,IA={getAdapter:t=>{t=A.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!o4(n)&&(r=jp[(o=String(n)).toLowerCase()],r===void 0))throw new Z(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(nE).join(`
`):" "+nE(i[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:jp};function Yd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Du(null,t)}function rE(t){return Yd(t),t.headers=zn.from(t.headers),t.data=Wd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),IA.getAdapter(t.adapter||Dy.adapter)(t).then(function(r){return Yd(t),r.data=Wd.call(t,t.transformResponse,r),r.headers=zn.from(r.headers),r},function(r){return EA(r)||(Yd(t),r&&r.response&&(r.response.data=Wd.call(t,t.transformResponse,r.response),r.response.headers=zn.from(r.response.headers))),Promise.reject(r)})}const sE=t=>t instanceof zn?t.toJSON():t;function no(t,e){e=e||{};const n={};function r(l,c,h){return A.isPlainObject(l)&&A.isPlainObject(c)?A.merge.call({caseless:h},l,c):A.isPlainObject(c)?A.merge({},c):A.isArray(c)?c.slice():c}function s(l,c,h){if(A.isUndefined(c)){if(!A.isUndefined(l))return r(void 0,l,h)}else return r(l,c,h)}function i(l,c){if(!A.isUndefined(c))return r(void 0,c)}function o(l,c){if(A.isUndefined(c)){if(!A.isUndefined(l))return r(void 0,l)}else return r(void 0,c)}function a(l,c,h){if(h in e)return r(l,c);if(h in t)return r(void 0,l)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(l,c)=>s(sE(l),sE(c),!0)};return A.forEach(Object.keys(Object.assign({},t,e)),function(c){const h=u[c]||s,d=h(t[c],e[c],c);A.isUndefined(d)&&h!==a||(n[c]=d)}),n}const SA="1.5.1",by={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{by[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const iE={};by.transitional=function(e,n,r){function s(i,o){return"[Axios v"+SA+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new Z(s(o," has been removed"+(n?" in "+n:"")),Z.ERR_DEPRECATED);return n&&!iE[o]&&(iE[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function a4(t,e,n){if(typeof t!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],u=a===void 0||o(a,i,t);if(u!==!0)throw new Z("option "+i+" must be "+u,Z.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Z("Unknown option "+i,Z.ERR_BAD_OPTION)}}const zp={assertOptions:a4,validators:by},ar=zp.validators;class Dc{constructor(e){this.defaults=e,this.interceptors={request:new Zw,response:new Zw}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=no(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&zp.assertOptions(r,{silentJSONParsing:ar.transitional(ar.boolean),forcedJSONParsing:ar.transitional(ar.boolean),clarifyTimeoutError:ar.transitional(ar.boolean)},!1),s!=null&&(A.isFunction(s)?n.paramsSerializer={serialize:s}:zp.assertOptions(s,{encode:ar.function,serialize:ar.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&A.merge(i.common,i[n.method]);i&&A.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=zn.concat(o,i);const a=[];let u=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(u=u&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const l=[];this.interceptors.response.forEach(function(_){l.push(_.fulfilled,_.rejected)});let c,h=0,d;if(!u){const p=[rE.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,l),d=p.length,c=Promise.resolve(n);h<d;)c=c.then(p[h++],p[h++]);return c}d=a.length;let f=n;for(h=0;h<d;){const p=a[h++],_=a[h++];try{f=p(f)}catch(v){_.call(this,v);break}}try{c=rE.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=l.length;h<d;)c=c.then(l[h++],l[h++]);return c}getUri(e){e=no(this.defaults,e);const n=TA(e.baseURL,e.url);return _A(n,e.params,e.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(e){Dc.prototype[e]=function(n,r){return this.request(no(r||{},{method:e,url:n,data:(r||{}).data}))}});A.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(no(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Dc.prototype[e]=n(),Dc.prototype[e+"Form"]=n(!0)});const bl=Dc;class Ny{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Du(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Ny(function(s){e=s}),cancel:e}}}const u4=Ny;function l4(t){return function(n){return t.apply(null,n)}}function c4(t){return A.isObject(t)&&t.isAxiosError===!0}const qp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qp).forEach(([t,e])=>{qp[e]=t});const h4=qp;function RA(t){const e=new bl(t),n=oA(bl.prototype.request,e);return A.extend(n,bl.prototype,e,{allOwnKeys:!0}),A.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return RA(no(t,s))},n}const Le=RA(Dy);Le.Axios=bl;Le.CanceledError=Du;Le.CancelToken=u4;Le.isCancel=EA;Le.VERSION=SA;Le.toFormData=qh;Le.AxiosError=Z;Le.Cancel=Le.CanceledError;Le.all=function(e){return Promise.all(e)};Le.spread=l4;Le.isAxiosError=c4;Le.mergeConfig=no;Le.AxiosHeaders=zn;Le.formToJSON=t=>wA(A.isHTMLForm(t)?new FormData(t):t);Le.getAdapter=IA.getAdapter;Le.HttpStatusCode=h4;Le.default=Le;const AA=Le,d4="https://pokeapi.co/api/v2/pokemon-species/",f4="https://pokeapi.co/api/v2/type/",p4="zh-Hant",oE=20,aE=({offset:t=0,limit:e=20})=>AA({baseURL:d4,params:{offset:t,limit:e}}).then(n=>n.data),ul=t=>AA(t).then(e=>e.data),m4=()=>{var f;const{page:t,handleStorePokemon:e,handleIsLoadingPokemon:n}=ln(),r=Py(),{data:s,isFetching:i,error:o,isPreviousData:a}=Hw({queryKey:["pokedex",t],queryFn:()=>aE({offset:t}),keepPreviousData:!0,staleTime:1/0});B.useEffect(()=>{!a&&(s!=null&&s.hasMore)&&r.prefetchQuery({queryKey:["pokedex",t+oE],queryFn:()=>aE({offset:t+oE})})},[s,a,t,r]);const u=Kd({queries:((s==null?void 0:s.results)??[]).map(p=>({queryKey:["species",p.url],queryFn:()=>ul(p.url),enabled:!!p.url}))}),l=Kd({queries:(u??[]).map(p=>{var g,m;const{data:_}=p,v=((m=(g=_==null?void 0:_.varieties[0])==null?void 0:g.pokemon)==null?void 0:m.url)??"";return{queryKey:["varieties",v],queryFn:async()=>ul(v),enabled:!!p.data}})}),c=Hw({queryKey:["AllTypes"],queryFn:()=>ul(f4)}),h=Kd({queries:(((f=c==null?void 0:c.data)==null?void 0:f.results)??[]).map(p=>{const{url:_}=p;return{queryKey:["TypeDetail",_],queryFn:()=>ul(_),enabled:!!_}})}),d=s&&u.every(p=>!p.isLoading&&!p.isError&&p.data)&&l.every(p=>!p.isLoading&&!p.isError&&p.data)&&h.every(p=>!p.isLoading&&!p.isError&&p.data);B.useEffect(()=>{if(d){let p=new Map;h.forEach(v=>{const{data:g}=v,m=g.name,y=g.damage_relations;p.set(m,y)});let _=new Map;u.map(v=>{const{data:g}=v,m=g.id,y=g.names.filter(P=>P.language.name===p4)[0].name,w=g.name;_.set(m,{zhName:y,enName:w,pokeId:m})}),l.map(v=>{const{data:g}=v,m=g.id,y=g.sprites.other["official-artwork"].front_default,P=g.types.map(R=>{const C=R.type.name,j=qm.filter($=>$.enType===C)[0];return j.damage_relations=p.get(C),j}),S=_.get(m);S.Types=P,S.sprite=y,_.set(m,S)}),e([...Array.from(_.values())])}n(!d)},[d])},uE=(t,e)=>{if(t.length===0)return[];const n=t.map(s=>{const i=s==null?void 0:s.Types.map(o=>{var u,l;return(e?((u=o==null?void 0:o.damage_relations)==null?void 0:u.double_damage_from)??[]:((l=o==null?void 0:o.damage_relations)==null?void 0:l.half_damage_from)??[]).map(c=>c==null?void 0:c.name)});return[].concat(...i)}),r=new Set(n[0]);return n.forEach(s=>{const i=new Set(s);r.forEach(o=>{i.has(o)||r.delete(o)})}),Array.from(r)},g4=()=>{const{selectImg:t,handleBestDamage:e}=ln();B.useEffect(()=>{const n=uE(t,!0),r=uE(t,!1),s=new Set(n);r.forEach(o=>{s.has(o)&&s.delete(o)});const i=qm.filter(o=>{if(s.has(o.enType))return o});e(i)},[t])},y4=()=>{const{selectImg:t,AddRemoveImg:e,RemoveImg:n,showInfo_select:r,showType_select:s,showInfo_beenSelect:i,showType_beenSelect:o,showInfo_bestDamage:a,showType_bestDamage:u,storePokemon:l,bestDamage:c,filterBestPokemon:h}=ln();return m4(),g4(),ZF(),eL(),I.jsx("main",{children:I.jsxs("section",{className:"hero",children:[I.jsx(jd,{title:wd[0].title,typeClass:r.type,id:tn,children:I.jsx(qd,{showInfo_select:r.type,showType_select:s.type,displayCharacter:l,handleClick:e,id:tn})}),I.jsx(jd,{title:wd[1].title,typeClass:i.type,id:zm,children:I.jsx(qd,{showInfo_select:i.type,showType_select:o.type,displayCharacter:t,handleClick:n})}),I.jsx(jd,{title:wd[2].title,typeClass:a.type,id:Hc,children:c.length>0&&(h.length>0?I.jsx(qd,{showInfo_select:a.type,showType_select:u.type,displayCharacter:h,handleClick:()=>{}}):I.jsx("p",{children:"Oops! pokemon!"}))})]})})};const _4=()=>I.jsx("footer",{className:"text-white bg-secondary p-3",children:I.jsx("div",{className:"container ",children:I.jsx("p",{children:"All copyright"})})}),v4=()=>I.jsxs(I.Fragment,{children:[I.jsx(px,{}),I.jsx(tL,{children:I.jsx(y4,{})}),I.jsx(_4,{})]});function w4(){return I.jsx(I.Fragment,{children:I.jsx(v4,{})})}const E4=function(){return null},T4=new bL;Xd.createRoot(document.getElementById("root")).render(I.jsx(_r.StrictMode,{children:I.jsxs(KL,{client:T4,children:[I.jsx(w4,{}),I.jsx(E4,{initialIsOpen:!1})]})}));
