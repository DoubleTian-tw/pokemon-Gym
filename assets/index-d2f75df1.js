function FN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function mc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var JI={exports:{}},mf={},ZI={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=Symbol.for("react.element"),LN=Symbol.for("react.portal"),$N=Symbol.for("react.fragment"),jN=Symbol.for("react.strict_mode"),UN=Symbol.for("react.profiler"),BN=Symbol.for("react.provider"),zN=Symbol.for("react.context"),qN=Symbol.for("react.forward_ref"),KN=Symbol.for("react.suspense"),HN=Symbol.for("react.memo"),GN=Symbol.for("react.lazy"),k0=Symbol.iterator;function QN(t){return t===null||typeof t!="object"?null:(t=k0&&t[k0]||t["@@iterator"],typeof t=="function"?t:null)}var eS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tS=Object.assign,nS={};function Ha(t,e,n){this.props=t,this.context=e,this.refs=nS,this.updater=n||eS}Ha.prototype.isReactComponent={};Ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rS(){}rS.prototype=Ha.prototype;function hv(t,e,n){this.props=t,this.context=e,this.refs=nS,this.updater=n||eS}var dv=hv.prototype=new rS;dv.constructor=hv;tS(dv,Ha.prototype);dv.isPureReactComponent=!0;var D0=Array.isArray,iS=Object.prototype.hasOwnProperty,fv={current:null},sS={key:!0,ref:!0,__self:!0,__source:!0};function oS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)iS.call(e,r)&&!sS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:gc,type:t,key:s,ref:o,props:i,_owner:fv.current}}function WN(t,e){return{$$typeof:gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pv(t){return typeof t=="object"&&t!==null&&t.$$typeof===gc}function YN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N0=/\/+/g;function zp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YN(""+t.key):e.toString(36)}function Mh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gc:case LN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+zp(o,0):r,D0(i)?(n="",t!=null&&(n=t.replace(N0,"$&/")+"/"),Mh(i,e,n,"",function(u){return u})):i!=null&&(pv(i)&&(i=WN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(N0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",D0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+zp(s,a);o+=Mh(s,e,n,l,i)}else if(l=QN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+zp(s,a++),o+=Mh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function eh(t,e,n){if(t==null)return t;var r=[],i=0;return Mh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function XN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},Fh={transition:null},JN={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:Fh,ReactCurrentOwner:fv};ye.Children={map:eh,forEach:function(t,e,n){eh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return eh(t,function(){e++}),e},toArray:function(t){return eh(t,function(e){return e})||[]},only:function(t){if(!pv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Ha;ye.Fragment=$N;ye.Profiler=UN;ye.PureComponent=hv;ye.StrictMode=jN;ye.Suspense=KN;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JN;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=tS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=fv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)iS.call(e,l)&&!sS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:gc,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:zN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BN,_context:t},t.Consumer=t};ye.createElement=oS;ye.createFactory=function(t){var e=oS.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:qN,render:t}};ye.isValidElement=pv;ye.lazy=function(t){return{$$typeof:GN,_payload:{_status:-1,_result:t},_init:XN}};ye.memo=function(t,e){return{$$typeof:HN,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Fh.transition;Fh.transition={};try{t()}finally{Fh.transition=e}};ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ye.useCallback=function(t,e){return fn.current.useCallback(t,e)};ye.useContext=function(t){return fn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return fn.current.useEffect(t,e)};ye.useId=function(){return fn.current.useId()};ye.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return fn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};ye.useRef=function(t){return fn.current.useRef(t)};ye.useState=function(t){return fn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return fn.current.useTransition()};ye.version="18.2.0";ZI.exports=ye;var w=ZI.exports;const He=mc(w),ZN=FN({__proto__:null,default:He},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eO=w,tO=Symbol.for("react.element"),nO=Symbol.for("react.fragment"),rO=Object.prototype.hasOwnProperty,iO=eO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sO={key:!0,ref:!0,__self:!0,__source:!0};function aS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rO.call(e,r)&&!sO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tO,type:t,key:s,ref:o,props:i,_owner:iO.current}}mf.Fragment=nO;mf.jsx=aS;mf.jsxs=aS;JI.exports=mf;var T=JI.exports,ig={},lS={exports:{}},Vn={},uS={exports:{}},cS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,z){var q=F.length;F.push(z);e:for(;0<q;){var se=q-1>>>1,oe=F[se];if(0<i(oe,z))F[se]=z,F[q]=oe,q=se;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],q=F.pop();if(q!==z){F[0]=q;e:for(var se=0,oe=F.length,be=oe>>>1;se<be;){var Pe=2*(se+1)-1,_e=F[Pe],$e=Pe+1,Mt=F[$e];if(0>i(_e,q))$e<oe&&0>i(Mt,_e)?(F[se]=Mt,F[$e]=q,se=$e):(F[se]=_e,F[Pe]=q,se=Pe);else if($e<oe&&0>i(Mt,q))F[se]=Mt,F[$e]=q,se=$e;else break e}}return z}function i(F,z){var q=F.sortIndex-z.sortIndex;return q!==0?q:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,g=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=F)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function m(F){if(g=!1,_(F),!p)if(n(l)!==null)p=!0,fe(I);else{var z=n(u);z!==null&&de(m,z.startTime-F)}}function I(F,z){p=!1,g&&(g=!1,y(x),x=-1),f=!0;var q=d;try{for(_(z),h=n(l);h!==null&&(!(h.expirationTime>z)||F&&!j());){var se=h.callback;if(typeof se=="function"){h.callback=null,d=h.priorityLevel;var oe=se(h.expirationTime<=z);z=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(l)&&r(l),_(z)}else r(l);h=n(l)}if(h!==null)var be=!0;else{var Pe=n(u);Pe!==null&&de(m,Pe.startTime-z),be=!1}return be}finally{h=null,d=q,f=!1}}var S=!1,R=null,x=-1,N=5,O=-1;function j(){return!(t.unstable_now()-O<N)}function Q(){if(R!==null){var F=t.unstable_now();O=F;var z=!0;try{z=R(!0,F)}finally{z?X():(S=!1,R=null)}}else S=!1}var X;if(typeof v=="function")X=function(){v(Q)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,re=ve.port2;ve.port1.onmessage=Q,X=function(){re.postMessage(null)}}else X=function(){E(Q,0)};function fe(F){R=F,S||(S=!0,X())}function de(F,z){x=E(function(){F(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,fe(I))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var q=d;d=z;try{return F()}finally{d=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=d;d=F;try{return z()}finally{d=q}},t.unstable_scheduleCallback=function(F,z,q){var se=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,F){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=q+oe,F={id:c++,callback:z,priorityLevel:F,startTime:q,expirationTime:oe,sortIndex:-1},q>se?(F.sortIndex=q,e(u,F),n(l)===null&&F===n(u)&&(g?(y(x),x=-1):g=!0,de(m,q-se))):(F.sortIndex=oe,e(l,F),p||f||(p=!0,fe(I))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var z=d;return function(){var q=d;d=z;try{return F.apply(this,arguments)}finally{d=q}}}})(cS);uS.exports=cS;var oO=uS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS=w,kn=oO;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dS=new Set,Eu={};function vo(t,e){wa(t,e),wa(t+"Capture",e)}function wa(t,e){for(Eu[t]=e,t=0;t<e.length;t++)dS.add(e[t])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sg=Object.prototype.hasOwnProperty,aO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O0={},V0={};function lO(t){return sg.call(V0,t)?!0:sg.call(O0,t)?!1:aO.test(t)?V0[t]=!0:(O0[t]=!0,!1)}function uO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cO(t,e,n,r){if(e===null||typeof e>"u"||uO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var mv=/[\-:]([a-z])/g;function gv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mv,gv);qt[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mv,gv);qt[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mv,gv);qt[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function yv(t,e,n,r){var i=qt.hasOwnProperty(e)?qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cO(e,n,i,r)&&(n=null),r||i===null?lO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ci=hS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,th=Symbol.for("react.element"),Ho=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),vv=Symbol.for("react.strict_mode"),og=Symbol.for("react.profiler"),fS=Symbol.for("react.provider"),pS=Symbol.for("react.context"),_v=Symbol.for("react.forward_ref"),ag=Symbol.for("react.suspense"),lg=Symbol.for("react.suspense_list"),wv=Symbol.for("react.memo"),Ci=Symbol.for("react.lazy"),mS=Symbol.for("react.offscreen"),M0=Symbol.iterator;function gl(t){return t===null||typeof t!="object"?null:(t=M0&&t[M0]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,qp;function Ul(t){if(qp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qp=e&&e[1]||""}return`
`+qp+t}var Kp=!1;function Hp(t,e){if(!t||Kp)return"";Kp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Kp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ul(t):""}function hO(t){switch(t.tag){case 5:return Ul(t.type);case 16:return Ul("Lazy");case 13:return Ul("Suspense");case 19:return Ul("SuspenseList");case 0:case 2:case 15:return t=Hp(t.type,!1),t;case 11:return t=Hp(t.type.render,!1),t;case 1:return t=Hp(t.type,!0),t;default:return""}}function ug(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Go:return"Fragment";case Ho:return"Portal";case og:return"Profiler";case vv:return"StrictMode";case ag:return"Suspense";case lg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pS:return(t.displayName||"Context")+".Consumer";case fS:return(t._context.displayName||"Context")+".Provider";case _v:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wv:return e=t.displayName||null,e!==null?e:ug(t.type)||"Memo";case Ci:e=t._payload,t=t._init;try{return ug(t(e))}catch{}}return null}function dO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ug(e);case 8:return e===vv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fO(t){var e=gS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nh(t){t._valueTracker||(t._valueTracker=fO(t))}function yS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ad(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cg(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function F0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vS(t,e){e=e.checked,e!=null&&yv(t,"checked",e,!1)}function hg(t,e){vS(t,e);var n=Yi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dg(t,e.type,n):e.hasOwnProperty("defaultValue")&&dg(t,e.type,Yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function L0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dg(t,e,n){(e!=="number"||ad(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bl=Array.isArray;function aa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function fg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Bl(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yi(n)}}function _S(t,e){var n=Yi(e.value),r=Yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function j0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rh,ES=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rh=rh||document.createElement("div"),rh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pO=["Webkit","ms","Moz","O"];Object.keys(Zl).forEach(function(t){pO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zl[e]=Zl[t]})});function TS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zl.hasOwnProperty(t)&&Zl[t]?(""+e).trim():e+"px"}function IS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=TS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var mO=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mg(t,e){if(e){if(mO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function gg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yg=null;function Ev(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vg=null,la=null,ua=null;function U0(t){if(t=_c(t)){if(typeof vg!="function")throw Error(L(280));var e=t.stateNode;e&&(e=wf(e),vg(t.stateNode,t.type,e))}}function SS(t){la?ua?ua.push(t):ua=[t]:la=t}function RS(){if(la){var t=la,e=ua;if(ua=la=null,U0(t),e)for(t=0;t<e.length;t++)U0(e[t])}}function xS(t,e){return t(e)}function CS(){}var Gp=!1;function AS(t,e,n){if(Gp)return t(e,n);Gp=!0;try{return xS(t,e,n)}finally{Gp=!1,(la!==null||ua!==null)&&(CS(),RS())}}function Iu(t,e){var n=t.stateNode;if(n===null)return null;var r=wf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var _g=!1;if(ti)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){_g=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{_g=!1}function gO(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var eu=!1,ld=null,ud=!1,wg=null,yO={onError:function(t){eu=!0,ld=t}};function vO(t,e,n,r,i,s,o,a,l){eu=!1,ld=null,gO.apply(yO,arguments)}function _O(t,e,n,r,i,s,o,a,l){if(vO.apply(this,arguments),eu){if(eu){var u=ld;eu=!1,ld=null}else throw Error(L(198));ud||(ud=!0,wg=u)}}function _o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function B0(t){if(_o(t)!==t)throw Error(L(188))}function wO(t){var e=t.alternate;if(!e){if(e=_o(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return B0(i),t;if(s===r)return B0(i),e;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function PS(t){return t=wO(t),t!==null?kS(t):null}function kS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kS(t);if(e!==null)return e;t=t.sibling}return null}var DS=kn.unstable_scheduleCallback,z0=kn.unstable_cancelCallback,EO=kn.unstable_shouldYield,TO=kn.unstable_requestPaint,mt=kn.unstable_now,IO=kn.unstable_getCurrentPriorityLevel,Tv=kn.unstable_ImmediatePriority,NS=kn.unstable_UserBlockingPriority,cd=kn.unstable_NormalPriority,SO=kn.unstable_LowPriority,OS=kn.unstable_IdlePriority,gf=null,Rr=null;function RO(t){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(gf,t,void 0,(t.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:AO,xO=Math.log,CO=Math.LN2;function AO(t){return t>>>=0,t===0?32:31-(xO(t)/CO|0)|0}var ih=64,sh=4194304;function zl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=zl(a):(s&=o,s!==0&&(r=zl(s)))}else o=n&~i,o!==0?r=zl(o):s!==0&&(r=zl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-lr(e),i=1<<n,r|=t[n],e&=~i;return r}function bO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-lr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=bO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Eg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VS(){var t=ih;return ih<<=1,!(ih&4194240)&&(ih=64),t}function Qp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lr(e),t[e]=n}function kO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-lr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Iv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-lr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ne=0;function MS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FS,Sv,LS,$S,jS,Tg=!1,oh=[],$i=null,ji=null,Ui=null,Su=new Map,Ru=new Map,ki=[],DO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q0(t,e){switch(t){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(e.pointerId)}}function vl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_c(e),e!==null&&Sv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function NO(t,e,n,r,i){switch(e){case"focusin":return $i=vl($i,t,e,n,r,i),!0;case"dragenter":return ji=vl(ji,t,e,n,r,i),!0;case"mouseover":return Ui=vl(Ui,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Su.set(s,vl(Su.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ru.set(s,vl(Ru.get(s)||null,t,e,n,r,i)),!0}return!1}function US(t){var e=Vs(t.target);if(e!==null){var n=_o(e);if(n!==null){if(e=n.tag,e===13){if(e=bS(n),e!==null){t.blockedOn=e,jS(t.priority,function(){LS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ig(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yg=r,n.target.dispatchEvent(r),yg=null}else return e=_c(n),e!==null&&Sv(e),t.blockedOn=n,!1;e.shift()}return!0}function K0(t,e,n){Lh(t)&&n.delete(e)}function OO(){Tg=!1,$i!==null&&Lh($i)&&($i=null),ji!==null&&Lh(ji)&&(ji=null),Ui!==null&&Lh(Ui)&&(Ui=null),Su.forEach(K0),Ru.forEach(K0)}function _l(t,e){t.blockedOn===e&&(t.blockedOn=null,Tg||(Tg=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,OO)))}function xu(t){function e(i){return _l(i,t)}if(0<oh.length){_l(oh[0],t);for(var n=1;n<oh.length;n++){var r=oh[n];r.blockedOn===t&&(r.blockedOn=null)}}for($i!==null&&_l($i,t),ji!==null&&_l(ji,t),Ui!==null&&_l(Ui,t),Su.forEach(e),Ru.forEach(e),n=0;n<ki.length;n++)r=ki[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ki.length&&(n=ki[0],n.blockedOn===null);)US(n),n.blockedOn===null&&ki.shift()}var ca=ci.ReactCurrentBatchConfig,dd=!0;function VO(t,e,n,r){var i=Ne,s=ca.transition;ca.transition=null;try{Ne=1,Rv(t,e,n,r)}finally{Ne=i,ca.transition=s}}function MO(t,e,n,r){var i=Ne,s=ca.transition;ca.transition=null;try{Ne=4,Rv(t,e,n,r)}finally{Ne=i,ca.transition=s}}function Rv(t,e,n,r){if(dd){var i=Ig(t,e,n,r);if(i===null)im(t,e,r,fd,n),q0(t,r);else if(NO(i,t,e,n,r))r.stopPropagation();else if(q0(t,r),e&4&&-1<DO.indexOf(t)){for(;i!==null;){var s=_c(i);if(s!==null&&FS(s),s=Ig(t,e,n,r),s===null&&im(t,e,r,fd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else im(t,e,r,null,n)}}var fd=null;function Ig(t,e,n,r){if(fd=null,t=Ev(r),t=Vs(t),t!==null)if(e=_o(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fd=t,null}function BS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IO()){case Tv:return 1;case NS:return 4;case cd:case SO:return 16;case OS:return 536870912;default:return 16}default:return 16}}var Vi=null,xv=null,$h=null;function zS(){if($h)return $h;var t,e=xv,n=e.length,r,i="value"in Vi?Vi.value:Vi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return $h=i.slice(t,1<r?1-r:void 0)}function jh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ah(){return!0}function H0(){return!1}function Mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ah:H0,this.isPropagationStopped=H0,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ah)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ah)},persist:function(){},isPersistent:ah}),e}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cv=Mn(Ga),vc=rt({},Ga,{view:0,detail:0}),FO=Mn(vc),Wp,Yp,wl,yf=rt({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Av,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wl&&(wl&&t.type==="mousemove"?(Wp=t.screenX-wl.screenX,Yp=t.screenY-wl.screenY):Yp=Wp=0,wl=t),Wp)},movementY:function(t){return"movementY"in t?t.movementY:Yp}}),G0=Mn(yf),LO=rt({},yf,{dataTransfer:0}),$O=Mn(LO),jO=rt({},vc,{relatedTarget:0}),Xp=Mn(jO),UO=rt({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),BO=Mn(UO),zO=rt({},Ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qO=Mn(zO),KO=rt({},Ga,{data:0}),Q0=Mn(KO),HO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QO[t])?!!e[t]:!1}function Av(){return WO}var YO=rt({},vc,{key:function(t){if(t.key){var e=HO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Av,charCode:function(t){return t.type==="keypress"?jh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XO=Mn(YO),JO=rt({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W0=Mn(JO),ZO=rt({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Av}),e2=Mn(ZO),t2=rt({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),n2=Mn(t2),r2=rt({},yf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),i2=Mn(r2),s2=[9,13,27,32],bv=ti&&"CompositionEvent"in window,tu=null;ti&&"documentMode"in document&&(tu=document.documentMode);var o2=ti&&"TextEvent"in window&&!tu,qS=ti&&(!bv||tu&&8<tu&&11>=tu),Y0=String.fromCharCode(32),X0=!1;function KS(t,e){switch(t){case"keyup":return s2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function a2(t,e){switch(t){case"compositionend":return HS(e);case"keypress":return e.which!==32?null:(X0=!0,Y0);case"textInput":return t=e.data,t===Y0&&X0?null:t;default:return null}}function l2(t,e){if(Qo)return t==="compositionend"||!bv&&KS(t,e)?(t=zS(),$h=xv=Vi=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qS&&e.locale!=="ko"?null:e.data;default:return null}}var u2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u2[t.type]:e==="textarea"}function GS(t,e,n,r){SS(r),e=pd(e,"onChange"),0<e.length&&(n=new Cv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nu=null,Cu=null;function c2(t){iR(t,0)}function vf(t){var e=Xo(t);if(yS(e))return t}function h2(t,e){if(t==="change")return e}var QS=!1;if(ti){var Jp;if(ti){var Zp="oninput"in document;if(!Zp){var Z0=document.createElement("div");Z0.setAttribute("oninput","return;"),Zp=typeof Z0.oninput=="function"}Jp=Zp}else Jp=!1;QS=Jp&&(!document.documentMode||9<document.documentMode)}function eE(){nu&&(nu.detachEvent("onpropertychange",WS),Cu=nu=null)}function WS(t){if(t.propertyName==="value"&&vf(Cu)){var e=[];GS(e,Cu,t,Ev(t)),AS(c2,e)}}function d2(t,e,n){t==="focusin"?(eE(),nu=e,Cu=n,nu.attachEvent("onpropertychange",WS)):t==="focusout"&&eE()}function f2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vf(Cu)}function p2(t,e){if(t==="click")return vf(e)}function m2(t,e){if(t==="input"||t==="change")return vf(e)}function g2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cr=typeof Object.is=="function"?Object.is:g2;function Au(t,e){if(cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sg.call(e,i)||!cr(t[i],e[i]))return!1}return!0}function tE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nE(t,e){var n=tE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tE(n)}}function YS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function XS(){for(var t=window,e=ad();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ad(t.document)}return e}function Pv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function y2(t){var e=XS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YS(n.ownerDocument.documentElement,n)){if(r!==null&&Pv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=nE(n,s);var o=nE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var v2=ti&&"documentMode"in document&&11>=document.documentMode,Wo=null,Sg=null,ru=null,Rg=!1;function rE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rg||Wo==null||Wo!==ad(r)||(r=Wo,"selectionStart"in r&&Pv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ru&&Au(ru,r)||(ru=r,r=pd(Sg,"onSelect"),0<r.length&&(e=new Cv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wo)))}function lh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:lh("Animation","AnimationEnd"),animationiteration:lh("Animation","AnimationIteration"),animationstart:lh("Animation","AnimationStart"),transitionend:lh("Transition","TransitionEnd")},em={},JS={};ti&&(JS=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function _f(t){if(em[t])return em[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in JS)return em[t]=e[n];return t}var ZS=_f("animationend"),eR=_f("animationiteration"),tR=_f("animationstart"),nR=_f("transitionend"),rR=new Map,iE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cs(t,e){rR.set(t,e),vo(e,[t])}for(var tm=0;tm<iE.length;tm++){var nm=iE[tm],_2=nm.toLowerCase(),w2=nm[0].toUpperCase()+nm.slice(1);cs(_2,"on"+w2)}cs(ZS,"onAnimationEnd");cs(eR,"onAnimationIteration");cs(tR,"onAnimationStart");cs("dblclick","onDoubleClick");cs("focusin","onFocus");cs("focusout","onBlur");cs(nR,"onTransitionEnd");wa("onMouseEnter",["mouseout","mouseover"]);wa("onMouseLeave",["mouseout","mouseover"]);wa("onPointerEnter",["pointerout","pointerover"]);wa("onPointerLeave",["pointerout","pointerover"]);vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function sE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_O(r,e,void 0,t),t.currentTarget=null}function iR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;sE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;sE(i,a,u),s=l}}}if(ud)throw t=wg,ud=!1,wg=null,t}function ze(t,e){var n=e[Pg];n===void 0&&(n=e[Pg]=new Set);var r=t+"__bubble";n.has(r)||(sR(e,t,2,!1),n.add(r))}function rm(t,e,n){var r=0;e&&(r|=4),sR(n,t,r,e)}var uh="_reactListening"+Math.random().toString(36).slice(2);function bu(t){if(!t[uh]){t[uh]=!0,dS.forEach(function(n){n!=="selectionchange"&&(E2.has(n)||rm(n,!1,t),rm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uh]||(e[uh]=!0,rm("selectionchange",!1,e))}}function sR(t,e,n,r){switch(BS(e)){case 1:var i=VO;break;case 4:i=MO;break;default:i=Rv}n=i.bind(null,e,n,t),i=void 0,!_g||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function im(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Vs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}AS(function(){var u=s,c=Ev(n),h=[];e:{var d=rR.get(t);if(d!==void 0){var f=Cv,p=t;switch(t){case"keypress":if(jh(n)===0)break e;case"keydown":case"keyup":f=XO;break;case"focusin":p="focus",f=Xp;break;case"focusout":p="blur",f=Xp;break;case"beforeblur":case"afterblur":f=Xp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=G0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=$O;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=e2;break;case ZS:case eR:case tR:f=BO;break;case nR:f=n2;break;case"scroll":f=FO;break;case"wheel":f=i2;break;case"copy":case"cut":case"paste":f=qO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=W0}var g=(e&4)!==0,E=!g&&t==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,_;v!==null;){_=v;var m=_.stateNode;if(_.tag===5&&m!==null&&(_=m,y!==null&&(m=Iu(v,y),m!=null&&g.push(Pu(v,m,_)))),E)break;v=v.return}0<g.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==yg&&(p=n.relatedTarget||n.fromElement)&&(Vs(p)||p[ni]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Vs(p):null,p!==null&&(E=_o(p),p!==E||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=G0,m="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=W0,m="onPointerLeave",y="onPointerEnter",v="pointer"),E=f==null?d:Xo(f),_=p==null?d:Xo(p),d=new g(m,v+"leave",f,n,c),d.target=E,d.relatedTarget=_,m=null,Vs(c)===u&&(g=new g(y,v+"enter",p,n,c),g.target=_,g.relatedTarget=E,m=g),E=m,f&&p)t:{for(g=f,y=p,v=0,_=g;_;_=bo(_))v++;for(_=0,m=y;m;m=bo(m))_++;for(;0<v-_;)g=bo(g),v--;for(;0<_-v;)y=bo(y),_--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=bo(g),y=bo(y)}g=null}else g=null;f!==null&&oE(h,d,f,g,!1),p!==null&&E!==null&&oE(h,E,p,g,!0)}}e:{if(d=u?Xo(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var I=h2;else if(J0(d))if(QS)I=m2;else{I=f2;var S=d2}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(I=p2);if(I&&(I=I(t,u))){GS(h,I,n,c);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&dg(d,"number",d.value)}switch(S=u?Xo(u):window,t){case"focusin":(J0(S)||S.contentEditable==="true")&&(Wo=S,Sg=u,ru=null);break;case"focusout":ru=Sg=Wo=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,rE(h,n,c);break;case"selectionchange":if(v2)break;case"keydown":case"keyup":rE(h,n,c)}var R;if(bv)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Qo?KS(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(qS&&n.locale!=="ko"&&(Qo||x!=="onCompositionStart"?x==="onCompositionEnd"&&Qo&&(R=zS()):(Vi=c,xv="value"in Vi?Vi.value:Vi.textContent,Qo=!0)),S=pd(u,x),0<S.length&&(x=new Q0(x,t,null,n,c),h.push({event:x,listeners:S}),R?x.data=R:(R=HS(n),R!==null&&(x.data=R)))),(R=o2?a2(t,n):l2(t,n))&&(u=pd(u,"onBeforeInput"),0<u.length&&(c=new Q0("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=R))}iR(h,e)})}function Pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Iu(t,n),s!=null&&r.unshift(Pu(t,s,i)),s=Iu(t,e),s!=null&&r.push(Pu(t,s,i))),t=t.return}return r}function bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Iu(n,s),l!=null&&o.unshift(Pu(n,l,a))):i||(l=Iu(n,s),l!=null&&o.push(Pu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var T2=/\r\n?/g,I2=/\u0000|\uFFFD/g;function aE(t){return(typeof t=="string"?t:""+t).replace(T2,`
`).replace(I2,"")}function ch(t,e,n){if(e=aE(e),aE(t)!==e&&n)throw Error(L(425))}function md(){}var xg=null,Cg=null;function Ag(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bg=typeof setTimeout=="function"?setTimeout:void 0,S2=typeof clearTimeout=="function"?clearTimeout:void 0,lE=typeof Promise=="function"?Promise:void 0,R2=typeof queueMicrotask=="function"?queueMicrotask:typeof lE<"u"?function(t){return lE.resolve(null).then(t).catch(x2)}:bg;function x2(t){setTimeout(function(){throw t})}function sm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xu(e)}function Bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),yr="__reactFiber$"+Qa,ku="__reactProps$"+Qa,ni="__reactContainer$"+Qa,Pg="__reactEvents$"+Qa,C2="__reactListeners$"+Qa,A2="__reactHandles$"+Qa;function Vs(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ni]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uE(t);t!==null;){if(n=t[yr])return n;t=uE(t)}return e}t=n,n=t.parentNode}return null}function _c(t){return t=t[yr]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function wf(t){return t[ku]||null}var kg=[],Jo=-1;function hs(t){return{current:t}}function Ge(t){0>Jo||(t.current=kg[Jo],kg[Jo]=null,Jo--)}function je(t,e){Jo++,kg[Jo]=t.current,t.current=e}var Xi={},Zt=hs(Xi),Tn=hs(!1),Ys=Xi;function Ea(t,e){var n=t.type.contextTypes;if(!n)return Xi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function In(t){return t=t.childContextTypes,t!=null}function gd(){Ge(Tn),Ge(Zt)}function cE(t,e,n){if(Zt.current!==Xi)throw Error(L(168));je(Zt,e),je(Tn,n)}function oR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(L(108,dO(t)||"Unknown",i));return rt({},n,r)}function yd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xi,Ys=Zt.current,je(Zt,t),je(Tn,Tn.current),!0}function hE(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=oR(t,e,Ys),r.__reactInternalMemoizedMergedChildContext=t,Ge(Tn),Ge(Zt),je(Zt,t)):Ge(Tn),je(Tn,n)}var $r=null,Ef=!1,om=!1;function aR(t){$r===null?$r=[t]:$r.push(t)}function b2(t){Ef=!0,aR(t)}function ds(){if(!om&&$r!==null){om=!0;var t=0,e=Ne;try{var n=$r;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$r=null,Ef=!1}catch(i){throw $r!==null&&($r=$r.slice(t+1)),DS(Tv,ds),i}finally{Ne=e,om=!1}}return null}var Zo=[],ea=0,vd=null,_d=0,Un=[],Bn=0,Xs=null,zr=1,qr="";function xs(t,e){Zo[ea++]=_d,Zo[ea++]=vd,vd=t,_d=e}function lR(t,e,n){Un[Bn++]=zr,Un[Bn++]=qr,Un[Bn++]=Xs,Xs=t;var r=zr;t=qr;var i=32-lr(r)-1;r&=~(1<<i),n+=1;var s=32-lr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zr=1<<32-lr(e)+i|n<<i|r,qr=s+t}else zr=1<<s|n<<i|r,qr=t}function kv(t){t.return!==null&&(xs(t,1),lR(t,1,0))}function Dv(t){for(;t===vd;)vd=Zo[--ea],Zo[ea]=null,_d=Zo[--ea],Zo[ea]=null;for(;t===Xs;)Xs=Un[--Bn],Un[Bn]=null,qr=Un[--Bn],Un[Bn]=null,zr=Un[--Bn],Un[Bn]=null}var Pn=null,bn=null,We=!1,ir=null;function uR(t,e){var n=qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function dE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,bn=Bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xs!==null?{id:zr,overflow:qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,bn=null,!0):!1;default:return!1}}function Dg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ng(t){if(We){var e=bn;if(e){var n=e;if(!dE(t,e)){if(Dg(t))throw Error(L(418));e=Bi(n.nextSibling);var r=Pn;e&&dE(t,e)?uR(r,n):(t.flags=t.flags&-4097|2,We=!1,Pn=t)}}else{if(Dg(t))throw Error(L(418));t.flags=t.flags&-4097|2,We=!1,Pn=t}}}function fE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function hh(t){if(t!==Pn)return!1;if(!We)return fE(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ag(t.type,t.memoizedProps)),e&&(e=bn)){if(Dg(t))throw cR(),Error(L(418));for(;e;)uR(t,e),e=Bi(e.nextSibling)}if(fE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=Bi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=Pn?Bi(t.stateNode.nextSibling):null;return!0}function cR(){for(var t=bn;t;)t=Bi(t.nextSibling)}function Ta(){bn=Pn=null,We=!1}function Nv(t){ir===null?ir=[t]:ir.push(t)}var P2=ci.ReactCurrentBatchConfig;function tr(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var wd=hs(null),Ed=null,ta=null,Ov=null;function Vv(){Ov=ta=Ed=null}function Mv(t){var e=wd.current;Ge(wd),t._currentValue=e}function Og(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ha(t,e){Ed=t,Ov=ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vn=!0),t.firstContext=null)}function Wn(t){var e=t._currentValue;if(Ov!==t)if(t={context:t,memoizedValue:e,next:null},ta===null){if(Ed===null)throw Error(L(308));ta=t,Ed.dependencies={lanes:0,firstContext:t}}else ta=ta.next=t;return e}var Ms=null;function Fv(t){Ms===null?Ms=[t]:Ms.push(t)}function hR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Fv(e)):(n.next=i.next,i.next=n),e.interleaved=n,ri(t,r)}function ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ai=!1;function Lv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ri(t,n)}return i=r.interleaved,i===null?(e.next=e,Fv(r)):(e.next=i.next,i.next=e),r.interleaved=e,ri(t,n)}function Uh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iv(t,n)}}function pE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Td(t,e,n,r){var i=t.updateQueue;Ai=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=rt({},h,d);break e;case 2:Ai=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Zs|=o,t.lanes=o,t.memoizedState=h}}function mE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var fR=new hS.Component().refs;function Vg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tf={isMounted:function(t){return(t=t._reactInternals)?_o(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),i=Ki(t),s=Gr(r,i);s.payload=e,n!=null&&(s.callback=n),e=zi(t,s,i),e!==null&&(ur(e,t,i,r),Uh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),i=Ki(t),s=Gr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zi(t,s,i),e!==null&&(ur(e,t,i,r),Uh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=Ki(t),i=Gr(n,r);i.tag=2,e!=null&&(i.callback=e),e=zi(t,i,r),e!==null&&(ur(e,t,r,n),Uh(e,t,r))}};function gE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Au(n,r)||!Au(i,s):!0}function pR(t,e,n){var r=!1,i=Xi,s=e.contextType;return typeof s=="object"&&s!==null?s=Wn(s):(i=In(e)?Ys:Zt.current,r=e.contextTypes,s=(r=r!=null)?Ea(t,i):Xi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function yE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tf.enqueueReplaceState(e,e.state,null)}function Mg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=fR,Lv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Wn(s):(s=In(e)?Ys:Zt.current,i.context=Ea(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tf.enqueueReplaceState(i,i.state,null),Td(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function El(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===fR&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function dh(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vE(t){var e=t._init;return e(t._payload)}function mR(t){function e(y,v){if(t){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Hi(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,m){return v===null||v.tag!==6?(v=fm(_,y.mode,m),v.return=y,v):(v=i(v,_),v.return=y,v)}function l(y,v,_,m){var I=_.type;return I===Go?c(y,v,_.props.children,m,_.key):v!==null&&(v.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ci&&vE(I)===v.type)?(m=i(v,_.props),m.ref=El(y,v,_),m.return=y,m):(m=Gh(_.type,_.key,_.props,null,y.mode,m),m.ref=El(y,v,_),m.return=y,m)}function u(y,v,_,m){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=pm(_,y.mode,m),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,m,I){return v===null||v.tag!==7?(v=Hs(_,y.mode,m,I),v.return=y,v):(v=i(v,_),v.return=y,v)}function h(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=fm(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case th:return _=Gh(v.type,v.key,v.props,null,y.mode,_),_.ref=El(y,null,v),_.return=y,_;case Ho:return v=pm(v,y.mode,_),v.return=y,v;case Ci:var m=v._init;return h(y,m(v._payload),_)}if(Bl(v)||gl(v))return v=Hs(v,y.mode,_,null),v.return=y,v;dh(y,v)}return null}function d(y,v,_,m){var I=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:a(y,v,""+_,m);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case th:return _.key===I?l(y,v,_,m):null;case Ho:return _.key===I?u(y,v,_,m):null;case Ci:return I=_._init,d(y,v,I(_._payload),m)}if(Bl(_)||gl(_))return I!==null?null:c(y,v,_,m,null);dh(y,_)}return null}function f(y,v,_,m,I){if(typeof m=="string"&&m!==""||typeof m=="number")return y=y.get(_)||null,a(v,y,""+m,I);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case th:return y=y.get(m.key===null?_:m.key)||null,l(v,y,m,I);case Ho:return y=y.get(m.key===null?_:m.key)||null,u(v,y,m,I);case Ci:var S=m._init;return f(y,v,_,S(m._payload),I)}if(Bl(m)||gl(m))return y=y.get(_)||null,c(v,y,m,I,null);dh(v,m)}return null}function p(y,v,_,m){for(var I=null,S=null,R=v,x=v=0,N=null;R!==null&&x<_.length;x++){R.index>x?(N=R,R=null):N=R.sibling;var O=d(y,R,_[x],m);if(O===null){R===null&&(R=N);break}t&&R&&O.alternate===null&&e(y,R),v=s(O,v,x),S===null?I=O:S.sibling=O,S=O,R=N}if(x===_.length)return n(y,R),We&&xs(y,x),I;if(R===null){for(;x<_.length;x++)R=h(y,_[x],m),R!==null&&(v=s(R,v,x),S===null?I=R:S.sibling=R,S=R);return We&&xs(y,x),I}for(R=r(y,R);x<_.length;x++)N=f(R,y,x,_[x],m),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?x:N.key),v=s(N,v,x),S===null?I=N:S.sibling=N,S=N);return t&&R.forEach(function(j){return e(y,j)}),We&&xs(y,x),I}function g(y,v,_,m){var I=gl(_);if(typeof I!="function")throw Error(L(150));if(_=I.call(_),_==null)throw Error(L(151));for(var S=I=null,R=v,x=v=0,N=null,O=_.next();R!==null&&!O.done;x++,O=_.next()){R.index>x?(N=R,R=null):N=R.sibling;var j=d(y,R,O.value,m);if(j===null){R===null&&(R=N);break}t&&R&&j.alternate===null&&e(y,R),v=s(j,v,x),S===null?I=j:S.sibling=j,S=j,R=N}if(O.done)return n(y,R),We&&xs(y,x),I;if(R===null){for(;!O.done;x++,O=_.next())O=h(y,O.value,m),O!==null&&(v=s(O,v,x),S===null?I=O:S.sibling=O,S=O);return We&&xs(y,x),I}for(R=r(y,R);!O.done;x++,O=_.next())O=f(R,y,x,O.value,m),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?x:O.key),v=s(O,v,x),S===null?I=O:S.sibling=O,S=O);return t&&R.forEach(function(Q){return e(y,Q)}),We&&xs(y,x),I}function E(y,v,_,m){if(typeof _=="object"&&_!==null&&_.type===Go&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case th:e:{for(var I=_.key,S=v;S!==null;){if(S.key===I){if(I=_.type,I===Go){if(S.tag===7){n(y,S.sibling),v=i(S,_.props.children),v.return=y,y=v;break e}}else if(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ci&&vE(I)===S.type){n(y,S.sibling),v=i(S,_.props),v.ref=El(y,S,_),v.return=y,y=v;break e}n(y,S);break}else e(y,S);S=S.sibling}_.type===Go?(v=Hs(_.props.children,y.mode,m,_.key),v.return=y,y=v):(m=Gh(_.type,_.key,_.props,null,y.mode,m),m.ref=El(y,v,_),m.return=y,y=m)}return o(y);case Ho:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=pm(_,y.mode,m),v.return=y,y=v}return o(y);case Ci:return S=_._init,E(y,v,S(_._payload),m)}if(Bl(_))return p(y,v,_,m);if(gl(_))return g(y,v,_,m);dh(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=fm(_,y.mode,m),v.return=y,y=v),o(y)):n(y,v)}return E}var Ia=mR(!0),gR=mR(!1),wc={},xr=hs(wc),Du=hs(wc),Nu=hs(wc);function Fs(t){if(t===wc)throw Error(L(174));return t}function $v(t,e){switch(je(Nu,e),je(Du,t),je(xr,wc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pg(e,t)}Ge(xr),je(xr,e)}function Sa(){Ge(xr),Ge(Du),Ge(Nu)}function yR(t){Fs(Nu.current);var e=Fs(xr.current),n=pg(e,t.type);e!==n&&(je(Du,t),je(xr,n))}function jv(t){Du.current===t&&(Ge(xr),Ge(Du))}var Ze=hs(0);function Id(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var am=[];function Uv(){for(var t=0;t<am.length;t++)am[t]._workInProgressVersionPrimary=null;am.length=0}var Bh=ci.ReactCurrentDispatcher,lm=ci.ReactCurrentBatchConfig,Js=0,tt=null,Tt=null,At=null,Sd=!1,iu=!1,Ou=0,k2=0;function Ht(){throw Error(L(321))}function Bv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cr(t[n],e[n]))return!1;return!0}function zv(t,e,n,r,i,s){if(Js=s,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bh.current=t===null||t.memoizedState===null?V2:M2,t=n(r,i),iu){s=0;do{if(iu=!1,Ou=0,25<=s)throw Error(L(301));s+=1,At=Tt=null,e.updateQueue=null,Bh.current=F2,t=n(r,i)}while(iu)}if(Bh.current=Rd,e=Tt!==null&&Tt.next!==null,Js=0,At=Tt=tt=null,Sd=!1,e)throw Error(L(300));return t}function qv(){var t=Ou!==0;return Ou=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?tt.memoizedState=At=t:At=At.next=t,At}function Yn(){if(Tt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=At===null?tt.memoizedState:At.next;if(e!==null)At=e,Tt=t;else{if(t===null)throw Error(L(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},At===null?tt.memoizedState=At=t:At=At.next=t}return At}function Vu(t,e){return typeof e=="function"?e(t):e}function um(t){var e=Yn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=Tt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Js&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,tt.lanes|=c,Zs|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,cr(r,e.memoizedState)||(vn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,tt.lanes|=s,Zs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cm(t){var e=Yn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);cr(s,e.memoizedState)||(vn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vR(){}function _R(t,e){var n=tt,r=Yn(),i=e(),s=!cr(r.memoizedState,i);if(s&&(r.memoizedState=i,vn=!0),r=r.queue,Kv(TR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Mu(9,ER.bind(null,n,r,i,e),void 0,null),Pt===null)throw Error(L(349));Js&30||wR(n,e,i)}return i}function wR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ER(t,e,n,r){e.value=n,e.getSnapshot=r,IR(e)&&SR(t)}function TR(t,e,n){return n(function(){IR(e)&&SR(t)})}function IR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cr(t,n)}catch{return!0}}function SR(t){var e=ri(t,1);e!==null&&ur(e,t,1,-1)}function _E(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vu,lastRenderedState:t},e.queue=t,t=t.dispatch=O2.bind(null,tt,t),[e.memoizedState,t]}function Mu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function RR(){return Yn().memoizedState}function zh(t,e,n,r){var i=gr();tt.flags|=t,i.memoizedState=Mu(1|e,n,void 0,r===void 0?null:r)}function If(t,e,n,r){var i=Yn();r=r===void 0?null:r;var s=void 0;if(Tt!==null){var o=Tt.memoizedState;if(s=o.destroy,r!==null&&Bv(r,o.deps)){i.memoizedState=Mu(e,n,s,r);return}}tt.flags|=t,i.memoizedState=Mu(1|e,n,s,r)}function wE(t,e){return zh(8390656,8,t,e)}function Kv(t,e){return If(2048,8,t,e)}function xR(t,e){return If(4,2,t,e)}function CR(t,e){return If(4,4,t,e)}function AR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bR(t,e,n){return n=n!=null?n.concat([t]):null,If(4,4,AR.bind(null,e,t),n)}function Hv(){}function PR(t,e){var n=Yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kR(t,e){var n=Yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DR(t,e,n){return Js&21?(cr(n,e)||(n=VS(),tt.lanes|=n,Zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vn=!0),t.memoizedState=n)}function D2(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=lm.transition;lm.transition={};try{t(!1),e()}finally{Ne=n,lm.transition=r}}function NR(){return Yn().memoizedState}function N2(t,e,n){var r=Ki(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OR(t))VR(e,n);else if(n=hR(t,e,n,r),n!==null){var i=un();ur(n,t,r,i),MR(n,e,r)}}function O2(t,e,n){var r=Ki(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OR(t))VR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cr(a,o)){var l=e.interleaved;l===null?(i.next=i,Fv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=hR(t,e,i,r),n!==null&&(i=un(),ur(n,t,r,i),MR(n,e,r))}}function OR(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function VR(t,e){iu=Sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Iv(t,n)}}var Rd={readContext:Wn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},V2={readContext:Wn,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:Wn,useEffect:wE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zh(4194308,4,AR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zh(4194308,4,t,e)},useInsertionEffect:function(t,e){return zh(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=N2.bind(null,tt,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:_E,useDebugValue:Hv,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=_E(!1),e=t[0];return t=D2.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tt,i=gr();if(We){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),Pt===null)throw Error(L(349));Js&30||wR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,wE(TR.bind(null,r,s,t),[t]),r.flags|=2048,Mu(9,ER.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=gr(),e=Pt.identifierPrefix;if(We){var n=qr,r=zr;n=(r&~(1<<32-lr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ou++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=k2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},M2={readContext:Wn,useCallback:PR,useContext:Wn,useEffect:Kv,useImperativeHandle:bR,useInsertionEffect:xR,useLayoutEffect:CR,useMemo:kR,useReducer:um,useRef:RR,useState:function(){return um(Vu)},useDebugValue:Hv,useDeferredValue:function(t){var e=Yn();return DR(e,Tt.memoizedState,t)},useTransition:function(){var t=um(Vu)[0],e=Yn().memoizedState;return[t,e]},useMutableSource:vR,useSyncExternalStore:_R,useId:NR,unstable_isNewReconciler:!1},F2={readContext:Wn,useCallback:PR,useContext:Wn,useEffect:Kv,useImperativeHandle:bR,useInsertionEffect:xR,useLayoutEffect:CR,useMemo:kR,useReducer:cm,useRef:RR,useState:function(){return cm(Vu)},useDebugValue:Hv,useDeferredValue:function(t){var e=Yn();return Tt===null?e.memoizedState=t:DR(e,Tt.memoizedState,t)},useTransition:function(){var t=cm(Vu)[0],e=Yn().memoizedState;return[t,e]},useMutableSource:vR,useSyncExternalStore:_R,useId:NR,unstable_isNewReconciler:!1};function Ra(t,e){try{var n="",r=e;do n+=hO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var L2=typeof WeakMap=="function"?WeakMap:Map;function FR(t,e,n){n=Gr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cd||(Cd=!0,Gg=r),Fg(t,e)},n}function LR(t,e,n){n=Gr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fg(t,e),typeof r!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function EE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new L2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=J2.bind(null,t,e,n),e.then(t,t))}function TE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function IE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gr(-1,1),e.tag=2,zi(n,e,1))),n.lanes|=1),t)}var $2=ci.ReactCurrentOwner,vn=!1;function rn(t,e,n,r){e.child=t===null?gR(e,null,n,r):Ia(e,t.child,n,r)}function SE(t,e,n,r,i){n=n.render;var s=e.ref;return ha(e,i),r=zv(t,e,n,r,s,i),n=qv(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ii(t,e,i)):(We&&n&&kv(e),e.flags|=1,rn(t,e,r,i),e.child)}function RE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!e_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$R(t,e,s,r,i)):(t=Gh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Au,n(o,r)&&t.ref===e.ref)return ii(t,e,i)}return e.flags|=1,t=Hi(s,r),t.ref=e.ref,t.return=e,e.child=t}function $R(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Au(s,r)&&t.ref===e.ref)if(vn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(vn=!0);else return e.lanes=t.lanes,ii(t,e,i)}return Lg(t,e,n,r,i)}function jR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(ra,An),An|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(ra,An),An|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,je(ra,An),An|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,je(ra,An),An|=r;return rn(t,e,i,n),e.child}function UR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lg(t,e,n,r,i){var s=In(n)?Ys:Zt.current;return s=Ea(e,s),ha(e,i),n=zv(t,e,n,r,s,i),r=qv(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ii(t,e,i)):(We&&r&&kv(e),e.flags|=1,rn(t,e,n,i),e.child)}function xE(t,e,n,r,i){if(In(n)){var s=!0;yd(e)}else s=!1;if(ha(e,i),e.stateNode===null)qh(t,e),pR(e,n,r),Mg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wn(u):(u=In(n)?Ys:Zt.current,u=Ea(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&yE(e,o,r,u),Ai=!1;var d=e.memoizedState;o.state=d,Td(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Tn.current||Ai?(typeof c=="function"&&(Vg(e,n,c,r),l=e.memoizedState),(a=Ai||gE(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dR(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:tr(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Wn(l):(l=In(n)?Ys:Zt.current,l=Ea(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&yE(e,o,r,l),Ai=!1,d=e.memoizedState,o.state=d,Td(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||Tn.current||Ai?(typeof f=="function"&&(Vg(e,n,f,r),p=e.memoizedState),(u=Ai||gE(e,n,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return $g(t,e,n,r,s,i)}function $g(t,e,n,r,i,s){UR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hE(e,n,!1),ii(t,e,s);r=e.stateNode,$2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ia(e,t.child,null,s),e.child=Ia(e,null,a,s)):rn(t,e,a,s),e.memoizedState=r.state,i&&hE(e,n,!0),e.child}function BR(t){var e=t.stateNode;e.pendingContext?cE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cE(t,e.context,!1),$v(t,e.containerInfo)}function CE(t,e,n,r,i){return Ta(),Nv(i),e.flags|=256,rn(t,e,n,r),e.child}var jg={dehydrated:null,treeContext:null,retryLane:0};function Ug(t){return{baseLanes:t,cachePool:null,transitions:null}}function zR(t,e,n){var r=e.pendingProps,i=Ze.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(Ze,i&1),t===null)return Ng(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xf(o,r,0,null),t=Hs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ug(n),e.memoizedState=jg,t):Gv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return j2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hi(a,s):(s=Hs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Ug(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=jg,r}return s=t.child,t=s.sibling,r=Hi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gv(t,e){return e=xf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fh(t,e,n,r){return r!==null&&Nv(r),Ia(e,t.child,null,n),t=Gv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function j2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hm(Error(L(422))),fh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=xf({mode:"visible",children:r.children},i,0,null),s=Hs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ia(e,t.child,null,o),e.child.memoizedState=Ug(o),e.memoizedState=jg,s);if(!(e.mode&1))return fh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(L(419)),r=hm(s,r,void 0),fh(t,e,o,r)}if(a=(o&t.childLanes)!==0,vn||a){if(r=Pt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ri(t,i),ur(r,t,i,-1))}return Zv(),r=hm(Error(L(421))),fh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Z2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,bn=Bi(i.nextSibling),Pn=e,We=!0,ir=null,t!==null&&(Un[Bn++]=zr,Un[Bn++]=qr,Un[Bn++]=Xs,zr=t.id,qr=t.overflow,Xs=e),e=Gv(e,r.children),e.flags|=4096,e)}function AE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Og(t.return,e,n)}function dm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rn(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AE(t,n,e);else if(t.tag===19)AE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Id(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),dm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Id(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}dm(e,!0,n,null,s);break;case"together":dm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=Hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U2(t,e,n){switch(e.tag){case 3:BR(e),Ta();break;case 5:yR(e);break;case 1:In(e.type)&&yd(e);break;case 4:$v(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(wd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?zR(t,e,n):(je(Ze,Ze.current&1),t=ii(t,e,n),t!==null?t.sibling:null);je(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,jR(t,e,n)}return ii(t,e,n)}var KR,Bg,HR,GR;KR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bg=function(){};HR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fs(xr.current);var s=null;switch(n){case"input":i=cg(t,i),r=cg(t,r),s=[];break;case"select":i=rt({},i,{value:void 0}),r=rt({},r,{value:void 0}),s=[];break;case"textarea":i=fg(t,i),r=fg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=md)}mg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Eu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ze("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};GR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tl(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function B2(t,e,n){var r=e.pendingProps;switch(Dv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return In(e.type)&&gd(),Gt(e),null;case 3:return r=e.stateNode,Sa(),Ge(Tn),Ge(Zt),Uv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ir!==null&&(Yg(ir),ir=null))),Bg(t,e),Gt(e),null;case 5:jv(e);var i=Fs(Nu.current);if(n=e.type,t!==null&&e.stateNode!=null)HR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Gt(e),null}if(t=Fs(xr.current),hh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[yr]=e,r[ku]=s,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(i=0;i<ql.length;i++)ze(ql[i],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":F0(r,s),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ze("invalid",r);break;case"textarea":$0(r,s),ze("invalid",r)}mg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ch(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ch(r.textContent,a,t),i=["children",""+a]):Eu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":nh(r),L0(r,s,!0);break;case"textarea":nh(r),j0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=md)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yr]=e,t[ku]=r,KR(t,e,!1,!1),e.stateNode=t;e:{switch(o=gg(n,r),n){case"dialog":ze("cancel",t),ze("close",t),i=r;break;case"iframe":case"object":case"embed":ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<ql.length;i++)ze(ql[i],t);i=r;break;case"source":ze("error",t),i=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),i=r;break;case"details":ze("toggle",t),i=r;break;case"input":F0(t,r),i=cg(t,r),ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=rt({},r,{value:void 0}),ze("invalid",t);break;case"textarea":$0(t,r),i=fg(t,r),ze("invalid",t);break;default:i=r}mg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?IS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ES(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Tu(t,l):typeof l=="number"&&Tu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Eu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ze("scroll",t):l!=null&&yv(t,s,l,o))}switch(n){case"input":nh(t),L0(t,r,!1);break;case"textarea":nh(t),j0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?aa(t,!!r.multiple,s,!1):r.defaultValue!=null&&aa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=md)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)GR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Fs(Nu.current),Fs(xr.current),hh(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(s=r.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:ch(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ch(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Gt(e),null;case 13:if(Ge(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&bn!==null&&e.mode&1&&!(e.flags&128))cR(),Ta(),e.flags|=98560,s=!1;else if(s=hh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[yr]=e}else Ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),s=!1}else ir!==null&&(Yg(ir),ir=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?It===0&&(It=3):Zv())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return Sa(),Bg(t,e),t===null&&bu(e.stateNode.containerInfo),Gt(e),null;case 10:return Mv(e.type._context),Gt(e),null;case 17:return In(e.type)&&gd(),Gt(e),null;case 19:if(Ge(Ze),s=e.memoizedState,s===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Tl(s,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Id(t),o!==null){for(e.flags|=128,Tl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(Ze,Ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&mt()>xa&&(e.flags|=128,r=!0,Tl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Id(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!We)return Gt(e),null}else 2*mt()-s.renderingStartTime>xa&&n!==1073741824&&(e.flags|=128,r=!0,Tl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=mt(),e.sibling=null,n=Ze.current,je(Ze,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return Jv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?An&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function z2(t,e){switch(Dv(e),e.tag){case 1:return In(e.type)&&gd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sa(),Ge(Tn),Ge(Zt),Uv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jv(e),null;case 13:if(Ge(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Ze),null;case 4:return Sa(),null;case 10:return Mv(e.type._context),null;case 22:case 23:return Jv(),null;case 24:return null;default:return null}}var ph=!1,Wt=!1,q2=typeof WeakSet=="function"?WeakSet:Set,G=null;function na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function zg(t,e,n){try{n()}catch(r){st(t,e,r)}}var bE=!1;function K2(t,e){if(xg=dd,t=XS(),Pv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cg={focusedElem:t,selectionRange:n},dd=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,E=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:tr(e.type,g),E);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(m){st(e,e.return,m)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return p=bE,bE=!1,p}function su(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&zg(e,n,s)}i=i.next}while(i!==r)}}function Sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QR(t){var e=t.alternate;e!==null&&(t.alternate=null,QR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[ku],delete e[Pg],delete e[C2],delete e[A2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WR(t){return t.tag===5||t.tag===3||t.tag===4}function PE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=md));else if(r!==4&&(t=t.child,t!==null))for(Kg(t,e,n),t=t.sibling;t!==null;)Kg(t,e,n),t=t.sibling}function Hg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hg(t,e,n),t=t.sibling;t!==null;)Hg(t,e,n),t=t.sibling}var Lt=null,nr=!1;function Ei(t,e,n){for(n=n.child;n!==null;)YR(t,e,n),n=n.sibling}function YR(t,e,n){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(gf,n)}catch{}switch(n.tag){case 5:Wt||na(n,e);case 6:var r=Lt,i=nr;Lt=null,Ei(t,e,n),Lt=r,nr=i,Lt!==null&&(nr?(t=Lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Lt.removeChild(n.stateNode));break;case 18:Lt!==null&&(nr?(t=Lt,n=n.stateNode,t.nodeType===8?sm(t.parentNode,n):t.nodeType===1&&sm(t,n),xu(t)):sm(Lt,n.stateNode));break;case 4:r=Lt,i=nr,Lt=n.stateNode.containerInfo,nr=!0,Ei(t,e,n),Lt=r,nr=i;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&zg(n,e,o),i=i.next}while(i!==r)}Ei(t,e,n);break;case 1:if(!Wt&&(na(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){st(n,e,a)}Ei(t,e,n);break;case 21:Ei(t,e,n);break;case 22:n.mode&1?(Wt=(r=Wt)||n.memoizedState!==null,Ei(t,e,n),Wt=r):Ei(t,e,n);break;default:Ei(t,e,n)}}function kE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new q2),e.forEach(function(r){var i=eV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function er(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Lt=a.stateNode,nr=!1;break e;case 3:Lt=a.stateNode.containerInfo,nr=!0;break e;case 4:Lt=a.stateNode.containerInfo,nr=!0;break e}a=a.return}if(Lt===null)throw Error(L(160));YR(s,o,i),Lt=null,nr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){st(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XR(e,t),e=e.sibling}function XR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(er(e,t),mr(t),r&4){try{su(3,t,t.return),Sf(3,t)}catch(g){st(t,t.return,g)}try{su(5,t,t.return)}catch(g){st(t,t.return,g)}}break;case 1:er(e,t),mr(t),r&512&&n!==null&&na(n,n.return);break;case 5:if(er(e,t),mr(t),r&512&&n!==null&&na(n,n.return),t.flags&32){var i=t.stateNode;try{Tu(i,"")}catch(g){st(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&vS(i,s),gg(a,o);var u=gg(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?IS(i,h):c==="dangerouslySetInnerHTML"?ES(i,h):c==="children"?Tu(i,h):yv(i,c,h,u)}switch(a){case"input":hg(i,s);break;case"textarea":_S(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?aa(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?aa(i,!!s.multiple,s.defaultValue,!0):aa(i,!!s.multiple,s.multiple?[]:"",!1))}i[ku]=s}catch(g){st(t,t.return,g)}}break;case 6:if(er(e,t),mr(t),r&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){st(t,t.return,g)}}break;case 3:if(er(e,t),mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xu(e.containerInfo)}catch(g){st(t,t.return,g)}break;case 4:er(e,t),mr(t);break;case 13:er(e,t),mr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Yv=mt())),r&4&&kE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(u=Wt)||c,er(e,t),Wt=u):er(e,t),mr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(G=t,c=t.child;c!==null;){for(h=G=c;G!==null;){switch(d=G,f=d.child,d.tag){case 0:case 11:case 14:case 15:su(4,d,d.return);break;case 1:na(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){st(r,n,g)}}break;case 5:na(d,d.return);break;case 22:if(d.memoizedState!==null){NE(h);continue}}f!==null?(f.return=d,G=f):NE(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TS("display",o))}catch(g){st(t,t.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){st(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:er(e,t),mr(t),r&4&&kE(t);break;case 21:break;default:er(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(WR(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Tu(i,""),r.flags&=-33);var s=PE(t);Hg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PE(t);Kg(t,a,o);break;default:throw Error(L(161))}}catch(l){st(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function H2(t,e,n){G=t,JR(t)}function JR(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ph;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Wt;a=ph;var u=Wt;if(ph=o,(Wt=l)&&!u)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?OE(i):l!==null?(l.return=o,G=l):OE(i);for(;s!==null;)G=s,JR(s),s=s.sibling;G=i,ph=a,Wt=u}DE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):DE(t)}}function DE(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||Sf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&xu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Wt||e.flags&512&&qg(e)}catch(d){st(e,e.return,d)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function NE(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function OE(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sf(4,e)}catch(l){st(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){st(e,i,l)}}var s=e.return;try{qg(e)}catch(l){st(e,s,l)}break;case 5:var o=e.return;try{qg(e)}catch(l){st(e,o,l)}}}catch(l){st(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var G2=Math.ceil,xd=ci.ReactCurrentDispatcher,Qv=ci.ReactCurrentOwner,Gn=ci.ReactCurrentBatchConfig,Ce=0,Pt=null,_t=null,Bt=0,An=0,ra=hs(0),It=0,Fu=null,Zs=0,Rf=0,Wv=0,ou=null,yn=null,Yv=0,xa=1/0,Lr=null,Cd=!1,Gg=null,qi=null,mh=!1,Mi=null,Ad=0,au=0,Qg=null,Kh=-1,Hh=0;function un(){return Ce&6?mt():Kh!==-1?Kh:Kh=mt()}function Ki(t){return t.mode&1?Ce&2&&Bt!==0?Bt&-Bt:P2.transition!==null?(Hh===0&&(Hh=VS()),Hh):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:BS(t.type)),t):1}function ur(t,e,n,r){if(50<au)throw au=0,Qg=null,Error(L(185));yc(t,n,r),(!(Ce&2)||t!==Pt)&&(t===Pt&&(!(Ce&2)&&(Rf|=n),It===4&&Di(t,Bt)),Sn(t,r),n===1&&Ce===0&&!(e.mode&1)&&(xa=mt()+500,Ef&&ds()))}function Sn(t,e){var n=t.callbackNode;PO(t,e);var r=hd(t,t===Pt?Bt:0);if(r===0)n!==null&&z0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&z0(n),e===1)t.tag===0?b2(VE.bind(null,t)):aR(VE.bind(null,t)),R2(function(){!(Ce&6)&&ds()}),n=null;else{switch(MS(r)){case 1:n=Tv;break;case 4:n=NS;break;case 16:n=cd;break;case 536870912:n=OS;break;default:n=cd}n=ox(n,ZR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZR(t,e){if(Kh=-1,Hh=0,Ce&6)throw Error(L(327));var n=t.callbackNode;if(da()&&t.callbackNode!==n)return null;var r=hd(t,t===Pt?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bd(t,r);else{e=r;var i=Ce;Ce|=2;var s=tx();(Pt!==t||Bt!==e)&&(Lr=null,xa=mt()+500,Ks(t,e));do try{Y2();break}catch(a){ex(t,a)}while(1);Vv(),xd.current=s,Ce=i,_t!==null?e=0:(Pt=null,Bt=0,e=It)}if(e!==0){if(e===2&&(i=Eg(t),i!==0&&(r=i,e=Wg(t,i))),e===1)throw n=Fu,Ks(t,0),Di(t,r),Sn(t,mt()),n;if(e===6)Di(t,r);else{if(i=t.current.alternate,!(r&30)&&!Q2(i)&&(e=bd(t,r),e===2&&(s=Eg(t),s!==0&&(r=s,e=Wg(t,s))),e===1))throw n=Fu,Ks(t,0),Di(t,r),Sn(t,mt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Cs(t,yn,Lr);break;case 3:if(Di(t,r),(r&130023424)===r&&(e=Yv+500-mt(),10<e)){if(hd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bg(Cs.bind(null,t,yn,Lr),e);break}Cs(t,yn,Lr);break;case 4:if(Di(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-lr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G2(r/1960))-r,10<r){t.timeoutHandle=bg(Cs.bind(null,t,yn,Lr),r);break}Cs(t,yn,Lr);break;case 5:Cs(t,yn,Lr);break;default:throw Error(L(329))}}}return Sn(t,mt()),t.callbackNode===n?ZR.bind(null,t):null}function Wg(t,e){var n=ou;return t.current.memoizedState.isDehydrated&&(Ks(t,e).flags|=256),t=bd(t,e),t!==2&&(e=yn,yn=n,e!==null&&Yg(e)),t}function Yg(t){yn===null?yn=t:yn.push.apply(yn,t)}function Q2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Di(t,e){for(e&=~Wv,e&=~Rf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-lr(e),r=1<<n;t[n]=-1,e&=~r}}function VE(t){if(Ce&6)throw Error(L(327));da();var e=hd(t,0);if(!(e&1))return Sn(t,mt()),null;var n=bd(t,e);if(t.tag!==0&&n===2){var r=Eg(t);r!==0&&(e=r,n=Wg(t,r))}if(n===1)throw n=Fu,Ks(t,0),Di(t,e),Sn(t,mt()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t,yn,Lr),Sn(t,mt()),null}function Xv(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(xa=mt()+500,Ef&&ds())}}function eo(t){Mi!==null&&Mi.tag===0&&!(Ce&6)&&da();var e=Ce;Ce|=1;var n=Gn.transition,r=Ne;try{if(Gn.transition=null,Ne=1,t)return t()}finally{Ne=r,Gn.transition=n,Ce=e,!(Ce&6)&&ds()}}function Jv(){An=ra.current,Ge(ra)}function Ks(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S2(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(Dv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gd();break;case 3:Sa(),Ge(Tn),Ge(Zt),Uv();break;case 5:jv(r);break;case 4:Sa();break;case 13:Ge(Ze);break;case 19:Ge(Ze);break;case 10:Mv(r.type._context);break;case 22:case 23:Jv()}n=n.return}if(Pt=t,_t=t=Hi(t.current,null),Bt=An=e,It=0,Fu=null,Wv=Rf=Zs=0,yn=ou=null,Ms!==null){for(e=0;e<Ms.length;e++)if(n=Ms[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ms=null}return t}function ex(t,e){do{var n=_t;try{if(Vv(),Bh.current=Rd,Sd){for(var r=tt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sd=!1}if(Js=0,At=Tt=tt=null,iu=!1,Ou=0,Qv.current=null,n===null||n.return===null){It=1,Fu=e,_t=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=TE(o);if(f!==null){f.flags&=-257,IE(f,o,a,s,e),f.mode&1&&EE(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){EE(s,u,e),Zv();break e}l=Error(L(426))}}else if(We&&a.mode&1){var E=TE(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),IE(E,o,a,s,e),Nv(Ra(l,a));break e}}s=l=Ra(l,a),It!==4&&(It=2),ou===null?ou=[s]:ou.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=FR(s,l,e);pE(s,y);break e;case 1:a=l;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qi===null||!qi.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var m=LR(s,a,e);pE(s,m);break e}}s=s.return}while(s!==null)}rx(n)}catch(I){e=I,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(1)}function tx(){var t=xd.current;return xd.current=Rd,t===null?Rd:t}function Zv(){(It===0||It===3||It===2)&&(It=4),Pt===null||!(Zs&268435455)&&!(Rf&268435455)||Di(Pt,Bt)}function bd(t,e){var n=Ce;Ce|=2;var r=tx();(Pt!==t||Bt!==e)&&(Lr=null,Ks(t,e));do try{W2();break}catch(i){ex(t,i)}while(1);if(Vv(),Ce=n,xd.current=r,_t!==null)throw Error(L(261));return Pt=null,Bt=0,It}function W2(){for(;_t!==null;)nx(_t)}function Y2(){for(;_t!==null&&!EO();)nx(_t)}function nx(t){var e=sx(t.alternate,t,An);t.memoizedProps=t.pendingProps,e===null?rx(t):_t=e,Qv.current=null}function rx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=z2(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,_t=null;return}}else if(n=B2(n,e,An),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);It===0&&(It=5)}function Cs(t,e,n){var r=Ne,i=Gn.transition;try{Gn.transition=null,Ne=1,X2(t,e,n,r)}finally{Gn.transition=i,Ne=r}return null}function X2(t,e,n,r){do da();while(Mi!==null);if(Ce&6)throw Error(L(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kO(t,s),t===Pt&&(_t=Pt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mh||(mh=!0,ox(cd,function(){return da(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gn.transition,Gn.transition=null;var o=Ne;Ne=1;var a=Ce;Ce|=4,Qv.current=null,K2(t,n),XR(n,t),y2(Cg),dd=!!xg,Cg=xg=null,t.current=n,H2(n),TO(),Ce=a,Ne=o,Gn.transition=s}else t.current=n;if(mh&&(mh=!1,Mi=t,Ad=i),s=t.pendingLanes,s===0&&(qi=null),RO(n.stateNode),Sn(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cd)throw Cd=!1,t=Gg,Gg=null,t;return Ad&1&&t.tag!==0&&da(),s=t.pendingLanes,s&1?t===Qg?au++:(au=0,Qg=t):au=0,ds(),null}function da(){if(Mi!==null){var t=MS(Ad),e=Gn.transition,n=Ne;try{if(Gn.transition=null,Ne=16>t?16:t,Mi===null)var r=!1;else{if(t=Mi,Mi=null,Ad=0,Ce&6)throw Error(L(331));var i=Ce;for(Ce|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var c=G;switch(c.tag){case 0:case 11:case 15:su(8,c,s)}var h=c.child;if(h!==null)h.return=c,G=h;else for(;G!==null;){c=G;var d=c.sibling,f=c.return;if(QR(c),c===u){G=null;break}if(d!==null){d.return=f,G=d;break}G=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var E=g.sibling;g.sibling=null,g=E}while(g!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:su(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,G=y;break e}G=s.return}}var v=t.current;for(G=v;G!==null;){o=G;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,G=_;else e:for(o=v;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sf(9,a)}}catch(I){st(a,a.return,I)}if(a===o){G=null;break e}var m=a.sibling;if(m!==null){m.return=a.return,G=m;break e}G=a.return}}if(Ce=i,ds(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(gf,t)}catch{}r=!0}return r}finally{Ne=n,Gn.transition=e}}return!1}function ME(t,e,n){e=Ra(n,e),e=FR(t,e,1),t=zi(t,e,1),e=un(),t!==null&&(yc(t,1,e),Sn(t,e))}function st(t,e,n){if(t.tag===3)ME(t,t,n);else for(;e!==null;){if(e.tag===3){ME(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qi===null||!qi.has(r))){t=Ra(n,t),t=LR(e,t,1),e=zi(e,t,1),t=un(),e!==null&&(yc(e,1,t),Sn(e,t));break}}e=e.return}}function J2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Pt===t&&(Bt&n)===n&&(It===4||It===3&&(Bt&130023424)===Bt&&500>mt()-Yv?Ks(t,0):Wv|=n),Sn(t,e)}function ix(t,e){e===0&&(t.mode&1?(e=sh,sh<<=1,!(sh&130023424)&&(sh=4194304)):e=1);var n=un();t=ri(t,e),t!==null&&(yc(t,e,n),Sn(t,n))}function Z2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ix(t,n)}function eV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),ix(t,n)}var sx;sx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tn.current)vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vn=!1,U2(t,e,n);vn=!!(t.flags&131072)}else vn=!1,We&&e.flags&1048576&&lR(e,_d,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qh(t,e),t=e.pendingProps;var i=Ea(e,Zt.current);ha(e,n),i=zv(null,e,r,t,i,n);var s=qv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(s=!0,yd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Lv(e),i.updater=Tf,e.stateNode=i,i._reactInternals=e,Mg(e,r,t,n),e=$g(null,e,r,!0,s,n)):(e.tag=0,We&&s&&kv(e),rn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=nV(r),t=tr(r,t),i){case 0:e=Lg(null,e,r,t,n);break e;case 1:e=xE(null,e,r,t,n);break e;case 11:e=SE(null,e,r,t,n);break e;case 14:e=RE(null,e,r,tr(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),Lg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),xE(t,e,r,i,n);case 3:e:{if(BR(e),t===null)throw Error(L(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dR(t,e),Td(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ra(Error(L(423)),e),e=CE(t,e,r,n,i);break e}else if(r!==i){i=Ra(Error(L(424)),e),e=CE(t,e,r,n,i);break e}else for(bn=Bi(e.stateNode.containerInfo.firstChild),Pn=e,We=!0,ir=null,n=gR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ta(),r===i){e=ii(t,e,n);break e}rn(t,e,r,n)}e=e.child}return e;case 5:return yR(e),t===null&&Ng(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ag(r,i)?o=null:s!==null&&Ag(r,s)&&(e.flags|=32),UR(t,e),rn(t,e,o,n),e.child;case 6:return t===null&&Ng(e),null;case 13:return zR(t,e,n);case 4:return $v(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ia(e,null,r,n):rn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),SE(t,e,r,i,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,je(wd,r._currentValue),r._currentValue=o,s!==null)if(cr(s.value,o)){if(s.children===i.children&&!Tn.current){e=ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Gr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Og(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Og(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ha(e,n),i=Wn(i),r=r(i),e.flags|=1,rn(t,e,r,n),e.child;case 14:return r=e.type,i=tr(r,e.pendingProps),i=tr(r.type,i),RE(t,e,r,i,n);case 15:return $R(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tr(r,i),qh(t,e),e.tag=1,In(r)?(t=!0,yd(e)):t=!1,ha(e,n),pR(e,r,i),Mg(e,r,i,n),$g(null,e,r,!0,t,n);case 19:return qR(t,e,n);case 22:return jR(t,e,n)}throw Error(L(156,e.tag))};function ox(t,e){return DS(t,e)}function tV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(t,e,n,r){return new tV(t,e,n,r)}function e_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nV(t){if(typeof t=="function")return e_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_v)return 11;if(t===wv)return 14}return 2}function Hi(t,e){var n=t.alternate;return n===null?(n=qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")e_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Go:return Hs(n.children,i,s,e);case vv:o=8,i|=8;break;case og:return t=qn(12,n,e,i|2),t.elementType=og,t.lanes=s,t;case ag:return t=qn(13,n,e,i),t.elementType=ag,t.lanes=s,t;case lg:return t=qn(19,n,e,i),t.elementType=lg,t.lanes=s,t;case mS:return xf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fS:o=10;break e;case pS:o=9;break e;case _v:o=11;break e;case wv:o=14;break e;case Ci:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=qn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Hs(t,e,n,r){return t=qn(7,t,r,e),t.lanes=n,t}function xf(t,e,n,r){return t=qn(22,t,r,e),t.elementType=mS,t.lanes=n,t.stateNode={isHidden:!1},t}function fm(t,e,n){return t=qn(6,t,null,e),t.lanes=n,t}function pm(t,e,n){return e=qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qp(0),this.expirationTimes=Qp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function t_(t,e,n,r,i,s,o,a,l){return t=new rV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lv(s),t}function iV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ax(t){if(!t)return Xi;t=t._reactInternals;e:{if(_o(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(In(n))return oR(t,n,e)}return e}function lx(t,e,n,r,i,s,o,a,l){return t=t_(n,r,!0,t,i,s,o,a,l),t.context=ax(null),n=t.current,r=un(),i=Ki(n),s=Gr(r,i),s.callback=e??null,zi(n,s,i),t.current.lanes=i,yc(t,i,r),Sn(t,r),t}function Cf(t,e,n,r){var i=e.current,s=un(),o=Ki(i);return n=ax(n),e.context===null?e.context=n:e.pendingContext=n,e=Gr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zi(i,e,o),t!==null&&(ur(t,i,o,s),Uh(t,i,o)),o}function Pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function n_(t,e){FE(t,e),(t=t.alternate)&&FE(t,e)}function sV(){return null}var ux=typeof reportError=="function"?reportError:function(t){console.error(t)};function r_(t){this._internalRoot=t}Af.prototype.render=r_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));Cf(t,e,null,null)};Af.prototype.unmount=r_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;eo(function(){Cf(null,t,null,null)}),e[ni]=null}};function Af(t){this._internalRoot=t}Af.prototype.unstable_scheduleHydration=function(t){if(t){var e=$S();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ki.length&&e!==0&&e<ki[n].priority;n++);ki.splice(n,0,t),n===0&&US(t)}};function i_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function LE(){}function oV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Pd(o);s.call(u)}}var o=lx(e,r,t,0,null,!1,!1,"",LE);return t._reactRootContainer=o,t[ni]=o.current,bu(t.nodeType===8?t.parentNode:t),eo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Pd(l);a.call(u)}}var l=t_(t,0,!1,null,null,!1,!1,"",LE);return t._reactRootContainer=l,t[ni]=l.current,bu(t.nodeType===8?t.parentNode:t),eo(function(){Cf(e,l,n,r)}),l}function Pf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Pd(o);a.call(l)}}Cf(e,o,t,i)}else o=oV(n,e,t,i,r);return Pd(o)}FS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zl(e.pendingLanes);n!==0&&(Iv(e,n|1),Sn(e,mt()),!(Ce&6)&&(xa=mt()+500,ds()))}break;case 13:eo(function(){var r=ri(t,1);if(r!==null){var i=un();ur(r,t,1,i)}}),n_(t,1)}};Sv=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var n=un();ur(e,t,134217728,n)}n_(t,134217728)}};LS=function(t){if(t.tag===13){var e=Ki(t),n=ri(t,e);if(n!==null){var r=un();ur(n,t,e,r)}n_(t,e)}};$S=function(){return Ne};jS=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};vg=function(t,e,n){switch(e){case"input":if(hg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wf(r);if(!i)throw Error(L(90));yS(r),hg(r,i)}}}break;case"textarea":_S(t,n);break;case"select":e=n.value,e!=null&&aa(t,!!n.multiple,e,!1)}};xS=Xv;CS=eo;var aV={usingClientEntryPoint:!1,Events:[_c,Xo,wf,SS,RS,Xv]},Il={findFiberByHostInstance:Vs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lV={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PS(t),t===null?null:t.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||sV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{gf=gh.inject(lV),Rr=gh}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aV;Vn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!i_(e))throw Error(L(200));return iV(t,e,null,n)};Vn.createRoot=function(t,e){if(!i_(t))throw Error(L(299));var n=!1,r="",i=ux;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=t_(t,1,!1,null,null,n,!1,r,i),t[ni]=e.current,bu(t.nodeType===8?t.parentNode:t),new r_(e)};Vn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=PS(e),t=t===null?null:t.stateNode,t};Vn.flushSync=function(t){return eo(t)};Vn.hydrate=function(t,e,n){if(!bf(e))throw Error(L(200));return Pf(null,t,e,!0,n)};Vn.hydrateRoot=function(t,e,n){if(!i_(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ux;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lx(e,null,t,1,n??null,i,!1,s,o),t[ni]=e.current,bu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Af(e)};Vn.render=function(t,e,n){if(!bf(e))throw Error(L(200));return Pf(null,t,e,!1,n)};Vn.unmountComponentAtNode=function(t){if(!bf(t))throw Error(L(40));return t._reactRootContainer?(eo(function(){Pf(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};Vn.unstable_batchedUpdates=Xv;Vn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bf(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Pf(t,e,n,!1,r)};Vn.version="18.2.0-next-9e3b772b8-20220608";function cx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cx)}catch(t){console.error(t)}}cx(),lS.exports=Vn;var hx=lS.exports;const ia=mc(hx);var $E=hx;ig.createRoot=$E.createRoot,ig.hydrateRoot=$E.hydrateRoot;class Wa{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Lu=typeof window>"u"||"Deno"in window;function $n(){}function uV(t,e){return typeof t=="function"?t(e):t}function Xg(t){return typeof t=="number"&&t>=0&&t!==1/0}function jE(t,e){return t.filter(n=>!e.includes(n))}function cV(t,e,n){const r=t.slice(0);return r[e]=n,r}function dx(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Kl(t,e,n){return kf(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function bi(t,e,n){return kf(t)?[{...e,queryKey:t},n]:[t||{},e]}function UE(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(kf(o)){if(r){if(e.queryHash!==s_(o,e.options))return!1}else if(!kd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function BE(t,e){const{exact:n,fetching:r,predicate:i,mutationKey:s}=t;if(kf(s)){if(!e.options.mutationKey)return!1;if(n){if(Ls(e.options.mutationKey)!==Ls(s))return!1}else if(!kd(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function s_(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ls)(t)}function Ls(t){return JSON.stringify(t,(e,n)=>Zg(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function kd(t,e){return fx(t,e)}function fx(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!fx(t[n],e[n])):!1}function px(t,e){if(t===e)return t;const n=zE(t)&&zE(e);if(n||Zg(t)&&Zg(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,o=n?[]:{};let a=0;for(let l=0;l<s;l++){const u=n?l:i[l];o[u]=px(t[u],e[u]),o[u]===t[u]&&a++}return r===s&&a===r?t:o}return e}function Jg(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function zE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Zg(t){if(!qE(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!qE(n)||!n.hasOwnProperty("isPrototypeOf"))}function qE(t){return Object.prototype.toString.call(t)==="[object Object]"}function kf(t){return Array.isArray(t)}function mx(t){return new Promise(e=>{setTimeout(e,t)})}function KE(t){mx(0).then(t)}function hV(){if(typeof AbortController=="function")return new AbortController}function ey(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?px(t,e):e}class dV extends Wa{constructor(){super(),this.setup=e=>{if(!Lu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Dd=new dV,HE=["online","offline"];class fV extends Wa{constructor(){super(),this.setup=e=>{if(!Lu&&window.addEventListener){const n=()=>e();return HE.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{HE.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Nd=new fV;function pV(t){return Math.min(1e3*2**t,3e4)}function Df(t){return(t??"online")==="online"?Nd.isOnline():!0}class gx{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function Qh(t){return t instanceof gx}function yx(t){let e=!1,n=0,r=!1,i,s,o;const a=new Promise((E,y)=>{s=E,o=y}),l=E=>{r||(f(new gx(E)),t.abort==null||t.abort())},u=()=>{e=!0},c=()=>{e=!1},h=()=>!Dd.isFocused()||t.networkMode!=="always"&&!Nd.isOnline(),d=E=>{r||(r=!0,t.onSuccess==null||t.onSuccess(E),i==null||i(),s(E))},f=E=>{r||(r=!0,t.onError==null||t.onError(E),i==null||i(),o(E))},p=()=>new Promise(E=>{i=y=>{const v=r||!h();return v&&E(y),v},t.onPause==null||t.onPause()}).then(()=>{i=void 0,r||t.onContinue==null||t.onContinue()}),g=()=>{if(r)return;let E;try{E=t.fn()}catch(y){E=Promise.reject(y)}Promise.resolve(E).then(d).catch(y=>{var v,_;if(r)return;const m=(v=t.retry)!=null?v:3,I=(_=t.retryDelay)!=null?_:pV,S=typeof I=="function"?I(n,y):I,R=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,y);if(e||!R){f(y);return}n++,t.onFail==null||t.onFail(n,y),mx(S).then(()=>{if(h())return p()}).then(()=>{e?f(y):g()})})};return Df(t.networkMode)?g():p().then(g),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:u,continueRetry:c}}const o_=console;function mV(){let t=[],e=0,n=c=>{c()},r=c=>{c()};const i=c=>{let h;e++;try{h=c()}finally{e--,e||a()}return h},s=c=>{e?t.push(c):KE(()=>{n(c)})},o=c=>(...h)=>{s(()=>{c(...h)})},a=()=>{const c=t;t=[],c.length&&KE(()=>{r(()=>{c.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c}}}const et=mV();class vx{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xg(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Lu?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}let gV=class extends vx{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||o_,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||yV(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const r=ey(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(e),r?r.then($n).catch($n):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!dx(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const o=hV(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(a);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(l(c),(r=this.options.behavior)==null||r.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=c.fetchOptions)==null?void 0:i.meta)){var h;this.dispatch({type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta})}const d=f=>{if(Qh(f)&&f.silent||this.dispatch({type:"error",error:f}),!Qh(f)){var p,g,E,y;(p=(g=this.cache.config).onError)==null||p.call(g,f,this),(E=(y=this.cache.config).onSettled)==null||E.call(y,this.state.data,f,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=yx({fn:c.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:f=>{var p,g,E,y;if(typeof f>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(f),(p=(g=this.cache.config).onSuccess)==null||p.call(g,f,this),(E=(y=this.cache.config).onSettled)==null||E.call(y,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(f,p)=>{this.dispatch({type:"failed",failureCount:f,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=r=>{var i,s;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:Df(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return Qh(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),et.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}};function yV(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class vV extends Wa{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,r){var i;const s=n.queryKey,o=(i=n.queryHash)!=null?i:s_(s,n);let a=this.get(o);return a||(a=new gV({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){et.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[r]=bi(e,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>UE(r,i))}findAll(e,n){const[r]=bi(e,n);return Object.keys(r).length>0?this.queries.filter(i=>UE(r,i)):this.queries}notify(e){et.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){et.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){et.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}let _V=class extends vx{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||o_,this.observers=[],this.state=e.state||wV(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var R;return this.retryer=yx({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(x,N)=>{this.dispatch({type:"failed",failureCount:x,error:N})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(R=this.options.retry)!=null?R:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,i,s,o,a,l,u,c;if(!n){var h,d,f,p;this.dispatch({type:"loading",variables:this.options.variables}),await((h=(d=this.mutationCache.config).onMutate)==null?void 0:h.call(d,this.state.variables,this));const x=await((f=(p=this.options).onMutate)==null?void 0:f.call(p,this.state.variables));x!==this.state.context&&this.dispatch({type:"loading",context:x,variables:this.state.variables})}const R=await e();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,R,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,R,this.state.variables,this.state.context)),await((a=(l=this.mutationCache.config).onSettled)==null?void 0:a.call(l,R,null,this.state.variables,this.state.context,this)),await((u=(c=this.options).onSettled)==null?void 0:u.call(c,R,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:R}),R}catch(R){try{var g,E,y,v,_,m,I,S;throw await((g=(E=this.mutationCache.config).onError)==null?void 0:g.call(E,R,this.state.variables,this.state.context,this)),await((y=(v=this.options).onError)==null?void 0:y.call(v,R,this.state.variables,this.state.context)),await((_=(m=this.mutationCache.config).onSettled)==null?void 0:_.call(m,void 0,R,this.state.variables,this.state.context,this)),await((I=(S=this.options).onSettled)==null?void 0:I.call(S,void 0,R,this.state.variables,this.state.context)),R}finally{this.dispatch({type:"error",error:R})}}}dispatch(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Df(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=n(this.state),et.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}};function wV(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class EV extends Wa{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,r){const i=new _V({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){et.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>BE(e,n))}findAll(e){return this.mutations.filter(n=>BE(e,n))}notify(e){et.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return et.batch(()=>n.reduce((r,i)=>r.then(()=>i.continue().catch($n)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function TV(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,i,s,o;const a=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,l=(r=t.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,u=l==null?void 0:l.pageParam,c=(l==null?void 0:l.direction)==="forward",h=(l==null?void 0:l.direction)==="backward",d=((s=t.state.data)==null?void 0:s.pages)||[],f=((o=t.state.data)==null?void 0:o.pageParams)||[];let p=f,g=!1;const E=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>{var R;if((R=t.signal)!=null&&R.aborted)g=!0;else{var x;(x=t.signal)==null||x.addEventListener("abort",()=>{g=!0})}return t.signal}})},y=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),v=(S,R,x,N)=>(p=N?[R,...p]:[...p,R],N?[x,...S]:[...S,x]),_=(S,R,x,N)=>{if(g)return Promise.reject("Cancelled");if(typeof x>"u"&&!R&&S.length)return Promise.resolve(S);const O={queryKey:t.queryKey,pageParam:x,meta:t.options.meta};E(O);const j=y(O);return Promise.resolve(j).then(X=>v(S,x,X,N))};let m;if(!d.length)m=_([]);else if(c){const S=typeof u<"u",R=S?u:GE(t.options,d);m=_(d,S,R)}else if(h){const S=typeof u<"u",R=S?u:IV(t.options,d);m=_(d,S,R,!0)}else{p=[];const S=typeof t.options.getNextPageParam>"u";m=(a&&d[0]?a(d[0],0,d):!0)?_([],S,f[0]):Promise.resolve(v([],f[0],d[0]));for(let x=1;x<d.length;x++)m=m.then(N=>{if(a&&d[x]?a(d[x],x,d):!0){const j=S?f[x]:GE(t.options,N);return _(N,S,j)}return Promise.resolve(v(N,f[x],d[x]))})}return m.then(S=>({pages:S,pageParams:p}))}}}}function GE(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function IV(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class SV{constructor(e={}){this.queryCache=e.queryCache||new vV,this.mutationCache=e.mutationCache||new EV,this.logger=e.logger||o_,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Dd.subscribe(()=>{Dd.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Nd.subscribe(()=>{Nd.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[r]=bi(e,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state.data}ensureQueryData(e,n,r){const i=Kl(e,n,r),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=uV(n,s);if(typeof o>"u")return;const a=Kl(e),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,n,r){return et.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state}removeQueries(e,n){const[r]=bi(e,n),i=this.queryCache;et.batch(()=>{i.findAll(r).forEach(s=>{i.remove(s)})})}resetQueries(e,n,r){const[i,s]=bi(e,n,r),o=this.queryCache,a={type:"active",...i};return et.batch(()=>(o.findAll(i).forEach(l=>{l.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,n,r){const[i,s={}]=bi(e,n,r);typeof s.revert>"u"&&(s.revert=!0);const o=et.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then($n).catch($n)}invalidateQueries(e,n,r){const[i,s]=bi(e,n,r);return et.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const l={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(l,s)})}refetchQueries(e,n,r){const[i,s]=bi(e,n,r),o=et.batch(()=>this.queryCache.findAll(i).filter(l=>!l.isDisabled()).map(l=>{var u;return l.fetch(void 0,{...s,cancelRefetch:(u=s==null?void 0:s.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then($n);return s!=null&&s.throwOnError||(a=a.catch($n)),a}fetchQuery(e,n,r){const i=Kl(e,n,r),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,n,r){return this.fetchQuery(e,n,r).then($n).catch($n)}fetchInfiniteQuery(e,n,r){const i=Kl(e,n,r);return i.behavior=TV(),this.fetchQuery(i)}prefetchInfiniteQuery(e,n,r){return this.fetchInfiniteQuery(e,n,r).then($n).catch($n)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const r=this.queryDefaults.find(i=>Ls(e)===Ls(i.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(r=>kd(e,r.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(e,n){const r=this.mutationDefaults.find(i=>Ls(e)===Ls(i.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(r=>kd(e,r.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=s_(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class _x extends Wa{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),QE(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ty(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ty(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Jg(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const s=this.hasListeners();s&&WE(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),r=this.createResult(n,e);return xV(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch($n)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),Lu||this.currentResult.isStale||!Xg(this.options.staleTime))return;const n=dx(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Lu||this.options.enabled===!1||!Xg(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Dd.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const r=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,l=e!==r,u=l?e.state:this.currentQueryInitialState,c=l?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:d,error:f,errorUpdatedAt:p,fetchStatus:g,status:E}=h,y=!1,v=!1,_;if(n._optimisticResults){const x=this.hasListeners(),N=!x&&QE(e,n),O=x&&WE(e,r,n,i);(N||O)&&(g=Df(e.options.networkMode)?"fetching":"paused",d||(E="loading")),n._optimisticResults==="isRestoring"&&(g="idle")}if(n.keepPreviousData&&!h.dataUpdatedAt&&c!=null&&c.isSuccess&&E!=="error")_=c.data,d=c.dataUpdatedAt,E=c.status,y=!0;else if(n.select&&typeof h.data<"u")if(s&&h.data===(o==null?void 0:o.data)&&n.select===this.selectFn)_=this.selectResult;else try{this.selectFn=n.select,_=n.select(h.data),_=ey(s==null?void 0:s.data,_,n),this.selectResult=_,this.selectError=null}catch(x){this.selectError=x}else _=h.data;if(typeof n.placeholderData<"u"&&typeof _>"u"&&E==="loading"){let x;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))x=s.data;else if(x=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof x<"u")try{x=n.select(x),this.selectError=null}catch(N){this.selectError=N}typeof x<"u"&&(E="success",_=ey(s==null?void 0:s.data,x,n),v=!0)}this.selectError&&(f=this.selectError,_=this.selectResult,p=Date.now(),E="error");const m=g==="fetching",I=E==="loading",S=E==="error";return{status:E,fetchStatus:g,isLoading:I,isSuccess:E==="success",isError:S,isInitialLoading:I&&m,data:_,dataUpdatedAt:d,error:f,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!I,isLoadingError:S&&h.dataUpdatedAt===0,isPaused:g==="paused",isPlaceholderData:v,isPreviousData:y,isRefetchError:S&&h.dataUpdatedAt!==0,isStale:a_(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Jg(r,n))return;this.currentResult=r;const i={cache:!0},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!this.trackedProps.size)return!0;const l=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&l.add("error"),Object.keys(this.currentResult).some(u=>{const c=u;return this.currentResult[c]!==n[c]&&l.has(c)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!Qh(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){et.batch(()=>{if(e.onSuccess){var n,r,i,s;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,l,u;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(l=(u=this.options).onSettled)==null||l.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function RV(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function QE(t,e){return RV(t,e)||t.state.dataUpdatedAt>0&&ty(t,e,e.refetchOnMount)}function ty(t,e,n){if(e.enabled!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&a_(t,e)}return!1}function WE(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&a_(t,n)}function a_(t,e){return t.isStaleByTime(e.staleTime)}function xV(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:!Jg(t.getCurrentResult(),e)}class CV extends Wa{constructor(e,n){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},n&&this.setQueries(n)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(n=>{this.onUpdate(e,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,n){this.queries=e,et.batch(()=>{const r=this.observers,i=this.findMatchingObservers(this.queries);i.forEach(u=>u.observer.setOptions(u.defaultedQueryOptions,n));const s=i.map(u=>u.observer),o=Object.fromEntries(s.map(u=>[u.options.queryHash,u])),a=s.map(u=>u.getCurrentResult()),l=s.some((u,c)=>u!==r[c]);r.length===s.length&&!l||(this.observers=s,this.observersMap=o,this.result=a,this.hasListeners()&&(jE(r,s).forEach(u=>{u.destroy()}),jE(s,r).forEach(u=>{u.subscribe(c=>{this.onUpdate(u,c)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(n=>n.observer.getOptimisticResult(n.defaultedQueryOptions))}findMatchingObservers(e){const n=this.observers,r=new Map(n.map(f=>[f.options.queryHash,f])),i=e.map(f=>this.client.defaultQueryOptions(f)),s=i.flatMap(f=>{const p=r.get(f.queryHash);return p!=null?[{defaultedQueryOptions:f,observer:p}]:[]}),o=new Set(s.map(f=>f.defaultedQueryOptions.queryHash)),a=i.filter(f=>!o.has(f.queryHash)),l=new Set(s.map(f=>f.observer)),u=n.filter(f=>!l.has(f)),c=f=>{const p=this.client.defaultQueryOptions(f),g=this.observersMap[p.queryHash];return g??new _x(this.client,p)},h=a.map((f,p)=>{if(f.keepPreviousData){const g=u[p];if(g!==void 0)return{defaultedQueryOptions:f,observer:g}}return{defaultedQueryOptions:f,observer:c(f)}}),d=(f,p)=>i.indexOf(f.defaultedQueryOptions)-i.indexOf(p.defaultedQueryOptions);return s.concat(h).sort(d)}onUpdate(e,n){const r=this.observers.indexOf(e);r!==-1&&(this.result=cV(this.result,r,n),this.notify())}notify(){et.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}var wx={exports:{}},Ex={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=w;function AV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bV=typeof Object.is=="function"?Object.is:AV,PV=Ca.useState,kV=Ca.useEffect,DV=Ca.useLayoutEffect,NV=Ca.useDebugValue;function OV(t,e){var n=e(),r=PV({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return DV(function(){i.value=n,i.getSnapshot=e,mm(i)&&s({inst:i})},[t,n,e]),kV(function(){return mm(i)&&s({inst:i}),t(function(){mm(i)&&s({inst:i})})},[t]),NV(n),n}function mm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bV(t,n)}catch{return!0}}function VV(t,e){return e()}var MV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?VV:OV;Ex.useSyncExternalStore=Ca.useSyncExternalStore!==void 0?Ca.useSyncExternalStore:MV;wx.exports=Ex;var FV=wx.exports;const Tx=FV.useSyncExternalStore,YE=w.createContext(void 0),Ix=w.createContext(!1);function Sx(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=YE),window.ReactQueryClientContext):YE)}const l_=({context:t}={})=>{const e=w.useContext(Sx(t,w.useContext(Ix)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},LV=({client:t,children:e,context:n,contextSharing:r=!1})=>{w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const i=Sx(n,r);return w.createElement(Ix.Provider,{value:!n&&r},w.createElement(i.Provider,{value:t},e))},Rx=w.createContext(!1),xx=()=>w.useContext(Rx);Rx.Provider;function $V(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const jV=w.createContext($V()),Cx=()=>w.useContext(jV);function UV(t,e){return typeof t=="function"?t(...e):!!t}const Ax=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},bx=t=>{w.useEffect(()=>{t.clearReset()},[t])},Px=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&UV(n,[t.error,r]),kx=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Dx=(t,e)=>t.isLoading&&t.isFetching&&!e,ny=(t,e,n)=>(t==null?void 0:t.suspense)&&Dx(e,n),ry=(t,e,n)=>e.fetchOptimistic(t).then(({data:r})=>{t.onSuccess==null||t.onSuccess(r),t.onSettled==null||t.onSettled(r,null)}).catch(r=>{n.clearReset(),t.onError==null||t.onError(r),t.onSettled==null||t.onSettled(void 0,r)});function gm({queries:t,context:e}){const n=l_({context:e}),r=xx(),i=Cx(),s=w.useMemo(()=>t.map(d=>{const f=n.defaultQueryOptions(d);return f._optimisticResults=r?"isRestoring":"optimistic",f}),[t,n,r]);s.forEach(d=>{kx(d),Ax(d,i)}),bx(i);const[o]=w.useState(()=>new CV(n,s)),a=o.getOptimisticResult(s);Tx(w.useCallback(d=>r?()=>{}:o.subscribe(et.batchCalls(d)),[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),w.useEffect(()=>{o.setQueries(s,{listeners:!1})},[s,o]);const u=a.some((d,f)=>ny(s[f],d,r))?a.flatMap((d,f)=>{const p=s[f],g=o.getObservers()[f];if(p&&g){if(ny(p,d,r))return ry(p,g,i);Dx(d,r)&&ry(p,g,i)}return[]}):[];if(u.length>0)throw Promise.all(u);const c=o.getQueries(),h=a.find((d,f)=>{var p,g;return Px({result:d,errorResetBoundary:i,useErrorBoundary:(p=(g=s[f])==null?void 0:g.useErrorBoundary)!=null?p:!1,query:c[f]})});if(h!=null&&h.error)throw h.error;return a}function BV(t,e){const n=l_({context:t.context}),r=xx(),i=Cx(),s=n.defaultQueryOptions(t);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=et.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=et.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=et.batchCalls(s.onSettled)),kx(s),Ax(s,i),bx(i);const[o]=w.useState(()=>new e(n,s)),a=o.getOptimisticResult(s);if(Tx(w.useCallback(l=>{const u=r?()=>{}:o.subscribe(et.batchCalls(l));return o.updateResult(),u},[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),w.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),ny(s,a,r))throw ry(s,o,i);if(Px({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function XE(t,e,n){const r=Kl(t,e,n);return BV(r,_x)}const zV=function(){return null};/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ot(){return ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ot.apply(this,arguments)}var ft;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ft||(ft={}));const JE="popstate";function qV(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return $u("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:no(i)}return HV(e,n,null,t)}function me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function to(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KV(){return Math.random().toString(36).substr(2,8)}function ZE(t,e){return{usr:t.state,key:t.key,idx:e}}function $u(t,e,n,r){return n===void 0&&(n=null),ot({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?hi(e):e,{state:n,key:e&&e.key||r||KV()})}function no(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function HV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ft.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(ot({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=ft.Pop;let E=c(),y=E==null?null:E-u;u=E,l&&l({action:a,location:g.location,delta:y})}function d(E,y){a=ft.Push;let v=$u(g.location,E,y);n&&n(v,E),u=c()+1;let _=ZE(v,u),m=g.createHref(v);try{o.pushState(_,"",m)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(m)}s&&l&&l({action:a,location:g.location,delta:1})}function f(E,y){a=ft.Replace;let v=$u(g.location,E,y);n&&n(v,E),u=c();let _=ZE(v,u),m=g.createHref(v);o.replaceState(_,"",m),s&&l&&l({action:a,location:g.location,delta:0})}function p(E){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof E=="string"?E:no(E);return me(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return a},get location(){return t(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(JE,h),l=E,()=>{i.removeEventListener(JE,h),l=null}},createHref(E){return e(i,E)},createURL:p,encodeLocation(E){let y=p(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:f,go(E){return o.go(E)}};return g}var pt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pt||(pt={}));const GV=new Set(["lazy","caseSensitive","path","id","index","children"]);function QV(t){return t.index===!0}function iy(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(me(i.index!==!0||!i.children,"Cannot specify children on an index route"),me(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),QV(i)){let l=ot({},i,e(i),{id:a});return r[a]=l,l}else{let l=ot({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=iy(i.children,e,o,r)),l}})}function sa(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?hi(e):e,i=Ya(r.pathname||"/",n);if(i==null)return null;let s=Nx(t);YV(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=sM(s[a],lM(i));return o}function WV(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Nx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Qr([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Nx(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:rM(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Ox(s.path))i(s,o,l)}),e}function Ox(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Ox(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XV=/^:\w+$/,JV=3,ZV=2,eM=1,tM=10,nM=-2,eT=t=>t==="*";function rM(t,e){let n=t.split("/"),r=n.length;return n.some(eT)&&(r+=nM),e&&(r+=ZV),n.filter(i=>!eT(i)).reduce((i,s)=>i+(XV.test(s)?JV:s===""?eM:tM),r)}function iM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sM(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=oM({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;s.push({params:r,pathname:Qr([i,c.pathname]),pathnameBase:dM(Qr([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=Qr([i,c.pathnameBase]))}return s}function oM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{let{paramName:d,isOptional:f}=c;if(d==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[d]=void 0:u[d]=uM(p||"",d),u},{}),pathname:s,pathnameBase:o,pattern:t}}function aM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),to(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lM(t){try{return decodeURI(t)}catch(e){return to(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uM(t,e){try{return decodeURIComponent(t)}catch(n){return to(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Ya(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?hi(t):t;return{pathname:n?n.startsWith("/")?n:hM(n,e):e,search:fM(r),hash:pM(i)}}function hM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ym(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nf(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function u_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=hi(t):(i=ot({},t),me(!i.pathname||!i.pathname.includes("?"),ym("?","pathname","search",i)),me(!i.pathname||!i.pathname.includes("#"),ym("#","pathname","hash",i)),me(!i.search||!i.search.includes("#"),ym("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=cM(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Qr=t=>t.join("/").replace(/\/\/+/g,"/"),dM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class c_{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Vx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Mx=["post","put","patch","delete"],mM=new Set(Mx),gM=["get",...Mx],yM=new Set(gM),vM=new Set([301,302,303,307,308]),_M=new Set([307,308]),vm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wM={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Sl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Fx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EM=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Lx="remix-router-transitions";function TM(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;me(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let C=t.detectErrorBoundary;i=P=>({hasErrorBoundary:C(P)})}else i=EM;let s={},o=iy(t.routes,i,void 0,s),a,l=t.basename||"/",u=ot({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),c=null,h=new Set,d=null,f=null,p=null,g=t.hydrationData!=null,E=sa(o,t.history.location,l),y=null;if(E==null){let C=jn(404,{pathname:t.history.location.pathname}),{matches:P,route:V}=lT(o);E=P,y={[V.id]:C}}let v=!E.some(C=>C.route.lazy)&&(!E.some(C=>C.route.loader)||t.hydrationData!=null),_,m={historyAction:t.history.action,location:t.history.location,matches:E,initialized:v,navigation:vm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},I=ft.Pop,S=!1,R,x=!1,N=new Map,O=null,j=!1,Q=!1,X=[],ve=[],re=new Map,fe=0,de=-1,F=new Map,z=new Set,q=new Map,se=new Map,oe=new Set,be=new Map,Pe=new Map,_e=!1;function $e(){if(c=t.history.listen(C=>{let{action:P,location:V,delta:K}=C;if(_e){_e=!1;return}to(Pe.size===0||K!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Z=C0({currentLocation:m.location,nextLocation:V,historyAction:P});if(Z&&K!=null){_e=!0,t.history.go(K*-1),Jc(Z,{state:"blocked",location:V,proceed(){Jc(Z,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),t.history.go(K)},reset(){let te=new Map(m.blockers);te.set(Z,Sl),xe({blockers:te})}});return}return Rt(P,V)}),n){NM(e,N);let C=()=>OM(e,N);e.addEventListener("pagehide",C),O=()=>e.removeEventListener("pagehide",C)}return m.initialized||Rt(ft.Pop,m.location),_}function Mt(){c&&c(),O&&O(),h.clear(),R&&R.abort(),m.fetchers.forEach((C,P)=>pr(P)),m.blockers.forEach((C,P)=>x0(P))}function en(C){return h.add(C),()=>h.delete(C)}function xe(C,P){m=ot({},m,C);let V=[],K=[];u.v7_fetcherPersist&&m.fetchers.forEach((Z,te)=>{Z.state==="idle"&&(oe.has(te)?K.push(te):V.push(te))}),h.forEach(Z=>Z(m,{deletedFetchers:K,unstable_viewTransitionOpts:P})),u.v7_fetcherPersist&&(V.forEach(Z=>m.fetchers.delete(Z)),K.forEach(Z=>pr(Z)))}function Kt(C,P){var V,K;let Z=m.actionData!=null&&m.navigation.formMethod!=null&&rr(m.navigation.formMethod)&&m.navigation.state==="loading"&&((V=C.state)==null?void 0:V._isRedirect)!==!0,te;P.actionData?Object.keys(P.actionData).length>0?te=P.actionData:te=null:Z?te=m.actionData:te=null;let ce=P.loaderData?aT(m.loaderData,P.loaderData,P.matches||[],P.errors):m.loaderData,ne=m.blockers;ne.size>0&&(ne=new Map(ne),ne.forEach((Je,Te)=>ne.set(Te,Sl)));let J=S===!0||m.navigation.formMethod!=null&&rr(m.navigation.formMethod)&&((K=C.state)==null?void 0:K._isRedirect)!==!0;a&&(o=a,a=void 0),j||I===ft.Pop||(I===ft.Push?t.history.push(C,C.state):I===ft.Replace&&t.history.replace(C,C.state));let Fe;if(I===ft.Pop){let Je=N.get(m.location.pathname);Je&&Je.has(C.pathname)?Fe={currentLocation:m.location,nextLocation:C}:N.has(C.pathname)&&(Fe={currentLocation:C,nextLocation:m.location})}else if(x){let Je=N.get(m.location.pathname);Je?Je.add(C.pathname):(Je=new Set([C.pathname]),N.set(m.location.pathname,Je)),Fe={currentLocation:m.location,nextLocation:C}}xe(ot({},P,{actionData:te,loaderData:ce,historyAction:I,location:C,initialized:!0,navigation:vm,revalidation:"idle",restoreScrollPosition:b0(C,P.matches||m.matches),preventScrollReset:J,blockers:ne}),Fe),I=ft.Pop,S=!1,x=!1,j=!1,Q=!1,X=[],ve=[]}async function mn(C,P){if(typeof C=="number"){t.history.go(C);return}let V=sy(m.location,m.matches,l,u.v7_prependBasename,C,P==null?void 0:P.fromRouteId,P==null?void 0:P.relative),{path:K,submission:Z,error:te}=tT(u.v7_normalizeFormMethod,!1,V,P),ce=m.location,ne=$u(m.location,K,P&&P.state);ne=ot({},ne,t.history.encodeLocation(ne));let J=P&&P.replace!=null?P.replace:void 0,Fe=ft.Push;J===!0?Fe=ft.Replace:J===!1||Z!=null&&rr(Z.formMethod)&&Z.formAction===m.location.pathname+m.location.search&&(Fe=ft.Replace);let Je=P&&"preventScrollReset"in P?P.preventScrollReset===!0:void 0,Te=C0({currentLocation:ce,nextLocation:ne,historyAction:Fe});if(Te){Jc(Te,{state:"blocked",location:ne,proceed(){Jc(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:ne}),mn(C,P)},reset(){let Le=new Map(m.blockers);Le.set(Te,Sl),xe({blockers:Le})}});return}return await Rt(Fe,ne,{submission:Z,pendingError:te,preventScrollReset:Je,replace:P&&P.replace,enableViewTransition:P&&P.unstable_viewTransition})}function fr(){if(Mr(),xe({revalidation:"loading"}),m.navigation.state!=="submitting"){if(m.navigation.state==="idle"){Rt(m.historyAction,m.location,{startUninterruptedRevalidation:!0});return}Rt(I||m.historyAction,m.navigation.location,{overrideNavigation:m.navigation})}}async function Rt(C,P,V){R&&R.abort(),R=null,I=C,j=(V&&V.startUninterruptedRevalidation)===!0,ON(m.location,m.matches),S=(V&&V.preventScrollReset)===!0,x=(V&&V.enableViewTransition)===!0;let K=a||o,Z=V&&V.overrideNavigation,te=sa(K,P,l);if(!te){let Le=jn(404,{pathname:P.pathname}),{matches:Et,route:Is}=lT(K);Lp(),Kt(P,{matches:Et,loaderData:{},errors:{[Is.id]:Le}});return}if(m.initialized&&!Q&&CM(m.location,P)&&!(V&&V.submission&&rr(V.submission.formMethod))){Kt(P,{matches:te});return}R=new AbortController;let ce=xl(t.history,P,R.signal,V&&V.submission),ne,J;if(V&&V.pendingError)J={[lu(te).route.id]:V.pendingError};else if(V&&V.submission&&rr(V.submission.formMethod)){let Le=await Cn(ce,P,V.submission,te,{replace:V.replace});if(Le.shortCircuited)return;ne=Le.pendingActionData,J=Le.pendingActionError,Z=_m(P,V.submission),ce=new Request(ce.url,{signal:ce.signal})}let{shortCircuited:Fe,loaderData:Je,errors:Te}=await ke(ce,P,te,Z,V&&V.submission,V&&V.fetcherSubmission,V&&V.replace,ne,J);Fe||(R=null,Kt(P,ot({matches:te},ne?{actionData:ne}:{},{loaderData:Je,errors:Te})))}async function Cn(C,P,V,K,Z){Z===void 0&&(Z={}),Mr();let te=kM(P,V);xe({navigation:te});let ce,ne=ay(K,P);if(!ne.route.action&&!ne.route.lazy)ce={type:pt.error,error:jn(405,{method:C.method,pathname:P.pathname,routeId:ne.route.id})};else if(ce=await Rl("action",C,ne,K,s,i,l),C.signal.aborted)return{shortCircuited:!0};if(fa(ce)){let J;return Z&&Z.replace!=null?J=Z.replace:J=ce.location===m.location.pathname+m.location.search,await pe(m,ce,{submission:V,replace:J}),{shortCircuited:!0}}if(uu(ce)){let J=lu(K,ne.route.id);return(Z&&Z.replace)!==!0&&(I=ft.Push),{pendingActionData:{},pendingActionError:{[J.route.id]:ce.error}}}if($s(ce))throw jn(400,{type:"defer-action"});return{pendingActionData:{[ne.route.id]:ce.data}}}async function ke(C,P,V,K,Z,te,ce,ne,J){let Fe=K||_m(P,Z),Je=Z||te||hT(Fe),Te=a||o,[Le,Et]=nT(t.history,m,V,Je,P,Q,X,ve,q,z,Te,l,ne,J);if(Lp(Ve=>!(V&&V.some(Zn=>Zn.route.id===Ve))||Le&&Le.some(Zn=>Zn.route.id===Ve)),de=++fe,Le.length===0&&Et.length===0){let Ve=fl();return Kt(P,ot({matches:V,loaderData:{},errors:J||null},ne?{actionData:ne}:{},Ve?{fetchers:new Map(m.fetchers)}:{})),{shortCircuited:!0}}if(!j){Et.forEach(Zn=>{let wi=m.fetchers.get(Zn.key),dt=Cl(void 0,wi?wi.data:void 0);m.fetchers.set(Zn.key,dt)});let Ve=ne||m.actionData;xe(ot({navigation:Fe},Ve?Object.keys(Ve).length===0?{actionData:null}:{actionData:Ve}:{},Et.length>0?{fetchers:new Map(m.fetchers)}:{}))}Et.forEach(Ve=>{re.has(Ve.key)&&xt(Ve.key),Ve.controller&&re.set(Ve.key,Ve.controller)});let Is=()=>Et.forEach(Ve=>xt(Ve.key));R&&R.signal.addEventListener("abort",Is);let{results:Ss,loaderResults:pl,fetcherResults:$p}=await Ft(m.matches,V,Le,Et,C);if(C.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",Is),Et.forEach(Ve=>re.delete(Ve.key));let Fr=uT(Ss);if(Fr){if(Fr.idx>=Le.length){let Ve=Et[Fr.idx-Le.length].key;z.add(Ve)}return await pe(m,Fr.result,{replace:ce}),{shortCircuited:!0}}let{loaderData:_i,errors:Zc}=oT(m,V,Le,pl,J,Et,$p,be);be.forEach((Ve,Zn)=>{Ve.subscribe(wi=>{(wi||Ve.done)&&be.delete(Zn)})});let jp=fl(),Up=R0(de),Bp=jp||Up||Et.length>0;return ot({loaderData:_i,errors:Zc},Bp?{fetchers:new Map(m.fetchers)}:{})}function Fn(C){return u.v7_fetcherPersist&&(se.set(C,(se.get(C)||0)+1),oe.has(C)&&oe.delete(C)),m.fetchers.get(C)||wM}function Ln(C,P,V,K){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");re.has(C)&&xt(C);let Z=a||o,te=sy(m.location,m.matches,l,u.v7_prependBasename,V,P,K==null?void 0:K.relative),ce=sa(Z,te,l);if(!ce){tn(C,P,jn(404,{pathname:te}));return}let{path:ne,submission:J,error:Fe}=tT(u.v7_normalizeFormMethod,!0,te,K);if(Fe){tn(C,P,Fe);return}let Je=ay(ce,ne);if(S=(K&&K.preventScrollReset)===!0,J&&rr(J.formMethod)){Ts(C,P,ne,Je,ce,J);return}q.set(C,{routeId:P,path:ne}),ie(C,P,ne,Je,ce,J)}async function Ts(C,P,V,K,Z,te){if(Mr(),q.delete(C),!K.route.action&&!K.route.lazy){let dt=jn(405,{method:te.formMethod,pathname:V,routeId:P});tn(C,P,dt);return}let ce=m.fetchers.get(C),ne=DM(te,ce);m.fetchers.set(C,ne),xe({fetchers:new Map(m.fetchers)});let J=new AbortController,Fe=xl(t.history,V,J.signal,te);re.set(C,J);let Je=fe,Te=await Rl("action",Fe,K,Z,s,i,l);if(Fe.signal.aborted){re.get(C)===J&&re.delete(C);return}if(oe.has(C)){m.fetchers.set(C,xi(void 0)),xe({fetchers:new Map(m.fetchers)});return}if(fa(Te))if(re.delete(C),de>Je){let dt=xi(void 0);m.fetchers.set(C,dt),xe({fetchers:new Map(m.fetchers)});return}else{z.add(C);let dt=Cl(te);return m.fetchers.set(C,dt),xe({fetchers:new Map(m.fetchers)}),pe(m,Te,{fetcherSubmission:te})}if(uu(Te)){tn(C,P,Te.error);return}if($s(Te))throw jn(400,{type:"defer-action"});let Le=m.navigation.location||m.location,Et=xl(t.history,Le,J.signal),Is=a||o,Ss=m.navigation.state!=="idle"?sa(Is,m.navigation.location,l):m.matches;me(Ss,"Didn't find any matches after fetcher action");let pl=++fe;F.set(C,pl);let $p=Cl(te,Te.data);m.fetchers.set(C,$p);let[Fr,_i]=nT(t.history,m,Ss,te,Le,Q,X,ve,q,z,Is,l,{[K.route.id]:Te.data},void 0);_i.filter(dt=>dt.key!==C).forEach(dt=>{let ml=dt.key,P0=m.fetchers.get(ml),MN=Cl(void 0,P0?P0.data:void 0);m.fetchers.set(ml,MN),re.has(ml)&&xt(ml),dt.controller&&re.set(ml,dt.controller)}),xe({fetchers:new Map(m.fetchers)});let Zc=()=>_i.forEach(dt=>xt(dt.key));J.signal.addEventListener("abort",Zc);let{results:jp,loaderResults:Up,fetcherResults:Bp}=await Ft(m.matches,Ss,Fr,_i,Et);if(J.signal.aborted)return;J.signal.removeEventListener("abort",Zc),F.delete(C),re.delete(C),_i.forEach(dt=>re.delete(dt.key));let Ve=uT(jp);if(Ve){if(Ve.idx>=Fr.length){let dt=_i[Ve.idx-Fr.length].key;z.add(dt)}return pe(m,Ve.result)}let{loaderData:Zn,errors:wi}=oT(m,m.matches,Fr,Up,void 0,_i,Bp,be);if(m.fetchers.has(C)){let dt=xi(Te.data);m.fetchers.set(C,dt)}R0(pl),m.navigation.state==="loading"&&pl>de?(me(I,"Expected pending action"),R&&R.abort(),Kt(m.navigation.location,{matches:Ss,loaderData:Zn,errors:wi,fetchers:new Map(m.fetchers)})):(xe({errors:wi,loaderData:aT(m.loaderData,Zn,Ss,wi),fetchers:new Map(m.fetchers)}),Q=!1)}async function ie(C,P,V,K,Z,te){let ce=m.fetchers.get(C),ne=Cl(te,ce?ce.data:void 0);m.fetchers.set(C,ne),xe({fetchers:new Map(m.fetchers)});let J=new AbortController,Fe=xl(t.history,V,J.signal);re.set(C,J);let Je=fe,Te=await Rl("loader",Fe,K,Z,s,i,l);if($s(Te)&&(Te=await Ux(Te,Fe.signal,!0)||Te),re.get(C)===J&&re.delete(C),Fe.signal.aborted)return;if(oe.has(C)){m.fetchers.set(C,xi(void 0)),xe({fetchers:new Map(m.fetchers)});return}if(fa(Te))if(de>Je){let Et=xi(void 0);m.fetchers.set(C,Et),xe({fetchers:new Map(m.fetchers)});return}else{z.add(C),await pe(m,Te);return}if(uu(Te)){tn(C,P,Te.error);return}me(!$s(Te),"Unhandled fetcher deferred data");let Le=xi(Te.data);m.fetchers.set(C,Le),xe({fetchers:new Map(m.fetchers)})}async function pe(C,P,V){let{submission:K,fetcherSubmission:Z,replace:te}=V===void 0?{}:V;P.revalidate&&(Q=!0);let ce=$u(C.location,P.location,{_isRedirect:!0});if(me(ce,"Expected a location on the redirect navigation"),n){let Le=!1;if(P.reloadDocument)Le=!0;else if(Fx.test(P.location)){const Et=t.history.createURL(P.location);Le=Et.origin!==e.location.origin||Ya(Et.pathname,l)==null}if(Le){te?e.location.replace(P.location):e.location.assign(P.location);return}}R=null;let ne=te===!0?ft.Replace:ft.Push,{formMethod:J,formAction:Fe,formEncType:Je}=C.navigation;!K&&!Z&&J&&Fe&&Je&&(K=hT(C.navigation));let Te=K||Z;if(_M.has(P.status)&&Te&&rr(Te.formMethod))await Rt(ne,ce,{submission:ot({},Te,{formAction:P.location}),preventScrollReset:S});else{let Le=_m(ce,K);await Rt(ne,ce,{overrideNavigation:Le,fetcherSubmission:Z,preventScrollReset:S})}}async function Ft(C,P,V,K,Z){let te=await Promise.all([...V.map(J=>Rl("loader",Z,J,P,s,i,l)),...K.map(J=>J.matches&&J.match&&J.controller?Rl("loader",xl(t.history,J.path,J.controller.signal),J.match,J.matches,s,i,l):{type:pt.error,error:jn(404,{pathname:J.path})})]),ce=te.slice(0,V.length),ne=te.slice(V.length);return await Promise.all([cT(C,V,ce,ce.map(()=>Z.signal),!1,m.loaderData),cT(C,K.map(J=>J.match),ne,K.map(J=>J.controller?J.controller.signal:null),!0)]),{results:te,loaderResults:ce,fetcherResults:ne}}function Mr(){Q=!0,X.push(...Lp()),q.forEach((C,P)=>{re.has(P)&&(ve.push(P),xt(P))})}function tn(C,P,V){let K=lu(m.matches,P);pr(C),xe({errors:{[K.route.id]:V},fetchers:new Map(m.fetchers)})}function pr(C){let P=m.fetchers.get(C);re.has(C)&&!(P&&P.state==="loading"&&F.has(C))&&xt(C),q.delete(C),F.delete(C),z.delete(C),oe.delete(C),m.fetchers.delete(C)}function we(C){if(u.v7_fetcherPersist){let P=(se.get(C)||0)-1;P<=0?(se.delete(C),oe.add(C)):se.set(C,P)}else pr(C);xe({fetchers:new Map(m.fetchers)})}function xt(C){let P=re.get(C);me(P,"Expected fetch controller: "+C),P.abort(),re.delete(C)}function vi(C){for(let P of C){let V=Fn(P),K=xi(V.data);m.fetchers.set(P,K)}}function fl(){let C=[],P=!1;for(let V of z){let K=m.fetchers.get(V);me(K,"Expected fetcher: "+V),K.state==="loading"&&(z.delete(V),C.push(V),P=!0)}return vi(C),P}function R0(C){let P=[];for(let[V,K]of F)if(K<C){let Z=m.fetchers.get(V);me(Z,"Expected fetcher: "+V),Z.state==="loading"&&(xt(V),F.delete(V),P.push(V))}return vi(P),P.length>0}function DN(C,P){let V=m.blockers.get(C)||Sl;return Pe.get(C)!==P&&Pe.set(C,P),V}function x0(C){m.blockers.delete(C),Pe.delete(C)}function Jc(C,P){let V=m.blockers.get(C)||Sl;me(V.state==="unblocked"&&P.state==="blocked"||V.state==="blocked"&&P.state==="blocked"||V.state==="blocked"&&P.state==="proceeding"||V.state==="blocked"&&P.state==="unblocked"||V.state==="proceeding"&&P.state==="unblocked","Invalid blocker state transition: "+V.state+" -> "+P.state);let K=new Map(m.blockers);K.set(C,P),xe({blockers:K})}function C0(C){let{currentLocation:P,nextLocation:V,historyAction:K}=C;if(Pe.size===0)return;Pe.size>1&&to(!1,"A router only supports one blocker at a time");let Z=Array.from(Pe.entries()),[te,ce]=Z[Z.length-1],ne=m.blockers.get(te);if(!(ne&&ne.state==="proceeding")&&ce({currentLocation:P,nextLocation:V,historyAction:K}))return te}function Lp(C){let P=[];return be.forEach((V,K)=>{(!C||C(K))&&(V.cancel(),P.push(K),be.delete(K))}),P}function NN(C,P,V){if(d=C,p=P,f=V||null,!g&&m.navigation===vm){g=!0;let K=b0(m.location,m.matches);K!=null&&xe({restoreScrollPosition:K})}return()=>{d=null,p=null,f=null}}function A0(C,P){return f&&f(C,P.map(K=>WV(K,m.loaderData)))||C.key}function ON(C,P){if(d&&p){let V=A0(C,P);d[V]=p()}}function b0(C,P){if(d){let V=A0(C,P),K=d[V];if(typeof K=="number")return K}return null}function VN(C){s={},a=iy(C,i,void 0,s)}return _={get basename(){return l},get state(){return m},get routes(){return o},get window(){return e},initialize:$e,subscribe:en,enableScrollRestoration:NN,navigate:mn,fetch:Ln,revalidate:fr,createHref:C=>t.history.createHref(C),encodeLocation:C=>t.history.encodeLocation(C),getFetcher:Fn,deleteFetcher:we,dispose:Mt,getBlocker:DN,deleteBlocker:x0,_internalFetchControllers:re,_internalActiveDeferreds:be,_internalSetRoutes:VN},_}function IM(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function sy(t,e,n,r,i,s,o){let a,l;if(s!=null&&o!=="path"){a=[];for(let c of e)if(a.push(c),c.route.id===s){l=c;break}}else a=e,l=e[e.length-1];let u=u_(i||".",Nf(a).map(c=>c.pathnameBase),Ya(t.pathname,n)||t.pathname,o==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!h_(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Qr([n,u.pathname])),no(u)}function tT(t,e,n,r){if(!r||!IM(r))return{path:n};if(r.formMethod&&!PM(r.formMethod))return{path:n,error:jn(405,{method:r.formMethod})};let i=()=>({path:n,error:jn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=jx(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!rr(o))return i();let d=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[g,E]=p;return""+f+g+"="+E+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}else if(r.formEncType==="application/json"){if(!rr(o))return i();try{let d=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch{return i()}}}me(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=oy(r.formData),u=r.formData;else if(r.body instanceof FormData)l=oy(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=sT(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=sT(l)}catch{return i()}let c={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(rr(c.formMethod))return{path:n,submission:c};let h=hi(n);return e&&h.search&&h_(h.search)&&l.append("index",""),h.search="?"+l,{path:no(h),submission:c}}function SM(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function nT(t,e,n,r,i,s,o,a,l,u,c,h,d,f){let p=f?Object.values(f)[0]:d?Object.values(d)[0]:void 0,g=t.createURL(e.location),E=t.createURL(i),y=f?Object.keys(f)[0]:void 0,_=SM(n,y).filter((I,S)=>{if(I.route.lazy)return!0;if(I.route.loader==null)return!1;if(RM(e.loaderData,e.matches[S],I)||o.some(N=>N===I.route.id))return!0;let R=e.matches[S],x=I;return rT(I,ot({currentUrl:g,currentParams:R.params,nextUrl:E,nextParams:x.params},r,{actionResult:p,defaultShouldRevalidate:s||g.pathname+g.search===E.pathname+E.search||g.search!==E.search||$x(R,x)}))}),m=[];return l.forEach((I,S)=>{if(!n.some(j=>j.route.id===I.routeId))return;let R=sa(c,I.path,h);if(!R){m.push({key:S,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let x=e.fetchers.get(S),N=ay(R,I.path),O=!1;u.has(S)?O=!1:a.includes(S)?O=!0:x&&x.state!=="idle"&&x.data===void 0?O=s:O=rT(N,ot({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:p,defaultShouldRevalidate:s})),O&&m.push({key:S,routeId:I.routeId,path:I.path,matches:R,match:N,controller:new AbortController})}),[_,m]}function RM(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function $x(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function rT(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function iT(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];me(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";to(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!GV.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,ot({},e(i),{lazy:void 0}))}async function Rl(t,e,n,r,i,s,o,a){a===void 0&&(a={});let l,u,c,h=p=>{let g,E=new Promise((y,v)=>g=v);return c=()=>g(),e.signal.addEventListener("abort",c),Promise.race([p({request:e,params:n.params,context:a.requestContext}),E])};try{let p=n.route[t];if(n.route.lazy)if(p){let g,E=await Promise.all([h(p).catch(y=>{g=y}),iT(n.route,s,i)]);if(g)throw g;u=E[0]}else if(await iT(n.route,s,i),p=n.route[t],p)u=await h(p);else if(t==="action"){let g=new URL(e.url),E=g.pathname+g.search;throw jn(405,{method:e.method,pathname:E,routeId:n.route.id})}else return{type:pt.data,data:void 0};else if(p)u=await h(p);else{let g=new URL(e.url),E=g.pathname+g.search;throw jn(404,{pathname:E})}me(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(p){l=pt.error,u=p}finally{c&&e.signal.removeEventListener("abort",c)}if(bM(u)){let p=u.status;if(vM.has(p)){let y=u.headers.get("Location");if(me(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!Fx.test(y))y=sy(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,y);else if(!a.isStaticRequest){let v=new URL(e.url),_=y.startsWith("//")?new URL(v.protocol+y):new URL(y),m=Ya(_.pathname,o)!=null;_.origin===v.origin&&m&&(y=_.pathname+_.search+_.hash)}if(a.isStaticRequest)throw u.headers.set("Location",y),u;return{type:pt.redirect,status:p,location:y,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(a.isRouteRequest)throw{type:l===pt.error?pt.error:pt.data,response:u};let g,E=u.headers.get("Content-Type");return E&&/\bapplication\/json\b/.test(E)?g=await u.json():g=await u.text(),l===pt.error?{type:l,error:new c_(p,u.statusText,g),headers:u.headers}:{type:pt.data,data:g,statusCode:u.status,headers:u.headers}}if(l===pt.error)return{type:l,error:u};if(AM(u)){var d,f;return{type:pt.deferred,deferredData:u,statusCode:(d=u.init)==null?void 0:d.status,headers:((f=u.init)==null?void 0:f.headers)&&new Headers(u.init.headers)}}return{type:pt.data,data:u}}function xl(t,e,n,r){let i=t.createURL(jx(e)).toString(),s={signal:n};if(r&&rr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=oy(r.formData):s.body=r.formData}return new Request(i,s)}function oy(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function sT(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function xM(t,e,n,r,i){let s={},o=null,a,l=!1,u={};return n.forEach((c,h)=>{let d=e[h].route.id;if(me(!fa(c),"Cannot handle redirect results in processLoaderData"),uu(c)){let f=lu(t,d),p=c.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=p),s[d]=void 0,l||(l=!0,a=Vx(c.error)?c.error.status:500),c.headers&&(u[d]=c.headers)}else $s(c)?(i.set(d,c.deferredData),s[d]=c.deferredData.data):s[d]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(a=c.statusCode),c.headers&&(u[d]=c.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function oT(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=xM(e,n,r,i,a);for(let c=0;c<s.length;c++){let{key:h,match:d,controller:f}=s[c];me(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let p=o[c];if(!(f&&f.signal.aborted))if(uu(p)){let g=lu(t.matches,d==null?void 0:d.route.id);u&&u[g.route.id]||(u=ot({},u,{[g.route.id]:p.error})),t.fetchers.delete(h)}else if(fa(p))me(!1,"Unhandled fetcher revalidation redirect");else if($s(p))me(!1,"Unhandled fetcher deferred data");else{let g=xi(p.data);t.fetchers.set(h,g)}}return{loaderData:l,errors:u}}function aT(t,e,n,r){let i=ot({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function lu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function lT(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function jn(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new c_(t||500,o,new Error(a),!0)}function uT(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(fa(n))return{result:n,idx:e}}}function jx(t){let e=typeof t=="string"?hi(t):t;return no(ot({},e,{hash:""}))}function CM(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function $s(t){return t.type===pt.deferred}function uu(t){return t.type===pt.error}function fa(t){return(t&&t.type)===pt.redirect}function AM(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function bM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function PM(t){return yM.has(t.toLowerCase())}function rr(t){return mM.has(t.toLowerCase())}async function cT(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let u=t.find(h=>h.route.id===l.route.id),c=u!=null&&!$x(u,l)&&(s&&s[l.route.id])!==void 0;if($s(a)&&(i||c)){let h=r[o];me(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await Ux(a,h,i).then(d=>{d&&(n[o]=d||n[o])})}}}async function Ux(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:pt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:pt.error,error:i}}return{type:pt.data,data:t.deferredData.data}}}function h_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ay(t,e){let n=typeof e=="string"?hi(e).search:e.search;if(t[t.length-1].route.index&&h_(n||""))return t[t.length-1];let r=Nf(t);return r[r.length-1]}function hT(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function _m(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function kM(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Cl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function DM(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function xi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function NM(t,e){try{let n=t.sessionStorage.getItem(Lx);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function OM(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Lx,JSON.stringify(n))}catch(r){to(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(this,arguments)}const Of=w.createContext(null),Bx=w.createContext(null),Xa=w.createContext(null),Vf=w.createContext(null),di=w.createContext({outlet:null,matches:[],isDataRoute:!1}),zx=w.createContext(null);function VM(t,e){let{relative:n}=e===void 0?{}:e;Ec()||me(!1);let{basename:r,navigator:i}=w.useContext(Xa),{hash:s,pathname:o,search:a}=Hx(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Qr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ec(){return w.useContext(Vf)!=null}function Mf(){return Ec()||me(!1),w.useContext(Vf).location}function qx(t){w.useContext(Xa).static||w.useLayoutEffect(t)}function Kx(){let{isDataRoute:t}=w.useContext(di);return t?YM():MM()}function MM(){Ec()||me(!1);let t=w.useContext(Of),{basename:e,navigator:n}=w.useContext(Xa),{matches:r}=w.useContext(di),{pathname:i}=Mf(),s=JSON.stringify(Nf(r).map(l=>l.pathnameBase)),o=w.useRef(!1);return qx(()=>{o.current=!0}),w.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=u_(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Qr([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}const FM=w.createContext(null);function LM(t){let e=w.useContext(di).outlet;return e&&w.createElement(FM.Provider,{value:t},e)}function $M(){let{matches:t}=w.useContext(di),e=t[t.length-1];return e?e.params:{}}function Hx(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=w.useContext(di),{pathname:i}=Mf(),s=JSON.stringify(Nf(r).map(o=>o.pathnameBase));return w.useMemo(()=>u_(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function jM(t,e,n){Ec()||me(!1);let{navigator:r}=w.useContext(Xa),{matches:i}=w.useContext(di),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Mf(),u;if(e){var c;let g=typeof e=="string"?hi(e):e;a==="/"||(c=g.pathname)!=null&&c.startsWith(a)||me(!1),u=g}else u=l;let h=u.pathname||"/",d=a==="/"?h:h.slice(a.length)||"/",f=sa(t,{pathname:d}),p=KM(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:Qr([a,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:Qr([a,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n);return e&&p?w.createElement(Vf.Provider,{value:{location:Od({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ft.Pop}},p):p}function UM(){let t=WM(),e=Vx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,s)}const BM=w.createElement(UM,null);class zM extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?w.createElement(di.Provider,{value:this.props.routeContext},w.createElement(zx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qM(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(Of);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(di.Provider,{value:e},r)}function KM(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||me(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let c=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||BM);let d=e.concat(s.slice(0,u+1)),f=()=>{let p;return c?p=h:l.route.Component?p=w.createElement(l.route.Component,null):l.route.element?p=l.route.element:p=a,w.createElement(qM,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:n!=null},children:p})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?w.createElement(zM,{location:n.location,revalidation:n.revalidation,component:h,error:c,children:f(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):f()},null)}var Gx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Gx||{}),Vd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vd||{});function HM(t){let e=w.useContext(Of);return e||me(!1),e}function GM(t){let e=w.useContext(Bx);return e||me(!1),e}function QM(t){let e=w.useContext(di);return e||me(!1),e}function Qx(t){let e=QM(),n=e.matches[e.matches.length-1];return n.route.id||me(!1),n.route.id}function WM(){var t;let e=w.useContext(zx),n=GM(Vd.UseRouteError),r=Qx(Vd.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function YM(){let{router:t}=HM(Gx.UseNavigateStable),e=Qx(Vd.UseNavigateStable),n=w.useRef(!1);return qx(()=>{n.current=!0}),w.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Od({fromRouteId:e},s)))},[t,e])}function Wx(t){return LM(t.context)}function XM(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ft.Pop,navigator:s,static:o=!1}=t;Ec()&&me(!1);let a=e.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=hi(r));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=r,p=w.useMemo(()=>{let g=Ya(u,a);return g==null?null:{location:{pathname:g,search:c,hash:h,state:d,key:f},navigationType:i}},[a,u,c,h,d,f,i]);return p==null?null:w.createElement(Xa.Provider,{value:l},w.createElement(Vf.Provider,{children:n,value:p}))}new Promise(()=>{});function JM(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:w.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:w.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ju.apply(this,arguments)}function ZM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function eF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tF(t,e){return t.button===0&&(!e||e==="_self")&&!eF(t)}const nF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function rF(t,e){return TM({basename:e==null?void 0:e.basename,future:ju({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:qV({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||iF(),routes:t,mapRouteProperties:JM,window:e==null?void 0:e.window}).initialize()}function iF(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=ju({},e,{errors:sF(e.errors)})),e}function sF(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new c_(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const oF=w.createContext({isTransitioning:!1}),aF=w.createContext(new Map),lF="startTransition",dT=ZN[lF];function uF(t){dT?dT(t):t()}let cF=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function hF(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=w.useState(n.state),[o,a]=w.useState(),[l,u]=w.useState({isTransitioning:!1}),[c,h]=w.useState(),[d,f]=w.useState(),[p,g]=w.useState(),E=w.useRef(new Map),{v7_startTransition:y}=r||{},v=w.useCallback(R=>{y?uF(R):R()},[y]),_=w.useCallback((R,x)=>{let{deletedFetchers:N,unstable_viewTransitionOpts:O}=x;N.forEach(j=>E.current.delete(j)),R.fetchers.forEach((j,Q)=>{j.data!==void 0&&E.current.set(Q,j.data)}),!O||n.window==null||typeof n.window.document.startViewTransition!="function"?v(()=>s(R)):d&&c?(c.resolve(),d.skipTransition(),g({state:R,currentLocation:O.currentLocation,nextLocation:O.nextLocation})):(a(R),u({isTransitioning:!0,currentLocation:O.currentLocation,nextLocation:O.nextLocation}))},[n.window,d,c,E,v]);w.useLayoutEffect(()=>n.subscribe(_),[n,_]),w.useEffect(()=>{l.isTransitioning&&h(new cF)},[l.isTransitioning]),w.useEffect(()=>{if(c&&o&&n.window){let R=o,x=c.promise,N=n.window.document.startViewTransition(async()=>{v(()=>s(R)),await x});N.finished.finally(()=>{h(void 0),f(void 0),a(void 0),u({isTransitioning:!1})}),f(N)}},[v,o,c,n.window]),w.useEffect(()=>{c&&o&&i.location.key===o.location.key&&c.resolve()},[c,d,i.location,o]),w.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),u({isTransitioning:!0,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),g(void 0))},[l.isTransitioning,p]);let m=w.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,x,N)=>n.navigate(R,{state:x,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(R,x,N)=>n.navigate(R,{replace:!0,state:x,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),I=n.basename||"/",S=w.useMemo(()=>({router:n,navigator:m,static:!1,basename:I}),[n,m,I]);return w.createElement(w.Fragment,null,w.createElement(Of.Provider,{value:S},w.createElement(Bx.Provider,{value:i},w.createElement(aF.Provider,{value:E.current},w.createElement(oF.Provider,{value:l},w.createElement(XM,{basename:I,location:i.location,navigationType:i.historyAction,navigator:m},i.initialized?w.createElement(dF,{routes:n.routes,state:i}):e))))),null)}function dF(t){let{routes:e,state:n}=t;return jM(e,void 0,n)}const fF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jo=w.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:h}=e,d=ZM(e,nF),{basename:f}=w.useContext(Xa),p,g=!1;if(typeof u=="string"&&pF.test(u)&&(p=u,fF))try{let _=new URL(window.location.href),m=u.startsWith("//")?new URL(_.protocol+u):new URL(u),I=Ya(m.pathname,f);m.origin===_.origin&&I!=null?u=I+m.search+m.hash:g=!0}catch{}let E=VM(u,{relative:i}),y=mF(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:h});function v(_){r&&r(_),_.defaultPrevented||y(_)}return w.createElement("a",ju({},d,{href:p||E,onClick:g||s?r:v,ref:n,target:l}))});var fT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fT||(fT={}));var pT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pT||(pT={}));function mF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Kx(),u=Mf(),c=Hx(t,{relative:o});return w.useCallback(h=>{if(tF(h,n)){h.preventDefault();let d=r!==void 0?r:no(u)===no(c);l(t,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}var Yx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mT=He.createContext&&He.createContext(Yx),Gi=globalThis&&globalThis.__assign||function(){return Gi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gi.apply(this,arguments)},gF=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Xx(t){return t&&t.map(function(e,n){return He.createElement(e.tag,Gi({key:n},e.attr),Xx(e.child))})}function Tc(t){return function(e){return He.createElement(yF,Gi({attr:Gi({},t.attr)},e),Xx(t.child))}}function yF(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=gF(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),He.createElement("svg",Gi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Gi(Gi({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&He.createElement("title",null,s),t.children)};return mT!==void 0?He.createElement(mT.Consumer,null,function(n){return e(n)}):e(Yx)}function vF(t){return Tc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 7h-9"}},{tag:"path",attr:{d:"M14 17H5"}},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"}},{tag:"circle",attr:{cx:"7",cy:"7",r:"3"}}]})(t)}let Wr=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const d_="onlyImage",Ja="onlyText",f_="imageText",p_="colorText",m_="onlyColor",Jx="defaultNothing",_F="選擇",or="SelectGroup",wF="你選擇的",g_="BeenSelectGroup",EF="推薦有傷害的",Ff="DamageGroup",wm=[{id:1,title:_F},{id:2,title:wF},{id:3,title:EF}],TF=[{id:1,default:!0,type:d_,title:"只顯示圖片"},{id:2,default:!1,type:Ja,title:"只顯示文字"},{id:3,default:!1,type:f_,title:"顯示圖片和文字"}],IF=[{id:3,default:!0,type:p_,title:"預設顯示顏色和文字"},{id:1,default:!1,type:m_,title:"只顯示顏色"},{id:2,default:!1,type:Ja,title:"只顯示文字"},{id:4,default:!1,type:Jx,title:"都不顯示"}],Zx={enType:"all",zhType:"全部",bgColor:"#17CCF0"},Ic=[{enType:"normal",zhType:"一般",bgColor:"#a8a8a8"},{enType:"fighting",zhType:"格鬥",bgColor:"#c03028"},{enType:"flying",zhType:"飛行",bgColor:"#9096f0"},{enType:"poison",zhType:"毒",bgColor:"#a040a0"},{enType:"ground",zhType:"地面",bgColor:"#e0b668"},{enType:"rock",zhType:"岩石",bgColor:"#b8a038"},{enType:"bug",zhType:"蟲",bgColor:"#9cb820"},{enType:"ghost",zhType:"幽靈",bgColor:"#705898"},{enType:"steel",zhType:"鋼",bgColor:"#6d8f9c"},{enType:"fire",zhType:"火",bgColor:"#f08030"},{enType:"water",zhType:"水",bgColor:"#6890f0"},{enType:"grass",zhType:"草",bgColor:"#22c02a"},{enType:"electric",zhType:"電",bgColor:"#f8d030"},{enType:"psychic",zhType:"超能力",bgColor:"#f85888"},{enType:"ice",zhType:"冰",bgColor:"#98d8d8"},{enType:"dragon",zhType:"龍",bgColor:"#7038f8"},{enType:"dark",zhType:"惡",bgColor:"#504843"},{enType:"fairy",zhType:"妖精",bgColor:"#f09ad9"}],SF="/pokemon-Gym/assets/25-759ceafd.png";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},RF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},tC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new xF;const d=s<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const p=u<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CF=function(t){const e=eC(t);return tC.encodeByteArray(e,!0)},Md=function(t){return CF(t).replace(/\./g,"")},AF=function(t){try{return tC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fd(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!bF(n)||(t[n]=Fd(t[n],e[n]));return t}function bF(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=()=>PF().__FIREBASE_DEFAULTS__,DF=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AF(t[1]);return e&&JSON.parse(e)},nC=()=>{try{return kF()||DF()||NF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rC=()=>{var t;return(t=nC())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Md(JSON.stringify(n)),Md(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sC(){var t;const e=(t=nC())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VF(){return typeof self=="object"&&self.self===self}function MF(){return!sC()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oC(){try{return typeof indexedDB=="object"}catch{return!1}}function FF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF="FirebaseError";class fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LF,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lf.prototype.create)}}class Lf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$F(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new fs(i,a,r)}}function $F(t,e){return t.replace(jF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function uy(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(yT(s)&&yT(o)){if(!uy(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yT(t){return t!==null&&typeof t=="object"}function UF(t,e){const n=new BF(t,e);return n.subscribe.bind(n)}class BF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Em),i.error===void 0&&(i.error=Em),i.complete===void 0&&(i.complete=Em);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Em(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class si{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HF(e))try{this.getOrInitializeService({instanceIdentifier:As})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=As){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=As){return this.instances.has(e)}getOptions(e=As){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=As){return this.component?this.component.multipleInstances?e:As:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KF(t){return t===As?void 0:t}function HF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=[];var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const aC={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},QF=Ee.INFO,WF={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},YF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class v_{constructor(e){this.name=e,this._logLevel=QF,this._logHandler=YF,this._userLogHandler=null,y_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}function XF(t){y_.forEach(e=>{e.setLogLevel(t)})}function JF(t,e){for(const n of y_){let r=null;e&&e.level&&(r=aC[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:Ee[s].toLowerCase(),message:a,args:o,type:i.name})}}}const ZF=(t,e)=>e.some(n=>t instanceof n);let vT,_T;function eL(){return vT||(vT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tL(){return _T||(_T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lC=new WeakMap,cy=new WeakMap,uC=new WeakMap,Tm=new WeakMap,__=new WeakMap;function nL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lC.set(n,t)}).catch(()=>{}),__.set(e,t),e}function rL(t){if(cy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cy.set(t,e)}let hy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iL(t){hy=t(hy)}function sL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Im(this),e,...n);return uC.set(r,e.sort?e.sort():[e]),Qi(r)}:tL().includes(t)?function(...e){return t.apply(Im(this),e),Qi(lC.get(this))}:function(...e){return Qi(t.apply(Im(this),e))}}function oL(t){return typeof t=="function"?sL(t):(t instanceof IDBTransaction&&rL(t),ZF(t,eL())?new Proxy(t,hy):t)}function Qi(t){if(t instanceof IDBRequest)return nL(t);if(Tm.has(t))return Tm.get(t);const e=oL(t);return e!==t&&(Tm.set(t,e),__.set(e,t)),e}const Im=t=>__.get(t);function aL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Qi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Qi(o.result),l.oldVersion,l.newVersion,Qi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const lL=["get","getKey","getAll","getAllKeys","count"],uL=["put","add","delete","clear"],Sm=new Map;function wT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sm.get(e))return Sm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Sm.set(e,s),s}iL(t=>({...t,get:(e,n,r)=>wT(e,n)||t.get(e,n,r),has:(e,n)=>!!wT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dy="@firebase/app",ET="0.9.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new v_("@firebase/app"),dL="@firebase/app-compat",fL="@firebase/analytics-compat",pL="@firebase/analytics",mL="@firebase/app-check-compat",gL="@firebase/app-check",yL="@firebase/auth",vL="@firebase/auth-compat",_L="@firebase/database",wL="@firebase/database-compat",EL="@firebase/functions",TL="@firebase/functions-compat",IL="@firebase/installations",SL="@firebase/installations-compat",RL="@firebase/messaging",xL="@firebase/messaging-compat",CL="@firebase/performance",AL="@firebase/performance-compat",bL="@firebase/remote-config",PL="@firebase/remote-config-compat",kL="@firebase/storage",DL="@firebase/storage-compat",NL="@firebase/firestore",OL="@firebase/firestore-compat",VL="firebase",ML="10.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="[DEFAULT]",FL={[dy]:"fire-core",[dL]:"fire-core-compat",[pL]:"fire-analytics",[fL]:"fire-analytics-compat",[gL]:"fire-app-check",[mL]:"fire-app-check-compat",[yL]:"fire-auth",[vL]:"fire-auth-compat",[_L]:"fire-rtdb",[wL]:"fire-rtdb-compat",[EL]:"fire-fn",[TL]:"fire-fn-compat",[IL]:"fire-iid",[SL]:"fire-iid-compat",[RL]:"fire-fcm",[xL]:"fire-fcm-compat",[CL]:"fire-perf",[AL]:"fire-perf-compat",[bL]:"fire-rc",[PL]:"fire-rc-compat",[kL]:"fire-gcs",[DL]:"fire-gcs-compat",[NL]:"fire-fst",[OL]:"fire-fst-compat","fire-js":"fire-js",[VL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Map,Uu=new Map;function Ld(t,e){try{t.container.addComponent(e)}catch(n){ro.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cC(t,e){t.container.addOrOverwriteComponent(e)}function io(t){const e=t.name;if(Uu.has(e))return ro.debug(`There were multiple attempts to register component ${e}.`),!1;Uu.set(e,t);for(const n of Zi.values())Ld(n,t);return!0}function hC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function LL(t,e,n=Ji){hC(t,e).clearInstance(n)}function $L(){Uu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Yr=new Lf("app","Firebase",jL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UL=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=ML;function w_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ji,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Yr.create("bad-app-name",{appName:String(i)});if(n||(n=rC()),!n)throw Yr.create("no-options");const s=Zi.get(i);if(s){if(uy(n,s.options)&&uy(r,s.config))return s;throw Yr.create("duplicate-app",{appName:i})}const o=new GF(i);for(const l of Uu.values())o.addComponent(l);const a=new UL(n,r,o);return Zi.set(i,a),a}function BL(t=Ji){const e=Zi.get(t);if(!e&&t===Ji&&rC())return w_();if(!e)throw Yr.create("no-app",{appName:t});return e}function zL(){return Array.from(Zi.values())}async function dC(t){const e=t.name;Zi.has(e)&&(Zi.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Cr(t,e,n){var r;let i=(r=FL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ro.warn(a.join(" "));return}io(new si(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function fC(t,e){if(t!==null&&typeof t!="function")throw Yr.create("invalid-log-argument");JF(t,e)}function pC(t){XF(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="firebase-heartbeat-database",KL=1,Bu="firebase-heartbeat-store";let Rm=null;function mC(){return Rm||(Rm=aL(qL,KL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bu)}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),Rm}async function HL(t){try{return await(await mC()).transaction(Bu).objectStore(Bu).get(gC(t))}catch(e){if(e instanceof fs)ro.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ro.warn(n.message)}}}async function TT(t,e){try{const r=(await mC()).transaction(Bu,"readwrite");await r.objectStore(Bu).put(e,gC(t)),await r.done}catch(n){if(n instanceof fs)ro.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ro.warn(r.message)}}}function gC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=1024,QL=30*24*60*60*1e3;class WL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=IT();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=QL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=IT(),{heartbeatsToSend:n,unsentEntries:r}=YL(this._heartbeatsCache.heartbeats),i=Md(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function IT(){return new Date().toISOString().substring(0,10)}function YL(t,e=GL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ST(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ST(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oC()?FF().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await HL(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return TT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return TT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ST(t){return Md(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){io(new si("platform-logger",e=>new cL(e),"PRIVATE")),io(new si("heartbeat",e=>new WL(e),"PRIVATE")),Cr(dy,ET,t),Cr(dy,ET,"esm2017"),Cr("fire-js","")}JL("");const ZL=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:fs,SDK_VERSION:$f,_DEFAULT_ENTRY_NAME:Ji,_addComponent:Ld,_addOrOverwriteComponent:cC,_apps:Zi,_clearComponents:$L,_components:Uu,_getProvider:hC,_registerComponent:io,_removeServiceInstance:LL,deleteApp:dC,getApp:BL,getApps:zL,initializeApp:w_,onLog:fC,registerVersion:Cr,setLogLevel:pC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,n){this._delegate=e,this.firebase=n,Ld(e,new si("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),dC(this._delegate)))}_getService(e,n=Ji){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ji){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ld(this._delegate,e)}_addOrOverwriteComponent(e){cC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},RT=new Lf("app-compat","Firebase",t$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Cr,setLogLevel:pC,onLog:fC,apps:null,SDK_VERSION:$f,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:ZL}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Ji,!gT(e,u))throw RT.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const h=w_(u,c);if(gT(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,h=c.replace("-compat","");if(io(u)&&u.type==="PUBLIC"){const d=(f=i())=>{if(typeof f[h]!="function")throw RT.create("invalid-app-argument",{appName:c});return f[h]()};u.serviceProps!==void 0&&Fd(d,u.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,c).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){const t=n$(e$);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:yC,extendNamespace:e,createSubscribe:UF,ErrorFactory:Lf,deepExtend:Fd});function e(n){Fd(t,n)}return t}const r$=yC();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=new v_("@firebase/app-compat"),i$="@firebase/app-compat",s$="0.2.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t){Cr(i$,s$,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(VF()&&self.firebase!==void 0){xT.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&xT.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Sc=r$;o$();var a$="firebase",l$="10.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sc.registerVersion(a$,l$,"app-compat");var u$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,E_=E_||{},ae=u$||self;function jf(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Rc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function c$(t){return Object.prototype.hasOwnProperty.call(t,xm)&&t[xm]||(t[xm]=++h$)}var xm="closure_uid_"+(1e9*Math.random()>>>0),h$=0;function d$(t,e,n){return t.call.apply(t.bind,arguments)}function f$(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Xt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Xt=d$:Xt=f$,Xt.apply(null,arguments)}function yh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Nt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ps(){this.s=this.s,this.o=this.o}var p$=0;ps.prototype.s=!1;ps.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),p$!=0)&&c$(this)};ps.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function T_(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function CT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(jf(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Jt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var m$=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function zu(t){return/^[\s\xa0]*$/.test(t)}function Uf(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function vr(t){return Uf().indexOf(t)!=-1}function I_(t){return I_[" "](t),t}I_[" "]=function(){};function g$(t,e){var n=lj;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var y$=vr("Opera"),Aa=vr("Trident")||vr("MSIE"),_C=vr("Edge"),fy=_C||Aa,wC=vr("Gecko")&&!(Uf().toLowerCase().indexOf("webkit")!=-1&&!vr("Edge"))&&!(vr("Trident")||vr("MSIE"))&&!vr("Edge"),v$=Uf().toLowerCase().indexOf("webkit")!=-1&&!vr("Edge");function EC(){var t=ae.document;return t?t.documentMode:void 0}var py;e:{var Cm="",Am=function(){var t=Uf();if(wC)return/rv:([^\);]+)(\)|;)/.exec(t);if(_C)return/Edge\/([\d\.]+)/.exec(t);if(Aa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(v$)return/WebKit\/(\S+)/.exec(t);if(y$)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Am&&(Cm=Am?Am[1]:""),Aa){var bm=EC();if(bm!=null&&bm>parseFloat(Cm)){py=String(bm);break e}}py=Cm}var my;if(ae.document&&Aa){var AT=EC();my=AT||parseInt(py,10)||void 0}else my=void 0;var _$=my;function qu(t,e){if(Jt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(wC){e:{try{I_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:w$[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&qu.$.h.call(this)}}Nt(qu,Jt);var w$={2:"touch",3:"pen",4:"mouse"};qu.prototype.h=function(){qu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var xc="closure_listenable_"+(1e6*Math.random()|0),E$=0;function T$(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++E$,this.fa=this.ia=!1}function Bf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function S_(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function I$(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function TC(t){const e={};for(const n in t)e[n]=t[n];return e}const bT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function IC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<bT.length;s++)n=bT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function zf(t){this.src=t,this.g={},this.h=0}zf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=yy(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new T$(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function gy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=vC(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Bf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function yy(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var R_="closure_lm_"+(1e6*Math.random()|0),Pm={};function SC(t,e,n,r,i){if(r&&r.once)return xC(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)SC(t,e[s],n,r,i);return null}return n=A_(n),t&&t[xc]?t.O(e,n,Rc(r)?!!r.capture:!!r,i):RC(t,e,n,!1,r,i)}function RC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Rc(i)?!!i.capture:!!i,a=C_(t);if(a||(t[R_]=a=new zf(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=S$(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)m$||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(AC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function S$(){function t(n){return e.call(t.src,t.listener,n)}const e=R$;return t}function xC(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)xC(t,e[s],n,r,i);return null}return n=A_(n),t&&t[xc]?t.P(e,n,Rc(r)?!!r.capture:!!r,i):RC(t,e,n,!0,r,i)}function CC(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)CC(t,e[s],n,r,i);else r=Rc(r)?!!r.capture:!!r,n=A_(n),t&&t[xc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=yy(s,n,r,i),-1<n&&(Bf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=C_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=yy(e,n,r,i)),(n=-1<t?e[t]:null)&&x_(n))}function x_(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[xc])gy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(AC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=C_(e))?(gy(n,t),n.h==0&&(n.src=null,e[R_]=null)):Bf(t)}}}function AC(t){return t in Pm?Pm[t]:Pm[t]="on"+t}function R$(t,e){if(t.fa)t=!0;else{e=new qu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&x_(t),t=n.call(r,e)}return t}function C_(t){return t=t[R_],t instanceof zf?t:null}var km="__closure_events_fn_"+(1e9*Math.random()>>>0);function A_(t){return typeof t=="function"?t:(t[km]||(t[km]=function(e){return t.handleEvent(e)}),t[km])}function Dt(){ps.call(this),this.i=new zf(this),this.S=this,this.J=null}Nt(Dt,ps);Dt.prototype[xc]=!0;Dt.prototype.removeEventListener=function(t,e,n,r){CC(this,t,e,n,r)};function zt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Jt(e,t);else if(e instanceof Jt)e.target=e.target||t;else{var i=e;e=new Jt(r,t),IC(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=vh(o,r,!0,e)&&i}if(o=e.g=t,i=vh(o,r,!0,e)&&i,i=vh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=vh(o,r,!1,e)&&i}Dt.prototype.N=function(){if(Dt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bf(n[r]);delete t.g[e],t.h--}}this.J=null};Dt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Dt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function vh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&gy(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var b_=ae.JSON.stringify;class x${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function C$(){var t=P_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class A${constructor(){this.h=this.g=null}add(e,n){const r=bC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var bC=new x$(()=>new b$,t=>t.reset());class b${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function P$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function k$(t){ae.setTimeout(()=>{throw t},0)}let Ku,Hu=!1,P_=new A$,PC=()=>{const t=ae.Promise.resolve(void 0);Ku=()=>{t.then(D$)}};var D$=()=>{for(var t;t=C$();){try{t.h.call(t.g)}catch(n){k$(n)}var e=bC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Hu=!1};function qf(t,e){Dt.call(this),this.h=t||1,this.g=e||ae,this.j=Xt(this.qb,this),this.l=Date.now()}Nt(qf,Dt);B=qf.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zt(this,"tick"),this.ga&&(k_(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function k_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){qf.$.N.call(this),k_(this),delete this.g};function D_(t,e,n){if(typeof t=="function")n&&(t=Xt(t,n));else if(t&&typeof t.handleEvent=="function")t=Xt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function kC(t){t.g=D_(()=>{t.g=null,t.i&&(t.i=!1,kC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class N$ extends ps{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kC(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gu(t){ps.call(this),this.h=t,this.g={}}Nt(Gu,ps);var PT=[];function DC(t,e,n,r){Array.isArray(n)||(n&&(PT[0]=n.toString()),n=PT);for(var i=0;i<n.length;i++){var s=SC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function NC(t){S_(t.g,function(e,n){this.g.hasOwnProperty(n)&&x_(e)},t),t.g={}}Gu.prototype.N=function(){Gu.$.N.call(this),NC(this)};Gu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Kf(){this.g=!0}Kf.prototype.Ea=function(){this.g=!1};function O$(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function V$(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function oa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+F$(t,n)+(r?" "+r:"")})}function M$(t,e){t.info(function(){return"TIMEOUT: "+e})}Kf.prototype.info=function(){};function F$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return b_(n)}catch{return e}}var wo={},kT=null;function Hf(){return kT=kT||new Dt}wo.Ta="serverreachability";function OC(t){Jt.call(this,wo.Ta,t)}Nt(OC,Jt);function Qu(t){const e=Hf();zt(e,new OC(e))}wo.STAT_EVENT="statevent";function VC(t,e){Jt.call(this,wo.STAT_EVENT,t),this.stat=e}Nt(VC,Jt);function ln(t){const e=Hf();zt(e,new VC(e,t))}wo.Ua="timingevent";function MC(t,e){Jt.call(this,wo.Ua,t),this.size=e}Nt(MC,Jt);function Cc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}var Gf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},FC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function N_(){}N_.prototype.h=null;function DT(t){return t.h||(t.h=t.i())}function LC(){}var Ac={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function O_(){Jt.call(this,"d")}Nt(O_,Jt);function V_(){Jt.call(this,"c")}Nt(V_,Jt);var vy;function Qf(){}Nt(Qf,N_);Qf.prototype.g=function(){return new XMLHttpRequest};Qf.prototype.i=function(){return{}};vy=new Qf;function bc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Gu(this),this.P=L$,t=fy?125:void 0,this.V=new qf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $C}function $C(){this.i=null,this.g="",this.h=!1}var L$=45e3,_y={},$d={};B=bc.prototype;B.setTimeout=function(t){this.P=t};function wy(t,e,n){t.L=1,t.v=Yf(oi(e)),t.s=n,t.S=!0,jC(t,null)}function jC(t,e){t.G=Date.now(),Pc(t),t.A=oi(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),QC(n.i,"t",r),t.C=0,n=t.l.J,t.h=new $C,t.g=mA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new N$(Xt(t.Pa,t,t.g),t.O)),DC(t.U,t.g,"readystatechange",t.nb),e=t.I?TC(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Qu(),O$(t.j,t.u,t.A,t.m,t.W,t.s)}B.nb=function(t){t=t.target;const e=this.M;e&&wr(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{const c=wr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||fy||this.g&&(this.h.h||this.g.ja()||MT(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Qu(3):Qu(2)),Wf(this);var n=this.g.da();this.ca=n;t:if(UC(this)){var r=MT(this.g);t="";var i=r.length,s=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){js(this),cu(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,V$(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zu(a)){var u=a;break t}}u=null}if(n=u)oa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ey(this,n);else{this.i=!1,this.o=3,ln(12),js(this),cu(this);break e}}this.S?(BC(this,c,o),fy&&this.i&&c==3&&(DC(this.U,this.V,"tick",this.mb),this.V.start())):(oa(this.j,this.m,o,null),Ey(this,o)),c==4&&js(this),this.i&&!this.J&&(c==4?hA(this.l,this):(this.i=!1,Pc(this)))}else sj(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,ln(12)):(this.o=0,ln(13)),js(this),cu(this)}}}catch{}finally{}};function UC(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function BC(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=$$(t,n),i==$d){e==4&&(t.o=4,ln(14),r=!1),oa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==_y){t.o=4,ln(15),oa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else oa(t.j,t.m,i,null),Ey(t,i);UC(t)&&i!=$d&&i!=_y&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,ln(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),U_(e),e.M=!0,ln(11))):(oa(t.j,t.m,n,"[Invalid Chunked Response]"),js(t),cu(t))}B.mb=function(){if(this.g){var t=wr(this.g),e=this.g.ja();this.C<e.length&&(Wf(this),BC(this,t,e),this.i&&t!=4&&Pc(this))}};function $$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?$d:(n=Number(e.substring(n,r)),isNaN(n)?_y:(r+=1,r+n>e.length?$d:(e=e.slice(r,r+n),t.C=r+n,e)))}B.cancel=function(){this.J=!0,js(this)};function Pc(t){t.Y=Date.now()+t.P,zC(t,t.P)}function zC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Cc(Xt(t.lb,t),e)}function Wf(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}B.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(M$(this.j,this.A),this.L!=2&&(Qu(),ln(17)),js(this),this.o=2,cu(this)):zC(this,this.Y-t)};function cu(t){t.l.H==0||t.J||hA(t.l,t)}function js(t){Wf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,k_(t.V),NC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ey(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ty(n.i,t))){if(!t.K&&Ty(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Bd(n),ep(n);else break e;j_(n),ln(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Cc(Xt(n.ib,n),6e3));if(1>=XC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Us(n,11)}else if((t.K||n.g==t)&&Bd(n),!zu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(M_(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,qe(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=pA(r,r.J?r.pa:null,r.Y),o.K){JC(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Wf(a),Pc(a)),r.g=o}else uA(r);0<n.j.length&&tp(n)}else u[0]!="stop"&&u[0]!="close"||Us(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Us(n,7):$_(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Qu(4)}catch{}}function j$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(jf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function U$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(jf(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function qC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(jf(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=U$(t),r=j$(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var KC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function B$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Gs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Gs){this.h=t.h,jd(this,t.j),this.s=t.s,this.g=t.g,Ud(this,t.m),this.l=t.l;var e=t.i,n=new Wu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),NT(this,n),this.o=t.o}else t&&(e=String(t).match(KC))?(this.h=!1,jd(this,e[1]||"",!0),this.s=Hl(e[2]||""),this.g=Hl(e[3]||"",!0),Ud(this,e[4]),this.l=Hl(e[5]||"",!0),NT(this,e[6]||"",!0),this.o=Hl(e[7]||"")):(this.h=!1,this.i=new Wu(null,this.h))}Gs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Gl(e,OT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Gl(e,OT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Gl(n,n.charAt(0)=="/"?K$:q$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Gl(n,G$)),t.join("")};function oi(t){return new Gs(t)}function jd(t,e,n){t.j=n?Hl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ud(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function NT(t,e,n){e instanceof Wu?(t.i=e,Q$(t.i,t.h)):(n||(e=Gl(e,H$)),t.i=new Wu(e,t.h))}function qe(t,e,n){t.i.set(e,n)}function Yf(t){return qe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Hl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,z$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function z$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var OT=/[#\/\?@]/g,q$=/[#\?:]/g,K$=/[#\?]/g,H$=/[#\?@]/g,G$=/#/g;function Wu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ms(t){t.g||(t.g=new Map,t.h=0,t.i&&B$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=Wu.prototype;B.add=function(t,e){ms(this),this.i=null,t=Za(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function HC(t,e){ms(t),e=Za(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function GC(t,e){return ms(t),e=Za(t,e),t.g.has(e)}B.forEach=function(t,e){ms(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};B.ta=function(){ms(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};B.Z=function(t){ms(this);let e=[];if(typeof t=="string")GC(this,t)&&(e=e.concat(this.g.get(Za(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return ms(this),this.i=null,t=Za(this,t),GC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function QC(t,e,n){HC(t,e),0<n.length&&(t.i=null,t.g.set(Za(t,e),T_(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Za(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Q$(t,e){e&&!t.j&&(ms(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(HC(this,r),QC(this,i,n))},t)),t.j=e}var W$=class{constructor(t,e){this.g=t,this.map=e}};function WC(t){this.l=t||Y$,ae.PerformanceNavigationTiming?(t=ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Y$=10;function YC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function XC(t){return t.h?1:t.g?t.g.size:0}function Ty(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function M_(t,e){t.g?t.g.add(e):t.h=e}function JC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}WC.prototype.cancel=function(){if(this.i=ZC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function ZC(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return T_(t.i)}var X$=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function J$(){this.g=new X$}function Z$(t,e,n){const r=n||"";try{qC(t,function(i,s){let o=i;Rc(i)&&(o=b_(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ej(t,e){const n=new Kf;if(ae.Image){const r=new Image;r.onload=yh(_h,n,r,"TestLoadImage: loaded",!0,e),r.onerror=yh(_h,n,r,"TestLoadImage: error",!1,e),r.onabort=yh(_h,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=yh(_h,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function _h(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Xf(t){this.l=t.ec||null,this.j=t.ob||!1}Nt(Xf,N_);Xf.prototype.g=function(){return new Jf(this.l,this.j)};Xf.prototype.i=function(t){return function(){return t}}({});function Jf(t,e){Dt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=F_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nt(Jf,Dt);var F_=0;B=Jf.prototype;B.open=function(t,e){if(this.readyState!=F_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Yu(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kc(this)),this.readyState=F_};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Yu(this)),this.g&&(this.readyState=3,Yu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function eA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?kc(this):Yu(this),this.readyState==3&&eA(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,kc(this))};B.Ya=function(t){this.g&&(this.response=t,kc(this))};B.ka=function(){this.g&&kc(this)};function kc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Yu(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Yu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Jf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var tj=ae.JSON.parse;function ct(t){Dt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tA,this.L=this.M=!1}Nt(ct,Dt);var tA="",nj=/^https?$/i,rj=["POST","PUT"];B=ct.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vy.g(),this.C=this.u?DT(this.u):DT(vy),this.g.onreadystatechange=Xt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){VT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ae.FormData&&t instanceof ae.FormData,!(0<=vC(rj,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{iA(this),0<this.B&&((this.L=ij(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.ua,this)):this.A=D_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){VT(this,s)}};function ij(t){return Aa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof E_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zt(this,"timeout"),this.abort(8))};function VT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,nA(t),Zf(t)}function nA(t){t.F||(t.F=!0,zt(t,"complete"),zt(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,zt(this,"complete"),zt(this,"abort"),Zf(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zf(this,!0)),ct.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?rA(this):this.kb())};B.kb=function(){rA(this)};function rA(t){if(t.h&&typeof E_<"u"&&(!t.C[1]||wr(t)!=4||t.da()!=2)){if(t.v&&wr(t)==4)D_(t.La,0,t);else if(zt(t,"readystatechange"),wr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(KC)[1]||null;!i&&ae.self&&ae.self.location&&(i=ae.self.location.protocol.slice(0,-1)),r=!nj.test(i?i.toLowerCase():"")}n=r}if(n)zt(t,"complete"),zt(t,"success");else{t.m=6;try{var s=2<wr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",nA(t)}}finally{Zf(t)}}}}function Zf(t,e){if(t.g){iA(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||zt(t,"ready");try{n.onreadystatechange=r}catch{}}}function iA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}B.isActive=function(){return!!this.g};function wr(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),tj(e)}};function MT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case tA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function sj(t){const e={};t=(t.g&&2<=wr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(zu(t[r]))continue;var n=P$(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}I$(e,function(r){return r.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function sA(t){let e="";return S_(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function L_(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=sA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):qe(t,e,n))}function Al(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function oA(t){this.Ga=0,this.j=[],this.l=new Kf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Al("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Al("baseRetryDelayMs",5e3,t),this.hb=Al("retryDelaySeedMs",1e4,t),this.eb=Al("forwardChannelMaxRetries",2,t),this.xa=Al("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new WC(t&&t.concurrentRequestLimit),this.Ja=new J$,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=oA.prototype;B.ra=8;B.H=1;function $_(t){if(aA(t),t.H==3){var e=t.W++,n=oi(t.I);if(qe(n,"SID",t.K),qe(n,"RID",e),qe(n,"TYPE","terminate"),Dc(t,n),e=new bc(t,t.l,e),e.L=2,e.v=Yf(oi(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=mA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Pc(e)}fA(t)}function ep(t){t.g&&(U_(t),t.g.cancel(),t.g=null)}function aA(t){ep(t),t.u&&(ae.clearTimeout(t.u),t.u=null),Bd(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ae.clearTimeout(t.m),t.m=null)}function tp(t){if(!YC(t.i)&&!t.m){t.m=!0;var e=t.Na;Ku||PC(),Hu||(Ku(),Hu=!0),P_.add(e,t),t.C=0}}function oj(t,e){return XC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Cc(Xt(t.Na,t,e),dA(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new bc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=TC(s),IC(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=lA(this,i,e),n=oi(this.I),qe(n,"RID",t),qe(n,"CVER",22),this.F&&qe(n,"X-HTTP-Session-Id",this.F),Dc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(sA(s)))+"&"+e:this.o&&L_(n,this.o,s)),M_(this.i,i),this.bb&&qe(n,"TYPE","init"),this.P?(qe(n,"$req",e),qe(n,"SID","null"),i.aa=!0,wy(i,n,null)):wy(i,n,e),this.H=2}}else this.H==3&&(t?FT(this,t):this.j.length==0||YC(this.i)||FT(this))};function FT(t,e){var n;e?n=e.m:n=t.W++;const r=oi(t.I);qe(r,"SID",t.K),qe(r,"RID",n),qe(r,"AID",t.V),Dc(t,r),t.o&&t.s&&L_(r,t.o,t.s),n=new bc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=lA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),M_(t.i,n),wy(n,r,e)}function Dc(t,e){t.na&&S_(t.na,function(n,r){qe(e,r,n)}),t.h&&qC({},function(n,r){qe(e,r,n)})}function lA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Xt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{Z$(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function uA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ku||PC(),Hu||(Ku(),Hu=!0),P_.add(e,t),t.A=0}}function j_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Cc(Xt(t.Ma,t),dA(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,cA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Cc(Xt(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ln(10),ep(this),cA(this))};function U_(t){t.B!=null&&(ae.clearTimeout(t.B),t.B=null)}function cA(t){t.g=new bc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=oi(t.wa);qe(e,"RID","rpc"),qe(e,"SID",t.K),qe(e,"AID",t.V),qe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&qe(e,"TO",t.qa),qe(e,"TYPE","xmlhttp"),Dc(t,e),t.o&&t.s&&L_(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Yf(oi(e)),n.s=null,n.S=!0,jC(n,t)}B.ib=function(){this.v!=null&&(this.v=null,ep(this),j_(this),ln(19))};function Bd(t){t.v!=null&&(ae.clearTimeout(t.v),t.v=null)}function hA(t,e){var n=null;if(t.g==e){Bd(t),U_(t),t.g=null;var r=2}else if(Ty(t.i,e))n=e.F,JC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Hf(),zt(r,new MC(r,n)),tp(t)}else uA(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&oj(t,e)||r==2&&j_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Us(t,5);break;case 4:Us(t,10);break;case 3:Us(t,6);break;default:Us(t,2)}}}function dA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Us(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Xt(t.pb,t);n||(n=new Gs("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||jd(n,"https"),Yf(n)),ej(n.toString(),r)}else ln(2);t.H=0,t.h&&t.h.za(e),fA(t),aA(t)}B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ln(2)):(this.l.info("Failed to ping google.com"),ln(1))};function fA(t){if(t.H=0,t.ma=[],t.h){const e=ZC(t.i);(e.length!=0||t.j.length!=0)&&(CT(t.ma,e),CT(t.ma,t.j),t.i.i.length=0,T_(t.j),t.j.length=0),t.h.ya()}}function pA(t,e,n){var r=n instanceof Gs?oi(n):new Gs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ud(r,r.m);else{var i=ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Gs(null);r&&jd(s,r),e&&(s.g=e),i&&Ud(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&qe(r,n,e),qe(r,"VER",t.ra),Dc(t,r),r}function mA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ct(new Xf({ob:!0})):new ct(t.va),e.Oa(t.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function gA(){}B=gA.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function zd(){if(Aa&&!(10<=Number(_$)))throw Error("Environmental error: no available transport.")}zd.prototype.g=function(t,e){return new Dn(t,e)};function Dn(t,e){Dt.call(this),this.g=new oA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!zu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new el(this)}Nt(Dn,Dt);Dn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ln(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=pA(t,null,t.Y),tp(t)};Dn.prototype.close=function(){$_(this.g)};Dn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=b_(t),t=n);e.j.push(new W$(e.fb++,t)),e.H==3&&tp(e)};Dn.prototype.N=function(){this.g.h=null,delete this.j,$_(this.g),delete this.g,Dn.$.N.call(this)};function yA(t){O_.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Nt(yA,O_);function vA(){V_.call(this),this.status=1}Nt(vA,V_);function el(t){this.g=t}Nt(el,gA);el.prototype.Ba=function(){zt(this.g,"a")};el.prototype.Aa=function(t){zt(this.g,new yA(t))};el.prototype.za=function(t){zt(this.g,new vA)};el.prototype.ya=function(){zt(this.g,"b")};function aj(){this.blockSize=-1}function hr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Nt(hr,aj);hr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Dm(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}hr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Dm(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Dm(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Dm(this,r),i=0;break}}this.h=i,this.i+=e};hr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Oe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var lj={};function B_(t){return-128<=t&&128>t?g$(t,function(e){return new Oe([e|0],0>e?-1:0)}):new Oe([t|0],0>t?-1:0)}function Er(t){if(isNaN(t)||!isFinite(t))return pa;if(0>t)return jt(Er(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Iy;return new Oe(e,0)}function _A(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return jt(_A(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Er(Math.pow(e,8)),r=pa,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Er(Math.pow(e,s)),r=r.R(s).add(Er(o))):(r=r.R(n),r=r.add(Er(o)))}return r}var Iy=4294967296,pa=B_(0),Sy=B_(1),LT=B_(16777216);B=Oe.prototype;B.ea=function(){if(zn(this))return-jt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Iy+r)*e,e*=Iy}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Kr(this))return"0";if(zn(this))return"-"+jt(this).toString(t);for(var e=Er(Math.pow(t,6)),n=this,r="";;){var i=Kd(n,e).g;n=qd(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Kr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Kr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function zn(t){return t.h==-1}B.X=function(t){return t=qd(this,t),zn(t)?-1:Kr(t)?0:1};function jt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Oe(n,~t.h).add(Sy)}B.abs=function(){return zn(this)?jt(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Oe(n,n[n.length-1]&-2147483648?-1:0)};function qd(t,e){return t.add(jt(e))}B.R=function(t){if(Kr(this)||Kr(t))return pa;if(zn(this))return zn(t)?jt(this).R(jt(t)):jt(jt(this).R(t));if(zn(t))return jt(this.R(jt(t)));if(0>this.X(LT)&&0>t.X(LT))return Er(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,wh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,wh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,wh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,wh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Oe(n,0)};function wh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function bl(t,e){this.g=t,this.h=e}function Kd(t,e){if(Kr(e))throw Error("division by zero");if(Kr(t))return new bl(pa,pa);if(zn(t))return e=Kd(jt(t),e),new bl(jt(e.g),jt(e.h));if(zn(e))return e=Kd(t,jt(e)),new bl(jt(e.g),e.h);if(30<t.g.length){if(zn(t)||zn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Sy,r=e;0>=r.X(t);)n=$T(n),r=$T(r);var i=Po(n,1),s=Po(r,1);for(r=Po(r,2),n=Po(n,2);!Kr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Po(r,1),n=Po(n,1)}return e=qd(t,i.R(e)),new bl(i,e)}for(i=pa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Er(n),o=s.R(e);zn(o)||0<o.X(t);)n-=r,s=Er(n),o=s.R(e);Kr(s)&&(s=Sy),i=i.add(s),t=qd(t,o)}return new bl(i,t)}B.gb=function(t){return Kd(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Oe(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Oe(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Oe(n,this.h^t.h)};function $T(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Oe(n,t.h)}function Po(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Oe(i,t.h)}zd.prototype.createWebChannel=zd.prototype.g;Dn.prototype.send=Dn.prototype.u;Dn.prototype.open=Dn.prototype.m;Dn.prototype.close=Dn.prototype.close;Gf.NO_ERROR=0;Gf.TIMEOUT=8;Gf.HTTP_ERROR=6;FC.COMPLETE="complete";LC.EventType=Ac;Ac.OPEN="a";Ac.CLOSE="b";Ac.ERROR="c";Ac.MESSAGE="d";Dt.prototype.listen=Dt.prototype.O;ct.prototype.listenOnce=ct.prototype.P;ct.prototype.getLastError=ct.prototype.Sa;ct.prototype.getLastErrorCode=ct.prototype.Ia;ct.prototype.getStatus=ct.prototype.da;ct.prototype.getResponseJson=ct.prototype.Wa;ct.prototype.getResponseText=ct.prototype.ja;ct.prototype.send=ct.prototype.ha;ct.prototype.setWithCredentials=ct.prototype.Oa;hr.prototype.digest=hr.prototype.l;hr.prototype.reset=hr.prototype.reset;hr.prototype.update=hr.prototype.j;Oe.prototype.add=Oe.prototype.add;Oe.prototype.multiply=Oe.prototype.R;Oe.prototype.modulo=Oe.prototype.gb;Oe.prototype.compare=Oe.prototype.X;Oe.prototype.toNumber=Oe.prototype.ea;Oe.prototype.toString=Oe.prototype.toString;Oe.prototype.getBits=Oe.prototype.D;Oe.fromNumber=Er;Oe.fromString=_A;var uj=function(){return new zd},cj=function(){return Hf()},Nm=Gf,hj=FC,dj=wo,jT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Eh=LC,fj=ct,pj=hr,ma=Oe;const UT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="10.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new v_("@firebase/firestore");function Uo(){return es.logLevel}function mj(t){es.setLogLevel(t)}function M(t,...e){if(es.logLevel<=Ee.DEBUG){const n=e.map(z_);es.debug(`Firestore (${tl}): ${t}`,...n)}}function gt(t,...e){if(es.logLevel<=Ee.ERROR){const n=e.map(z_);es.error(`Firestore (${tl}): ${t}`,...n)}}function dr(t,...e){if(es.logLevel<=Ee.WARN){const n=e.map(z_);es.warn(`Firestore (${tl}): ${t}`,...n)}}function z_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t="Unexpected state"){const e=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: `+t;throw gt(e),new Error(e)}function Y(t,e){t||H()}function gj(t,e){t||H()}function U(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class vj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _j{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new wA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new bt(e)}}class wj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ej{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ij{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,M("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Y(typeof n.token=="string"),this.R=n.token,new Tj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Sj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function ba(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function TA(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.timestamp=e}static fromTimestamp(e){return new W(e)}static min(){return new W(new Xe(0,0))}static max(){return new W(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(),r===void 0?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Xu{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const Rj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Xu{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return Rj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new D(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new D(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new D(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.path=e}static fromPath(e){return new $(Re.fromString(e))}static fromName(e){return new $(Re.fromString(e).popFirst(5))}static empty(){return new $(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new Re(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Ry(t){return t.fields.find(e=>e.kind===2)}function bs(t){return t.fields.filter(e=>e.kind!==2)}Hd.UNKNOWN_ID=-1;class Wh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ju{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ju(0,Nn.min())}}function IA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=W.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Nn(i,$.empty(),e)}function SA(t){return new Nn(t.readTime,t.key,-1)}class Nn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nn(W.min(),$.empty(),-1)}static max(){return new Nn(W.max(),$.empty(),-1)}}function q_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==RA)throw t;M("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new A((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof A?n:A.resolve(n)}catch(n){return A.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):A.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):A.reject(n)}static resolve(e){return new A((n,r)=>{n(e)})}static reject(e){return new A((n,r)=>{r(e)})}static waitFor(e){return new A((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=A.resolve(!1);for(const r of e)n=n.next(i=>i?A.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new A((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new A((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.m=new kt,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new hu(e,n.error)):this.m.resolve()},this.transaction.onerror=r=>{const i=K_(r.target.error);this.m.reject(new hu(e,i))}}static open(e,n,r,i){try{return new np(n,e.transaction(i,r))}catch(s){throw new hu(n,s)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(M("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Cj(n)}}class ar{constructor(e,n,r){this.name=e,this.version=n,this.S=r,ar.D(ly())===12.2&&gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return M("SimpleDb","Removing database:",e),Ps(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!oC())return!1;if(ar.v())return!0;const e=ly(),n=ar.D(e),r=0<n&&n<10,i=ar.F(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static F(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async N(e){return this.db||(M("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new hu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new D(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new D(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new hu(e,o))},i.onupgradeneeded=s=>{M("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.B(o,i.transaction,s.oldVersion,this.version).next(()=>{M("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const a=np.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.p(),u)).catch(u=>(a.abort(u),A.reject(u))).toPromise();return l.catch(()=>{}),await a.g,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(M("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class xj{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return Ps(this.q.delete())}}class hu extends D{constructor(e,n){super(b.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ys(t){return t.name==="IndexedDbTransactionError"}class Cj{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(M("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(M("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ps(r)}add(e){return M("SimpleDb","ADD",this.store.name,e,e),Ps(this.store.add(e))}get(e){return Ps(this.store.get(e)).next(n=>(n===void 0&&(n=null),M("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return M("SimpleDb","DELETE",this.store.name,e),Ps(this.store.delete(e))}count(){return M("SimpleDb","COUNT",this.store.name),Ps(this.store.count())}G(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.j(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new A((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new A((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,n){M("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.j(i,(s,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.j(i,n)}X(e){const n=this.cursor({});return new A((r,i)=>{n.onerror=s=>{const o=K_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}j(e,n){const r=[];return new A((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new xj(a),u=n(a.primaryKey,a.value,l);if(u instanceof A){const c=u.catch(h=>(l.done(),A.reject(h)));r.push(c)}l.isDone?i():l.U===null?a.continue():a.continue(l.U)}}).next(()=>A.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ps(t){return new A((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=K_(r.target.error);n(i)}})}let BT=!1;function K_(t){const e=ar.D(ly());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BT||(BT=!0,setTimeout(()=>{throw r},0)),r}}return t}class Aj{constructor(e,n){this.asyncQueue=e,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){M("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{M("IndexBackiller",`Documents written: ${await this.ee.ne()}`)}catch(n){ys(n)?M("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await gs(n)}await this.te(6e4)})}}class bj{constructor(e,n){this.localStore=e,this.persistence=n}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,e))}re(e,n){const r=new Set;let i=n,s=!0;return A.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return M("IndexBackiller",`Processing collection: ${o}`),this.ie(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ie(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(i,s)).next(a=>(M("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}se(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=SA(s);q_(o,r)>0&&(r=o)}),new Nn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}_n.ae=-1;function Nc(t){return t==null}function Zu(t){return t===0&&1/t==-1/0}function CA(t){return typeof t=="number"&&Number.isInteger(t)&&!Zu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zT(e)),e=Pj(t.get(n),e);return zT(e)}function Pj(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function zT(t){return t+""}function Tr(t){const e=t.length;if(Y(e>=2),e===2)return Y(t.charAt(0)===""&&t.charAt(1)===""),Re.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&H(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:H()}s=o+2}return new Re(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t,e){return[t,cn(e)]}function AA(t,e,n){return[t,cn(e),n]}const kj={},Dj=["prefixPath","collectionGroup","readTime","documentId"],Nj=["prefixPath","collectionGroup","documentId"],Oj=["collectionGroup","readTime","prefixPath","documentId"],Vj=["canonicalId","targetId"],Mj=["targetId","path"],Fj=["path","targetId"],Lj=["collectionId","parent"],$j=["indexId","uid"],jj=["uid","sequenceNumber"],Uj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bj=["indexId","uid","orderedDocumentKey"],zj=["userId","collectionPath","documentId"],qj=["userId","collectionPath","largestBatchId"],Kj=["userId","collectionGroup","largestBatchId"],bA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hj=[...bA,"documentOverlays"],PA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kA=PA,Gj=[...kA,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy extends xA{constructor(e,n){super(),this.ue=e,this.currentSequenceNumber=n}}function Ot(t,e){const n=U(t);return ar.O(n.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Th(this.root,e,this.comparator,!1)}getReverseIterator(){return new Th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Th(this.root,e,this.comparator,!0)}}class Th{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$t.RED,this.left=i??$t.EMPTY,this.right=s??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,n,r,i,s){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new HT(this.data.getIterator())}getIteratorFrom(e){return new HT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ue)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ue(this.comparator);return n.data=e,n}}class HT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ko(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new Ue(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new NA("Invalid base64 string: "+s):s}}(e);return new St(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const Wj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(t){if(Y(!!t),typeof t=="string"){let e=0;const n=Wj.exec(t);if(Y(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ns(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function H_(t){const e=t.mapValue.fields.__previous_value__;return rp(e)?H_(e):e}function ec(t){const e=ts(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class rs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new rs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xh={nullValue:"NULL_VALUE"};function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rp(t)?4:OA(t)?9007199254740991:10:H()}function Dr(t,e){if(t===e)return!0;const n=so(t);if(n!==so(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ec(t).isEqual(ec(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ts(i.timestampValue),a=ts(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ns(i.bytesValue).isEqual(ns(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return at(i.geoPointValue.latitude)===at(s.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return at(i.integerValue)===at(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=at(i.doubleValue),a=at(s.doubleValue);return o===a?Zu(o)===Zu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ba(t.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(KT(o)!==KT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Dr(o[l],a[l])))return!1;return!0}(t,e);default:return H()}}function tc(t,e){return(t.values||[]).find(n=>Dr(n,e))!==void 0}function is(t,e){if(t===e)return 0;const n=so(t),r=so(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=at(s.integerValue||s.doubleValue),l=at(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return GT(t.timestampValue,e.timestampValue);case 4:return GT(ec(t),ec(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ns(s),l=ns(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=ue(a[u],l[u]);if(c!==0)return c}return ue(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ue(at(s.latitude),at(o.latitude));return a!==0?a:ue(at(s.longitude),at(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=is(a[u],l[u]);if(c)return c}return ue(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Fi.mapValue&&o===Fi.mapValue)return 0;if(s===Fi.mapValue)return 1;if(o===Fi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=ue(l[h],c[h]);if(d!==0)return d;const f=is(a[l[h]],u[c[h]]);if(f!==0)return f}return ue(l.length,c.length)}(t.mapValue,e.mapValue);default:throw H()}}function GT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=ts(t),r=ts(e),i=ue(n.seconds,r.seconds);return i!==0?i:ue(n.nanos,r.nanos)}function Pa(t){return Cy(t)}function Cy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ts(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ns(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Cy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Cy(n.fields[o])}`;return i+"}"}(t.mapValue):H()}function oo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ay(t){return!!t&&"integerValue"in t}function nc(t){return!!t&&"arrayValue"in t}function QT(t){return!!t&&"nullValue"in t}function WT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jh(t){return!!t&&"mapValue"in t}function du(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=du(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=du(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Xj(t){return"nullValue"in t?Xh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?oo(rs.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:H()}function Jj(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?oo(rs.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Fi:H()}function YT(t,e){const n=is(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function XT(t,e){const n=is(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=du(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Jh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Eo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ut(du(this.value))}}function VA(t){const e=[];return Eo(t.fields,(n,r)=>{const i=new lt([n]);if(Jh(r)){const s=VA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ke(e,0,W.min(),W.min(),W.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,i){return new Ke(e,1,n,W.min(),r,i,0)}static newNoDocument(e,n){return new Ke(e,2,n,W.min(),W.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new Ke(e,3,n,W.min(),W.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ke&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){this.position=e,this.inclusive=n}}function JT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=$.comparator($.fromName(o.referenceValue),n.key):r=is(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function Zj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class ge extends MA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new e4(e,n,r):n==="array-contains"?new r4(e,r):n==="in"?new BA(e,r):n==="not-in"?new i4(e,r):n==="array-contains-any"?new s4(e,r):new ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new t4(e,r):new n4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(is(n,this.value)):n!==null&&so(this.value)===so(n)&&this.matchesComparison(is(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class De extends MA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new De(e,n)}matches(e){return ka(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function ka(t){return t.op==="and"}function by(t){return t.op==="or"}function G_(t){return FA(t)&&ka(t)}function FA(t){for(const e of t.filters)if(e instanceof De)return!1;return!0}function Py(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+Pa(t.value);if(G_(t))return t.filters.map(e=>Py(e)).join(",");{const e=t.filters.map(n=>Py(n)).join(",");return`${t.op}(${e})`}}function LA(t,e){return t instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&Dr(r.value,i.value)}(t,e):t instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&LA(o,i.filters[a]),!0):!1}(t,e):void H()}function $A(t,e){const n=t.filters.concat(e);return De.create(n,t.op)}function jA(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Pa(n.value)}`}(t):t instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(jA).join(" ,")+"}"}(t):"Filter"}class e4 extends ge{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class t4 extends ge{constructor(e,n){super(e,"in",n),this.keys=UA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class n4 extends ge{constructor(e,n){super(e,"not-in",n),this.keys=UA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}class r4 extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nc(n)&&tc(n.arrayValue,this.value)}}class BA extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tc(this.value.arrayValue,n)}}class i4 extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!tc(this.value.arrayValue,n)}}class s4 extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function ky(t,e=null,n=[],r=[],i=null,s=null,o=null){return new o4(t,e,n,r,i,s,o)}function ao(t){const e=U(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Py(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pa(r)).join(",")),e.he=n}return e.he}function Oc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Zj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ZT(t.startAt,e.startAt)&&ZT(t.endAt,e.endAt)}function Gd(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qd(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function e1(t,e,n){let r=Xh,i=!0;for(const s of Qd(t,e)){let o=Xh,a=!0;switch(s.op){case"<":case"<=":o=Xj(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Xh}YT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];YT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function t1(t,e,n){let r=Fi,i=!0;for(const s of Qd(t,e)){let o=Fi,a=!0;switch(s.op){case">=":case">":o=Jj(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Fi}XT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];XT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function zA(t,e,n,r,i,s,o,a){return new fi(t,e,n,r,i,s,o,a)}function nl(t){return new fi(t)}function n1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Q_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ip(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function W_(t){return t.collectionGroup!==null}function ya(t){const e=U(t);if(e.Pe===null){e.Pe=[];const n=ip(e),r=Q_(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new ga(n)),e.Pe.push(new ga(lt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new ga(lt.keyField(),s))}}}return e.Pe}function hn(t){const e=U(t);return e.Ie||(e.Ie=a4(e,ya(t))),e.Ie}function a4(t,e){if(t.limitType==="F")return ky(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ga(i.field,s)});const n=t.endAt?new ss(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ss(t.startAt.position,t.startAt.inclusive):null;return ky(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dy(t,e){e.getFirstInequalityField(),ip(t);const n=t.filters.concat([e]);return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wd(t,e,n){return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vc(t,e){return Oc(hn(t),hn(e))&&t.limitType===e.limitType}function qA(t){return`${ao(hn(t))}|lt:${t.limitType}`}function Bo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jA(i)).join(", ")}]`),Nc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Pa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Pa(i)).join(",")),`Target(${r})`}(hn(t))}; limitType=${t.limitType})`}function Mc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ya(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=JT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ya(r),i)||r.endAt&&!function(o,a,l){const u=JT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ya(r),i))}(t,e)}function KA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HA(t){return(e,n)=>{let r=!1;for(const i of ya(t)){const s=l4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function l4(t,e,n){const r=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?is(l,u):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return DA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=new Be($.comparator);function En(){return u4}const GA=new Be($.comparator);function Ql(...t){let e=GA;for(const n of t)e=e.insert(n.key,n);return e}function QA(t){let e=GA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ir(){return fu()}function WA(){return fu()}function fu(){return new vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const c4=new Be($.comparator),h4=new Ue($.comparator);function he(...t){let e=h4;for(const n of t)e=e.add(n);return e}const d4=new Ue(ue);function Y_(){return d4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function XA(t){return{integerValue:""+t}}function JA(t,e){return CA(e)?XA(e):YA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this._=void 0}}function f4(t,e,n){return t instanceof Da?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&rp(s)&&(s=H_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof lo?eb(t,e):t instanceof uo?tb(t,e):function(i,s){const o=ZA(i,s),a=r1(o)+r1(i.Te);return Ay(o)&&Ay(i.Te)?XA(a):YA(i.serializer,a)}(t,e)}function p4(t,e,n){return t instanceof lo?eb(t,e):t instanceof uo?tb(t,e):n}function ZA(t,e){return t instanceof Na?function(r){return Ay(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Da extends sp{}class lo extends sp{constructor(e){super(),this.elements=e}}function eb(t,e){const n=nb(e);for(const r of t.elements)n.some(i=>Dr(i,r))||n.push(r);return{arrayValue:{values:n}}}class uo extends sp{constructor(e){super(),this.elements=e}}function tb(t,e){let n=nb(e);for(const r of t.elements)n=n.filter(i=>!Dr(i,r));return{arrayValue:{values:n}}}class Na extends sp{constructor(e,n){super(),this.serializer=e,this.Te=n}}function r1(t){return at(t.integerValue||t.doubleValue)}function nb(t){return nc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.field=e,this.transform=n}}function m4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof lo&&i instanceof lo||r instanceof uo&&i instanceof uo?ba(r.elements,i.elements,Dr):r instanceof Na&&i instanceof Na?Dr(r.Te,i.Te):r instanceof Da&&i instanceof Da}(t.transform,e.transform)}class g4{constructor(e,n){this.version=e,this.transformResults=n}}class Ye{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ye}static exists(e){return new Ye(void 0,e)}static updateTime(e){return new Ye(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class op{}function rb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new il(t.key,Ye.none()):new rl(t.key,t.data,Ye.none());{const n=t.data,r=Ut.empty();let i=new Ue(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new pi(t.key,r,new wn(i.toArray()),Ye.none())}}function y4(t,e,n){t instanceof rl?function(i,s,o){const a=i.value.clone(),l=s1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof pi?function(i,s,o){if(!Zh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=s1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ib(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pu(t,e,n,r){return t instanceof rl?function(s,o,a,l){if(!Zh(s.precondition,o))return a;const u=s.value.clone(),c=o1(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof pi?function(s,o,a,l){if(!Zh(s.precondition,o))return a;const u=o1(s.fieldTransforms,l,o),c=o.data;return c.setAll(ib(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Zh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function v4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ZA(r.transform,i||null);s!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,s))}return n||null}function i1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ba(r,i,(s,o)=>m4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rl extends op{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class pi extends op{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ib(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function s1(t,e,n){const r=new Map;Y(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,p4(o,a,n[i]))}return r}function o1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,f4(s,o,e))}return r}class il extends op{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X_ extends op{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&y4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=rb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(n,r)=>i1(n,r))&&ba(this.baseMutations,e.baseMutations,(n,r)=>i1(n,r))}}class Z_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Y(e.mutations.length===r.length);let i=function(){return c4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Z_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Ie;function sb(t){switch(t){default:return H();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function ob(t){if(t===void 0)return gt("GRPC error has no .code"),b.UNKNOWN;switch(t){case vt.OK:return b.OK;case vt.CANCELLED:return b.CANCELLED;case vt.UNKNOWN:return b.UNKNOWN;case vt.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case vt.INTERNAL:return b.INTERNAL;case vt.UNAVAILABLE:return b.UNAVAILABLE;case vt.UNAUTHENTICATED:return b.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case vt.NOT_FOUND:return b.NOT_FOUND;case vt.ALREADY_EXISTS:return b.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return b.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case vt.ABORTED:return b.ABORTED;case vt.OUT_OF_RANGE:return b.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return b.UNIMPLEMENTED;case vt.DATA_LOSS:return b.DATA_LOSS;default:return H()}}(Ie=vt||(vt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new ma([4294967295,4294967295],0);function a1(t){const e=ab().encode(t),n=new pj;return n.update(e),new Uint8Array(n.digest())}function l1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ma([n,r],0),new ma([i,s],0)]}class tw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wl(`Invalid padding: ${n}`);if(r<0)throw new Wl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ma.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(ma.fromNumber(r)));return i.compare(w4)===1&&(i=new ma([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=a1(e),[r,i]=l1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=a1(e),[r,i]=l1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lc(W.min(),i,new Be(ue),En(),he())}}class $c{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $c(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class lb{constructor(e,n){this.targetId=e,this.ye=n}}class ub{constructor(e,n,r=St.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class u1{constructor(){this.we=0,this.Se=h1(),this.be=St.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return this.we!==0}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=he(),n=he(),r=he();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new $c(this.be,this.De,e,n,r)}Oe(){this.Ce=!1,this.Se=h1()}Ne(e,n){this.Ce=!0,this.Se=this.Se.insert(e,n)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class E4{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=En(),this.Ue=c1(),this.We=new Be(ue)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(Gd(s))if(r===0){const o=new $(s.path);this.je(n,o,Ke.newNoDocument(o,W.min()))}else Y(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,u)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ns(r).toUint8Array()}catch(l){if(l instanceof NA)return dr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new tw(o,i,s)}catch(l){return dr(l instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&Gd(a.target)){const l=new $(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,Ke.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=he();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.et(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new Lc(e,n,this.We,this.$e,r);return this.$e=En(),this.Ue=c1(),this.We=new Be(ue),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new u1,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ue(ue),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||M("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new u1),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function c1(){return new Be($.comparator)}function h1(){return new Be($.comparator)}const T4=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),I4=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),S4=(()=>({and:"AND",or:"OR"}))();class R4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ny(t,e){return t.useProto3Json||Nc(e)?e:{value:e}}function Oa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function x4(t,e){return Oa(t,e.toTimestamp())}function yt(t){return Y(!!t),W.fromTimestamp(function(n){const r=ts(n);return new Xe(r.seconds,r.nanos)}(t))}function nw(t,e){return function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function hb(t){const e=Re.fromString(t);return Y(wb(e)),e}function rc(t,e){return nw(t.databaseId,e.path)}function Ar(t,e){const n=hb(e);if(n.get(1)!==t.databaseId.projectId)throw new D(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new D(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(fb(n))}function Oy(t,e){return nw(t.databaseId,e)}function db(t){const e=hb(t);return e.length===4?Re.emptyPath():fb(e)}function ic(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fb(t){return Y(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function d1(t,e,n){return{name:rc(t,e),fields:n.value.mapValue.fields}}function pb(t,e,n){const r=Ar(t,e.name),i=yt(e.updateTime),s=e.createTime?yt(e.createTime):W.min(),o=new Ut({mapValue:{fields:e.fields}}),a=Ke.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function C4(t,e){return"found"in e?function(r,i){Y(!!i.found),i.found.name,i.found.updateTime;const s=Ar(r,i.found.name),o=yt(i.found.updateTime),a=i.found.createTime?yt(i.found.createTime):W.min(),l=new Ut({mapValue:{fields:i.found.fields}});return Ke.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){Y(!!i.missing),Y(!!i.readTime);const s=Ar(r,i.missing),o=yt(i.readTime);return Ke.newNoDocument(s,o)}(t,e):H()}function A4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Y(c===void 0||typeof c=="string"),St.fromBase64String(c||"")):(Y(c===void 0||c instanceof Uint8Array),St.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?b.UNKNOWN:ob(u.code);return new D(c,u.message||"")}(o);n=new ub(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ar(t,r.document.name),s=yt(r.document.updateTime),o=r.document.createTime?yt(r.document.createTime):W.min(),a=new Ut({mapValue:{fields:r.document.fields}}),l=Ke.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new ed(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ar(t,r.document),s=r.readTime?yt(r.readTime):W.min(),o=Ke.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ed([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ar(t,r.document),s=r.removedTargetIds||[];n=new ed([],s,i,null)}else{if(!("filter"in e))return H();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new _4(i,s),a=r.targetId;n=new lb(a,o)}}return n}function sc(t,e){let n;if(e instanceof rl)n={update:d1(t,e.key,e.value)};else if(e instanceof il)n={delete:rc(t,e.key)};else if(e instanceof pi)n={update:d1(t,e.key,e.data),updateMask:O4(e.fieldMask)};else{if(!(e instanceof X_))return H();n={verify:rc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Da)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof uo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Na)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:x4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(t,e.precondition)),n}function Vy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ye.updateTime(yt(s.updateTime)):s.exists!==void 0?Ye.exists(s.exists):Ye.none()}(e.currentDocument):Ye.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),l=new Da;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new lo(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new uo(c)}else"increment"in a?l=new Na(o,a.increment):H();const u=lt.fromServerFormat(a.fieldPath);return new Fc(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Ar(t,e.update.name),s=new Ut({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new wn(u.map(c=>lt.fromServerFormat(c)))}(e.updateMask);return new pi(i,s,o,n,r)}return new rl(i,s,n,r)}if(e.delete){const i=Ar(t,e.delete);return new il(i,n)}if(e.verify){const i=Ar(t,e.verify);return new X_(i,n)}return H()}function b4(t,e){return t&&t.length>0?(Y(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?yt(i.updateTime):yt(s);return o.isEqual(W.min())&&(o=yt(s)),new g4(o,i.transformResults||[])}(n,e))):[]}function mb(t,e){return{documents:[Oy(t,e.path)]}}function gb(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Oy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Oy(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return _b(De.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:zo(h.field),direction:k4(h.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Ny(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function yb(t){let e=db(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Y(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const d=vb(h);return d instanceof De&&G_(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new ga(qo(p.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Nc(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new ss(f,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new ss(f,d)}(n.endAt)),zA(e,i,o,s,a,"F",l,u)}function P4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qo(n.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qo(n.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qo(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qo(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(qo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(r=>vb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(n.compositeFilter.op))}(t):H()}function k4(t){return T4[t]}function D4(t){return I4[t]}function N4(t){return S4[t]}function zo(t){return{fieldPath:t.canonicalString()}}function qo(t){return lt.fromServerFormat(t.fieldPath)}function _b(t){return t instanceof ge?function(n){if(n.op==="=="){if(WT(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(QT(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WT(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(QT(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:D4(n.op),value:n.value}}}(t):t instanceof De?function(n){const r=n.getFilters().map(i=>_b(i));return r.length===1?r[0]:{compositeFilter:{op:N4(n.op),filters:r}}}(t):H()}function O4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r,i,s=W.min(),o=W.min(),a=St.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.ht=e}}function V4(t,e){let n;if(e.document)n=pb(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$.fromSegments(e.noDocument.path),i=ho(e.noDocument.readTime);n=Ke.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{const r=$.fromSegments(e.unknownDocument.path),i=ho(e.unknownDocument.version);n=Ke.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Xe(i[0],i[1]);return W.fromTimestamp(s)}(e.readTime)),n}function f1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Yd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:rc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Oa(s,o.version.toTimestamp()),createTime:Oa(s,o.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:co(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:n.path.toArray(),version:co(e.version)}}return r}function Yd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function co(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(t){const e=new Xe(t.seconds,t.nanoseconds);return W.fromTimestamp(e)}function ks(t,e){const n=(e.baseMutations||[]).map(s=>Vy(t.ht,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Vy(t.ht,s)),i=Xe.fromMillis(e.localWriteTimeMs);return new J_(e.batchId,i,n,r)}function Yl(t){const e=ho(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ho(t.lastLimboFreeSnapshotVersion):W.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Y(s.documents.length===1),hn(nl(db(s.documents[0])))}(t.query):function(s){return hn(yb(s))}(t.query),new Hr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,St.fromBase64String(t.resumeToken))}function Tb(t,e){const n=co(e.snapshotVersion),r=co(e.lastLimboFreeSnapshotVersion);let i;i=Gd(e.target)?mb(t.ht,e.target):gb(t.ht,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ao(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rw(t){const e=yb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wd(e,e.limit,"L"):e}function Om(t,e){return new ew(e.largestBatchId,Vy(t.ht,e.overlayMutation))}function p1(t,e){const n=e.path.lastSegment();return[t,cn(e.path.popLast()),n]}function m1(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:co(r.readTime),documentKey:cn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{getBundleMetadata(e,n){return g1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ho(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return g1(e).put(function(i){return{bundleId:i.id,createTime:co(yt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return y1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:rw(s.bundledQuery),readTime:ho(s.readTime)}}(r)})}saveNamedQuery(e,n){return y1(e).put(function(i){return{name:i.name,readTime:co(yt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function g1(t){return Ot(t,"bundles")}function y1(t){return Ot(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.serializer=e,this.userId=n}static Pt(e,n){const r=n.uid||"";return new ap(e,r)}getOverlay(e,n){return Pl(e).get(p1(this.userId,n)).next(r=>r?Om(this.serializer,r):null)}getOverlays(e,n){const r=Ir();return A.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new ew(n,o);i.push(this.It(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(cn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Pl(e).J("collectionPathOverlayIndex",a))}),A.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Ir(),s=cn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Pl(e).G("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Om(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Ir();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Pl(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=Om(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}It(e,n){return Pl(e).put(function(i,s,o){const[a,l,u]=p1(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:sc(i.ht,o.mutation)}}(this.serializer,this.userId,n))}}function Pl(t){return Ot(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(){}dt(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.At(n,5);else if("booleanValue"in e)this.At(n,10),n.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(n,15),n.Rt(at(e.integerValue));else if("doubleValue"in e){const r=at(e.doubleValue);isNaN(r)?this.At(n,13):(this.At(n,15),Zu(r)?n.Rt(0):n.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(n,20),typeof r=="string"?n.Vt(r):(n.Vt(`${r.seconds||""}`),n.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,n),this.gt(n);else if("bytesValue"in e)this.At(n,30),n.yt(ns(e.bytesValue)),this.gt(n);else if("referenceValue"in e)this.wt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(n,45),n.Rt(r.latitude||0),n.Rt(r.longitude||0)}else"mapValue"in e?OA(e)?this.At(n,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,n),this.gt(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.gt(n)):H()}ft(e,n){this.At(n,25),this.Dt(e,n)}Dt(e,n){n.Vt(e)}St(e,n){const r=e.fields||{};this.At(n,55);for(const i of Object.keys(r))this.ft(i,n),this.Tt(r[i],n)}bt(e,n){const r=e.values||[];this.At(n,50);for(const i of r)this.Tt(i,n)}wt(e,n){this.At(n,37),$.fromName(e).path.forEach(r=>{this.At(n,60),this.Dt(r,n)})}At(e,n){e.Rt(n)}gt(e){e.Rt(2)}}Ds.Ct=new Ds;function F4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function v1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=F4(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class L4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=v1(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=v1(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $4{constructor(e){this.jt=e}yt(e){this.jt.vt(e)}Vt(e){this.jt.Bt(e)}Rt(e){this.jt.kt(e)}Et(){this.jt.$t()}}class j4{constructor(e){this.jt=e}yt(e){this.jt.xt(e)}Vt(e){this.jt.Lt(e)}Rt(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class kl{constructor(){this.jt=new L4,this.Ht=new $4(this.jt),this.Jt=new j4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ns(this.indexId,this.documentKey,this.arrayValue,r)}}function Ti(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=_1(t.arrayValue,e.arrayValue),n!==0?n:(n=_1(t.directionalValue,e.directionalValue),n!==0?n:$.comparator(t.documentKey,e.documentKey)))}function _1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const n of e.filters){const r=n;r.isInequality()?this.tn=r:this.en.push(r)}}nn(e){Y(e.collectionGroup===this.collectionId);const n=Ry(e);if(n!==void 0&&!this.rn(n))return!1;const r=bs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.rn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.tn!==void 0){if(!i.has(this.tn.field.canonicalString())){const a=r[s];if(!this.sn(this.tn,a)||!this.on(this.Xt[o++],a))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Xt.length||!this.on(this.Xt[o++],a))return!1}return!0}_n(){let e=new Ue(lt.comparator);const n=[];for(const r of this.en)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Wh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Wh(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Wh(r.field,r.dir==="asc"?0:1)));return new Hd(Hd.UNKNOWN_ID,this.collectionId,n,Ju.empty())}rn(e){for(const n of this.en)if(this.sn(n,e))return!0;return!1}sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}on(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){var e,n;if(Y(t instanceof ge||t instanceof De),t instanceof ge){if(t instanceof BA){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ge.create(t.field,"==",s)))||[];return De.create(i,"or")}return t}const r=t.filters.map(i=>Ib(i));return De.create(r,t.op)}function U4(t){if(t.getFilters().length===0)return[];const e=Ly(Ib(t));return Y(Sb(e)),My(e)||Fy(e)?[e]:e.getFilters()}function My(t){return t instanceof ge}function Fy(t){return t instanceof De&&G_(t)}function Sb(t){return My(t)||Fy(t)||function(n){if(n instanceof De&&by(n)){for(const r of n.getFilters())if(!My(r)&&!Fy(r))return!1;return!0}return!1}(t)}function Ly(t){if(Y(t instanceof ge||t instanceof De),t instanceof ge)return t;if(t.filters.length===1)return Ly(t.filters[0]);const e=t.filters.map(r=>Ly(r));let n=De.create(e,t.op);return n=Xd(n),Sb(n)?n:(Y(n instanceof De),Y(ka(n)),Y(n.filters.length>1),n.filters.reduce((r,i)=>iw(r,i)))}function iw(t,e){let n;return Y(t instanceof ge||t instanceof De),Y(e instanceof ge||e instanceof De),n=t instanceof ge?e instanceof ge?function(i,s){return De.create([i,s],"and")}(t,e):E1(t,e):e instanceof ge?E1(e,t):function(i,s){if(Y(i.filters.length>0&&s.filters.length>0),ka(i)&&ka(s))return $A(i,s.getFilters());const o=by(i)?i:s,a=by(i)?s:i,l=o.filters.map(u=>iw(u,a));return De.create(l,"or")}(t,e),Xd(n)}function E1(t,e){if(ka(e))return $A(e,t.getFilters());{const n=e.filters.map(r=>iw(t,r));return De.create(n,"or")}}function Xd(t){if(Y(t instanceof ge||t instanceof De),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return Xd(e[0]);if(FA(t))return t;const n=e.map(i=>Xd(i)),r=[];return n.forEach(i=>{i instanceof ge?r.push(i):i instanceof De&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.an=new sw}addToCollectionParentIndex(e,n){return this.an.add(n),A.resolve()}getCollectionParents(e,n){return A.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return A.resolve()}deleteFieldIndex(e,n){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,n){return A.resolve()}getDocumentsMatchingTarget(e,n){return A.resolve(null)}getIndexType(e,n){return A.resolve(0)}getFieldIndexes(e,n){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,n){return A.resolve(Nn.min())}getMinOffsetFromCollectionGroup(e,n){return A.resolve(Nn.min())}updateCollectionGroup(e,n,r){return A.resolve()}updateIndexEntries(e,n){return A.resolve()}}class sw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ue(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ue(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Uint8Array(0);class z4{constructor(e,n){this.user=e,this.databaseId=n,this.un=new sw,this.cn=new vs(r=>ao(r),(r,i)=>Oc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.un.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.un.add(n)});const s={collectionId:r,parent:cn(i)};return T1(e).put(s)}return A.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[TA(n),""],!1,!0);return T1(e).G(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Tr(o.parent))}return r})}addFieldIndex(e,n){const r=Dl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=No(e);return s.next(a=>{o.put(m1(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Dl(e),i=No(e),s=Do(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Dl(e),r=Do(e),i=No(e);return n.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,n){return A.forEach(this.ln(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new w1(r);return this.addFieldIndex(e,s._n())}}))}getDocumentsMatchingTarget(e,n){const r=Do(e);let i=!0;const s=new Map;return A.forEach(this.ln(n),o=>this.hn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=he();const a=[];return A.forEach(s,(l,u)=>{M("IndexedDbIndexManager",`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(m=>`${m.fieldPath}:${m.kind}`).join(",")}`}(l)} to execute ${ao(n)}`);const c=function(_,m){const I=Ry(m);if(I===void 0)return null;for(const S of Qd(_,I.fieldPath))switch(S.op){case"array-contains-any":return S.value.arrayValue.values||[];case"array-contains":return[S.value]}return null}(u,l),h=function(_,m){const I=new Map;for(const S of bs(m))for(const R of Qd(_,S.fieldPath))switch(R.op){case"==":case"in":I.set(S.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return I.set(S.fieldPath.canonicalString(),R.value),Array.from(I.values())}return null}(u,l),d=function(_,m){const I=[];let S=!0;for(const R of bs(m)){const x=R.kind===0?e1(_,R.fieldPath,_.startAt):t1(_,R.fieldPath,_.startAt);I.push(x.value),S&&(S=x.inclusive)}return new ss(I,S)}(u,l),f=function(_,m){const I=[];let S=!0;for(const R of bs(m)){const x=R.kind===0?t1(_,R.fieldPath,_.endAt):e1(_,R.fieldPath,_.endAt);I.push(x.value),S&&(S=x.inclusive)}return new ss(I,S)}(u,l),p=this.Pn(l,u,d),g=this.Pn(l,u,f),E=this.In(l,u,h),y=this.dn(l.indexId,c,p,d.inclusive,g,f.inclusive,E);return A.forEach(y,v=>r.H(v,n.limit).next(_=>{_.forEach(m=>{const I=$.fromSegments(m.documentKey);o.has(I)||(o=o.add(I),a.push(I))})}))}).next(()=>a)}return A.resolve(null)})}ln(e){let n=this.cn.get(e);return n||(e.filters.length===0?n=[e]:n=U4(De.create(e.filters,"and")).map(r=>ky(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,n),n)}dn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const d=n?this.Tn(n[h/u]):Ih,f=this.En(e,d,r[h%u],i),p=this.An(e,d,s[h%u],o),g=a.map(E=>this.En(e,d,E,!0));c.push(...this.createRange(f,p,g))}return c}En(e,n,r,i){const s=new Ns(e,$.empty(),n,r);return i?s:s.Zt()}An(e,n,r,i){const s=new Ns(e,$.empty(),n,r);return i?s.Zt():s}hn(e,n){const r=new w1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.nn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.ln(n);return A.forEach(i,s=>this.hn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ue(lt.comparator),c=!1;for(const h of l.filters)for(const d of h.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?c=!0:u=u.add(d.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Rn(e,n){const r=new kl;for(const i of bs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Ds.Ct.dt(s,o)}return r.zt()}Tn(e){const n=new kl;return Ds.Ct.dt(e,n.Yt(0)),n.zt()}Vn(e,n){const r=new kl;return Ds.Ct.dt(oo(this.databaseId,n),r.Yt(function(s){const o=bs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}In(e,n,r){if(r===null)return[];let i=[];i.push(new kl);let s=0;for(const o of bs(e)){const a=r[s++];for(const l of i)if(this.mn(n,o.fieldPath)&&nc(a))i=this.fn(i,o,a);else{const u=l.Yt(o.kind);Ds.Ct.dt(a,u)}}return this.gn(i)}Pn(e,n,r){return this.In(e,n,r.position)}gn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}fn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new kl;l.seed(a.zt()),Ds.Ct.dt(o,l.Yt(n.kind)),s.push(l)}return s}mn(e,n){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Dl(e),i=No(e);return(n?r.G("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.G()).next(s=>{const o=[];return A.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,h){const d=h?new Ju(h.sequenceNumber,new Nn(ho(h.readTime),new $(Tr(h.documentKey)),h.largestBatchId)):Ju.empty(),f=c.fields.map(([p,g])=>new Wh(lt.fromServerFormat(p),g));return new Hd(c.indexId,c.collectionGroup,f,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ue(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Dl(e),s=No(e);return this.pn(e).next(o=>i.G("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>A.forEach(a,l=>s.put(m1(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return A.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?A.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,l=>this.yn(e,i,l).next(u=>{const c=this.wn(s,l);return u.isEqual(c)?A.resolve():this.Sn(e,s,l,u,c)}))))})}bn(e,n,r,i){return Do(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,n.key),documentKey:n.key.path.toArray()})}Dn(e,n,r,i){return Do(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,n.key),n.key.path.toArray()])}yn(e,n,r){const i=Do(e);let s=new Ue(Ti);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,n)])},(o,a)=>{s=s.add(new Ns(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(e,n){let r=new Ue(Ti);const i=this.Rn(n,e);if(i==null)return r;const s=Ry(n);if(s!=null){const o=e.data.field(s.fieldPath);if(nc(o))for(const a of o.arrayValue.values||[])r=r.add(new Ns(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Ns(n.indexId,e.key,Ih,i));return r}Sn(e,n,r,i,s){M("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,h,d){const f=l.getIterator(),p=u.getIterator();let g=ko(f),E=ko(p);for(;g||E;){let y=!1,v=!1;if(g&&E){const _=c(g,E);_<0?v=!0:_>0&&(y=!0)}else g!=null?v=!0:y=!0;y?(h(E),E=ko(p)):v?(d(g),g=ko(f)):(g=ko(f),E=ko(p))}}(i,s,Ti,a=>{o.push(this.bn(e,n,r,a))},a=>{o.push(this.Dn(e,n,r,a))}),A.waitFor(o)}pn(e){let n=1;return No(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ti(o,a)).filter((o,a,l)=>!a||Ti(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ti(o,e),l=Ti(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Ih,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Ih,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return Ti(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(I1)}getMinOffset(e,n){return A.mapArray(this.ln(n),r=>this.hn(e,r).next(i=>i||H())).next(I1)}}function T1(t){return Ot(t,"collectionParents")}function Do(t){return Ot(t,"indexEntries")}function Dl(t){return Ot(t,"indexConfiguration")}function No(t){return Ot(t,"indexState")}function I1(t){Y(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;q_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Nn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},(c,h,d)=>(a++,d.delete()));s.push(l.next(()=>{Y(a===1)}));const u=[];for(const c of n.mutations){const h=AA(e,c.key.path,n.batchId);s.push(i.delete(h)),u.push(c.key)}return A.waitFor(s).next(()=>u)}function Jd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw H();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(41943040,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);class lp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static Pt(e,n,r,i){Y(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new lp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ko(e),o=Ii(e);return o.add({}).next(a=>{Y(typeof a=="number");const l=new J_(a,n,r,i),u=function(f,p,g){const E=g.baseMutations.map(v=>sc(f.ht,v)),y=g.mutations.map(v=>sc(f.ht,v));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:E,mutations:y}}(this.serializer,this.userId,l),c=[];let h=new Ue((d,f)=>ue(d.canonicalString(),f.canonicalString()));for(const d of i){const f=AA(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,kj))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.vn[a]=l.keys()}),A.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Ii(e).get(n).next(r=>r?(Y(r.userId===this.userId),ks(this.serializer,r)):null)}Fn(e,n){return this.vn[n]?A.resolve(this.vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ii(e).Z({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Y(a.batchId>=r),s=ks(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ii(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).G("userMutationsIndex",n).next(r=>r.map(i=>ks(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Yh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ko(e).Z({range:i},(o,a,l)=>{const[u,c,h]=o,d=Tr(c);if(u===this.userId&&n.path.isEqual(d))return Ii(e).get(h).next(f=>{if(!f)throw H();Y(f.userId===this.userId),s.push(ks(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(ue);const i=[];return n.forEach(s=>{const o=Yh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ko(e).Z({range:a},(u,c,h)=>{const[d,f,p]=u,g=Tr(f);d===this.userId&&s.path.isEqual(g)?r=r.add(p):h.done()});i.push(l)}),A.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Yh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ue(ue);return Ko(e).Z({range:o},(l,u,c)=>{const[h,d,f]=l,p=Tr(d);h===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):c.done()}).next(()=>this.Mn(e,a))}Mn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ii(e).get(s).next(o=>{if(o===null)throw H();Y(o.userId===this.userId),r.push(ks(this.serializer,o))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Rb(e.ue,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.xn(n.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return A.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ko(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Tr(s[1]);i.push(l)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,n){return xb(e,this.userId,n)}On(e){return Cb(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xb(t,e,n){const r=Yh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ko(t).Z({range:s,Y:!0},(a,l,u)=>{const[c,h,d]=a;c===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function Ii(t){return Ot(t,"mutations")}function Ko(t){return Ot(t,"documentMutations")}function Cb(t){return Ot(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new fo(0)}static Ln(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.kn(e).next(n=>{const r=new fo(n.highestTargetId);return n.highestTargetId=r.next(),this.qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(n=>W.fromTimestamp(new Xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.qn(e,i)))}addTargetData(e,n){return this.Qn(e,n).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(n,r),this.qn(e,r))))}updateTargetData(e,n){return this.Qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Oo(e).delete(n.targetId)).next(()=>this.kn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Oo(e).Z((o,a)=>{const l=Yl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>A.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Oo(e).Z((r,i)=>{const s=Yl(i);n(s)})}kn(e){return R1(e).get("targetGlobalKey").next(n=>(Y(n!==null),n))}qn(e,n){return R1(e).put("targetGlobalKey",n)}Qn(e,n){return Oo(e).put(Tb(this.serializer,n))}Kn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ao(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Oo(e).Z({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=Yl(a);Oc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ni(e);return n.forEach(o=>{const a=cn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),A.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ni(e);return A.forEach(n,s=>{const o=cn(s.path);return A.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ni(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ni(e);let s=he();return i.Z({range:r,Y:!0},(o,a,l)=>{const u=Tr(o[1]),c=new $(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=cn(n.path),i=IDBKeyRange.bound([r],[TA(r)],!1,!0);let s=0;return Ni(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}lt(e,n){return Oo(e).get(n).next(r=>r?Yl(r):null)}}function Oo(t){return Ot(t,"targets")}function R1(t){return Ot(t,"targetGlobal")}function Ni(t){return Ot(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1([t,e],[n,r]){const i=ue(t,n);return i===0?ue(e,r):i}class K4{constructor(e){this.$n=e,this.buffer=new Ue(x1),this.Un=0}Wn(){return++this.Un}Gn(e){const n=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();x1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.zn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return this.zn!==null}jn(e){M("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.zn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ys(n)?M("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await gs(n)}await this.jn(3e5)})}}class G4{constructor(e,n){this.Hn=e,this.params=n}calculateTargetCount(e,n){return this.Hn.Jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return A.resolve(_n.ae);const r=new K4(n);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Hn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Hn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(M("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(S1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(M("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S1):this.Zn(e,n))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(M("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Uo()<=Ee.DEBUG&&M("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function Q4(t,e){return new G4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n){this.db=e,this.garbageCollector=Q4(this,n)}Jn(e){const n=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Xn(e){let n=0;return this.Yn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Yn(e,n){return this.er(e,(r,i)=>n(i))}addReference(e,n,r){return Sh(e,r)}removeReference(e,n,r){return Sh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Sh(e,n)}tr(e,n){return function(i,s){let o=!1;return Cb(i).X(a=>xb(i,a,s).next(l=>(l&&(o=!0),A.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.er(e,(o,a)=>{if(a<=n){const l=this.tr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,W.min()),Ni(e).delete(function(h){return[0,cn(h.path)]}(o))))});i.push(l)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Sh(e,n)}er(e,n){const r=Ni(e);let i,s=_n.ae;return r.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==_n.ae&&n(new $(Tr(i)),s),s=u,i=l):s=_n.ae}).next(()=>{s!==_n.ae&&n(new $(Tr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sh(t,e){return Ni(t).put(function(r,i){return{targetId:0,path:cn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(){this.changes=new vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ke.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?A.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Rs(e).put(r)}removeEntry(e,n,r){return Rs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Yd(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.nr(e,r)))}getEntry(e,n){let r=Ke.newInvalidDocument(n);return Rs(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nl(n))},(i,s)=>{r=this.rr(n,s)}).next(()=>r)}ir(e,n){let r={size:0,document:Ke.newInvalidDocument(n)};return Rs(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nl(n))},(i,s)=>{r={document:this.rr(n,s),size:Jd(s)}}).next(()=>r)}getEntries(e,n){let r=En();return this.sr(e,n,(i,s)=>{const o=this.rr(i,s);r=r.insert(i,o)}).next(()=>r)}_r(e,n){let r=En(),i=new Be($.comparator);return this.sr(e,n,(s,o)=>{const a=this.rr(s,o);r=r.insert(s,a),i=i.insert(s,Jd(o))}).next(()=>({documents:r,ar:i}))}sr(e,n,r){if(n.isEmpty())return A.resolve();let i=new Ue(b1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Nl(i.first()),Nl(i.last())),o=i.getIterator();let a=o.getNext();return Rs(e).Z({index:"documentKeyIndex",range:s},(l,u,c)=>{const h=$.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&b1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.W(Nl(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Yd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rs(e).G(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=En();for(const h of u){const d=this.rr($.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d.isFoundDocument()&&(Mc(n,d)||i.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=En();const o=A1(n,r),a=A1(n,Nn.max());return Rs(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.rr($.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new X4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return C1(e).get("remoteDocumentGlobalKey").next(n=>(Y(!!n),n))}nr(e,n){return C1(e).put("remoteDocumentGlobalKey",n)}rr(e,n){if(n){const r=V4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(W.min())))return r}return Ke.newInvalidDocument(e)}}function bb(t){return new Y4(t)}class X4 extends Ab{constructor(e,n){super(),this.ur=e,this.trackRemovals=n,this.cr=new vs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ue((s,o)=>ue(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.cr.get(s);if(n.push(this.ur.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=f1(this.ur.serializer,o);i=i.add(s.path.popLast());const u=Jd(l);r+=u-a.size,n.push(this.ur.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=f1(this.ur.serializer,o.convertToNoDocument(W.min()));n.push(this.ur.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.ur.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ur.updateMetadata(e,r)),A.waitFor(n)}getFromCache(e,n){return this.ur.ir(e,n).next(r=>(this.cr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ur._r(e,n).next(({documents:r,ar:i})=>(i.forEach((s,o)=>{this.cr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function C1(t){return Ot(t,"remoteDocumentGlobal")}function Rs(t){return Ot(t,"remoteDocumentsV14")}function Nl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function A1(t,e){const n=e.documentKey.path.toArray();return[t,Yd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function b1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ue(n[s],r[s]),i)return i;return i=ue(n.length,r.length),i||(i=ue(n[n.length-2],r[r.length-2]),i||ue(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&pu(r.mutation,i,wn.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=Ir();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ql();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=En();const o=fu(),a=function(){return fu()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof pi)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),pu(c.mutation,u,c.mutation.getFieldMask(),Xe.now())):o.set(u.key,wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new J4(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=fu();let i=new Be((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||wn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||he()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=WA();c.forEach(d=>{if(!s.has(d)){const f=rb(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return A.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):W_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):A.resolve(Ir());let a=-1,l=s;return o.next(u=>A.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?A.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,he())).next(c=>({batchId:a,changes:QA(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=Ql();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ql();return this.indexManager.getCollectionParents(e,s).next(a=>A.forEach(a,l=>{const u=function(h,d){return new fi(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Ke.newInvalidDocument(c)))});let a=Ql();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&pu(c.mutation,u,wn.empty(),Xe.now()),Mc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return A.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yt(i.createTime)}}(n)),A.resolve()}getNamedQuery(e,n){return A.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(i){return{name:i.name,query:rw(i.bundledQuery),readTime:yt(i.readTime)}}(n)),A.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.overlays=new Be($.comparator),this.Pr=new Map}getOverlay(e,n){return A.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ir();return A.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),A.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Pr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),A.resolve()}getOverlaysForCollection(e,n,r){const i=Ir(),s=n.length+1,o=new $(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return A.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Be((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Ir(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Ir(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return A.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ew(n,r));let s=this.Pr.get(n);s===void 0&&(s=he(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Ir=new Ue(Ct.dr),this.Tr=new Ue(Ct.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new Ct(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new Ct(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new $(new Re([])),r=new Ct(n,e),i=new Ct(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new $(new Re([])),r=new Ct(n,e),i=new Ct(n,e+1);let s=he();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ct(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ct{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return $.comparator(e.key,n.key)||ue(e.yr,n.yr)}static Er(e,n){return ue(e.yr,n.yr)||$.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Ue(Ct.dr)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new J_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new Ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(o)}lookupMutationBatch(e,n){return A.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Dr(r),s=i<0?0:i;return A.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ct(n,0),i=new Ct(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const a=this.br(o.yr);s.push(a)}),A.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ue(ue);return n.forEach(i=>{const s=new Ct(i,0),o=new Ct(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;$.isDocumentKey(s)||(s=s.child(""));const o=new Ct(new $(s),0);let a=new Ue(ue);return this.Sr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.yr)),!0)},o),A.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Y(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return A.forEach(n.mutations,i=>{const s=new Ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new Ct(n,0),i=this.Sr.firstAfterOrEqual(r);return A.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.Fr=e,this.docs=function(){return new Be($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return A.resolve(r?r.document.mutableCopy():Ke.newInvalidDocument(n))}getEntries(e,n){let r=En();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ke.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=En();const o=n.path,a=new $(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||q_(SA(c),r)<=0||(i.has(c.key)||Mc(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return A.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}Mr(e,n){return A.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rU(this)}getSize(e){return A.resolve(this.size)}}class rU extends Ab{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),A.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.persistence=e,this.Or=new vs(n=>ao(n),Oc),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Nr=0,this.Br=new ow,this.targetCount=0,this.Lr=fo.Bn()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),A.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,A.resolve()}updateTargetData(e,n){return this.Qn(n),A.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(s).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return A.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),A.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),A.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),A.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return A.resolve(r)}containsKey(e,n){return A.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n){this.kr={},this.overlays={},this.qr=new _n(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new iU(this),this.indexManager=new B4,this.remoteDocumentCache=function(i){return new nU(i)}(r=>this.referenceDelegate.$r(r)),this.serializer=new Eb(n),this.Ur=new Z4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new tU(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){M("MemoryPersistence","Starting transaction:",e);const i=new sU(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,n){return A.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class sU extends xA{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.jr=new ow,this.Hr=null}static Jr(e){return new up(e)}get Yr(){if(this.Hr)return this.Hr;throw H()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),A.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),A.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Yr,r=>{const i=$.fromPath(r);return this.Zr(e,i).next(s=>{s||n.removeEntry(i,W.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return A.or([()=>A.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.serializer=e}B(e,n,r,i){const s=new np("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qT,{unique:!0}),l.createObjectStore("documentMutations")}(e),P1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=A.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),P1(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:W.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").G().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qT,{unique:!0});const h=u.store("mutations"),d=c.map(f=>h.put(f));return A.waitFor(d)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ei(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ti(s)))),r<7&&i>=7&&(o=o.next(()=>this.ni(s))),r<8&&i>=8&&(o=o.next(()=>this.ri(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ii(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:zj});u.createIndex("collectionPathOverlayIndex",qj,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Kj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:Dj});u.createIndex("documentKeyIndex",Nj),u.createIndex("collectionGroupIndex",Oj)}(e)).next(()=>this.si(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.oi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:$j}).createIndex("sequenceNumberIndex",jj,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Uj}).createIndex("documentKeyIndex",Bj,{unique:!1})}(e))),o}ti(e){let n=0;return e.store("remoteDocuments").Z((r,i)=>{n+=Jd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ei(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next(i=>A.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",o).next(a=>A.forEach(a,l=>{Y(l.userId===s.userId);const u=ks(this.serializer,l);return Rb(e,s.userId,u).next(()=>{})}))}))}ni(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,a)=>{const l=new Re(o),u=function(h){return[0,cn(h)]}(l);s.push(n.get(u).next(c=>c?A.resolve():(h=>n.put({targetId:0,path:cn(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>A.waitFor(s))})}ri(e,n){e.createObjectStore("collectionParents",{keyPath:Lj});const r=n.store("collectionParents"),i=new sw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:cn(l)})}};return n.store("remoteDocuments").Z({Y:!0},(o,a)=>{const l=new Re(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Z({Y:!0},([o,a,l],u)=>{const c=Tr(a);return s(c.popLast())}))}ii(e){const n=e.store("targets");return n.Z((r,i)=>{const s=Yl(i),o=Tb(this.serializer,s);return n.put(o)})}si(e,n){const r=n.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new $(Re.fromString(h.document.name).popFirst(5)):h.noDocument?$.fromSegments(h.noDocument.path):h.unknownDocument?$.fromSegments(h.unknownDocument.path):H()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>A.waitFor(i))}oi(e,n){const r=n.store("mutations"),i=bb(this.serializer),s=new kb(up.Jr,this.serializer.ht);return r.G().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:he();ks(this.serializer,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),A.forEach(a,(l,u)=>{const c=new bt(u),h=ap.Pt(this.serializer,c),d=s.getIndexManager(c),f=lp.Pt(c,this.serializer,d,s.referenceDelegate);return new Pb(i,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new xy(n,_n.ae),l).next()})})}}function P1(t){t.createObjectStore("targetDocuments",{keyPath:Mj}).createIndex("documentTargetsIndex",Fj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Vj,{unique:!0}),t.createObjectStore("targetGlobal")}const Vm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class aw{constructor(e,n,r,i,s,o,a,l,u,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this._i=s,this.window=o,this.document=a,this.ai=u,this.ui=c,this.ci=h,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=d=>Promise.resolve(),!aw.C())throw new D(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new W4(this,i),this.Ti=n+"main",this.serializer=new Eb(l),this.Ei=new ar(this.Ti,this.ci,new oU(this.serializer)),this.Kr=new q4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bb(this.serializer),this.Ur=new M4,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,c===!1&&gt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ri().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new D(b.FAILED_PRECONDITION,Vm);return this.Vi(),this.mi(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Kr.getHighestSequenceNumber(e))}).then(e=>{this.qr=new _n(e,this.ai)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}gi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.k(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(async()=>{this.started&&await this.Ri()}))}Ri(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.pi(e).next(n=>{n||(this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.yi(e)).next(n=>this.isPrimary&&!n?this.wi(e).next(()=>!1):!!n&&this.Si(e).next(()=>!0))).catch(e=>{if(ys(e))return M("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return M("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this._i.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}pi(e){return Ol(e).get("owner").next(n=>A.resolve(this.bi(n)))}Di(e){return Rh(e).delete(this.clientId)}async Ci(){if(this.isPrimary&&!this.vi(this.Ii,18e5)){this.Ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Ot(n,"clientMetadata");return r.G().next(i=>{const s=this.Fi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return A.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ai)for(const n of e)this.Ai.removeItem(this.Mi(n.clientId))}}fi(){this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ri().then(()=>this.Ci()).then(()=>this.fi()))}bi(e){return!!e&&e.ownerId===this.clientId}yi(e){return this.ui?A.resolve(!0):Ol(e).get("owner").next(n=>{if(n!==null&&this.vi(n.leaseTimestampMs,5e3)&&!this.xi(n.ownerId)){if(this.bi(n)&&this.networkEnabled)return!0;if(!this.bi(n)){if(!n.allowTabSynchronization)throw new D(b.FAILED_PRECONDITION,Vm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rh(e).G().next(r=>this.Fi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&M("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new xy(e,_n.ae);return this.wi(n).next(()=>this.Di(n))}),this.Ei.close(),this.Li()}Fi(e,n){return e.filter(r=>this.vi(r.updateTimeMs,n)&&!this.xi(r.clientId))}ki(){return this.runTransaction("getActiveClients","readonly",e=>Rh(e).G().next(n=>this.Fi(n,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getMutationQueue(e,n){return lp.Pt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z4(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return ap.Pt(this.serializer,e)}getBundleCache(){return this.Ur}runTransaction(e,n,r){M("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?Gj:l===14?kA:l===13?PA:l===12?Hj:l===11?bA:void H()}(this.ci);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new xy(a,this.qr?this.qr.next():_n.ae),n==="readwrite-primary"?this.pi(o).next(l=>!!l||this.yi(o)).next(l=>{if(!l)throw gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)),new D(b.FAILED_PRECONDITION,RA);return r(o)}).next(l=>this.Si(o).next(()=>l)):this.qi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}qi(e){return Ol(e).get("owner").next(n=>{if(n!==null&&this.vi(n.leaseTimestampMs,5e3)&&!this.xi(n.ownerId)&&!this.bi(n)&&!(this.ui||this.allowTabSynchronization&&n.allowTabSynchronization))throw new D(b.FAILED_PRECONDITION,Vm)})}Si(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ol(e).put("owner",n)}static C(){return ar.C()}wi(e){const n=Ol(e);return n.get("owner").next(r=>this.bi(r)?(M("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):A.resolve())}vi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Vi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.hi=()=>{this._i.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ri()))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}mi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.li=()=>{this.Oi();const n=/(?:Version|Mobile)\/1[456]/;MF()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this._i.enterRestrictedMode(!0),this._i.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.li))}Bi(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}xi(e){var n;try{const r=((n=this.Ai)===null||n===void 0?void 0:n.getItem(this.Mi(e)))!==null;return M("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Oi(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){gt("Failed to set zombie client id.",e)}}Li(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch{}}Mi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ol(t){return Ot(t,"owner")}function Rh(t){return Ot(t,"clientMetadata")}function lw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=i}static $i(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Hi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new aU;return this.Yi(e,n,o).next(a=>{if(s.result=a,this.Wi)return this.Zi(e,n,o,a.size)})}).next(()=>s.result)}Zi(e,n,r,i){return r.documentReadCount<this.Gi?(Uo()<=Ee.DEBUG&&M("QueryEngine","SDK will not create cache indexes for query:",Bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),A.resolve()):(Uo()<=Ee.DEBUG&&M("QueryEngine","Query:",Bo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(Uo()<=Ee.DEBUG&&M("QueryEngine","The SDK decides to create cache indexes for query:",Bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hn(n))):A.resolve())}Hi(e,n){if(n1(n))return A.resolve(null);let r=hn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Wd(n,null,"F"),r=hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Xi(n,a);return this.es(n,u,o,l.readTime)?this.Hi(e,Wd(n,null,"F")):this.ts(e,u,n,l)}))})))}Ji(e,n,r,i){return n1(n)||i.isEqual(W.min())?A.resolve(null):this.ji.getDocuments(e,r).next(s=>{const o=this.Xi(n,s);return this.es(n,o,r,i)?A.resolve(null):(Uo()<=Ee.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bo(n)),this.ts(e,o,n,IA(i,-1)).next(a=>a))})}Xi(e,n){let r=new Ue(HA(e));return n.forEach((i,s)=>{Mc(e,s)&&(r=r.add(s))}),r}es(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,n,r){return Uo()<=Ee.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",Bo(n)),this.ji.getDocumentsMatchingQuery(e,n,Nn.min(),r)}ts(e,n,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,n,r,i){this.persistence=e,this.ns=n,this.serializer=i,this.rs=new Be(ue),this.ss=new vs(s=>ao(s),Oc),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pb(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function Nb(t,e,n,r){return new lU(t,e,n,r)}async function Ob(t,e){const n=U(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=he();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({cs:u,removedBatchIds:o,addedBatchIds:a}))})})}function uU(t,e){const n=U(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n._s.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,d=h.keys();let f=A.resolve();return d.forEach(p=>{f=f.next(()=>c.getEntry(l,p)).next(g=>{const E=u.docVersions.get(p);Y(E!==null),g.version.compareTo(E)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),c.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=he();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Vb(t){const e=U(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function cU(t,e){const n=U(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Kr.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Kr.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(St.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(h,f),function(g,E,y){return g.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,c)&&a.push(n.Kr.updateTargetData(s,f))});let l=En(),u=he();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Mb(s,o,e.documentUpdates).next(c=>{l=c.ls,u=c.hs})),!r.isEqual(W.min())){const c=n.Kr.getLastRemoteSnapshotVersion(s).next(h=>n.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return A.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.rs=i,s))}function Mb(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=En();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(W.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):M("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ls:o,hs:i}})}function hU(t,e){const n=U(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Va(t,e){const n=U(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Kr.getTargetData(r,e).next(s=>s?(i=s,A.resolve(i)):n.Kr.allocateTargetId(r).next(o=>(i=new Hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.rs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.rs=n.rs.insert(r.targetId,r),n.ss.set(e,r.targetId)),r})}async function Ma(t,e,n){const r=U(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ys(o))throw o;M("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}function Zd(t,e,n){const r=U(t);let i=W.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=U(l),d=h.ss.get(c);return d!==void 0?A.resolve(h.rs.get(d)):h.Kr.getTargetData(u,c)}(r,o,hn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,n?i:W.min(),n?s:he())).next(a=>($b(r,KA(e),a),{documents:a,Ps:s})))}function Fb(t,e){const n=U(t),r=U(n.Kr),i=n.rs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.lt(s,e).next(o=>o?o.target:null))}function Lb(t,e){const n=U(t),r=n.os.get(e)||W.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n._s.getAllFromCollectionGroup(i,e,IA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>($b(n,e,i),i))}function $b(t,e,n){let r=t.os.get(e)||W.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.os.set(e,r)}async function dU(t,e,n,r){const i=U(t);let s=he(),o=En();for(const u of n){const c=e.Is(u.metadata.name);u.document&&(s=s.add(c));const h=e.ds(u);h.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(c,h)}const a=i._s.newChangeBuffer({trackRemovals:!0}),l=await Va(i,function(c){return hn(nl(Re.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Mb(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Kr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Kr.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.ls,c.hs)).next(()=>c.ls)))}async function fU(t,e,n=he()){const r=await Va(t,hn(rw(e.bundledQuery))),i=U(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=yt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ur.saveNamedQuery(s,e);const a=r.withResumeToken(St.EMPTY_BYTE_STRING,o);return i.rs=i.rs.insert(a.targetId,a),i.Kr.updateTargetData(s,a).next(()=>i.Kr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Kr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ur.saveNamedQuery(s,e))})}function k1(t,e){return`firestore_clients_${t}_${e}`}function D1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Mm(t,e){return`firestore_targets_${t}_${e}`}class ef{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new D(i.error.code,i.error.message))),o?new ef(e,n,i.state,s):(gt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new D(r.error.code,r.error.message))),s?new mu(e,r.state,i):(gt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Y_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=CA(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new tf(e,s):(gt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class cw{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new cw(n.clientId,n.onlineState):(gt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $y{constructor(){this.activeTargetIds=Y_()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fm{constructor(e,n,r,i,s){this.window=e,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new Be(ue),this.started=!1,this.ws=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ss=k1(this.persistenceKey,this.fs),this.bs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new $y),this.Ds=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Cs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.vs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Fs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Ms=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.ki();for(const r of e){if(r===this.fs)continue;const i=this.getItem(k1(this.persistenceKey,r));if(i){const s=tf.Es(r,i);s&&(this.ys=this.ys.insert(s.clientId,s))}}this.xs();const n=this.storage.getItem(this.Fs);if(n){const r=this.Os(n);r&&this.Ns(r)}for(const r of this.ws)this.ps(r);this.ws=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ys)}isActiveQueryTarget(e){let n=!1;return this.ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.ks(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Mm(this.persistenceKey,e));if(r){const i=mu.Es(e,r);i&&(n=i.state)}}return this.qs.Rs(e),this.xs(),n}removeLocalQueryTarget(e){this.qs.Vs(e),this.xs()}isLocalQueryTarget(e){return this.qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mm(this.persistenceKey,e))}updateQueryState(e,n,r){this.Qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.ks(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ks(e)}notifyBundleLoaded(e){this.$s(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return M("SharedClientState","READ",e,n),n}setItem(e,n){M("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){M("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ps(e){const n=e;if(n.storageArea===this.storage){if(M("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ds.test(n.key)){if(n.newValue==null){const r=this.Us(n.key);return this.Ws(r,null)}{const r=this.Gs(n.key,n.newValue);if(r)return this.Ws(r.clientId,r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(this.vs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(n.key===this.Fs){if(n.newValue!==null){const r=this.Os(n.newValue);if(r)return this.Ns(r)}}else if(n.key===this.bs){const r=function(s){let o=_n.ae;if(s!=null)try{const a=JSON.parse(s);Y(typeof a=="number"),o=a}catch(a){gt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==_n.ae&&this.sequenceNumberHandler(r)}else if(n.key===this.Ms){const r=this.Ys(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Zs(i)))}}}else this.ws.push(n)})}}get qs(){return this.ys.get(this.fs)}xs(){this.setItem(this.Ss,this.qs.As())}Ls(e,n,r){const i=new ef(this.currentUser,e,n,r),s=D1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.As())}ks(e){const n=D1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Ks(e){const n={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(n))}Qs(e,n,r){const i=Mm(this.persistenceKey,e),s=new mu(e,n,r);this.setItem(i,s.As())}$s(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Ms,n)}Us(e){const n=this.Ds.exec(e);return n?n[1]:null}Gs(e,n){const r=this.Us(e);return tf.Es(r,n)}zs(e,n){const r=this.Cs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ef.Es(new bt(s),i,n)}Hs(e,n){const r=this.vs.exec(e),i=Number(r[1]);return mu.Es(i,n)}Os(e){return cw.Es(e)}Ys(e){return JSON.parse(e)}async js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Xs(e.batchId,e.state,e.error);M("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Js(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}Ws(e,n){const r=n?this.ys.insert(e,n):this.ys.remove(e),i=this.Bs(this.ys),s=this.Bs(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.no(o,a).then(()=>{this.ys=r})}Ns(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let n=Y_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class jb{constructor(){this.ro=new $y,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new $y,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{so(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh=null;function Lm(){return xh===null?xh=function(){return 268435456+Math.round(2147483648*Math.random())}():xh++,"0x"+xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class yU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(n,r,i,s,o){const a=Lm(),l=this.Do(n,r);M("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,s,o),this.vo(n,l,u,i).then(c=>(M("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw dr("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Fo(n,r,i,s,o,a){return this.bo(n,r,i,s,o)}Co(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Do(n,r){const i=mU[n];return`${this.po}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=Lm();return new Promise((o,a)=>{const l=new fj;l.setWithCredentials(!0),l.listenOnce(hj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nm.NO_ERROR:const c=l.getResponseJson();M(Qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case Nm.TIMEOUT:M(Qt,`RPC '${e}' ${s} timed out`),a(new D(b.DEADLINE_EXCEEDED,"Request time out"));break;case Nm.HTTP_ERROR:const h=l.getStatus();if(M(Qt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(y)>=0?y:b.UNKNOWN}(f.status);a(new D(p,f.message))}else a(new D(b.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new D(b.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{M(Qt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);M(Qt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Mo(e,n,r){const i=Lm(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uj(),a=cj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Co(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");M(Qt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,f=!1;const p=new gU({ho:E=>{f?M(Qt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(d||(M(Qt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),M(Qt,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},Po:()=>h.close()}),g=(E,y,v)=>{E.listen(y,_=>{try{v(_)}catch(m){setTimeout(()=>{throw m},0)}})};return g(h,Eh.EventType.OPEN,()=>{f||M(Qt,`RPC '${e}' stream ${i} transport opened.`)}),g(h,Eh.EventType.CLOSE,()=>{f||(f=!0,M(Qt,`RPC '${e}' stream ${i} transport closed`),p.mo())}),g(h,Eh.EventType.ERROR,E=>{f||(f=!0,dr(Qt,`RPC '${e}' stream ${i} transport errored:`,E),p.mo(new D(b.UNAVAILABLE,"The operation could not be completed")))}),g(h,Eh.EventType.MESSAGE,E=>{var y;if(!f){const v=E.data[0];Y(!!v);const _=v,m=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(m){M(Qt,`RPC '${e}' stream ${i} received error:`,m);const I=m.status;let S=function(N){const O=vt[N];if(O!==void 0)return ob(O)}(I),R=m.message;S===void 0&&(S=b.INTERNAL,R="Unknown error status: "+I+" with message "+m.message),f=!0,p.mo(new D(S,R)),h.close()}else M(Qt,`RPC '${e}' stream ${i} received:`,v),p.fo(v)}}),g(a,dj.STAT_EVENT,E=>{E.stat===jT.PROXY?M(Qt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===jT.NOPROXY&&M(Qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Vo()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return typeof window<"u"?window:null}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){return new R4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&M("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,r,i,s,o,a,l){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new hw(e,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(e,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,e!==4?this.Ho.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(gt(n.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===n&&this.__(r,i)},r=>{e(()=>{const i=new D(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vU extends Bb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}u_(e,n){return this.connection.Mo("Listen",e,n)}onMessage(e){this.Ho.reset();const n=A4(this.serializer,e),r=function(s){if(!("targetChange"in s))return W.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?W.min():o.readTime?yt(o.readTime):W.min()}(e);return this.listener.c_(n,r)}l_(e){const n={};n.database=ic(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Gd(l)?{documents:mb(s,l)}:{query:gb(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cb(s,o.resumeToken);const u=Ny(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(W.min())>0){a.readTime=Oa(s,o.snapshotVersion.toTimestamp());const u=Ny(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=P4(this.serializer,e);r&&(n.labels=r),this.n_(n)}h_(e){const n={};n.database=ic(this.serializer),n.removeTarget=e,this.n_(n)}}class _U extends Bb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,n){return this.connection.Mo("Write",e,n)}onMessage(e){if(Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const n=b4(e.writeResults,e.commitTime),r=yt(e.commitTime);return this.listener.T_(r,n)}return Y(!e.writeResults||e.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=ic(this.serializer),this.n_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sc(this.serializer,r))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new D(b.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(b.UNKNOWN,i.toString())})}Fo(e,n,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(b.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}class EU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,e==="Online"&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(gt(n),this.p_=!1):M("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(o=>{r.enqueueAndForget(async()=>{_s(this)&&(M("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=U(l);u.F_.add(4),await sl(u),u.O_.set("Unknown"),u.F_.delete(4),await Uc(u)}(this))})}),this.O_=new EU(r,i)}}async function Uc(t){if(_s(t))for(const e of t.M_)await e(!0)}async function sl(t){for(const e of t.M_)await e(!1)}function cp(t,e){const n=U(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),pw(n)?fw(n):al(n).Yo()&&dw(n,e))}function oc(t,e){const n=U(t),r=al(n);n.v_.delete(e),r.Yo()&&zb(n,e),n.v_.size===0&&(r.Yo()?r.e_():_s(n)&&n.O_.set("Unknown"))}function dw(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}al(t).l_(e)}function zb(t,e){t.N_.Le(e),al(t).h_(e)}function fw(t){t.N_=new E4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),al(t).start(),t.O_.y_()}function pw(t){return _s(t)&&!al(t).Jo()&&t.v_.size>0}function _s(t){return U(t).F_.size===0}function qb(t){t.N_=void 0}async function IU(t){t.v_.forEach((e,n)=>{dw(t,e)})}async function SU(t,e){qb(t),pw(t)?(t.O_.b_(e),fw(t)):t.O_.set("Unknown")}async function RU(t,e,n){if(t.O_.set("Online"),e instanceof ub&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.v_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.v_.delete(a),i.N_.removeTarget(a))}(t,e)}catch(r){M("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nf(t,r)}else if(e instanceof ed?t.N_.Ge(e):e instanceof lb?t.N_.Xe(e):t.N_.He(e),!n.isEqual(W.min()))try{const r=await Vb(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.N_._t(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.v_.get(u);c&&s.v_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.v_.get(l);if(!c)return;s.v_.set(l,c.withResumeToken(St.EMPTY_BYTE_STRING,c.snapshotVersion)),zb(s,l);const h=new Hr(c.target,l,u,c.sequenceNumber);dw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){M("RemoteStore","Failed to raise snapshot:",r),await nf(t,r)}}async function nf(t,e,n){if(!ys(e))throw e;t.F_.add(1),await sl(t),t.O_.set("Offline"),n||(n=()=>Vb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{M("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await Uc(t)})}function Kb(t,e){return e().catch(n=>nf(t,n,e))}async function ol(t){const e=U(t),n=os(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;xU(e);)try{const i=await hU(e.localStore,r);if(i===null){e.C_.length===0&&n.e_();break}r=i.batchId,CU(e,i)}catch(i){await nf(e,i)}Hb(e)&&Gb(e)}function xU(t){return _s(t)&&t.C_.length<10}function CU(t,e){t.C_.push(e);const n=os(t);n.Yo()&&n.I_&&n.d_(e.mutations)}function Hb(t){return _s(t)&&!os(t).Jo()&&t.C_.length>0}function Gb(t){os(t).start()}async function AU(t){os(t).A_()}async function bU(t){const e=os(t);for(const n of t.C_)e.d_(n.mutations)}async function PU(t,e,n){const r=t.C_.shift(),i=Z_.from(r,e,n);await Kb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ol(t)}async function kU(t,e){e&&os(t).I_&&await async function(r,i){if(function(o){return sb(o)&&o!==b.ABORTED}(i.code)){const s=r.C_.shift();os(r).Xo(),await Kb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ol(r)}}(t,e),Hb(t)&&Gb(t)}async function O1(t,e){const n=U(t);n.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");const r=_s(n);n.F_.add(3),await sl(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await Uc(n)}async function jy(t,e){const n=U(t);e?(n.F_.delete(2),await Uc(n)):e||(n.F_.add(2),await sl(n),n.O_.set("Unknown"))}function al(t){return t.B_||(t.B_=function(n,r,i){const s=U(n);return s.V_(),new vU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:IU.bind(null,t),Eo:SU.bind(null,t),c_:RU.bind(null,t)}),t.M_.push(async e=>{e?(t.B_.Xo(),pw(t)?fw(t):t.O_.set("Unknown")):(await t.B_.stop(),qb(t))})),t.B_}function os(t){return t.L_||(t.L_=function(n,r,i){const s=U(n);return s.V_(),new _U(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:AU.bind(null,t),Eo:kU.bind(null,t),E_:bU.bind(null,t),T_:PU.bind(null,t)}),t.M_.push(async e=>{e?(t.L_.Xo(),await ol(t)):(await t.L_.stop(),t.C_.length>0&&(M("RemoteStore",`Stopping write stream with ${t.C_.length} pending writes`),t.C_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new mw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new D(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ll(t,e){if(gt("AsyncQueue",`${e}: ${t}`),ys(t))return new D(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Ql(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new va(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new va;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.k_=new Be($.comparator)}track(e){const n=e.doc.key,r=this.k_.get(n);r?e.type!==0&&r.type===3?this.k_=this.k_.insert(n,e):e.type===3&&r.type!==1?this.k_=this.k_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.k_=this.k_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.k_=this.k_.remove(n):e.type===1&&r.type===2?this.k_=this.k_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):H():this.k_=this.k_.insert(n,e)}q_(){const e=[];return this.k_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fa(e,n,va.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.Q_=void 0,this.listeners=[]}}class NU{constructor(){this.queries=new vs(e=>qA(e),Vc),this.onlineState="Unknown",this.K_=new Set}}async function gw(t,e){const n=U(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new DU),i)try{s.Q_=await n.onListen(r)}catch(o){const a=ll(o,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&vw(n)}async function yw(t,e){const n=U(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function OU(t,e){const n=U(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.W_(i)&&(r=!0);o.Q_=i}}r&&vw(n)}function VU(t,e,n){const r=U(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function vw(t){t.K_.forEach(e=>{e.next()})}class _w{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.serializer=e}Is(e){return Ar(this.serializer,e)}ds(e){return e.metadata.exists?pb(this.serializer,e.document,!1):Ke.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return yt(e)}}class FU{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qb(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const r=Re.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,r=new M1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Is(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||he()).add(s);n.set(o,a)}}return n}async complete(){const e=await dU(this.localStore,new M1(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(const r of this.queries)await fU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function Qb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.key=e}}class Yb{constructor(e){this.key=e}}class Xb{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=he(),this.mutatedKeys=he(),this.ua=HA(e),this.ca=new va(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new V1,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=Mc(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),E=!0):this.Ia(d,f)||(r.track({type:2,doc:f}),E=!0,(l&&this.ua(f,l)>0||u&&this.ua(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),E=!0):d&&!f&&(r.track({type:1,doc:d}),E=!0,(l||u)&&(a=!0)),E&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ca:o,Pa:r,es:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((u,c)=>function(d,f){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return p(d)-p(f)}(u.type,c.type)||this.ua(u.doc,c.doc)),this.da(r);const o=n?this.Ta():[],a=this.aa.size===0&&this.current?1:0,l=a!==this._a;return this._a=a,s.length!==0||l?{snapshot:new Fa(this.query,e.ca,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new V1,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=he(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Yb(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Wb(r))}),n}Ra(e){this.oa=e.Ps,this.aa=he();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Fa.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class LU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $U{constructor(e){this.key=e,this.ma=!1}}class jU{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new vs(a=>qA(a),Vc),this.pa=new Map,this.ya=new Set,this.wa=new Be($.comparator),this.Sa=new Map,this.ba=new ow,this.Da={},this.Ca=new Map,this.va=fo.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function UU(t,e){const n=Sw(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=await Va(n.localStore,hn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await ww(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&cp(n.remoteStore,o)}return i}async function ww(t,e,n,r,i){t.Ma=(h,d,f)=>async function(g,E,y,v){let _=E.view.ha(y);_.es&&(_=await Zd(g.localStore,E.query,!1).then(({documents:S})=>E.view.ha(S,_)));const m=v&&v.targetChanges.get(E.targetId),I=E.view.applyChanges(_,g.isPrimaryClient,m);return Uy(g,E.targetId,I.Ea),I.snapshot}(t,h,d,f);const s=await Zd(t.localStore,e,!0),o=new Xb(e,s.Ps),a=o.ha(s.documents),l=$c.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Uy(t,n,u.Ea);const c=new LU(e,n,o);return t.ga.set(e,c),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot}async function BU(t,e){const n=U(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Vc(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ma(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),oc(n.remoteStore,r.targetId),La(n,r.targetId)}).catch(gs)):(La(n,r.targetId),await Ma(n.localStore,r.targetId,!0))}async function zU(t,e,n){const r=Rw(t);try{const i=await function(o,a){const l=U(o),u=Xe.now(),c=a.reduce((f,p)=>f.add(p.key),he());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=En(),g=he();return l._s.getEntries(f,c).next(E=>{p=E,p.forEach((y,v)=>{v.isValidDocument()||(g=g.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(E=>{h=E;const y=[];for(const v of a){const _=v4(v,h.get(v.key).overlayedDocument);_!=null&&y.push(new pi(v.key,_,VA(_.value.mapValue),Ye.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,y,a)}).next(E=>{d=E;const y=E.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(f,E.batchId,y)})}).then(()=>({batchId:d.batchId,changes:QA(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Da[o.currentUser.toKey()];u||(u=new Be(ue)),u=u.insert(a,l),o.Da[o.currentUser.toKey()]=u}(r,i.batchId,n),await mi(r,i.changes),await ol(r.remoteStore)}catch(i){const s=ll(i,"Failed to persist write");n.reject(s)}}async function Jb(t,e){const n=U(t);try{const r=await cU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Y(o.ma):i.removedDocuments.size>0&&(Y(o.ma),o.ma=!1))}),await mi(n,r,e)}catch(r){await gs(r)}}function F1(t,e,n){const r=U(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=U(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.listeners)d.U_(a)&&(u=!0)}),u&&vw(l)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qU(t,e,n){const r=U(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Be($.comparator);o=o.insert(s,Ke.newNoDocument(s,W.min()));const a=he().add(s),l=new Lc(W.min(),new Map,new Be(ue),o,a);await Jb(r,l),r.wa=r.wa.remove(s),r.Sa.delete(e),Iw(r)}else await Ma(r.localStore,e,!1).then(()=>La(r,e,n)).catch(gs)}async function KU(t,e){const n=U(t),r=e.batch.batchId;try{const i=await uU(n.localStore,e);Tw(n,r,null),Ew(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mi(n,i)}catch(i){await gs(i)}}async function HU(t,e,n){const r=U(t);try{const i=await function(o,a){const l=U(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Y(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);Tw(r,e,n),Ew(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mi(r,i)}catch(i){await gs(i)}}async function GU(t,e){const n=U(t);_s(n.remoteStore)||M("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=U(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){const i=ll(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Ew(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function Tw(t,e,n){const r=U(t);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function La(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach(r=>{t.ba.containsKey(r)||Zb(t,r)})}function Zb(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(oc(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Iw(t))}function Uy(t,e,n){for(const r of n)r instanceof Wb?(t.ba.addReference(r.key,e),QU(t,r)):r instanceof Yb?(M("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||Zb(t,r.key)):H()}function QU(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(M("SyncEngine","New document in limbo: "+n),t.ya.add(r),Iw(t))}function Iw(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new $(Re.fromString(e)),r=t.va.next();t.Sa.set(r,new $U(n)),t.wa=t.wa.insert(n,r),cp(t.remoteStore,new Hr(hn(nl(n.path)),r,"TargetPurposeLimboResolution",_n.ae))}}async function mi(t,e,n){const r=U(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=uw.$i(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.fa.c_(i),await async function(l,u){const c=U(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>A.forEach(u,d=>A.forEach(d.Qi,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>A.forEach(d.Ki,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!ys(h))throw h;M("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=c.rs.get(d),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);c.rs=c.rs.insert(d,g)}}}(r.localStore,s))}async function WU(t,e){const n=U(t);if(!n.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());const r=await Ob(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(l=>{l.reject(new D(b.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mi(n,r.cs)}}function YU(t,e){const n=U(t),r=n.Sa.get(e);if(r&&r.ma)return he().add(r.key);{let i=he();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}async function XU(t,e){const n=U(t),r=await Zd(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&Uy(n,e.targetId,i.Ea),i}async function JU(t,e){const n=U(t);return Lb(n.localStore,e).then(r=>mi(n,r))}async function ZU(t,e,n,r){const i=U(t),s=await function(a,l){const u=U(a),c=U(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>c.Fn(h,l).next(d=>d?u.localDocuments.getDocuments(h,d):A.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ol(i.remoteStore):n==="acknowledged"||n==="rejected"?(Tw(i,e,r||null),Ew(i,e),function(a,l){U(U(a).mutationQueue).xn(l)}(i.localStore,e)):H(),await mi(i,s)):M("SyncEngine","Cannot apply mutation batch with id: "+e)}async function eB(t,e){const n=U(t);if(Sw(n),Rw(n),e===!0&&n.Fa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await L1(n,r.toArray());n.Fa=!0,await jy(n.remoteStore,!0);for(const s of i)cp(n.remoteStore,s)}else if(e===!1&&n.Fa!==!1){const r=[];let i=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(La(n,o),Ma(n.localStore,o,!0))),oc(n.remoteStore,o)}),await i,await L1(n,r),function(o){const a=U(o);a.Sa.forEach((l,u)=>{oc(a.remoteStore,u)}),a.ba.gr(),a.Sa=new Map,a.wa=new Be($.comparator)}(n),n.Fa=!1,await jy(n.remoteStore,!1)}}async function L1(t,e,n){const r=U(t),i=[],s=[];for(const o of e){let a;const l=r.pa.get(o);if(l&&l.length!==0){a=await Va(r.localStore,hn(l[0]));for(const u of l){const c=r.ga.get(u),h=await XU(r,c);h.snapshot&&s.push(h.snapshot)}}else{const u=await Fb(r.localStore,o);a=await Va(r.localStore,u),await ww(r,eP(u),o,!1,a.resumeToken)}i.push(a)}return r.fa.c_(s),i}function eP(t){return zA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tB(t){return function(n){return U(U(n).persistence).ki()}(U(t).localStore)}async function nB(t,e,n,r){const i=U(t);if(i.Fa)return void M("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Lb(i.localStore,KA(s[0])),a=Lc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",St.EMPTY_BYTE_STRING);await mi(i,o,a);break}case"rejected":await Ma(i.localStore,e,!0),La(i,e,r);break;default:H()}}async function rB(t,e,n){const r=Sw(t);if(r.Fa){for(const i of e){if(r.pa.has(i)){M("SyncEngine","Adding an already active target "+i);continue}const s=await Fb(r.localStore,i),o=await Va(r.localStore,s);await ww(r,eP(s),o.targetId,!1,o.resumeToken),cp(r.remoteStore,o)}for(const i of n)r.pa.has(i)&&await Ma(r.localStore,i,!1).then(()=>{oc(r.remoteStore,i),La(r,i)}).catch(gs)}}function Sw(t){const e=U(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qU.bind(null,e),e.fa.c_=OU.bind(null,e.eventManager),e.fa.xa=VU.bind(null,e.eventManager),e}function Rw(t){const e=U(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HU.bind(null,e),e}function iB(t,e,n){const r=U(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(f,p){const g=U(f),E=yt(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",y=>g.Ur.getBundleMetadata(y,p.id)).then(y=>!!y&&y.createTime.compareTo(E)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(Qb(l));const u=new FU(l,s.localStore,o.serializer);let c=await o.Oa();for(;c;){const d=await u.na(c);d&&a._updateProgress(d),c=await o.Oa()}const h=await u.complete();return await mi(s,h.sa,void 0),await function(f,p){const g=U(f);return g.persistence.runTransaction("Save bundle","readwrite",E=>g.Ur.saveBundleMetadata(E,p))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.ia)}catch(l){return dr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class By{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Nb(this.persistence,new Db,e.initialUser,this.serializer)}createPersistence(e){return new kb(up.Jr,this.serializer)}createSharedClientState(e){return new jb}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class tP extends By{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Rw(this.Na.syncEngine),await ol(this.Na.remoteStore),await this.persistence.gi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return Nb(this.persistence,new Db,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new H4(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new bj(n,this.persistence);return new Aj(e.asyncQueue,r)}createPersistence(e){const n=lw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new aw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Ub(),td(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jb}}class sB extends tP{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Na.syncEngine;this.sharedClientState instanceof Fm&&(this.sharedClientState.syncEngine={Xs:ZU.bind(null,n),eo:nB.bind(null,n),no:rB.bind(null,n),ki:tB.bind(null,n),Zs:JU.bind(null,n)},await this.sharedClientState.start()),await this.persistence.gi(async r=>{await eB(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=Ub();if(!Fm.C(n))throw new D(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class xw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WU.bind(null,this.syncEngine),await jy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NU}()}createDatastore(e){const n=jc(e.databaseInfo.databaseId),r=function(s){return new yU(s)}(e.databaseInfo);return function(s,o,a,l){return new wU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new TU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>F1(this.syncEngine,n,0),function(){return N1.C()?new N1:new pU}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const h=new jU(i,s,o,a,l,u);return c&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=U(n);M("RemoteStore","RemoteStore shutting down."),r.F_.add(5),await sl(r),r.x_.shutdown(),r.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):gt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new kt,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(e===null)return null;const n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);const i=await this.Ua(r);return new MU(JSON.parse(i),e.length+r)}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(this.buffer.length===0)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ga(){const e=await this.ka.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new D(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=U(i),a=ic(o.serializer)+"/documents",l={documents:s.map(d=>rc(o.serializer,d))},u=await o.Fo("BatchGetDocuments",a,l,s.length),c=new Map;u.forEach(d=>{const f=C4(o.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());Y(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=$.fromPath(r);this.mutations.push(new X_(i,this.precondition(i)))}),await async function(r,i){const s=U(r),o=ic(s.serializer)+"/documents",a={writes:i.map(l=>sc(s.serializer,l))};await s.bo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw H();n=W.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new D(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(W.min())?Ye.exists(!1):Ye.updateTime(n):Ye.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(W.min()))throw new D(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ye.updateTime(n)}return Ye.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.Ho=new hw(this.asyncQueue,"transaction_retry")}run(){this.za-=1,this.ja()}ja(){this.Ho.Qo(async()=>{const e=new aB(this.datastore),n=this.Ha(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ja(i)}))}).catch(r=>{this.Ja(r)})})}Ha(e){try{const n=this.updateFunction(e);return!Nc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ja(e){this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.ja(),Promise.resolve()))):this.deferred.reject(e)}Ya(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=EA.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{M("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(M("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ll(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nd(t,e){t.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ob(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Cw(t);M("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>O1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>O1(e.remoteStore,s)),t._onlineComponents=e}function nP(t){return t.name==="FirebaseError"?t.code===b.FAILED_PRECONDITION||t.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Cw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{await nd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!nP(n))throw n;dr("Error using user provided cache. Falling back to memory cache: "+n),await nd(t,new By)}}else M("FirestoreClient","Using default OfflineComponentProvider"),await nd(t,new By);return t._offlineComponents}async function dp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),await zy(t,t._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),await zy(t,new xw))),t._onlineComponents}function rP(t){return Cw(t).then(e=>e.persistence)}function Aw(t){return Cw(t).then(e=>e.localStore)}function iP(t){return dp(t).then(e=>e.remoteStore)}function bw(t){return dp(t).then(e=>e.syncEngine)}function cB(t){return dp(t).then(e=>e.datastore)}async function $a(t){const e=await dp(t),n=e.eventManager;return n.onListen=UU.bind(null,e.syncEngine),n.onUnlisten=BU.bind(null,e.syncEngine),n}function hB(t){return t.asyncQueue.enqueue(async()=>{const e=await rP(t),n=await iP(t);return e.setNetworkEnabled(!0),function(i){const s=U(i);return s.F_.delete(0),Uc(s)}(n)})}function dB(t){return t.asyncQueue.enqueue(async()=>{const e=await rP(t),n=await iP(t);return e.setNetworkEnabled(!1),async function(i){const s=U(i);s.F_.add(0),await sl(s),s.O_.set("Offline")}(n)})}function fB(t,e){const n=new kt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,c){const h=U(u);return h.persistence.runTransaction("read document","readonly",d=>h.localDocuments.getDocument(d,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new D(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=ll(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Aw(t),e,n)),n.promise}function sP(t,e,n={}){const r=new kt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new hp({next:d=>{o.enqueueAndForget(()=>yw(s,h));const f=d.docs.has(a);!f&&d.fromCache?u.reject(new D(b.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?u.reject(new D(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new _w(nl(a.path),c,{includeMetadataChanges:!0,Z_:!0});return gw(s,h)}(await $a(t),t.asyncQueue,e,n,r)),r.promise}function pB(t,e){const n=new kt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Zd(i,s,!0),l=new Xb(s,a.Ps),u=l.ha(a.documents),c=l.applyChanges(u,!1);o.resolve(c.snapshot)}catch(a){const l=ll(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Aw(t),e,n)),n.promise}function oP(t,e,n={}){const r=new kt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new hp({next:d=>{o.enqueueAndForget(()=>yw(s,h)),d.fromCache&&l.source==="server"?u.reject(new D(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new _w(a,c,{includeMetadataChanges:!0,Z_:!0});return gw(s,h)}(await $a(t),t.asyncQueue,e,n,r)),r.promise}function mB(t,e){const n=new hp(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){U(i).K_.add(s),s.next()}(await $a(t),n)),()=>{n.La(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){U(i).K_.delete(s)}(await $a(t),n))}}function gB(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?ab().encode(o):o,function(c,h){return new oB(c,h)}(function(c,h){if(c instanceof Uint8Array)return $1(c,h);if(c instanceof ArrayBuffer)return $1(new Uint8Array(c),h);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,jc(e));t.asyncQueue.enqueueAndForget(async()=>{iB(await bw(t),i,r)})}function yB(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=U(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ur.getNamedQuery(o,i))}(await Aw(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e,n){if(!n)throw new D(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lP(t,e,n,r){if(e===!0&&r===!0)throw new D(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U1(t){if(!$.isDocumentKey(t))throw new D(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function B1(t){if($.isDocumentKey(t))throw new D(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function Ae(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fp(t);throw new D(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function uP(t,e){if(e<=0)throw new D(b.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new D(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new D(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new D(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new D(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new D(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new D(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yj;switch(r.type){case"firstParty":return new Ej(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new D(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=j1.get(n);r&&(M("ComponentProvider","Removing Datastore"),j1.delete(n),r.terminate())}(this),Promise.resolve()}}function vB(t,e,n,r={}){var i;const s=(t=Ae(t,Bc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=bt.MOCK_USER;else{a=iC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new D(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new bt(u)}t._authCredentials=new vj(new wA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn=class cP{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cP(this.firestore,e,this._query)}},nt=class hP{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hP(this.firestore,e,this._key)}},Wi=class dP extends dn{constructor(e,n,r){super(e,n,nl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new $(e))}withConverter(e){return new dP(this.firestore,e,this._path)}};function fP(t,e,...n){if(t=Me(t),Pw("collection","path",e),t instanceof Bc){const r=Re.fromString(e,...n);return B1(r),new Wi(t,null,r)}{if(!(t instanceof nt||t instanceof Wi))throw new D(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return B1(r),new Wi(t.firestore,null,r)}}function _B(t,e){if(t=Ae(t,Bc),Pw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new D(b.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dn(t,null,function(r){return new fi(Re.emptyPath(),r)}(e))}function rf(t,e,...n){if(t=Me(t),arguments.length===1&&(e=EA.V()),Pw("doc","path",e),t instanceof Bc){const r=Re.fromString(e,...n);return U1(r),new nt(t,null,new $(r))}{if(!(t instanceof nt||t instanceof Wi))throw new D(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return U1(r),new nt(t.firestore,t instanceof Wi?t.converter:null,new $(r))}}function pP(t,e){return t=Me(t),e=Me(e),(t instanceof nt||t instanceof Wi)&&(e instanceof nt||e instanceof Wi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function mP(t,e){return t=Me(t),e=Me(e),t instanceof dn&&e instanceof dn&&t.firestore===e.firestore&&Vc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new hw(this,"async_queue_retry"),this.ou=()=>{const n=td();n&&M("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=td();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new kt;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(e){if(!ys(e))throw e;M("AsyncQueue","Operation failed with retryable error: "+e)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{this.nu=r,this.ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw gt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const i=mw.createAndSchedule(this,e,n,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&H()}verifyOperationInProgress(){}async lu(){let e;do e=this.Za,await e;while(e!==this.Za)}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}function qy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class EB{constructor(){this._progressObserver={},this._taskCompletionResolver=new kt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=-1;let ht=class extends Bc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new wB}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||gP(this),this._firestoreClient.terminate()}};function Vt(t){return t._firestoreClient||gP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gP(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new Yj(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,aP(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new uB(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function IB(t,e){vP(t=Ae(t,ht));const n=Vt(t);if(n._uninitializedComponentsProvider)throw new D(b.FAILED_PRECONDITION,"SDK cache is already specified.");dr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new xw;return yP(n,i,new tP(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function SB(t){vP(t=Ae(t,ht));const e=Vt(t);if(e._uninitializedComponentsProvider)throw new D(b.FAILED_PRECONDITION,"SDK cache is already specified.");dr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new xw;return yP(e,r,new sB(r,n.cacheSizeBytes))}function yP(t,e,n){const r=new kt;return t.asyncQueue.enqueue(async()=>{try{await nd(t,n),await zy(t,e),r.resolve()}catch(i){const s=i;if(!nP(s))throw s;dr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function RB(t){if(t._initialized&&!t._terminated)throw new D(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ar.C())return Promise.resolve();const i=r+"main";await ar.delete(i)}(lw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function xB(t){return function(n){const r=new kt;return n.asyncQueue.enqueueAndForget(async()=>GU(await bw(n),r)),r.promise}(Vt(t=Ae(t,ht)))}function CB(t){return hB(Vt(t=Ae(t,ht)))}function AB(t){return dB(Vt(t=Ae(t,ht)))}function bB(t,e){const n=Vt(t=Ae(t,ht)),r=new EB;return gB(n,t._databaseId,e,r),r}function PB(t,e){return yB(Vt(t=Ae(t,ht)),e).then(n=>n?new dn(t,null,n.query):null)}function vP(t){if(t._initialized||t._terminated)throw new D(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(St.fromBase64String(e))}catch(n){throw new D(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nr(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let as=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new D(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB=/^__.*__$/;class DB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new pi(e,this.data,this.fieldMask,n,this.fieldTransforms):new rl(e,this.data,n,this.fieldTransforms)}}class _P{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new pi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class mp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.du(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new mp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.Vu(e),i}mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return sf(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(e.length===0)throw this.gu("Document fields must not be empty");if(wP(this.Tu)&&kB.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class NB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jc(e)}wu(e,n,r,i=!1){return new mp({Tu:e,methodName:n,yu:r,path:lt.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Io(t){const e=t._freezeSettings(),n=jc(t._databaseId);return new NB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gp(t,e,n,r,i,s={}){const o=t.wu(s.merge||s.mergeFields?2:0,e,n,i);Ow("Data must be an object, but it was:",o,r);const a=IP(r,o);let l,u;if(s.merge)l=new wn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=Ky(e,h,n);if(!o.contains(d))throw new D(b.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);RP(c,d)||c.push(d)}l=new wn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new DB(new Ut(a),l,u)}class zc extends To{_toFieldTransform(e){if(e.Tu!==2)throw e.Tu===1?e.gu(`${this._methodName}() can only appear at the top level of your update data`):e.gu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zc}}function EP(t,e,n){return new mp({Tu:3,yu:e.settings.yu,methodName:t._methodName,Ru:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kw extends To{_toFieldTransform(e){return new Fc(e.path,new Da)}isEqual(e){return e instanceof kw}}class OB extends To{constructor(e,n){super(e),this.Su=n}_toFieldTransform(e){const n=EP(this,e,!0),r=this.Su.map(s=>So(s,n)),i=new lo(r);return new Fc(e.path,i)}isEqual(e){return this===e}}class VB extends To{constructor(e,n){super(e),this.Su=n}_toFieldTransform(e){const n=EP(this,e,!0),r=this.Su.map(s=>So(s,n)),i=new uo(r);return new Fc(e.path,i)}isEqual(e){return this===e}}class MB extends To{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=new Na(e.serializer,JA(e.serializer,this.bu));return new Fc(e.path,n)}isEqual(e){return this===e}}function Dw(t,e,n,r){const i=t.wu(1,e,n);Ow("Data must be an object, but it was:",i,r);const s=[],o=Ut.empty();Eo(r,(l,u)=>{const c=Vw(e,l,n);u=Me(u);const h=i.mu(c);if(u instanceof zc)s.push(c);else{const d=So(u,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new wn(s);return new _P(o,a,i.fieldTransforms)}function Nw(t,e,n,r,i,s){const o=t.wu(1,e,n),a=[Ky(e,r,n)],l=[i];if(s.length%2!=0)throw new D(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Ky(e,s[d])),l.push(s[d+1]);const u=[],c=Ut.empty();for(let d=a.length-1;d>=0;--d)if(!RP(u,a[d])){const f=a[d];let p=l[d];p=Me(p);const g=o.mu(f);if(p instanceof zc)u.push(f);else{const E=So(p,g);E!=null&&(u.push(f),c.set(f,E))}}const h=new wn(u);return new _P(c,h,o.fieldTransforms)}function TP(t,e,n,r=!1){return So(n,t.wu(r?4:3,e))}function So(t,e){if(SP(t=Me(t)))return Ow("Unsupported field value:",e,t),IP(t,e);if(t instanceof To)return function(r,i){if(!wP(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&e.Tu!==4)throw e.gu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=So(a,i.fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Xe.fromDate(r);return{timestampValue:Oa(i.serializer,s)}}if(r instanceof Xe){const s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oa(i.serializer,s)}}if(r instanceof pp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:cb(i.serializer,r._byteString)};if(r instanceof nt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${fp(r)}`)}(t,e)}function IP(t,e){const n={};return DA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,(r,i)=>{const s=So(i,e.Au(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function SP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof pp||t instanceof Nr||t instanceof nt||t instanceof To)}function Ow(t,e,n){if(!SP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=fp(n);throw r==="an object"?e.gu(t+" a custom object"):e.gu(t+" "+r)}}function Ky(t,e,n){if((e=Me(e))instanceof as)return e._internalPath;if(typeof e=="string")return Vw(t,e);throw sf("Field path arguments must be of type string or ",t,!1,void 0,n)}const FB=new RegExp("[~\\*/\\[\\]]");function Vw(t,e,n){if(e.search(FB)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new as(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new D(b.INVALID_ARGUMENT,a+t+l)}function RP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LB extends ac{data(){return super.data()}}function yp(t,e){return typeof e=="string"?Vw(t,e):e instanceof as?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new D(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mw{}class qc extends Mw{}function Si(t,e,...n){let r=[];e instanceof Mw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Fw).length,a=s.filter(l=>l instanceof vp).length;if(o>1||o>0&&a>0)throw new D(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class vp extends qc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vp(e,n,r)}_apply(e){const n=this._parse(e);return AP(e._query,n),new dn(e.firestore,e.converter,Dy(e._query,n))}_parse(e){const n=Io(e.firestore);return function(s,o,a,l,u,c,h){let d;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new D(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){K1(h,c);const f=[];for(const p of h)f.push(q1(l,s,p));d={arrayValue:{values:f}}}else d=q1(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||K1(h,c),d=TP(a,o,h,c==="in"||c==="not-in");return ge.create(u,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $B(t,e,n){const r=e,i=yp("where",t);return vp._create(i,r,n)}class Fw extends Mw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:De.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)AP(o,l),o=Dy(o,l)}(e._query,n),new dn(e.firestore,e.converter,Dy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lw extends qc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new D(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new D(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new ga(s,o);return function(u,c){if(Q_(u)===null){const h=ip(u);h!==null&&bP(u,h,c.field)}}(i,a),a}(e._query,this._field,this._direction);return new dn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function jB(t,e="asc"){const n=e,r=yp("orderBy",t);return Lw._create(r,n)}class _p extends qc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new _p(e,n,r)}_apply(e){return new dn(e.firestore,e.converter,Wd(e._query,this._limit,this._limitType))}}function UB(t){return uP("limit",t),_p._create("limit",t,"F")}function BB(t){return uP("limitToLast",t),_p._create("limitToLast",t,"L")}class wp extends qc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new wp(e,n,r)}_apply(e){const n=CP(e,this.type,this._docOrFields,this._inclusive);return new dn(e.firestore,e.converter,function(i,s){return new fi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function zB(...t){return wp._create("startAt",t,!0)}function qB(...t){return wp._create("startAfter",t,!1)}class Ep extends qc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ep(e,n,r)}_apply(e){const n=CP(e,this.type,this._docOrFields,this._inclusive);return new dn(e.firestore,e.converter,function(i,s){return new fi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function KB(...t){return Ep._create("endBefore",t,!1)}function HB(...t){return Ep._create("endAt",t,!0)}function CP(t,e,n,r){if(n[0]=Me(n[0]),n[0]instanceof ac)return function(s,o,a,l,u){if(!l)throw new D(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const h of ya(s))if(h.field.isKeyField())c.push(oo(o,l.key));else{const d=l.data.field(h.field);if(rp(d))throw new D(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const f=h.field.canonicalString();throw new D(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}c.push(d)}return new ss(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Io(t.firestore);return function(o,a,l,u,c,h){const d=o.explicitOrderBy;if(c.length>d.length)throw new D(b.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<c.length;p++){const g=c[p];if(d[p].field.isKeyField()){if(typeof g!="string")throw new D(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof g}`);if(!W_(o)&&g.indexOf("/")!==-1)throw new D(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${g}' contains a slash.`);const E=o.path.child(Re.fromString(g));if(!$.isDocumentKey(E))throw new D(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const y=new $(E);f.push(oo(a,y))}else{const E=TP(l,u,g);f.push(E)}}return new ss(f,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function q1(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new D(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!W_(e)&&n.indexOf("/")!==-1)throw new D(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!$.isDocumentKey(r))throw new D(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oo(t,new $(r))}if(n instanceof nt)return oo(t,n._key);throw new D(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fp(n)}.`)}function K1(t,e){if(!Array.isArray(t)||t.length===0)throw new D(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AP(t,e){if(e.isInequality()){const r=ip(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new D(b.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Q_(t);s!==null&&bP(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new D(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new D(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function bP(t,e,n){if(!n.isEqual(e))throw new D(b.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class $w{convertValue(e,n="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Eo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new pp(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=H_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const n=ts(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);Y(wb(r));const i=new rs(r.get(1),r.get(3)),s=new $(r.popFirst(5));return i.isEqual(n)||gt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class GB extends $w{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ai=class extends ac{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},gu=class extends ai{data(e={}){return super.data(e)}},ls=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gu(this._firestore,this._userDataWriter,r.key,r,new Bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new D(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new gu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new gu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:QB(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function QB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function PP(t,e){return t instanceof ai&&e instanceof ai?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ls&&e instanceof ls&&t._firestore===e._firestore&&mP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(t){t=Ae(t,nt);const e=Ae(t.firestore,ht);return sP(Vt(e),t._key).then(n=>jw(e,t,n))}class Ro extends $w{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}}function YB(t){t=Ae(t,nt);const e=Ae(t.firestore,ht),n=Vt(e),r=new Ro(e);return fB(n,t._key).then(i=>new ai(e,r,t._key,i,new Bs(i!==null&&i.hasLocalMutations,!0),t.converter))}function XB(t){t=Ae(t,nt);const e=Ae(t.firestore,ht);return sP(Vt(e),t._key,{source:"server"}).then(n=>jw(e,t,n))}function JB(t){t=Ae(t,dn);const e=Ae(t.firestore,ht),n=Vt(e),r=new Ro(e);return xP(t._query),oP(n,t._query).then(i=>new ls(e,r,t,i))}function ZB(t){t=Ae(t,dn);const e=Ae(t.firestore,ht),n=Vt(e),r=new Ro(e);return pB(n,t._query).then(i=>new ls(e,r,t,i))}function e5(t){t=Ae(t,dn);const e=Ae(t.firestore,ht),n=Vt(e),r=new Ro(e);return oP(n,t._query,{source:"server"}).then(i=>new ls(e,r,t,i))}function H1(t,e,n){t=Ae(t,nt);const r=Ae(t.firestore,ht),i=Tp(t.converter,e,n);return Kc(r,[gp(Io(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ye.none())])}function G1(t,e,n,...r){t=Ae(t,nt);const i=Ae(t.firestore,ht),s=Io(i);let o;return o=typeof(e=Me(e))=="string"||e instanceof as?Nw(s,"updateDoc",t._key,e,n,r):Dw(s,"updateDoc",t._key,e),Kc(i,[o.toMutation(t._key,Ye.exists(!0))])}function t5(t){return Kc(Ae(t.firestore,ht),[new il(t._key,Ye.none())])}function n5(t,e){const n=Ae(t.firestore,ht),r=rf(t),i=Tp(t.converter,e);return Kc(n,[gp(Io(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function kP(t,...e){var n,r,i;t=Me(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||qy(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(qy(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof nt)u=Ae(t.firestore,ht),c=nl(t._key.path),l={next:h=>{e[o]&&e[o](jw(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Ae(t,dn);u=Ae(h.firestore,ht),c=h._query;const d=new Ro(u);l={next:f=>{e[o]&&e[o](new ls(u,d,h,f))},error:e[o+1],complete:e[o+2]},xP(t._query)}return function(d,f,p,g){const E=new hp(g),y=new _w(f,E,p);return d.asyncQueue.enqueueAndForget(async()=>gw(await $a(d),y)),()=>{E.La(),d.asyncQueue.enqueueAndForget(async()=>yw(await $a(d),y))}}(Vt(u),c,a,l)}function r5(t,e){return mB(Vt(t=Ae(t,ht)),qy(e)?e:{next:e})}function Kc(t,e){return function(r,i){const s=new kt;return r.asyncQueue.enqueueAndForget(async()=>zU(await bw(r),i,s)),s.promise}(Vt(t),e)}function jw(t,e,n){const r=n.docs.get(e._key),i=new Ro(t);return new ai(t,i,e._key,r,new Bs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s5=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Io(e)}set(e,n,r){this._verifyNotCommitted();const i=Oi(e,this._firestore),s=Tp(i.converter,n,r),o=gp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ye.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Oi(e,this._firestore);let o;return o=typeof(n=Me(n))=="string"||n instanceof as?Nw(this._dataReader,"WriteBatch.update",s._key,n,r,i):Dw(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oi(e,this._firestore);return this._mutations=this._mutations.concat(new il(n._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new D(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Oi(t,e){if((t=Me(t)).firestore!==e)throw new D(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o5=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Io(n)}get(n){const r=Oi(n,this._firestore),i=new GB(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return H();const o=s[0];if(o.isFoundDocument())return new ac(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ac(this._firestore,i,r._key,null,r.converter);throw H()})}set(n,r,i){const s=Oi(n,this._firestore),o=Tp(s.converter,r,i),a=gp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Oi(n,this._firestore);let a;return a=typeof(r=Me(r))=="string"||r instanceof as?Nw(this._dataReader,"Transaction.update",o._key,r,i,s):Dw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Oi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Oi(e,this._firestore),r=new Ro(this._firestore);return super.get(e).then(i=>new ai(this._firestore,r,n._key,i._document,new Bs(!1,!1),n.converter))}};function a5(t,e,n){t=Ae(t,ht);const r=Object.assign(Object.assign({},i5),n);return function(s){if(s.maxAttempts<1)throw new D(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new kt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await cB(s);new lB(s.asyncQueue,u,a,o,l).run()}),l.promise}(Vt(t),i=>e(new o5(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(){return new zc("deleteField")}function u5(){return new kw("serverTimestamp")}function c5(...t){return new OB("arrayUnion",t)}function h5(...t){return new VB("arrayRemove",t)}function d5(t){return new MB("increment",t)}(function(e,n=!0){(function(i){tl=i})($f),io(new si("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ht(new _j(r.getProvider("auth-internal")),new Ij(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new D(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rs(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Cr(UT,"4.2.0",e),Cr(UT,"4.2.0","esm2017")})();const f5={apiKey:"AIzaSyD7w6wRVPsf0DaH2YARMaFKXWJHjPsSd3s",authDomain:"pokemon-go-gym.firebaseapp.com",projectId:"pokemon-go-gym",storageBucket:"pokemon-go-gym.appspot.com",messagingSenderId:"48932195856",appId:"1:48932195856:web:93f21318228a7976e34495"};Sc.initializeApp(f5);const p5="@firebase/firestore-compat",m5="0.3.18";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new D("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){if(typeof Uint8Array>"u")throw new D("unimplemented","Uint8Arrays are not available in this environment.")}function W1(){if(!Qj())throw new D("unimplemented","Blobs are unavailable in Firestore in this environment.")}let DP=class Hy{constructor(e){this._delegate=e}static fromBase64String(e){return W1(),new Hy(Nr.fromBase64String(e))}static fromUint8Array(e){return Q1(),new Hy(Nr.fromUint8Array(e))}toBase64(){return W1(),this._delegate.toBase64()}toUint8Array(){return Q1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t){return g5(t,["next","error","complete"])}function g5(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{enableIndexedDbPersistence(e,n){return IB(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return SB(e._delegate)}clearIndexedDbPersistence(e){return RB(e._delegate)}}class NP{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof rs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&dr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){vB(this._delegate,e,n,r)}enableNetwork(){return CB(this._delegate)}disableNetwork(){return AB(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lP("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return xB(this._delegate)}onSnapshotsInSync(e){return r5(this._delegate,e)}get app(){if(!this._appCompat)throw new D("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ja(this,fP(this._delegate,e))}catch(n){throw on(n,"collection()","Firestore.collection()")}}doc(e){try{return new Kn(this,rf(this._delegate,e))}catch(n){throw on(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sn(this,_B(this._delegate,e))}catch(n){throw on(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return a5(this._delegate,n=>e(new OP(this,n)))}batch(){return Vt(this._delegate),new VP(new s5(this._delegate,e=>Kc(this._delegate,e)))}loadBundle(e){return bB(this._delegate,e)}namedQuery(e){return PB(this._delegate,e).then(n=>n?new sn(this,n):null)}}class Ip extends $w{constructor(e){super(),this.firestore=e}convertBytes(e){return new DP(new Nr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Kn.forKey(n,this.firestore,null)}}function v5(t){mj(t)}class OP{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ip(e)}get(e){const n=zs(e);return this._delegate.get(n).then(r=>new lc(this._firestore,new ai(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=zs(e);return r?(Uw("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=zs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=zs(e);return this._delegate.delete(n),this}}class VP{constructor(e){this._delegate=e}set(e,n,r){const i=zs(e);return r?(Uw("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=zs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=zs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class po{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new gu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=po.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new po(e,new Ip(e),n),i.set(n,s)),s}}po.INSTANCES=new WeakMap;class Kn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ip(e)}static forPath(e,n,r){if(e.length%2!==0)throw new D("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Kn(n,new nt(n._delegate,r,new $(e)))}static forKey(e,n,r){return new Kn(n,new nt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ja(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ja(this.firestore,fP(this._delegate,e))}catch(n){throw on(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Me(e),e instanceof nt?pP(this._delegate,e):!1}set(e,n){n=Uw("DocumentReference.set",n);try{return n?H1(this._delegate,e,n):H1(this._delegate,e)}catch(r){throw on(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?G1(this._delegate,e):G1(this._delegate,e,n,...r)}catch(i){throw on(i,"updateDoc()","DocumentReference.update()")}}delete(){return t5(this._delegate)}onSnapshot(...e){const n=MP(e),r=FP(e,i=>new lc(this.firestore,new ai(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return kP(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=YB(this._delegate):(e==null?void 0:e.source)==="server"?n=XB(this._delegate):n=WB(this._delegate),n.then(r=>new lc(this.firestore,new ai(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Kn(this.firestore,e?this._delegate.withConverter(po.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function on(t,e,n){return t.message=t.message.replace(e,n),t}function MP(t){for(const e of t)if(typeof e=="object"&&!Gy(e))return e;return{}}function FP(t,e){var n,r;let i;return Gy(t[0])?i=t[0]:Gy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class lc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return PP(this._delegate,e._delegate)}}class uc extends lc{data(e){const n=this._delegate.data(e);return gj(n!==void 0),n}}class sn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ip(e)}where(e,n,r){try{return new sn(this.firestore,Si(this._delegate,$B(e,n,r)))}catch(i){throw on(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new sn(this.firestore,Si(this._delegate,jB(e,n)))}catch(r){throw on(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sn(this.firestore,Si(this._delegate,UB(e)))}catch(n){throw on(n,"limit()","Query.limit()")}}limitToLast(e){try{return new sn(this.firestore,Si(this._delegate,BB(e)))}catch(n){throw on(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sn(this.firestore,Si(this._delegate,zB(...e)))}catch(n){throw on(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sn(this.firestore,Si(this._delegate,qB(...e)))}catch(n){throw on(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sn(this.firestore,Si(this._delegate,KB(...e)))}catch(n){throw on(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sn(this.firestore,Si(this._delegate,HB(...e)))}catch(n){throw on(n,"endAt()","Query.endAt()")}}isEqual(e){return mP(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=ZB(this._delegate):(e==null?void 0:e.source)==="server"?n=e5(this._delegate):n=JB(this._delegate),n.then(r=>new Qy(this.firestore,new ls(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=MP(e),r=FP(e,i=>new Qy(this.firestore,new ls(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return kP(this._delegate,n,r)}withConverter(e){return new sn(this.firestore,e?this._delegate.withConverter(po.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class _5{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new uc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Qy{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new sn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new uc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new _5(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new uc(this._firestore,r))})}isEqual(e){return PP(this._delegate,e._delegate)}}class ja extends sn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Kn(this.firestore,e):null}doc(e){try{return e===void 0?new Kn(this.firestore,rf(this._delegate)):new Kn(this.firestore,rf(this._delegate,e))}catch(n){throw on(n,"doc()","CollectionReference.doc()")}}add(e){return n5(this._delegate,e).then(n=>new Kn(this.firestore,n))}isEqual(e){return pP(this._delegate,e._delegate)}withConverter(e){return new ja(this.firestore,e?this._delegate.withConverter(po.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function zs(t){return Ae(t,nt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(...e){this._delegate=new as(...e)}static documentId(){return new Bw(lt.keyField().canonicalString())}isEqual(e){return e=Me(e),e instanceof as?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this._delegate=e}static serverTimestamp(){const e=u5();return e._methodName="FieldValue.serverTimestamp",new Os(e)}static delete(){const e=l5();return e._methodName="FieldValue.delete",new Os(e)}static arrayUnion(...e){const n=c5(...e);return n._methodName="FieldValue.arrayUnion",new Os(n)}static arrayRemove(...e){const n=h5(...e);return n._methodName="FieldValue.arrayRemove",new Os(n)}static increment(e){const n=d5(e);return n._methodName="FieldValue.increment",new Os(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5={Firestore:NP,GeoPoint:pp,Timestamp:Xe,Blob:DP,Transaction:OP,WriteBatch:VP,DocumentReference:Kn,DocumentSnapshot:lc,Query:sn,QueryDocumentSnapshot:uc,QuerySnapshot:Qy,CollectionReference:ja,FieldPath:Bw,FieldValue:Os,setLogLevel:v5,CACHE_SIZE_UNLIMITED:TB};function E5(t,e){t.INTERNAL.registerComponent(new si("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},w5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(t){E5(t,(e,n)=>new NP(e,n,new y5)),t.registerVersion(p5,m5)}T5(Sc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="firebasestorage.googleapis.com",$P="storageBucket",I5=2*60*1e3,S5=10*60*1e3,R5=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends fs{constructor(e,n,r=0){super($m(e),`Firebase Storage: ${n} (${$m(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $m(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qe||(Qe={}));function $m(t){return"storage/"+t}function zw(){const t="An unknown error occurred, please check the error payload for server response.";return new it(Qe.UNKNOWN,t)}function x5(t){return new it(Qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function C5(t){return new it(Qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function A5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(Qe.UNAUTHENTICATED,t)}function b5(){return new it(Qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function P5(t){return new it(Qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function jP(){return new it(Qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UP(){return new it(Qe.CANCELED,"User canceled the upload/download.")}function k5(t){return new it(Qe.INVALID_URL,"Invalid URL '"+t+"'.")}function D5(t){return new it(Qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function N5(){return new it(Qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$P+"' property when initializing the app?")}function BP(){return new it(Qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function O5(){return new it(Qe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function V5(){return new it(Qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function M5(t){return new it(Qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _a(t){return new it(Qe.INVALID_ARGUMENT,t)}function zP(){return new it(Qe.APP_DELETED,"The Firebase app was deleted.")}function qP(t){return new it(Qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yu(t,e){return new it(Qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vl(t){throw new it(Qe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Yt.makeFromUrl(e,n)}catch{return new Yt(e,"")}if(r.path==="")return r;throw D5(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(m){m.path.charAt(m.path.length-1)==="/"&&(m.path_=m.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(m){m.path_=decodeURIComponent(m.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},g=n===LP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",y=new RegExp(`^https?://${g}/${i}/${E}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let m=0;m<_.length;m++){const I=_[m],S=I.regex.exec(e);if(S){const R=S[I.indices.bucket];let x=S[I.indices.path];x||(x=""),r=new Yt(R,x),I.postModify(r);break}}if(r==null)throw k5(e);return r}}class F5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...E){u||(u=!0,e.apply(null,E))}function h(E){i=setTimeout(()=>{i=null,t(f,l())},E)}function d(){s&&clearTimeout(s)}function f(E,...y){if(u){d();return}if(E){d(),c.call(null,E,...y);return}if(l()||o){d(),c.call(null,E,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,h(_)}let p=!1;function g(E){p||(p=!0,d(),!u&&(i!==null?(E||(a=2),clearTimeout(i),h(0)):E||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function $5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(t){return t!==void 0}function U5(t){return typeof t=="function"}function B5(t){return typeof t=="object"&&!Array.isArray(t)}function Sp(t){return typeof t=="string"||t instanceof String}function Y1(t){return qw()&&t instanceof Blob}function qw(){return typeof Blob<"u"&&!sC()}function Wy(t,e,n,r){if(r<e)throw _a(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _a(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function KP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Qs||(Qs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n,r,i,s,o,a,l,u,c,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ch(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Qs.NO_ERROR,l=s.getStatus();if(!a||HP(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Qs.ABORT;r(!1,new Ch(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Ch(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());j5(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=zw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?zP():UP();o(l)}else{const l=jP();o(l)}};this.canceled_?n(!1,new Ch(!1,null,!0)):this.backoffId_=L5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ch{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function q5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function K5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function H5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function G5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Q5(t,e,n,r,i,s,o=!0){const a=KP(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return H5(u,e),q5(u,n),K5(u,s),G5(u,r),new z5(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Y5(...t){const e=W5();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(qw())return new Blob(t);throw new it(Qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function X5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t){if(typeof atob>"u")throw M5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jm{constructor(e,n){this.data=e,this.contentType=n||null}}function GP(t,e){switch(t){case Hn.RAW:return new jm(QP(e));case Hn.BASE64:case Hn.BASE64URL:return new jm(WP(t,e));case Hn.DATA_URL:return new jm(e3(e),t3(e))}throw zw()}function QP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Z5(t){let e;try{e=decodeURIComponent(t)}catch{throw yu(Hn.DATA_URL,"Malformed data URL.")}return QP(e)}function WP(t,e){switch(t){case Hn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw yu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw yu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=J5(e)}catch(i){throw i.message.includes("polyfill")?i:yu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class YP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw yu(Hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=n3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function e3(t){const e=new YP(t);return e.base64?WP(Hn.BASE64,e.rest):Z5(e.rest)}function t3(t){return new YP(t).contentType}function n3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){let r=0,i="";Y1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Y1(this.data_)){const r=this.data_,i=X5(r,e,n);return i===null?null:new Ur(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ur(r,!0)}}static getBlob(...e){if(qw()){const n=e.map(r=>r instanceof Ur?r.data_:r);return new Ur(Y5.apply(null,n))}else{const n=e.map(o=>Sp(o)?GP(Hn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ur(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){let e;try{e=JSON.parse(t)}catch{return null}return B5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function i3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function XP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t,e){return e}class nn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||s3}}let Ah=null;function o3(t){return!Sp(t)||t.length<2?t:XP(t)}function Rp(){if(Ah)return Ah;const t=[];t.push(new nn("bucket")),t.push(new nn("generation")),t.push(new nn("metageneration")),t.push(new nn("name","fullPath",!0));function e(s,o){return o3(o)}const n=new nn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new nn("size");return i.xform=r,t.push(i),t.push(new nn("timeCreated")),t.push(new nn("updated")),t.push(new nn("md5Hash",null,!0)),t.push(new nn("cacheControl",null,!0)),t.push(new nn("contentDisposition",null,!0)),t.push(new nn("contentEncoding",null,!0)),t.push(new nn("contentLanguage",null,!0)),t.push(new nn("contentType",null,!0)),t.push(new nn("metadata","customMetadata",!0)),Ah=t,Ah}function a3(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Yt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function l3(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return a3(r,t),r}function JP(t,e,n){const r=Kw(e);return r===null?null:l3(t,r,n)}function u3(t,e,n,r){const i=Kw(e);if(i===null||!Sp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=ws(d,n,r),p=KP({alt:"media",token:u});return f+p})[0]}function Hw(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="prefixes",J1="items";function c3(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[X1])for(const i of n[X1]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Yt(e,s));r.prefixes.push(o)}if(n[J1])for(const i of n[J1]){const s=t._makeStorageReference(new Yt(e,i.name));r.items.push(s)}return r}function h3(t,e,n){const r=Kw(n);return r===null?null:c3(t,e,r)}class gi{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t){if(!t)throw zw()}function xp(t,e){function n(r,i){const s=JP(t,i,e);return br(s!==null),s}return n}function d3(t,e){function n(r,i){const s=h3(t,e,i);return br(s!==null),s}return n}function f3(t,e){function n(r,i){const s=JP(t,i,e);return br(s!==null),u3(s,i,t.host,t._protocol)}return n}function ul(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=b5():i=A5():n.getStatus()===402?i=C5(t.bucket):n.getStatus()===403?i=P5(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Cp(t){const e=ul(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=x5(t.path)),s.serverResponse=i.serverResponse,s}return n}function ZP(t,e,n){const r=e.fullServerUrl(),i=ws(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new gi(i,s,xp(t,n),o);return a.errorHandler=Cp(e),a}function p3(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=ws(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,c=new gi(a,l,d3(t,e.bucket),u);return c.urlParams=s,c.errorHandler=ul(e),c}function m3(t,e,n){const r=e.fullServerUrl(),i=ws(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new gi(i,s,f3(t,n),o);return a.errorHandler=Cp(e),a}function g3(t,e,n,r){const i=e.fullServerUrl(),s=ws(i,t.host,t._protocol),o="PATCH",a=Hw(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,c=new gi(s,o,xp(t,r),u);return c.headers=l,c.body=a,c.errorHandler=Cp(e),c}function y3(t,e){const n=e.fullServerUrl(),r=ws(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new gi(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Cp(e),a}function v3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ek(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=v3(null,e)),r}function _3(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let m=0;m<2;m++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=ek(e,r,i),c=Hw(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=Ur.getBlob(h,r,d);if(f===null)throw BP();const p={name:u.fullPath},g=ws(s,t.host,t._protocol),E="POST",y=t.maxUploadRetryTime,v=new gi(g,E,xp(t,n),y);return v.urlParams=p,v.headers=o,v.body=f.uploadData(),v.errorHandler=ul(e),v}class of{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Gw(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{br(!1)}return br(!!n&&(e||["active"]).indexOf(n)!==-1),n}function w3(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=ek(e,r,i),a={name:o.fullPath},l=ws(s,t.host,t._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=Hw(o,n),d=t.maxUploadRetryTime;function f(g){Gw(g);let E;try{E=g.getResponseHeader("X-Goog-Upload-URL")}catch{br(!1)}return br(Sp(E)),E}const p=new gi(l,u,f,d);return p.urlParams=a,p.headers=c,p.body=h,p.errorHandler=ul(e),p}function E3(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const c=Gw(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{br(!1)}h||br(!1);const d=Number(h);return br(!isNaN(d)),new of(d,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,l=new gi(n,o,s,a);return l.headers=i,l.errorHandler=ul(e),l}const Z1=256*1024;function T3(t,e,n,r,i,s,o,a){const l=new of(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw O5();const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const h=l.current,d=h+c;let f="";c===0?f="finalize":u===c?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(h,d);if(g===null)throw BP();function E(m,I){const S=Gw(m,["active","final"]),R=l.current+c,x=r.size();let N;return S==="final"?N=xp(e,s)(m,I):N=null,new of(R,x,S==="final",N)}const y="POST",v=e.maxUploadRetryTime,_=new gi(n,y,E,v);return _.headers=p,_.body=g.uploadData(),_.progressCallback=a||null,_.errorHandler=ul(t),_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3={STATE_CHANGED:"state_changed"},an={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Um(t){switch(t){case"running":case"pausing":case"canceling":return an.RUNNING;case"paused":return an.PAUSED;case"success":return an.SUCCESS;case"canceled":return an.CANCELED;case"error":return an.ERROR;default:return an.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n,r){if(U5(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class R3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Vl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class x3 extends R3{initXhr(){this.xhr_.responseType="text"}}function _r(){return new x3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Rp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Qe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(HP(i.status,[]))if(s)i=jP();else{this.sleepTime=Math.max(this.sleepTime*2,R5),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Qe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=w3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_r,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=E3(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,_r,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Z1*this._chunkMultiplier,n=new of(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=T3(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,_r,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Z1*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=ZP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,_r,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=_3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_r,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=UP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Um(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new S3(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Um(this._state)){case an.SUCCESS:Vo(this._resolve.bind(null,this.snapshot))();break;case an.CANCELED:case an.ERROR:const n=this._reject;Vo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Um(this._state)){case an.RUNNING:case an.PAUSED:e.next&&Vo(e.next.bind(e,this.snapshot))();break;case an.SUCCESS:e.complete&&Vo(e.complete.bind(e))();break;case an.CANCELED:case an.ERROR:e.error&&Vo(e.error.bind(e,this._error))();break;default:e.error&&Vo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this._service=e,n instanceof Yt?this._location=n:this._location=Yt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mo(e,n)}get root(){const e=new Yt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XP(this._location.path)}get storage(){return this._service}get parent(){const e=r3(this._location.path);if(e===null)return null;const n=new Yt(this._location.bucket,e);return new mo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qP(e)}}function C3(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new tk(t,new Ur(e),n)}function A3(t){const e={prefixes:[],items:[]};return nk(t,e).then(()=>e)}async function nk(t,e,n){const i=await rk(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await nk(t,e,i.nextPageToken)}function rk(t,e){e!=null&&typeof e.maxResults=="number"&&Wy("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=p3(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,_r)}function b3(t){t._throwIfRoot("getMetadata");const e=ZP(t.storage,t._location,Rp());return t.storage.makeRequestWithTokens(e,_r)}function P3(t,e){t._throwIfRoot("updateMetadata");const n=g3(t.storage,t._location,e,Rp());return t.storage.makeRequestWithTokens(n,_r)}function k3(t){t._throwIfRoot("getDownloadURL");const e=m3(t.storage,t._location,Rp());return t.storage.makeRequestWithTokens(e,_r).then(n=>{if(n===null)throw V5();return n})}function D3(t){t._throwIfRoot("deleteObject");const e=y3(t.storage,t._location);return t.storage.makeRequestWithTokens(e,_r)}function ik(t,e){const n=i3(t._location.path,e),r=new Yt(t._location.bucket,n);return new mo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){return/^[A-Za-z]+:\/\//.test(t)}function O3(t,e){return new mo(t,e)}function sk(t,e){if(t instanceof Qw){const n=t;if(n._bucket==null)throw N5();const r=new mo(n,n._bucket);return e!=null?sk(r,e):r}else return e!==void 0?ik(t,e):t}function V3(t,e){if(e&&N3(e)){if(t instanceof Qw)return O3(t,e);throw _a("To use ref(service, url), the first argument must be a Storage instance.")}else return sk(t,e)}function eI(t,e){const n=e==null?void 0:e[$P];return n==null?null:Yt.makeFromBucketSpec(n,t)}function M3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:iC(i,t.app.options.projectId))}class Qw{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=LP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I5,this._maxUploadRetryTime=S5,this._requests=new Set,i!=null?this._bucket=Yt.makeFromBucketSpec(i,this._host):this._bucket=eI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yt.makeFromBucketSpec(this._url,e):this._bucket=eI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new F5(zP());{const o=Q5(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const tI="@firebase/storage",nI="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="storage";function L3(t,e,n){return t=Me(t),C3(t,e,n)}function $3(t){return t=Me(t),b3(t)}function j3(t,e){return t=Me(t),P3(t,e)}function U3(t,e){return t=Me(t),rk(t,e)}function B3(t){return t=Me(t),A3(t)}function z3(t){return t=Me(t),k3(t)}function q3(t){return t=Me(t),D3(t)}function rI(t,e){return t=Me(t),V3(t,e)}function K3(t,e){return ik(t,e)}function H3(t,e,n,r={}){M3(t,e,n,r)}function G3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Qw(n,r,i,e,$f)}function Q3(){io(new si(F3,G3,"PUBLIC").setMultipleInstances(!0)),Cr(tI,nI,""),Cr(tI,nI,"esm2017")}Q3();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bh(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new bh(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new bh(o,this,this._ref)):s={next:n.next?o=>n.next(new bh(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class sI{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Xr(e,this._service))}get items(){return this._delegate.items.map(e=>new Xr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=K3(this._delegate,e);return new Xr(n,this.storage)}get root(){return new Xr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Xr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new iI(L3(this._delegate,e,n),this)}putString(e,n=Hn.RAW,r){this._throwIfRoot("putString");const i=GP(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new iI(new tk(this._delegate,new Ur(i.data,!0),s),this)}listAll(){return B3(this._delegate).then(e=>new sI(e,this.storage))}list(e){return U3(this._delegate,e||void 0).then(n=>new sI(n,this.storage))}getMetadata(){return $3(this._delegate)}updateMetadata(e){return j3(this._delegate,e)}getDownloadURL(){return z3(this._delegate)}delete(){return this._throwIfRoot("delete"),q3(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw qP(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(oI(e))throw _a("ref() expected a child path but got a URL, use refFromURL instead.");return new Xr(rI(this._delegate,e),this)}refFromURL(e){if(!oI(e))throw _a("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Yt.makeFromUrl(e,this._delegate.host)}catch{throw _a("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xr(rI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){H3(this._delegate,e,n,r)}}function oI(t){return/^[A-Za-z]+:\/\//.test(t)}const W3="@firebase/storage-compat",Y3="0.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3="storage-compat";function J3(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new ok(n,r)}function Z3(t){const e={TaskState:an,TaskEvent:I3,StringFormat:Hn,Storage:ok,Reference:Xr};t.INTERNAL.registerComponent(new si(X3,J3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(W3,Y3)}Z3(Sc);Sc.firestore();function ak(t,e){return function(){return t.apply(e,arguments)}}const{toString:e6}=Object.prototype,{getPrototypeOf:Ww}=Object,Ap=(t=>e=>{const n=e6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Or=t=>(t=t.toLowerCase(),e=>Ap(e)===t),bp=t=>e=>typeof e===t,{isArray:cl}=Array,cc=bp("undefined");function t6(t){return t!==null&&!cc(t)&&t.constructor!==null&&!cc(t.constructor)&&Qn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const lk=Or("ArrayBuffer");function n6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&lk(t.buffer),e}const r6=bp("string"),Qn=bp("function"),uk=bp("number"),Pp=t=>t!==null&&typeof t=="object",i6=t=>t===!0||t===!1,rd=t=>{if(Ap(t)!=="object")return!1;const e=Ww(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},s6=Or("Date"),o6=Or("File"),a6=Or("Blob"),l6=Or("FileList"),u6=t=>Pp(t)&&Qn(t.pipe),c6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Qn(t.append)&&((e=Ap(t))==="formdata"||e==="object"&&Qn(t.toString)&&t.toString()==="[object FormData]"))},h6=Or("URLSearchParams"),d6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),cl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function ck(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const hk=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),dk=t=>!cc(t)&&t!==hk;function Yy(){const{caseless:t}=dk(this)&&this||{},e={},n=(r,i)=>{const s=t&&ck(e,i)||i;rd(e[s])&&rd(r)?e[s]=Yy(e[s],r):rd(r)?e[s]=Yy({},r):cl(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Hc(arguments[r],n);return e}const f6=(t,e,n,{allOwnKeys:r}={})=>(Hc(e,(i,s)=>{n&&Qn(i)?t[s]=ak(i,n):t[s]=i},{allOwnKeys:r}),t),p6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),m6=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},g6=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Ww(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},y6=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},v6=t=>{if(!t)return null;if(cl(t))return t;let e=t.length;if(!uk(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},_6=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ww(Uint8Array)),w6=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},E6=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},T6=Or("HTMLFormElement"),I6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),aI=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),S6=Or("RegExp"),fk=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Hc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},R6=t=>{fk(t,(e,n)=>{if(Qn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Qn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},x6=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return cl(t)?r(t):r(String(t).split(e)),n},C6=()=>{},A6=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Bm="abcdefghijklmnopqrstuvwxyz",lI="0123456789",pk={DIGIT:lI,ALPHA:Bm,ALPHA_DIGIT:Bm+Bm.toUpperCase()+lI},b6=(t=16,e=pk.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function P6(t){return!!(t&&Qn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const k6=t=>{const e=new Array(10),n=(r,i)=>{if(Pp(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=cl(r)?[]:{};return Hc(r,(o,a)=>{const l=n(o,i+1);!cc(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},D6=Or("AsyncFunction"),N6=t=>t&&(Pp(t)||Qn(t))&&Qn(t.then)&&Qn(t.catch),k={isArray:cl,isArrayBuffer:lk,isBuffer:t6,isFormData:c6,isArrayBufferView:n6,isString:r6,isNumber:uk,isBoolean:i6,isObject:Pp,isPlainObject:rd,isUndefined:cc,isDate:s6,isFile:o6,isBlob:a6,isRegExp:S6,isFunction:Qn,isStream:u6,isURLSearchParams:h6,isTypedArray:_6,isFileList:l6,forEach:Hc,merge:Yy,extend:f6,trim:d6,stripBOM:p6,inherits:m6,toFlatObject:g6,kindOf:Ap,kindOfTest:Or,endsWith:y6,toArray:v6,forEachEntry:w6,matchAll:E6,isHTMLForm:T6,hasOwnProperty:aI,hasOwnProp:aI,reduceDescriptors:fk,freezeMethods:R6,toObjectSet:x6,toCamelCase:I6,noop:C6,toFiniteNumber:A6,findKey:ck,global:hk,isContextDefined:dk,ALPHABET:pk,generateString:b6,isSpecCompliantForm:P6,toJSONObject:k6,isAsyncFn:D6,isThenable:N6};function Se(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}k.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const mk=Se.prototype,gk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{gk[t]={value:t}});Object.defineProperties(Se,gk);Object.defineProperty(mk,"isAxiosError",{value:!0});Se.from=(t,e,n,r,i,s)=>{const o=Object.create(mk);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Se.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const O6=null;function Xy(t){return k.isPlainObject(t)||k.isArray(t)}function yk(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function uI(t,e,n){return t?t.concat(e).map(function(i,s){return i=yk(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function V6(t){return k.isArray(t)&&!t.some(Xy)}const M6=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function kp(t,e,n){if(!k.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,E){return!k.isUndefined(E[g])});const r=n.metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(i))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(k.isDate(p))return p.toISOString();if(!l&&k.isBlob(p))throw new Se("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(p)||k.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,g,E){let y=p;if(p&&!E&&typeof p=="object"){if(k.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(k.isArray(p)&&V6(p)||(k.isFileList(p)||k.endsWith(g,"[]"))&&(y=k.toArray(p)))return g=yk(g),y.forEach(function(_,m){!(k.isUndefined(_)||_===null)&&e.append(o===!0?uI([g],m,s):o===null?g:g+"[]",u(_))}),!1}return Xy(p)?!0:(e.append(uI(E,g,s),u(p)),!1)}const h=[],d=Object.assign(M6,{defaultVisitor:c,convertValue:u,isVisitable:Xy});function f(p,g){if(!k.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),k.forEach(p,function(y,v){(!(k.isUndefined(y)||y===null)&&i.call(e,y,k.isString(v)?v.trim():v,g,d))===!0&&f(y,g?g.concat(v):[v])}),h.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return f(t),e}function cI(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Yw(t,e){this._pairs=[],t&&kp(t,this,e)}const vk=Yw.prototype;vk.append=function(e,n){this._pairs.push([e,n])};vk.toString=function(e){const n=e?function(r){return e.call(this,r,cI)}:cI;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function F6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _k(t,e,n){if(!e)return t;const r=n&&n.encode||F6,i=n&&n.serialize;let s;if(i?s=i(e,n):s=k.isURLSearchParams(e)?e.toString():new Yw(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class L6{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(r){r!==null&&e(r)})}}const hI=L6,wk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$6=typeof URLSearchParams<"u"?URLSearchParams:Yw,j6=typeof FormData<"u"?FormData:null,U6=typeof Blob<"u"?Blob:null,B6=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),z6=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Sr={isBrowser:!0,classes:{URLSearchParams:$6,FormData:j6,Blob:U6},isStandardBrowserEnv:B6,isStandardBrowserWebWorkerEnv:z6,protocols:["http","https","file","blob","url","data"]};function q6(t,e){return kp(t,new Sr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Sr.isNode&&k.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function K6(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function H6(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function Ek(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&k.isArray(i)?i.length:o,l?(k.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!k.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&k.isArray(i[o])&&(i[o]=H6(i[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const n={};return k.forEachEntry(t,(r,i)=>{e(K6(r),i,n,0)}),n}return null}function G6(t,e,n){if(k.isString(t))try{return(e||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Xw={transitional:wk,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=k.isObject(e);if(s&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return i&&i?JSON.stringify(Ek(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return q6(e,this.formSerializer).toString();if((a=k.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return kp(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),G6(e)):e}],transformResponse:[function(e){const n=this.transitional||Xw.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&k.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Se.from(a,Se.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Sr.classes.FormData,Blob:Sr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],t=>{Xw.headers[t]={}});const Jw=Xw,Q6=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),W6=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&Q6[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},dI=Symbol("internals");function Ml(t){return t&&String(t).trim().toLowerCase()}function id(t){return t===!1||t==null?t:k.isArray(t)?t.map(id):String(t)}function Y6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const X6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function zm(t,e,n,r,i){if(k.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!k.isString(e)){if(k.isString(r))return e.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(e)}}function J6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Z6(t,e){const n=k.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Dp{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,u){const c=Ml(l);if(!c)throw new Error("header name must be a non-empty string");const h=k.findKey(i,c);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=id(a))}const o=(a,l)=>k.forEach(a,(u,c)=>s(u,c,l));return k.isPlainObject(e)||e instanceof this.constructor?o(e,n):k.isString(e)&&(e=e.trim())&&!X6(e)?o(W6(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Ml(e),e){const r=k.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Y6(i);if(k.isFunction(n))return n.call(this,i,r);if(k.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ml(e),e){const r=k.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||zm(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Ml(o),o){const a=k.findKey(r,o);a&&(!n||zm(r,r[a],a,n))&&(delete r[a],i=!0)}}return k.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||zm(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return k.forEach(this,(i,s)=>{const o=k.findKey(r,s);if(o){n[o]=id(i),delete n[s];return}const a=e?J6(s):String(s).trim();a!==s&&delete n[s],n[a]=id(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return k.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&k.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[dI]=this[dI]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Ml(o);r[a]||(Z6(i,o),r[a]=!0)}return k.isArray(e)?e.forEach(s):s(e),this}}Dp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(Dp.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});k.freezeMethods(Dp);const Jr=Dp;function qm(t,e){const n=this||Jw,r=e||n,i=Jr.from(r.headers);let s=r.data;return k.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Tk(t){return!!(t&&t.__CANCEL__)}function Gc(t,e,n){Se.call(this,t??"canceled",Se.ERR_CANCELED,e,n),this.name="CanceledError"}k.inherits(Gc,Se,{__CANCEL__:!0});function e9(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Se("Request failed with status code "+n.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const t9=Sr.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),k.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),k.isString(s)&&l.push("path="+s),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function n9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function r9(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Ik(t,e){return t&&!n9(e)?r9(t,e):e}const i9=Sr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=k.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function s9(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function o9(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];o||(o=u),n[i]=l,r[i]=u;let h=s,d=0;for(;h!==i;)d+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const f=c&&u-c;return f?Math.round(d*1e3/f):void 0}}function fI(t,e){let n=0;const r=o9(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),u=s<=o;n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const a9=typeof XMLHttpRequest<"u",l9=a9&&function(t){return new Promise(function(n,r){let i=t.data;const s=Jr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let u;k.isFormData(i)&&(Sr.isStandardBrowserEnv||Sr.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?k.isString(u=s.getContentType())&&s.setContentType(u.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+g))}const h=Ik(t.baseURL,t.url);c.open(t.method.toUpperCase(),_k(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const p=Jr.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),E={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:p,config:t,request:c};e9(function(v){n(v),l()},function(v){r(v),l()},E),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(r(new Se("Request aborted",Se.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new Se("Network Error",Se.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const E=t.transitional||wk;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new Se(g,E.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,t,c)),c=null},Sr.isStandardBrowserEnv){const p=(t.withCredentials||i9(h))&&t.xsrfCookieName&&t9.read(t.xsrfCookieName);p&&s.set(t.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in c&&k.forEach(s.toJSON(),function(g,E){c.setRequestHeader(E,g)}),k.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",fI(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",fI(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=p=>{c&&(r(!p||p.type?new Gc(null,t,c):p),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const f=s9(h);if(f&&Sr.protocols.indexOf(f)===-1){r(new Se("Unsupported protocol "+f+":",Se.ERR_BAD_REQUEST,t));return}c.send(i||null)})},Jy={http:O6,xhr:l9};k.forEach(Jy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const pI=t=>`- ${t}`,u9=t=>k.isFunction(t)||t===null||t===!1,Sk={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!u9(n)&&(r=Jy[(o=String(n)).toLowerCase()],r===void 0))throw new Se(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(pI).join(`
`):" "+pI(s[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Jy};function Km(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gc(null,t)}function mI(t){return Km(t),t.headers=Jr.from(t.headers),t.data=qm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Sk.getAdapter(t.adapter||Jw.adapter)(t).then(function(r){return Km(t),r.data=qm.call(t,t.transformResponse,r),r.headers=Jr.from(r.headers),r},function(r){return Tk(r)||(Km(t),r&&r.response&&(r.response.data=qm.call(t,t.transformResponse,r.response),r.response.headers=Jr.from(r.response.headers))),Promise.reject(r)})}const gI=t=>t instanceof Jr?t.toJSON():t;function Ua(t,e){e=e||{};const n={};function r(u,c,h){return k.isPlainObject(u)&&k.isPlainObject(c)?k.merge.call({caseless:h},u,c):k.isPlainObject(c)?k.merge({},c):k.isArray(c)?c.slice():c}function i(u,c,h){if(k.isUndefined(c)){if(!k.isUndefined(u))return r(void 0,u,h)}else return r(u,c,h)}function s(u,c){if(!k.isUndefined(c))return r(void 0,c)}function o(u,c){if(k.isUndefined(c)){if(!k.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,h){if(h in e)return r(u,c);if(h in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>i(gI(u),gI(c),!0)};return k.forEach(Object.keys(Object.assign({},t,e)),function(c){const h=l[c]||i,d=h(t[c],e[c],c);k.isUndefined(d)&&h!==a||(n[c]=d)}),n}const Rk="1.5.1",Zw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zw[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const yI={};Zw.transitional=function(e,n,r){function i(s,o){return"[Axios v"+Rk+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Se(i(o," has been removed"+(n?" in "+n:"")),Se.ERR_DEPRECATED);return n&&!yI[o]&&(yI[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function c9(t,e,n){if(typeof t!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Se("option "+s+" must be "+l,Se.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Se("Unknown option "+s,Se.ERR_BAD_OPTION)}}const Zy={assertOptions:c9,validators:Zw},Ri=Zy.validators;class af{constructor(e){this.defaults=e,this.interceptors={request:new hI,response:new hI}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ua(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Zy.assertOptions(r,{silentJSONParsing:Ri.transitional(Ri.boolean),forcedJSONParsing:Ri.transitional(Ri.boolean),clarifyTimeoutError:Ri.transitional(Ri.boolean)},!1),i!=null&&(k.isFunction(i)?n.paramsSerializer={serialize:i}:Zy.assertOptions(i,{encode:Ri.function,serialize:Ri.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&k.merge(s.common,s[n.method]);s&&k.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Jr.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let c,h=0,d;if(!l){const p=[mI.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),d=p.length,c=Promise.resolve(n);h<d;)c=c.then(p[h++],p[h++]);return c}d=a.length;let f=n;for(h=0;h<d;){const p=a[h++],g=a[h++];try{f=p(f)}catch(E){g.call(this,E);break}}try{c=mI.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=Ua(this.defaults,e);const n=Ik(e.baseURL,e.url);return _k(n,e.params,e.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(e){af.prototype[e]=function(n,r){return this.request(Ua(r||{},{method:e,url:n,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Ua(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}af.prototype[e]=n(),af.prototype[e+"Form"]=n(!0)});const sd=af;class e0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Gc(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new e0(function(i){e=i}),cancel:e}}}const h9=e0;function d9(t){return function(n){return t.apply(null,n)}}function f9(t){return k.isObject(t)&&t.isAxiosError===!0}const ev={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ev).forEach(([t,e])=>{ev[e]=t});const p9=ev;function xk(t){const e=new sd(t),n=ak(sd.prototype.request,e);return k.extend(n,sd.prototype,e,{allOwnKeys:!0}),k.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return xk(Ua(t,i))},n}const wt=xk(Jw);wt.Axios=sd;wt.CanceledError=Gc;wt.CancelToken=h9;wt.isCancel=Tk;wt.VERSION=Rk;wt.toFormData=kp;wt.AxiosError=Se;wt.Cancel=wt.CanceledError;wt.all=function(e){return Promise.all(e)};wt.spread=d9;wt.isAxiosError=f9;wt.mergeConfig=Ua;wt.AxiosHeaders=Jr;wt.formToJSON=t=>Ek(k.isHTMLForm(t)?new FormData(t):t);wt.getAdapter=Sk.getAdapter;wt.HttpStatusCode=p9;wt.default=wt;const Ck=wt,m9="https://pokeapi.co/api/v2/pokemon-species/",g9="https://pokeapi.co/api/v2/type/",y9="zh-Hant",lf=50,vI=({offset:t=0,limit:e=lf})=>Ck({baseURL:m9,params:{offset:t,limit:e}}).then(n=>n.data),Ph=t=>Ck(t).then(e=>e.data),v9=()=>{var E;const{page:t,isLoadingPokemon:e,handleStorePokemon:n,handleIsLoadingPokemon:r,handleStoreAllTypes:i,searchPokemon:s}=Vr(),o=l_(),{data:a,isFetching:l,error:u,isPreviousData:c}=XE({queryKey:["pokedex",t],queryFn:()=>vI({offset:t}),keepPreviousData:!0,staleTime:1/0});w.useEffect(()=>{!c&&(a!=null&&a.hasMore)&&o.prefetchQuery({queryKey:["pokedex",t+lf],queryFn:()=>vI({offset:t+lf})})},[a,c,t,o]);const h=gm({queries:((a==null?void 0:a.results)??[]).map(y=>({queryKey:["species",y.url],queryFn:()=>Ph(y.url),enabled:!!y.url}))}),d=gm({queries:(h??[]).map(y=>{var m,I;const{data:v}=y,_=((I=(m=v==null?void 0:v.varieties[0])==null?void 0:m.pokemon)==null?void 0:I.url)??"";return{queryKey:["varieties",_],queryFn:async()=>Ph(_),enabled:!!y.data}})}),f=XE({queryKey:["AllTypes"],queryFn:()=>Ph(g9)}),p=gm({queries:(((E=f==null?void 0:f.data)==null?void 0:E.results)??[]).map(y=>{const{url:v}=y;return{queryKey:["TypeDetail",v],queryFn:()=>Ph(v),enabled:!!v}})}),g=a&&h.every(y=>!y.isLoading&&!y.isError&&y.data)&&d.every(y=>!y.isLoading&&!y.isError&&y.data)&&p.every(y=>!y.isLoading&&!y.isError&&y.data);w.useEffect(()=>{if(g){console.log("資料準備好準備設定setPokemon");let y=new Map;p.forEach(_=>{const{data:m}=_,I=m.name,S=m.damage_relations;y.set(I,S)}),i(p);let v=new Map;h.map(_=>{const{data:m}=_,I=m.id,S=m.names.filter(x=>x.language.name===y9)[0].name,R=m.name;v.set(I,{zhName:S,enName:R,pokeId:I})}),d.map(_=>{const{data:m}=_,I=m.id,S=m.sprites.other["official-artwork"].front_default,x=m.types.map(O=>{const j=O.type.name,Q=Ic.filter(X=>X.enType===j)[0];return Q.damage_relations=y.get(j),Q}),N=v.get(I);N.Types=x,N.sprite=S,v.set(I,N)}),n([...Array.from(v.values())])}r(!g)},[g])},Ak=w.createContext(),_9=({children:t})=>{const[e,n]=w.useState(""),r=ie=>{n(()=>ie)},[i,s]=w.useState([]),[o,a]=w.useState(!1),[l,u]=w.useState(0),[c,h]=w.useState(!1),d=ie=>{s(pe=>[...pe,...ie])},f=ie=>{a(()=>ie??o)},p=()=>{u(ie=>ie+lf)},g=ie=>{h(()=>ie)},[E,y]=w.useState([]),v=ie=>{y(pe=>{const Ft=[...pe];return Ft.some(tn=>tn.enName===ie.enName)?Ft.filter(tn=>tn.enName!==ie.enName):[...Ft,ie]})},_=ie=>{y(pe=>pe.filter(Ft=>Ft.enName!==ie.enName))},[m,I]=w.useState([]),S=ie=>{I(()=>ie)},[R,x]=w.useState([]),N=ie=>{x(()=>ie.map(pe=>pe.data))},O=TF.filter(ie=>ie.default===!0)[0],[j,Q]=w.useState({type:O.type,title:O.title}),[X,ve]=w.useState({type:O.type,title:O.title}),[re,fe]=w.useState({type:O.type,title:O.title}),de=IF.filter(ie=>ie.default===!0)[0],[F,z]=w.useState({type:de.type,title:de.title}),[q,se]=w.useState({type:de.type,title:de.title}),[oe,be]=w.useState({type:de.type,title:de.title}),Pe=(ie,pe)=>{Q({type:ie,title:pe})},_e=(ie,pe)=>{ve({type:ie,title:pe})},$e=(ie,pe)=>{fe({type:ie,title:pe})},Mt=(ie,pe)=>{z({type:ie,title:pe})},en=(ie,pe)=>{se({type:ie,title:pe})},xe=(ie,pe)=>{be({type:ie,title:pe})},[Kt,mn]=w.useState(Zx),fr=({enType:ie,zhType:pe,bgColor:Ft})=>{mn(()=>({enType:ie,zhType:pe,bgColor:Ft}))},[Rt,Cn]=w.useState([]),[ke,Fn]=w.useState([]),Ln=ie=>{Cn(()=>ie)},Ts=ie=>{Fn(()=>ie)};return T.jsx(Ak.Provider,{value:{searchPokemon:e,handleSearchPokemon:r,storePokemon:i,handleStorePokemon:d,isLoadingPokemon:o,handleIsLoadingPokemon:f,page:l,handleNextPage:p,searchMorePokemon:c,handleSearchMorePokemon:g,selectImg:E,AddRemoveImg:v,RemoveImg:_,bestDamage:m,handleBestDamage:S,storeAllTypes:R,handleStoreAllTypes:N,showInfo_select:j,showType_select:F,showInfo_beenSelect:X,showType_beenSelect:q,showInfo_bestDamage:re,showType_bestDamage:oe,filterType:Kt,handleShowInfo_select:Pe,handleShowType_select:Mt,handleShowInfo_beenSelect:_e,handleShowType_beenSelect:en,handleShowInfo_bestDamage:$e,handleShowType_bestDamage:xe,handleFilterType:fr,popularPokemon:Rt,filterBestPokemon:ke,handlePopularPokemon:Ln,handleFilterBestPokemon:Ts},children:t})},Vr=()=>w.useContext(Ak);var bk={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(bk);var w9=bk.exports;const ee=mc(w9);function tv(){return tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tv.apply(this,arguments)}function Pk(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function _I(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function E9(t){var e=T9(t,"string");return typeof e=="symbol"?e:String(e)}function T9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I9(t,e,n){var r=w.useRef(t!==void 0),i=w.useState(e),s=i[0],o=i[1],a=t!==void 0,l=r.current;return r.current=a,!a&&l&&s!==e&&o(e),[a?t:s,w.useCallback(function(u){for(var c=arguments.length,h=new Array(c>1?c-1:0),d=1;d<c;d++)h[d-1]=arguments[d];n&&n.apply(void 0,[u].concat(h)),o(u)},[n])]}function t0(t,e){return Object.keys(e).reduce(function(n,r){var i,s=n,o=s[_I(r)],a=s[r],l=Pk(s,[_I(r),r].map(E9)),u=e[r],c=I9(a,o,t[u]),h=c[0],d=c[1];return tv({},l,(i={},i[r]=h,i[u]=d,i))},t)}function nv(t,e){return nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nv(t,e)}function S9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,nv(t,e)}const R9=["xxl","xl","lg","md","sm","xs"],x9="xs",Np=w.createContext({prefixes:{},breakpoints:R9,minBreakpoint:x9});function le(t,e){const{prefixes:n}=w.useContext(Np);return t||n[e]||e}function kk(){const{breakpoints:t}=w.useContext(Np);return t}function Dk(){const{minBreakpoint:t}=w.useContext(Np);return t}function Nk(){const{dir:t}=w.useContext(Np);return t==="rtl"}function Qc(t){return t&&t.ownerDocument||document}function C9(t){var e=Qc(t);return e&&e.defaultView||window}function A9(t,e){return C9(t).getComputedStyle(t,e)}var b9=/([A-Z])/g;function P9(t){return t.replace(b9,"-$1").toLowerCase()}var k9=/^ms-/;function kh(t){return P9(t).replace(k9,"-ms-")}var D9=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function N9(t){return!!(t&&D9.test(t))}function Zr(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(kh(e))||A9(t).getPropertyValue(kh(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(kh(i)):N9(i)?r+=i+"("+s+") ":n+=kh(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}var Ok={exports:{}},O9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",V9=O9,M9=V9;function Vk(){}function Mk(){}Mk.resetWarningCache=Vk;var F9=function(){function t(r,i,s,o,a,l){if(l!==M9){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Mk,resetWarningCache:Vk};return n.PropTypes=n,n};Ok.exports=F9();var L9=Ok.exports;const ei=mc(L9),wI={disabled:!1},Fk=He.createContext(null);var $9=function(e){return e.scrollTop},Xl="unmounted",Pi="exited",sr="entering",Br="entered",hc="exiting",yi=function(t){S9(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Pi,s.appearStatus=sr):l=Br:r.unmountOnExit||r.mountOnEnter?l=Xl:l=Pi,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Xl?{status:Pi}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==sr&&o!==Br&&(s=sr):(o===sr||o===Br)&&(s=hc)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===sr){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:ia.findDOMNode(this);o&&$9(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Pi&&this.setState({status:Xl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[ia.findDOMNode(this),a],u=l[0],c=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!i&&!o||wI.disabled){this.safeSetState({status:Br},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:sr},function(){s.props.onEntering(u,c),s.onTransitionEnd(d,function(){s.safeSetState({status:Br},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:ia.findDOMNode(this);if(!s||wI.disabled){this.safeSetState({status:Pi},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:hc},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Pi},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:ia.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Xl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Pk(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return He.createElement(Fk.Provider,{value:null},typeof o=="function"?o(i,a):He.cloneElement(He.Children.only(o),a))},e}(He.Component);yi.contextType=Fk;yi.propTypes={};function Mo(){}yi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Mo,onEntering:Mo,onEntered:Mo,onExit:Mo,onExiting:Mo,onExited:Mo};yi.UNMOUNTED=Xl;yi.EXITED=Pi;yi.ENTERING=sr;yi.ENTERED=Br;yi.EXITING=hc;const j9=yi,hl=!!(typeof window<"u"&&window.document&&window.document.createElement);var rv=!1,iv=!1;try{var Hm={get passive(){return rv=!0},get once(){return iv=rv=!0}};hl&&(window.addEventListener("test",Hm,Hm),window.removeEventListener("test",Hm,!0))}catch{}function n0(t,e,n,r){if(r&&typeof r!="boolean"&&!iv){var i=r.once,s=r.capture,o=n;!iv&&i&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,rv?r:s)}t.addEventListener(e,n,r)}function sv(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}function Li(t,e,n,r){return n0(t,e,n,r),function(){sv(t,e,n,r)}}function U9(t,e,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function B9(t){var e=Zr(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function z9(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||U9(t,"transitionend",!0)},e+n),s=Li(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function Lk(t,e,n,r){n==null&&(n=B9(t)||0);var i=z9(t,n,r),s=Li(t,"transitionend",e);return function(){i(),s()}}function EI(t,e){const n=Zr(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function r0(t,e){const n=EI(t,"transitionDuration"),r=EI(t,"transitionDelay"),i=Lk(t,s=>{s.target===t&&(i(),e(s))},n+r)}function Fl(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...i){e.apply(this,i),n.apply(this,i)}},null)}function $k(t){t.offsetHeight}const TI=t=>!t||typeof t=="function"?t:e=>{t.current=e};function q9(t,e){const n=TI(t),r=TI(e);return i=>{n&&n(i),r&&r(i)}}function xo(t,e){return w.useMemo(()=>q9(t,e),[t,e])}function K9(t){return t&&"setState"in t?ia.findDOMNode(t):t??null}const H9=He.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:a,childRef:l,...u},c)=>{const h=w.useRef(null),d=xo(h,l),f=S=>{d(K9(S))},p=S=>R=>{S&&h.current&&S(h.current,R)},g=w.useCallback(p(t),[t]),E=w.useCallback(p(e),[e]),y=w.useCallback(p(n),[n]),v=w.useCallback(p(r),[r]),_=w.useCallback(p(i),[i]),m=w.useCallback(p(s),[s]),I=w.useCallback(p(o),[o]);return T.jsx(j9,{ref:c,...u,onEnter:g,onEntered:y,onEntering:E,onExit:v,onExited:m,onExiting:_,addEndListener:I,nodeRef:h,children:typeof a=="function"?(S,R)=>a(S,{...R,ref:f}):He.cloneElement(a,{ref:f})})}),i0=H9,G9={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Q9(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,r=e[n],i=G9[t];return r+parseInt(Zr(e,i[0]),10)+parseInt(Zr(e,i[1]),10)}const W9={[Pi]:"collapse",[hc]:"collapsing",[sr]:"collapsing",[Br]:"collapse show"},Y9=He.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,className:s,children:o,dimension:a="height",in:l=!1,timeout:u=300,mountOnEnter:c=!1,unmountOnExit:h=!1,appear:d=!1,getDimensionValue:f=Q9,...p},g)=>{const E=typeof a=="function"?a():a,y=w.useMemo(()=>Fl(S=>{S.style[E]="0"},t),[E,t]),v=w.useMemo(()=>Fl(S=>{const R=`scroll${E[0].toUpperCase()}${E.slice(1)}`;S.style[E]=`${S[R]}px`},e),[E,e]),_=w.useMemo(()=>Fl(S=>{S.style[E]=null},n),[E,n]),m=w.useMemo(()=>Fl(S=>{S.style[E]=`${f(E,S)}px`,$k(S)},r),[r,f,E]),I=w.useMemo(()=>Fl(S=>{S.style[E]=null},i),[E,i]);return T.jsx(i0,{ref:g,addEndListener:r0,...p,"aria-expanded":p.role?l:null,onEnter:y,onEntering:v,onEntered:_,onExit:m,onExiting:I,childRef:o.ref,in:l,timeout:u,mountOnEnter:c,unmountOnExit:h,appear:d,children:(S,R)=>He.cloneElement(o,{...R,className:ee(s,o.props.className,W9[S],E==="width"&&"collapse-horizontal")})})}),jk=Y9;function X9(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t},[t]),e}function ut(t){const e=X9(t);return w.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Uk=t=>w.forwardRef((e,n)=>T.jsx("div",{...e,ref:n,className:ee(e.className,t)}));function Bk(){return w.useState(null)}function J9(t,e,n,r=!1){const i=ut(n);w.useEffect(()=>{const s=typeof t=="function"?t():t;return s.addEventListener(e,i,r),()=>s.removeEventListener(e,i,r)},[t])}function zk(){const t=w.useRef(!0),e=w.useRef(()=>t.current);return w.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function qk(t){const e=w.useRef(null);return w.useEffect(()=>{e.current=t}),e.current}const Z9=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",ez=typeof document<"u",uf=ez||Z9?w.useLayoutEffect:w.useEffect,tz=["as","disabled"];function nz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rz(t){return!t||t.trim()==="#"}function s0({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||r!=null||i!=null?t="a":t="button");const u={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},u];const c=d=>{if((e||t==="a"&&rz(n))&&d.preventDefault(),e){d.stopPropagation();return}o==null||o(d)},h=d=>{d.key===" "&&(d.preventDefault(),c(d))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:c,onKeyDown:h},u]}const o0=w.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=nz(t,tz);const[s,{tagName:o}]=s0(Object.assign({tagName:n,disabled:r},i));return T.jsx(o,Object.assign({},i,s,{ref:e}))});o0.displayName="Button";const iz=["onKeyDown"];function sz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function oz(t){return!t||t.trim()==="#"}const Kk=w.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=sz(t,iz);const[i]=s0(Object.assign({tagName:"a"},r)),s=ut(o=>{i.onKeyDown(o),n==null||n(o)});return oz(r.href)||r.role==="button"?T.jsx("a",Object.assign({ref:e},r,i,{onKeyDown:s})):T.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});Kk.displayName="Anchor";const Hk=Kk,az={[sr]:"show",[Br]:"show"},Gk=w.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=w.useCallback((l,u)=>{$k(l),r==null||r(l,u)},[r]);return T.jsx(i0,{ref:s,addEndListener:r0,...o,onEnter:a,childRef:e.ref,children:(l,u)=>w.cloneElement(e,{...u,className:ee("fade",t,e.props.className,az[l],n[l])})})});Gk.displayName="Fade";const a0=Gk,lz={"aria-label":ei.string,onClick:ei.func,variant:ei.oneOf(["white"])},l0=w.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>T.jsx("button",{ref:i,type:"button",className:ee("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));l0.displayName="CloseButton";l0.propTypes=lz;const uz=l0,Qk=w.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:o,...a},l)=>{const u=le(e,"btn"),[c,{tagName:h}]=s0({tagName:t,disabled:s,...a}),d=h;return T.jsx(d,{...c,...a,ref:l,disabled:s,className:ee(o,u,i&&"active",n&&`${u}-${n}`,r&&`${u}-${r}`,a.href&&s&&"disabled")})});Qk.displayName="Button";const Wk=Qk,Yk=w.forwardRef(({bsPrefix:t,size:e,vertical:n=!1,className:r,role:i="group",as:s="div",...o},a)=>{const l=le(t,"btn-group");let u=l;return n&&(u=`${l}-vertical`),T.jsx(s,{...o,ref:a,role:i,className:ee(r,u,e&&`${l}-${e}`)})});Yk.displayName="ButtonGroup";const cz=Yk,Xk=w.createContext(null);Xk.displayName="CardHeaderContext";const hz=Xk;function dz(t){const e=w.useRef(t);return e.current=t,e}function Jk(t){const e=dz(t);w.useEffect(()=>()=>e.current(),[])}function fz(t,e){return w.Children.toArray(t).some(n=>w.isValidElement(n)&&n.type===e)}function pz({as:t,bsPrefix:e,className:n,...r}){e=le(e,"col");const i=kk(),s=Dk(),o=[],a=[];return i.forEach(l=>{const u=r[l];delete r[l];let c,h,d;typeof u=="object"&&u!=null?{span:c,offset:h,order:d}=u:c=u;const f=l!==s?`-${l}`:"";c&&o.push(c===!0?`${e}${f}`:`${e}${f}-${c}`),d!=null&&a.push(`order${f}-${d}`),h!=null&&a.push(`offset${f}-${h}`)}),[{...r,className:ee(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const Zk=w.forwardRef((t,e)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=pz(t);return T.jsx(i,{...r,ref:e,className:ee(n,!o.length&&s)})});Zk.displayName="Col";const Jl=Zk,eD=w.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...i},s)=>{const o=le(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return T.jsx(n,{ref:s,...i,className:ee(r,e?`${o}${a}`:o)})});eD.displayName="Container";const u0=eD;var mz=Function.prototype.bind.call(Function.prototype.call,[].slice);function jr(t,e){return mz(t.querySelectorAll(e))}function gz(t,e,n){const r=w.useRef(t!==void 0),[i,s]=w.useState(e),o=t!==void 0,a=r.current;return r.current=o,!o&&a&&i!==e&&s(e),[o?t:i,w.useCallback((...l)=>{const[u,...c]=l;let h=n==null?void 0:n(u,...c);return s(u),h},[n])]}function tD(){const[,t]=w.useReducer(e=>!e,!1);return t}const yz=w.createContext(null),Op=yz;var II=Object.prototype.hasOwnProperty;function SI(t,e,n){for(n of t.keys())if(vu(n,e))return n}function vu(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&vu(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=SI(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=SI(e,i),!i)||!vu(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(II.call(t,n)&&++r&&!II.call(e,n)||!(n in e)||!vu(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function vz(t){const e=zk();return[t[0],w.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var Rn="top",Xn="bottom",Jn="right",xn="left",c0="auto",Wc=[Rn,Xn,Jn,xn],Ba="start",dc="end",_z="clippingParents",nD="viewport",Ll="popper",wz="reference",RI=Wc.reduce(function(t,e){return t.concat([e+"-"+Ba,e+"-"+dc])},[]),rD=[].concat(Wc,[c0]).reduce(function(t,e){return t.concat([e,e+"-"+Ba,e+"-"+dc])},[]),Ez="beforeRead",Tz="read",Iz="afterRead",Sz="beforeMain",Rz="main",xz="afterMain",Cz="beforeWrite",Az="write",bz="afterWrite",Pz=[Ez,Tz,Iz,Sz,Rz,xz,Cz,Az,bz];function Pr(t){return t.split("-")[0]}function On(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function go(t){var e=On(t).Element;return t instanceof e||t instanceof Element}function kr(t){var e=On(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function h0(t){if(typeof ShadowRoot>"u")return!1;var e=On(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Ws=Math.max,cf=Math.min,za=Math.round;function ov(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function iD(){return!/^((?!chrome|android).)*safari/i.test(ov())}function qa(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&kr(t)&&(i=t.offsetWidth>0&&za(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&za(r.height)/t.offsetHeight||1);var o=go(t)?On(t):window,a=o.visualViewport,l=!iD()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/s,h=r.width/i,d=r.height/s;return{width:h,height:d,top:c,right:u+h,bottom:c+d,left:u,x:u,y:c}}function d0(t){var e=qa(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function sD(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&h0(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function us(t){return t?(t.nodeName||"").toLowerCase():null}function li(t){return On(t).getComputedStyle(t)}function kz(t){return["table","td","th"].indexOf(us(t))>=0}function Es(t){return((go(t)?t.ownerDocument:t.document)||window.document).documentElement}function Vp(t){return us(t)==="html"?t:t.assignedSlot||t.parentNode||(h0(t)?t.host:null)||Es(t)}function xI(t){return!kr(t)||li(t).position==="fixed"?null:t.offsetParent}function Dz(t){var e=/firefox/i.test(ov()),n=/Trident/i.test(ov());if(n&&kr(t)){var r=li(t);if(r.position==="fixed")return null}var i=Vp(t);for(h0(i)&&(i=i.host);kr(i)&&["html","body"].indexOf(us(i))<0;){var s=li(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Yc(t){for(var e=On(t),n=xI(t);n&&kz(n)&&li(n).position==="static";)n=xI(n);return n&&(us(n)==="html"||us(n)==="body"&&li(n).position==="static")?e:n||Dz(t)||e}function f0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function _u(t,e,n){return Ws(t,cf(e,n))}function Nz(t,e,n){var r=_u(t,e,n);return r>n?n:r}function oD(){return{top:0,right:0,bottom:0,left:0}}function aD(t){return Object.assign({},oD(),t)}function lD(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Oz=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,aD(typeof e!="number"?e:lD(e,Wc))};function Vz(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Pr(n.placement),l=f0(a),u=[xn,Jn].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var h=Oz(i.padding,n),d=d0(s),f=l==="y"?Rn:xn,p=l==="y"?Xn:Jn,g=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],E=o[l]-n.rects.reference[l],y=Yc(s),v=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,_=g/2-E/2,m=h[f],I=v-d[c]-h[p],S=v/2-d[c]/2+_,R=_u(m,S,I),x=l;n.modifiersData[r]=(e={},e[x]=R,e.centerOffset=R-S,e)}}function Mz(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||sD(e.elements.popper,i)&&(e.elements.arrow=i))}const Fz={name:"arrow",enabled:!0,phase:"main",fn:Vz,effect:Mz,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ka(t){return t.split("-")[1]}var Lz={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $z(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:za(n*i)/i||0,y:za(r*i)/i||0}}function CI(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,h=t.isFixed,d=o.x,f=d===void 0?0:d,p=o.y,g=p===void 0?0:p,E=typeof c=="function"?c({x:f,y:g}):{x:f,y:g};f=E.x,g=E.y;var y=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),_=xn,m=Rn,I=window;if(u){var S=Yc(n),R="clientHeight",x="clientWidth";if(S===On(n)&&(S=Es(n),li(S).position!=="static"&&a==="absolute"&&(R="scrollHeight",x="scrollWidth")),S=S,i===Rn||(i===xn||i===Jn)&&s===dc){m=Xn;var N=h&&S===I&&I.visualViewport?I.visualViewport.height:S[R];g-=N-r.height,g*=l?1:-1}if(i===xn||(i===Rn||i===Xn)&&s===dc){_=Jn;var O=h&&S===I&&I.visualViewport?I.visualViewport.width:S[x];f-=O-r.width,f*=l?1:-1}}var j=Object.assign({position:a},u&&Lz),Q=c===!0?$z({x:f,y:g},On(n)):{x:f,y:g};if(f=Q.x,g=Q.y,l){var X;return Object.assign({},j,(X={},X[m]=v?"0":"",X[_]=y?"0":"",X.transform=(I.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",X))}return Object.assign({},j,(e={},e[m]=v?g+"px":"",e[_]=y?f+"px":"",e.transform="",e))}function jz(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Pr(e.placement),variation:Ka(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,CI(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,CI(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Uz={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jz,data:{}};var Dh={passive:!0};function Bz(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=On(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,Dh)}),a&&l.addEventListener("resize",n.update,Dh),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Dh)}),a&&l.removeEventListener("resize",n.update,Dh)}}const zz={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Bz,data:{}};var qz={left:"right",right:"left",bottom:"top",top:"bottom"};function od(t){return t.replace(/left|right|bottom|top/g,function(e){return qz[e]})}var Kz={start:"end",end:"start"};function AI(t){return t.replace(/start|end/g,function(e){return Kz[e]})}function p0(t){var e=On(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function m0(t){return qa(Es(t)).left+p0(t).scrollLeft}function Hz(t,e){var n=On(t),r=Es(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=iD();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+m0(t),y:l}}function Gz(t){var e,n=Es(t),r=p0(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Ws(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Ws(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+m0(t),l=-r.scrollTop;return li(i||n).direction==="rtl"&&(a+=Ws(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function g0(t){var e=li(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function uD(t){return["html","body","#document"].indexOf(us(t))>=0?t.ownerDocument.body:kr(t)&&g0(t)?t:uD(Vp(t))}function wu(t,e){var n;e===void 0&&(e=[]);var r=uD(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=On(r),o=i?[s].concat(s.visualViewport||[],g0(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(wu(Vp(o)))}function av(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Qz(t,e){var n=qa(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function bI(t,e,n){return e===nD?av(Hz(t,n)):go(e)?Qz(e,n):av(Gz(Es(t)))}function Wz(t){var e=wu(Vp(t)),n=["absolute","fixed"].indexOf(li(t).position)>=0,r=n&&kr(t)?Yc(t):t;return go(r)?e.filter(function(i){return go(i)&&sD(i,r)&&us(i)!=="body"}):[]}function Yz(t,e,n,r){var i=e==="clippingParents"?Wz(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,u){var c=bI(t,u,r);return l.top=Ws(c.top,l.top),l.right=cf(c.right,l.right),l.bottom=cf(c.bottom,l.bottom),l.left=Ws(c.left,l.left),l},bI(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function cD(t){var e=t.reference,n=t.element,r=t.placement,i=r?Pr(r):null,s=r?Ka(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Rn:l={x:o,y:e.y-n.height};break;case Xn:l={x:o,y:e.y+e.height};break;case Jn:l={x:e.x+e.width,y:a};break;case xn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?f0(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Ba:l[u]=l[u]-(e[c]/2-n[c]/2);break;case dc:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function fc(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?_z:a,u=n.rootBoundary,c=u===void 0?nD:u,h=n.elementContext,d=h===void 0?Ll:h,f=n.altBoundary,p=f===void 0?!1:f,g=n.padding,E=g===void 0?0:g,y=aD(typeof E!="number"?E:lD(E,Wc)),v=d===Ll?wz:Ll,_=t.rects.popper,m=t.elements[p?v:d],I=Yz(go(m)?m:m.contextElement||Es(t.elements.popper),l,c,o),S=qa(t.elements.reference),R=cD({reference:S,element:_,strategy:"absolute",placement:i}),x=av(Object.assign({},_,R)),N=d===Ll?x:S,O={top:I.top-N.top+y.top,bottom:N.bottom-I.bottom+y.bottom,left:I.left-N.left+y.left,right:N.right-I.right+y.right},j=t.modifiersData.offset;if(d===Ll&&j){var Q=j[i];Object.keys(O).forEach(function(X){var ve=[Jn,Xn].indexOf(X)>=0?1:-1,re=[Rn,Xn].indexOf(X)>=0?"y":"x";O[X]+=Q[re]*ve})}return O}function Xz(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?rD:l,c=Ka(r),h=c?a?RI:RI.filter(function(p){return Ka(p)===c}):Wc,d=h.filter(function(p){return u.indexOf(p)>=0});d.length===0&&(d=h);var f=d.reduce(function(p,g){return p[g]=fc(t,{placement:g,boundary:i,rootBoundary:s,padding:o})[Pr(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}function Jz(t){if(Pr(t)===c0)return[];var e=od(t);return[AI(t),e,AI(e)]}function Zz(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,g=n.allowedAutoPlacements,E=e.options.placement,y=Pr(E),v=y===E,_=l||(v||!p?[od(E)]:Jz(E)),m=[E].concat(_).reduce(function(Pe,_e){return Pe.concat(Pr(_e)===c0?Xz(e,{placement:_e,boundary:c,rootBoundary:h,padding:u,flipVariations:p,allowedAutoPlacements:g}):_e)},[]),I=e.rects.reference,S=e.rects.popper,R=new Map,x=!0,N=m[0],O=0;O<m.length;O++){var j=m[O],Q=Pr(j),X=Ka(j)===Ba,ve=[Rn,Xn].indexOf(Q)>=0,re=ve?"width":"height",fe=fc(e,{placement:j,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),de=ve?X?Jn:xn:X?Xn:Rn;I[re]>S[re]&&(de=od(de));var F=od(de),z=[];if(s&&z.push(fe[Q]<=0),a&&z.push(fe[de]<=0,fe[F]<=0),z.every(function(Pe){return Pe})){N=j,x=!1;break}R.set(j,z)}if(x)for(var q=p?3:1,se=function(_e){var $e=m.find(function(Mt){var en=R.get(Mt);if(en)return en.slice(0,_e).every(function(xe){return xe})});if($e)return N=$e,"break"},oe=q;oe>0;oe--){var be=se(oe);if(be==="break")break}e.placement!==N&&(e.modifiersData[r]._skip=!0,e.placement=N,e.reset=!0)}}const eq={name:"flip",enabled:!0,phase:"main",fn:Zz,requiresIfExists:["offset"],data:{_skip:!1}};function PI(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function kI(t){return[Rn,Jn,Xn,xn].some(function(e){return t[e]>=0})}function tq(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=fc(e,{elementContext:"reference"}),a=fc(e,{altBoundary:!0}),l=PI(o,r),u=PI(a,i,s),c=kI(l),h=kI(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}const nq={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:tq};function rq(t,e,n){var r=Pr(t),i=[xn,Rn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[xn,Jn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function iq(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=rD.reduce(function(c,h){return c[h]=rq(h,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const sq={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:iq};function oq(t){var e=t.state,n=t.name;e.modifiersData[n]=cD({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const aq={name:"popperOffsets",enabled:!0,phase:"read",fn:oq,data:{}};function lq(t){return t==="x"?"y":"x"}function uq(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,h=n.padding,d=n.tether,f=d===void 0?!0:d,p=n.tetherOffset,g=p===void 0?0:p,E=fc(e,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),y=Pr(e.placement),v=Ka(e.placement),_=!v,m=f0(y),I=lq(m),S=e.modifiersData.popperOffsets,R=e.rects.reference,x=e.rects.popper,N=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,O=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Q={x:0,y:0};if(S){if(s){var X,ve=m==="y"?Rn:xn,re=m==="y"?Xn:Jn,fe=m==="y"?"height":"width",de=S[m],F=de+E[ve],z=de-E[re],q=f?-x[fe]/2:0,se=v===Ba?R[fe]:x[fe],oe=v===Ba?-x[fe]:-R[fe],be=e.elements.arrow,Pe=f&&be?d0(be):{width:0,height:0},_e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:oD(),$e=_e[ve],Mt=_e[re],en=_u(0,R[fe],Pe[fe]),xe=_?R[fe]/2-q-en-$e-O.mainAxis:se-en-$e-O.mainAxis,Kt=_?-R[fe]/2+q+en+Mt+O.mainAxis:oe+en+Mt+O.mainAxis,mn=e.elements.arrow&&Yc(e.elements.arrow),fr=mn?m==="y"?mn.clientTop||0:mn.clientLeft||0:0,Rt=(X=j==null?void 0:j[m])!=null?X:0,Cn=de+xe-Rt-fr,ke=de+Kt-Rt,Fn=_u(f?cf(F,Cn):F,de,f?Ws(z,ke):z);S[m]=Fn,Q[m]=Fn-de}if(a){var Ln,Ts=m==="x"?Rn:xn,ie=m==="x"?Xn:Jn,pe=S[I],Ft=I==="y"?"height":"width",Mr=pe+E[Ts],tn=pe-E[ie],pr=[Rn,xn].indexOf(y)!==-1,we=(Ln=j==null?void 0:j[I])!=null?Ln:0,xt=pr?Mr:pe-R[Ft]-x[Ft]-we+O.altAxis,vi=pr?pe+R[Ft]+x[Ft]-we-O.altAxis:tn,fl=f&&pr?Nz(xt,pe,vi):_u(f?xt:Mr,pe,f?vi:tn);S[I]=fl,Q[I]=fl-pe}e.modifiersData[r]=Q}}const cq={name:"preventOverflow",enabled:!0,phase:"main",fn:uq,requiresIfExists:["offset"]};function hq(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function dq(t){return t===On(t)||!kr(t)?p0(t):hq(t)}function fq(t){var e=t.getBoundingClientRect(),n=za(e.width)/t.offsetWidth||1,r=za(e.height)/t.offsetHeight||1;return n!==1||r!==1}function pq(t,e,n){n===void 0&&(n=!1);var r=kr(e),i=kr(e)&&fq(e),s=Es(e),o=qa(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((us(e)!=="body"||g0(s))&&(a=dq(e)),kr(e)?(l=qa(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=m0(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function mq(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function gq(t){var e=mq(t);return Pz.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function yq(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function vq(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var DI={placement:"bottom",modifiers:[],strategy:"absolute"};function NI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function _q(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?DI:i;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},DI,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],d=!1,f={state:c,setOptions:function(y){var v=typeof y=="function"?y(c.options):y;g(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:go(a)?wu(a):a.contextElement?wu(a.contextElement):[],popper:wu(l)};var _=gq(vq([].concat(r,c.options.modifiers)));return c.orderedModifiers=_.filter(function(m){return m.enabled}),p(),f.update()},forceUpdate:function(){if(!d){var y=c.elements,v=y.reference,_=y.popper;if(NI(v,_)){c.rects={reference:pq(v,Yc(_),c.options.strategy==="fixed"),popper:d0(_)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(O){return c.modifiersData[O.name]=Object.assign({},O.data)});for(var m=0;m<c.orderedModifiers.length;m++){if(c.reset===!0){c.reset=!1,m=-1;continue}var I=c.orderedModifiers[m],S=I.fn,R=I.options,x=R===void 0?{}:R,N=I.name;typeof S=="function"&&(c=S({state:c,options:x,name:N,instance:f})||c)}}}},update:yq(function(){return new Promise(function(E){f.forceUpdate(),E(c)})}),destroy:function(){g(),d=!0}};if(!NI(a,l))return f;f.setOptions(u).then(function(E){!d&&u.onFirstUpdate&&u.onFirstUpdate(E)});function p(){c.orderedModifiers.forEach(function(E){var y=E.name,v=E.options,_=v===void 0?{}:v,m=E.effect;if(typeof m=="function"){var I=m({state:c,name:y,instance:f,options:_}),S=function(){};h.push(I||S)}})}function g(){h.forEach(function(E){return E()}),h=[]}return f}}const wq=_q({defaultModifiers:[nq,aq,Uz,zz,sq,eq,cq,Fz]}),Eq=["enabled","placement","strategy","modifiers"];function Tq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Iq={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Sq={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:r}=t.elements,i=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},Rq=[];function xq(t,e,n={}){let{enabled:r=!0,placement:i="bottom",strategy:s="absolute",modifiers:o=Rq}=n,a=Tq(n,Eq);const l=w.useRef(o),u=w.useRef(),c=w.useCallback(()=>{var E;(E=u.current)==null||E.update()},[]),h=w.useCallback(()=>{var E;(E=u.current)==null||E.forceUpdate()},[]),[d,f]=vz(w.useState({placement:i,update:c,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),p=w.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:E})=>{const y={},v={};Object.keys(E.elements).forEach(_=>{y[_]=E.styles[_],v[_]=E.attributes[_]}),f({state:E,styles:y,attributes:v,update:c,forceUpdate:h,placement:E.placement})}}),[c,h,f]),g=w.useMemo(()=>(vu(l.current,o)||(l.current=o),l.current),[o]);return w.useEffect(()=>{!u.current||!r||u.current.setOptions({placement:i,strategy:s,modifiers:[...g,p,Iq]})},[s,i,p,r,g]),w.useEffect(()=>{if(!(!r||t==null||e==null))return u.current=wq(t,e,Object.assign({},a,{placement:i,strategy:s,modifiers:[...g,Sq,p]})),()=>{u.current!=null&&(u.current.destroy(),u.current=void 0,f(E=>Object.assign({},E,{attributes:{},styles:{popper:{}}})))}},[r,t,e]),d}function hf(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var Cq=function(){},Aq=Cq;const bq=mc(Aq),OI=()=>{};function Pq(t){return t.button===0}function kq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Gm=t=>t&&("current"in t?t.current:t),VI={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Dq(t,e=OI,{disabled:n,clickTrigger:r="click"}={}){const i=w.useRef(!1),s=w.useRef(!1),o=w.useCallback(u=>{const c=Gm(t);bq(!!c,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!c||kq(u)||!Pq(u)||!!hf(c,u.target)||s.current,s.current=!1},[t]),a=ut(u=>{const c=Gm(t);c&&hf(c,u.target)&&(s.current=!0)}),l=ut(u=>{i.current||e(u)});w.useEffect(()=>{var u,c;if(n||t==null)return;const h=Qc(Gm(t)),d=h.defaultView||window;let f=(u=d.event)!=null?u:(c=d.parent)==null?void 0:c.event,p=null;VI[r]&&(p=Li(h,VI[r],a,!0));const g=Li(h,r,o,!0),E=Li(h,r,v=>{if(v===f){f=void 0;return}l(v)});let y=[];return"ontouchstart"in h.documentElement&&(y=[].slice.call(h.body.children).map(v=>Li(v,"mousemove",OI))),()=>{p==null||p(),g(),E(),y.forEach(v=>v())}},[t,n,r,o,a,l])}function Nq(t){const e={};return Array.isArray(t)?(t==null||t.forEach(n=>{e[n.name]=n}),e):t||e}function Oq(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function Vq({enabled:t,enableEvents:e,placement:n,flip:r,offset:i,fixed:s,containerPadding:o,arrowElement:a,popperConfig:l={}}){var u,c,h,d,f;const p=Nq(l.modifiers);return Object.assign({},l,{placement:n,enabled:t,strategy:s?"fixed":l.strategy,modifiers:Oq(Object.assign({},p,{eventListeners:{enabled:e,options:(u=p.eventListeners)==null?void 0:u.options},preventOverflow:Object.assign({},p.preventOverflow,{options:o?Object.assign({padding:o},(c=p.preventOverflow)==null?void 0:c.options):(h=p.preventOverflow)==null?void 0:h.options}),offset:{options:Object.assign({offset:i},(d=p.offset)==null?void 0:d.options)},arrow:Object.assign({},p.arrow,{enabled:!!a,options:Object.assign({},(f=p.arrow)==null?void 0:f.options,{element:a})}),flip:Object.assign({enabled:!!r},p.flip)}))})}const Mq=["children"];function Fq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Lq=()=>{};function hD(t={}){const e=w.useContext(Op),[n,r]=Bk(),i=w.useRef(!1),{flip:s,offset:o,rootCloseEvent:a,fixed:l=!1,placement:u,popperConfig:c={},enableEventListeners:h=!0,usePopper:d=!!e}=t,f=(e==null?void 0:e.show)==null?!!t.show:e.show;f&&!i.current&&(i.current=!0);const p=S=>{e==null||e.toggle(!1,S)},{placement:g,setMenu:E,menuElement:y,toggleElement:v}=e||{},_=xq(v,y,Vq({placement:u||g||"bottom-start",enabled:d,enableEvents:h??f,offset:o,flip:s,fixed:l,arrowElement:n,popperConfig:c})),m=Object.assign({ref:E||Lq,"aria-labelledby":v==null?void 0:v.id},_.attributes.popper,{style:_.styles.popper}),I={show:f,placement:g,hasShown:i.current,toggle:e==null?void 0:e.toggle,popper:d?_:null,arrowProps:d?Object.assign({ref:r},_.attributes.arrow,{style:_.styles.arrow}):{}};return Dq(y,p,{clickTrigger:a,disabled:!f}),[m,I]}const $q={usePopper:!0};function y0(t){let{children:e}=t,n=Fq(t,Mq);const[r,i]=hD(n);return T.jsx(T.Fragment,{children:e(r,i)})}y0.displayName="DropdownMenu";y0.defaultProps=$q;const df={prefix:String(Math.round(Math.random()*1e10)),current:0},dD=He.createContext(df),jq=He.createContext(!1);let Uq=!!(typeof window<"u"&&window.document&&window.document.createElement),Qm=new WeakMap;function Bq(t=!1){let e=w.useContext(dD),n=w.useRef(null);if(n.current===null&&!t){var r,i;let s=(r=He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(s){let o=Qm.get(s);o==null?Qm.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==o.state&&(e.current=o.id,Qm.delete(s))}n.current=++e.current}return n.current}function zq(t){let e=w.useContext(dD);e===df&&!Uq&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Bq(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function qq(t){let e=He.useId(),[n]=w.useState(Wq()),r=n?"react-aria":`react-aria${df.prefix}`;return t||`${r}-${e}`}const Kq=typeof He.useId=="function"?qq:zq;function Hq(){return!1}function Gq(){return!0}function Qq(t){return()=>{}}function Wq(){return typeof He.useSyncExternalStore=="function"?He.useSyncExternalStore(Qq,Hq,Gq):w.useContext(jq)}const fD=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},MI=()=>{};function pD(){const t=Kq(),{show:e=!1,toggle:n=MI,setToggle:r,menuElement:i}=w.useContext(Op)||{},s=w.useCallback(a=>{n(!e,a)},[e,n]),o={id:t,ref:r||MI,onClick:s,"aria-expanded":!!e};return i&&fD(i)&&(o["aria-haspopup"]=!0),[o,{show:e,toggle:n}]}function mD({children:t}){const[e,n]=pD();return T.jsx(T.Fragment,{children:t(e,n)})}mD.displayName="DropdownToggle";const Yq=w.createContext(null),pc=(t,e=null)=>t!=null?String(t):e||null,yo=Yq,gD=w.createContext(null);gD.displayName="NavContext";const v0=gD,Xq="data-rr-ui-",Jq="rrUi";function dl(t){return`${Xq}${t}`}function Zq(t){return`${Jq}${t}`}const e7=["eventKey","disabled","onClick","active","as"];function t7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function yD({key:t,href:e,active:n,disabled:r,onClick:i}){const s=w.useContext(yo),o=w.useContext(v0),{activeKey:a}=o||{},l=pc(t,e),u=n==null&&t!=null?pc(a)===l:n;return[{onClick:ut(h=>{r||(i==null||i(h),s&&!h.isPropagationStopped()&&s(l,h))}),"aria-disabled":r||void 0,"aria-selected":u,[dl("dropdown-item")]:""},{isActive:u}]}const vD=w.forwardRef((t,e)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:o=o0}=t,a=t7(t,e7);const[l]=yD({key:n,href:a.href,disabled:r,onClick:i,active:s});return T.jsx(o,Object.assign({},a,{ref:e},l))});vD.displayName="DropdownItem";const _D=w.createContext(hl?window:void 0);_D.Provider;function Mp(){return w.useContext(_D)}function FI(){const t=tD(),e=w.useRef(null),n=w.useCallback(r=>{e.current=r,t()},[t]);return[e,n]}function Xc({defaultShow:t,show:e,onSelect:n,onToggle:r,itemSelector:i=`* [${dl("dropdown-item")}]`,focusFirstItemOnShow:s,placement:o="bottom-start",children:a}){const l=Mp(),[u,c]=gz(e,t,r),[h,d]=FI(),f=h.current,[p,g]=FI(),E=p.current,y=qk(u),v=w.useRef(null),_=w.useRef(!1),m=w.useContext(yo),I=w.useCallback((j,Q,X=Q==null?void 0:Q.type)=>{c(j,{originalEvent:Q,source:X})},[c]),S=ut((j,Q)=>{n==null||n(j,Q),I(!1,Q,"select"),Q.isPropagationStopped()||m==null||m(j,Q)}),R=w.useMemo(()=>({toggle:I,placement:o,show:u,menuElement:f,toggleElement:E,setMenu:d,setToggle:g}),[I,o,u,f,E,d,g]);f&&y&&!u&&(_.current=f.contains(f.ownerDocument.activeElement));const x=ut(()=>{E&&E.focus&&E.focus()}),N=ut(()=>{const j=v.current;let Q=s;if(Q==null&&(Q=h.current&&fD(h.current)?"keyboard":!1),Q===!1||Q==="keyboard"&&!/^key.+$/.test(j))return;const X=jr(h.current,i)[0];X&&X.focus&&X.focus()});w.useEffect(()=>{u?N():_.current&&(_.current=!1,x())},[u,_,x,N]),w.useEffect(()=>{v.current=null});const O=(j,Q)=>{if(!h.current)return null;const X=jr(h.current,i);let ve=X.indexOf(j)+Q;return ve=Math.max(0,Math.min(ve,X.length)),X[ve]};return J9(w.useCallback(()=>l.document,[l]),"keydown",j=>{var Q,X;const{key:ve}=j,re=j.target,fe=(Q=h.current)==null?void 0:Q.contains(re),de=(X=p.current)==null?void 0:X.contains(re);if(/input|textarea/i.test(re.tagName)&&(ve===" "||ve!=="Escape"&&fe||ve==="Escape"&&re.type==="search")||!fe&&!de||ve==="Tab"&&(!h.current||!u))return;v.current=j.type;const z={originalEvent:j,source:j.type};switch(ve){case"ArrowUp":{const q=O(re,-1);q&&q.focus&&q.focus(),j.preventDefault();return}case"ArrowDown":if(j.preventDefault(),!u)c(!0,z);else{const q=O(re,1);q&&q.focus&&q.focus()}return;case"Tab":n0(re.ownerDocument,"keyup",q=>{var se;(q.key==="Tab"&&!q.target||!((se=h.current)!=null&&se.contains(q.target)))&&c(!1,z)},{once:!0});break;case"Escape":ve==="Escape"&&(j.preventDefault(),j.stopPropagation()),c(!1,z);break}}),T.jsx(yo.Provider,{value:S,children:T.jsx(Op.Provider,{value:R,children:a})})}Xc.displayName="Dropdown";Xc.Menu=y0;Xc.Toggle=mD;Xc.Item=vD;const wD=w.createContext({});wD.displayName="DropdownContext";const ED=wD,TD=w.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:r="separator",...i},s)=>(e=le(e,"dropdown-divider"),T.jsx(n,{ref:s,className:ee(t,e),role:r,...i})));TD.displayName="DropdownDivider";const n7=TD,ID=w.forwardRef(({className:t,bsPrefix:e,as:n="div",role:r="heading",...i},s)=>(e=le(e,"dropdown-header"),T.jsx(n,{ref:s,className:ee(t,e),role:r,...i})));ID.displayName="DropdownHeader";const r7=ID,SD=w.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:r=!1,onClick:i,active:s,as:o=Hk,...a},l)=>{const u=le(t,"dropdown-item"),[c,h]=yD({key:n,href:a.href,disabled:r,onClick:i,active:s});return T.jsx(o,{...a,...c,ref:l,className:ee(e,u,h.isActive&&"active",r&&"disabled")})});SD.displayName="DropdownItem";const i7=SD,RD=w.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=le(e,"dropdown-item-text"),T.jsx(n,{ref:i,className:ee(t,e),...r})));RD.displayName="DropdownItemText";const s7=RD,xD=w.createContext(null);xD.displayName="InputGroupContext";const _0=xD,CD=w.createContext(null);CD.displayName="NavbarContext";const Co=CD;function AD(t,e){return t}function bD(t,e,n){const r=n?"top-end":"top-start",i=n?"top-start":"top-end",s=n?"bottom-end":"bottom-start",o=n?"bottom-start":"bottom-end",a=n?"right-start":"left-start",l=n?"right-end":"left-end",u=n?"left-start":"right-start",c=n?"left-end":"right-end";let h=t?o:s;return e==="up"?h=t?i:r:e==="end"?h=t?c:u:e==="start"?h=t?l:a:e==="down-centered"?h="bottom":e==="up-centered"&&(h="top"),h}const PD=w.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:r,flip:i=!0,show:s,renderOnMount:o,as:a="div",popperConfig:l,variant:u,...c},h)=>{let d=!1;const f=w.useContext(Co),p=le(t,"dropdown-menu"),{align:g,drop:E,isRTL:y}=w.useContext(ED);n=n||g;const v=w.useContext(_0),_=[];if(n)if(typeof n=="object"){const j=Object.keys(n);if(j.length){const Q=j[0],X=n[Q];d=X==="start",_.push(`${p}-${Q}-${X}`)}}else n==="end"&&(d=!0);const m=bD(d,E,y),[I,{hasShown:S,popper:R,show:x,toggle:N}]=hD({flip:i,rootCloseEvent:r,show:s,usePopper:!f&&_.length===0,offset:[0,2],popperConfig:l,placement:m});if(I.ref=xo(AD(h),I.ref),uf(()=>{x&&(R==null||R.update())},[x]),!S&&!o&&!v)return null;typeof a!="string"&&(I.show=x,I.close=()=>N==null?void 0:N(!1),I.align=n);let O=c.style;return R!=null&&R.placement&&(O={...c.style,...I.style},c["x-placement"]=R.placement),T.jsx(a,{...c,...I,style:O,...(_.length||f)&&{"data-bs-popper":"static"},className:ee(e,p,x&&"show",d&&`${p}-end`,u&&`${p}-${u}`,..._)})});PD.displayName="DropdownMenu";const o7=PD,kD=w.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:r,as:i=Wk,...s},o)=>{const a=le(t,"dropdown-toggle"),l=w.useContext(Op);r!==void 0&&(s.bsPrefix=r);const[u]=pD();return u.ref=xo(u.ref,AD(o)),T.jsx(i,{className:ee(n,a,e&&`${a}-split`,(l==null?void 0:l.show)&&"show"),...u,...s})});kD.displayName="DropdownToggle";const a7=kD,DD=w.forwardRef((t,e)=>{const{bsPrefix:n,drop:r="down",show:i,className:s,align:o="start",onSelect:a,onToggle:l,focusFirstItemOnShow:u,as:c="div",navbar:h,autoClose:d=!0,...f}=t0(t,{show:"onToggle"}),p=w.useContext(_0),g=le(n,"dropdown"),E=Nk(),y=R=>d===!1?R==="click":d==="inside"?R!=="rootClose":d==="outside"?R!=="select":!0,v=ut((R,x)=>{x.originalEvent.currentTarget===document&&(x.source!=="keydown"||x.originalEvent.key==="Escape")&&(x.source="rootClose"),y(x.source)&&(l==null||l(R,x))}),m=bD(o==="end",r,E),I=w.useMemo(()=>({align:o,drop:r,isRTL:E}),[o,r,E]),S={down:g,"down-centered":`${g}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return T.jsx(ED.Provider,{value:I,children:T.jsx(Xc,{placement:m,show:i,onSelect:a,onToggle:v,focusFirstItemOnShow:u,itemSelector:`.${g}-item:not(.disabled):not(:disabled)`,children:p?f.children:T.jsx(c,{...f,ref:e,className:ee(s,i&&"show",S[r])})})})});DD.displayName="Dropdown";const $l=Object.assign(DD,{Toggle:a7,Menu:o7,Item:i7,ItemText:s7,Divider:n7,Header:r7}),l7={type:ei.string,tooltip:ei.bool,as:ei.elementType},w0=w.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...i},s)=>T.jsx(t,{...i,ref:s,className:ee(e,`${n}-${r?"tooltip":"feedback"}`)}));w0.displayName="Feedback";w0.propTypes=l7;const ND=w0,u7=w.createContext({}),ui=u7,OD=w.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:o="input",...a},l)=>{const{controlId:u}=w.useContext(ui);return e=le(e,"form-check-input"),T.jsx(o,{...a,ref:l,type:r,id:t||u,className:ee(n,e,i&&"is-valid",s&&"is-invalid")})});OD.displayName="FormCheckInput";const Fp=OD,VD=w.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},i)=>{const{controlId:s}=w.useContext(ui);return t=le(t,"form-check-label"),T.jsx("label",{...r,ref:i,htmlFor:n||s,className:ee(e,t)})});VD.displayName="FormCheckLabel";const lv=VD,MD=w.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:u,feedbackType:c,className:h,style:d,title:f="",type:p="checkbox",label:g,children:E,as:y="input",...v},_)=>{e=le(e,"form-check"),n=le(n,"form-switch");const{controlId:m}=w.useContext(ui),I=w.useMemo(()=>({controlId:t||m}),[m,t]),S=!E&&g!=null&&g!==!1||fz(E,lv),R=T.jsx(Fp,{...v,type:p==="switch"?"checkbox":p,ref:_,isValid:o,isInvalid:a,disabled:s,as:y});return T.jsx(ui.Provider,{value:I,children:T.jsx("div",{style:d,className:ee(h,S&&e,r&&`${e}-inline`,i&&`${e}-reverse`,p==="switch"&&n),children:E||T.jsxs(T.Fragment,{children:[R,S&&T.jsx(lv,{title:f,children:g}),u&&T.jsx(ND,{type:c,tooltip:l,children:u})]})})})});MD.displayName="FormCheck";const ff=Object.assign(MD,{Input:Fp,Label:lv}),FD=w.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:i,className:s,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:u,as:c="input",...h},d)=>{const{controlId:f}=w.useContext(ui);return t=le(t,"form-control"),T.jsx(c,{...h,type:e,size:r,ref:d,readOnly:u,id:i||f,className:ee(s,l?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",a&&"is-invalid")})});FD.displayName="FormControl";const c7=Object.assign(FD,{Feedback:ND}),LD=w.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=le(e,"form-floating"),T.jsx(n,{ref:i,className:ee(t,e),...r})));LD.displayName="FormFloating";const h7=LD,$D=w.forwardRef(({controlId:t,as:e="div",...n},r)=>{const i=w.useMemo(()=>({controlId:t}),[t]);return T.jsx(ui.Provider,{value:i,children:T.jsx(e,{...n,ref:r})})});$D.displayName="FormGroup";const jD=$D,UD=w.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...o},a)=>{const{controlId:l}=w.useContext(ui);e=le(e,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const c=ee(i,e,r&&"visually-hidden",n&&u);return s=s||l,n?T.jsx(Jl,{ref:a,as:"label",className:c,htmlFor:s,...o}):T.jsx(t,{ref:a,className:c,htmlFor:s,...o})});UD.displayName="FormLabel";const d7=UD,BD=w.forwardRef(({bsPrefix:t,className:e,id:n,...r},i)=>{const{controlId:s}=w.useContext(ui);return t=le(t,"form-range"),T.jsx("input",{...r,type:"range",ref:i,className:ee(e,t),id:n||s})});BD.displayName="FormRange";const f7=BD,zD=w.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:o,...a},l)=>{const{controlId:u}=w.useContext(ui);return t=le(t,"form-select"),T.jsx("select",{...a,size:n,ref:l,className:ee(r,t,e&&`${t}-${e}`,i&&"is-valid",s&&"is-invalid"),id:o||u})});zD.displayName="FormSelect";const p7=zD,qD=w.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...i},s)=>(t=le(t,"form-text"),T.jsx(n,{...i,ref:s,className:ee(e,t,r&&"text-muted")})));qD.displayName="FormText";const m7=qD,KD=w.forwardRef((t,e)=>T.jsx(ff,{...t,ref:e,type:"switch"}));KD.displayName="Switch";const g7=Object.assign(KD,{Input:ff.Input,Label:ff.Label}),HD=w.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:i,...s},o)=>(t=le(t,"form-floating"),T.jsxs(jD,{ref:o,className:ee(e,t),controlId:r,...s,children:[n,T.jsx("label",{htmlFor:r,children:i})]})));HD.displayName="FloatingLabel";const y7=HD,v7={_ref:ei.any,validated:ei.bool,as:ei.elementType},E0=w.forwardRef(({className:t,validated:e,as:n="form",...r},i)=>T.jsx(n,{...r,ref:i,className:ee(t,e&&"was-validated")}));E0.displayName="Form";E0.propTypes=v7;const _7=Object.assign(E0,{Group:jD,Control:c7,Floating:h7,Check:ff,Switch:g7,Label:d7,Text:m7,Range:f7,Select:p7,FloatingLabel:y7}),GD=w.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=le(e,"input-group-text"),T.jsx(n,{ref:i,className:ee(t,e),...r})));GD.displayName="InputGroupText";const T0=GD,w7=t=>T.jsx(T0,{children:T.jsx(Fp,{type:"checkbox",...t})}),E7=t=>T.jsx(T0,{children:T.jsx(Fp,{type:"radio",...t})}),QD=w.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:r,as:i="div",...s},o)=>{t=le(t,"input-group");const a=w.useMemo(()=>({}),[]);return T.jsx(_0.Provider,{value:a,children:T.jsx(i,{ref:o,...s,className:ee(r,t,e&&`${t}-${e}`,n&&"has-validation")})})});QD.displayName="InputGroup";const T7=Object.assign(QD,{Text:T0,Radio:E7,Checkbox:w7}),I7=w.createContext(null),WD=I7,S7=["as","active","eventKey"];function R7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function YD({key:t,onClick:e,active:n,id:r,role:i,disabled:s}){const o=w.useContext(yo),a=w.useContext(v0),l=w.useContext(WD);let u=n;const c={role:i};if(a){!i&&a.role==="tablist"&&(c.role="tab");const h=a.getControllerId(t??null),d=a.getControlledId(t??null);c[dl("event-key")]=t,c.id=h||r,u=n==null&&t!=null?a.activeKey===t:n,(u||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(c["aria-controls"]=d)}return c.role==="tab"&&(c["aria-selected"]=u,u||(c.tabIndex=-1),s&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=ut(h=>{s||(e==null||e(h),t!=null&&o&&!h.isPropagationStopped()&&o(t,h))}),[c,{isActive:u}]}const XD=w.forwardRef((t,e)=>{let{as:n=o0,active:r,eventKey:i}=t,s=R7(t,S7);const[o,a]=YD(Object.assign({key:pc(i,s.href),active:r},s));return o[dl("active")]=a.isActive,T.jsx(n,Object.assign({},s,o,{ref:e}))});XD.displayName="NavItem";const x7=XD,C7=["as","onSelect","activeKey","role","onKeyDown"];function A7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const LI=()=>{},$I=dl("event-key"),JD=w.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:o}=t,a=A7(t,C7);const l=tD(),u=w.useRef(!1),c=w.useContext(yo),h=w.useContext(WD);let d,f;h&&(s=s||"tablist",i=h.activeKey,d=h.getControlledId,f=h.getControllerId);const p=w.useRef(null),g=_=>{const m=p.current;if(!m)return null;const I=jr(m,`[${$I}]:not([aria-disabled=true])`),S=m.querySelector("[aria-selected=true]");if(!S||S!==document.activeElement)return null;const R=I.indexOf(S);if(R===-1)return null;let x=R+_;return x>=I.length&&(x=0),x<0&&(x=I.length-1),I[x]},E=(_,m)=>{_!=null&&(r==null||r(_,m),c==null||c(_,m))},y=_=>{if(o==null||o(_),!h)return;let m;switch(_.key){case"ArrowLeft":case"ArrowUp":m=g(-1);break;case"ArrowRight":case"ArrowDown":m=g(1);break;default:return}m&&(_.preventDefault(),E(m.dataset[Zq("EventKey")]||null,_),u.current=!0,l())};w.useEffect(()=>{if(p.current&&u.current){const _=p.current.querySelector(`[${$I}][aria-selected=true]`);_==null||_.focus()}u.current=!1});const v=xo(e,p);return T.jsx(yo.Provider,{value:E,children:T.jsx(v0.Provider,{value:{role:s,activeKey:pc(i),getControlledId:d||LI,getControllerId:f||LI},children:T.jsx(n,Object.assign({},a,{onKeyDown:y,ref:v,role:s}))})})});JD.displayName="Nav";const b7=Object.assign(JD,{Item:x7});var Nh;function jI(t){if((!Nh&&Nh!==0||t)&&hl){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Nh=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Nh}function Wm(t){t===void 0&&(t=Qc());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function P7(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const UI=dl("modal-open");class k7{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return P7(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(Zr(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(UI,""),Zr(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(UI),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const I0=k7,Ym=(t,e)=>hl?t==null?(e||Qc()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function D7(t,e){const n=Mp(),[r,i]=w.useState(()=>Ym(t,n==null?void 0:n.document));if(!r){const s=Ym(t);s&&i(s)}return w.useEffect(()=>{e&&r&&e(r)},[e,r]),w.useEffect(()=>{const s=Ym(t);s!==r&&i(s)},[t,r]),r}function N7({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=w.useRef(null),o=w.useRef(e),a=ut(n);w.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const l=xo(s,t.ref),u=w.cloneElement(t,{ref:l});return e?u:i||!o.current&&r?null:u}function O7({in:t,onTransition:e}){const n=w.useRef(null),r=w.useRef(!0),i=ut(e);return uf(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),uf(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function V7({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=w.useState(!e);e&&s&&o(!1);const a=O7({in:!!e,onTransition:u=>{const c=()=>{u.isStale()||(u.in?r==null||r(u.element,u.initial):(o(!0),n==null||n(u.element)))};Promise.resolve(i(u)).then(c,h=>{throw u.in||o(!0),h})}}),l=xo(a,t.ref);return s&&!e?null:w.cloneElement(t,{ref:l})}function BI(t,e,n){return t?T.jsx(t,Object.assign({},n)):e?T.jsx(V7,Object.assign({},n,{transition:e})):T.jsx(N7,Object.assign({},n))}function M7(t){return t.code==="Escape"||t.keyCode===27}const F7=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function L7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let Xm;function $7(t){return Xm||(Xm=new I0({ownerDocument:t==null?void 0:t.document})),Xm}function j7(t){const e=Mp(),n=t||$7(e),r=w.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:w.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:w.useCallback(i=>{r.current.backdrop=i},[])})}const ZD=w.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:c,transition:h,runTransition:d,backdropTransition:f,runBackdropTransition:p,autoFocus:g=!0,enforceFocus:E=!0,restoreFocus:y=!0,restoreFocusOptions:v,renderDialog:_,renderBackdrop:m=ke=>T.jsx("div",Object.assign({},ke)),manager:I,container:S,onShow:R,onHide:x=()=>{},onExit:N,onExited:O,onExiting:j,onEnter:Q,onEntering:X,onEntered:ve}=t,re=L7(t,F7);const fe=Mp(),de=D7(S),F=j7(I),z=zk(),q=qk(n),[se,oe]=w.useState(!n),be=w.useRef(null);w.useImperativeHandle(e,()=>F,[F]),hl&&!q&&n&&(be.current=Wm(fe==null?void 0:fe.document)),n&&se&&oe(!1);const Pe=ut(()=>{if(F.add(),Kt.current=Li(document,"keydown",en),xe.current=Li(document,"focus",()=>setTimeout($e),!0),R&&R(),g){var ke,Fn;const Ln=Wm((ke=(Fn=F.dialog)==null?void 0:Fn.ownerDocument)!=null?ke:fe==null?void 0:fe.document);F.dialog&&Ln&&!hf(F.dialog,Ln)&&(be.current=Ln,F.dialog.focus())}}),_e=ut(()=>{if(F.remove(),Kt.current==null||Kt.current(),xe.current==null||xe.current(),y){var ke;(ke=be.current)==null||ke.focus==null||ke.focus(v),be.current=null}});w.useEffect(()=>{!n||!de||Pe()},[n,de,Pe]),w.useEffect(()=>{se&&_e()},[se,_e]),Jk(()=>{_e()});const $e=ut(()=>{if(!E||!z()||!F.isTopModal())return;const ke=Wm(fe==null?void 0:fe.document);F.dialog&&ke&&!hf(F.dialog,ke)&&F.dialog.focus()}),Mt=ut(ke=>{ke.target===ke.currentTarget&&(u==null||u(ke),a===!0&&x())}),en=ut(ke=>{l&&M7(ke)&&F.isTopModal()&&(c==null||c(ke),ke.defaultPrevented||x())}),xe=w.useRef(),Kt=w.useRef(),mn=(...ke)=>{oe(!0),O==null||O(...ke)};if(!de)return null;const fr=Object.assign({role:r,ref:F.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},re,{style:s,className:i,tabIndex:-1});let Rt=_?_(fr):T.jsx("div",Object.assign({},fr,{children:w.cloneElement(o,{role:"document"})}));Rt=BI(h,d,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:N,onExiting:j,onExited:mn,onEnter:Q,onEntering:X,onEntered:ve,children:Rt});let Cn=null;return a&&(Cn=m({ref:F.setBackdropRef,onClick:Mt}),Cn=BI(f,p,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Cn})),T.jsx(T.Fragment,{children:ia.createPortal(T.jsxs(T.Fragment,{children:[Cn,Rt]}),de)})});ZD.displayName="Modal";const eN=Object.assign(ZD,{Manager:I0});function U7(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function B7(t,e){t.classList?t.classList.add(e):U7(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function zI(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function z7(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=zI(t.className,e):t.setAttribute("class",zI(t.className&&t.className.baseVal||"",e))}const Fo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class tN extends I0{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,Zr(n,{[e]:`${parseFloat(Zr(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],Zr(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(B7(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";jr(n,Fo.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),jr(n,Fo.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),jr(n,Fo.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();z7(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";jr(n,Fo.FIXED_CONTENT).forEach(s=>this.restore(r,s)),jr(n,Fo.STICKY_CONTENT).forEach(s=>this.restore(i,s)),jr(n,Fo.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let Jm;function nN(t){return Jm||(Jm=new tN(t)),Jm}const rN=w.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=le(e,"modal-body"),T.jsx(n,{ref:i,className:ee(t,e),...r})));rN.displayName="ModalBody";const q7=rN,K7=w.createContext({onHide(){}}),S0=K7,iN=w.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:o,scrollable:a,...l},u)=>{t=le(t,"modal");const c=`${t}-dialog`,h=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return T.jsx("div",{...l,ref:u,className:ee(c,e,i&&`${t}-${i}`,r&&`${c}-centered`,a&&`${c}-scrollable`,s&&h),children:T.jsx("div",{className:ee(`${t}-content`,n),children:o})})});iN.displayName="ModalDialog";const sN=iN,oN=w.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=le(e,"modal-footer"),T.jsx(n,{ref:i,className:ee(t,e),...r})));oN.displayName="ModalFooter";const H7=oN,G7=w.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const a=w.useContext(S0),l=ut(()=>{a==null||a.onHide(),r==null||r()});return T.jsxs("div",{ref:o,...s,children:[i,n&&T.jsx(uz,{"aria-label":t,variant:e,onClick:l})]})}),aN=G7,lN=w.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=le(t,"modal-header"),T.jsx(aN,{ref:s,...i,className:ee(e,t),closeLabel:n,closeButton:r})));lN.displayName="ModalHeader";const Q7=lN,W7=Uk("h4"),uN=w.forwardRef(({className:t,bsPrefix:e,as:n=W7,...r},i)=>(e=le(e,"modal-title"),T.jsx(n,{ref:i,className:ee(t,e),...r})));uN.displayName="ModalTitle";const Y7=uN;function X7(t){return T.jsx(a0,{...t,timeout:null})}function J7(t){return T.jsx(a0,{...t,timeout:null})}const cN=w.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:o=sN,"aria-labelledby":a,"aria-describedby":l,"aria-label":u,show:c=!1,animation:h=!0,backdrop:d=!0,keyboard:f=!0,onEscapeKeyDown:p,onShow:g,onHide:E,container:y,autoFocus:v=!0,enforceFocus:_=!0,restoreFocus:m=!0,restoreFocusOptions:I,onEntered:S,onExit:R,onExiting:x,onEnter:N,onEntering:O,onExited:j,backdropClassName:Q,manager:X,...ve},re)=>{const[fe,de]=w.useState({}),[F,z]=w.useState(!1),q=w.useRef(!1),se=w.useRef(!1),oe=w.useRef(null),[be,Pe]=Bk(),_e=xo(re,Pe),$e=ut(E),Mt=Nk();t=le(t,"modal");const en=w.useMemo(()=>({onHide:$e}),[$e]);function xe(){return X||nN({isRTL:Mt})}function Kt(we){if(!hl)return;const xt=xe().getScrollbarWidth()>0,vi=we.scrollHeight>Qc(we).documentElement.clientHeight;de({paddingRight:xt&&!vi?jI():void 0,paddingLeft:!xt&&vi?jI():void 0})}const mn=ut(()=>{be&&Kt(be.dialog)});Jk(()=>{sv(window,"resize",mn),oe.current==null||oe.current()});const fr=()=>{q.current=!0},Rt=we=>{q.current&&be&&we.target===be.dialog&&(se.current=!0),q.current=!1},Cn=()=>{z(!0),oe.current=Lk(be.dialog,()=>{z(!1)})},ke=we=>{we.target===we.currentTarget&&Cn()},Fn=we=>{if(d==="static"){ke(we);return}if(se.current||we.target!==we.currentTarget){se.current=!1;return}E==null||E()},Ln=we=>{f?p==null||p(we):(we.preventDefault(),d==="static"&&Cn())},Ts=(we,xt)=>{we&&Kt(we),N==null||N(we,xt)},ie=we=>{oe.current==null||oe.current(),R==null||R(we)},pe=(we,xt)=>{O==null||O(we,xt),n0(window,"resize",mn)},Ft=we=>{we&&(we.style.display=""),j==null||j(we),sv(window,"resize",mn)},Mr=w.useCallback(we=>T.jsx("div",{...we,className:ee(`${t}-backdrop`,Q,!h&&"show")}),[h,Q,t]),tn={...n,...fe};tn.display="block";const pr=we=>T.jsx("div",{role:"dialog",...we,style:tn,className:ee(e,t,F&&`${t}-static`,!h&&"show"),onClick:d?Fn:void 0,onMouseUp:Rt,"aria-label":u,"aria-labelledby":a,"aria-describedby":l,children:T.jsx(o,{...ve,onMouseDown:fr,className:r,contentClassName:i,children:s})});return T.jsx(S0.Provider,{value:en,children:T.jsx(eN,{show:c,ref:_e,backdrop:d,container:y,keyboard:!0,autoFocus:v,enforceFocus:_,restoreFocus:m,restoreFocusOptions:I,onEscapeKeyDown:Ln,onShow:g,onHide:E,onEnter:Ts,onEntering:pe,onEntered:S,onExit:ie,onExiting:x,onExited:Ft,manager:xe(),transition:h?X7:void 0,backdropTransition:h?J7:void 0,renderBackdrop:Mr,renderDialog:pr})})});cN.displayName="Modal";const Oh=Object.assign(cN,{Body:q7,Header:Q7,Title:Y7,Footer:H7,Dialog:sN,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var qI={exports:{}},uv={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function i(o,a,l,u,c,h){var d=u||"<<anonymous>>",f=h||l;if(a[l]==null)return o?new Error("Required "+c+" `"+f+"` was not specified "+("in `"+d+"`.")):null;for(var p=arguments.length,g=Array(p>6?p-6:0),E=6;E<p;E++)g[E-6]=arguments[E];return r.apply(void 0,[a,l,d,c,f].concat(g))}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}t.exports=e.default})(uv,uv.exports);var Z7=uv.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=Z7,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function s(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function u(){for(var c=arguments.length,h=Array(c),d=0;d<c;d++)h[d]=arguments[d];var f=null;return a.forEach(function(p){if(f==null){var g=p.apply(void 0,h);g!=null&&(f=g)}}),f}return(0,r.default)(u)}t.exports=e.default})(qI,qI.exports);const hN=w.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=le(e,"nav-item"),T.jsx(n,{ref:i,className:ee(t,e),...r})));hN.displayName="NavItem";const e8=hN,dN=w.forwardRef(({bsPrefix:t,className:e,as:n=Hk,active:r,eventKey:i,disabled:s=!1,...o},a)=>{t=le(t,"nav-link");const[l,u]=YD({key:pc(i,o.href),active:r,disabled:s,...o});return T.jsx(n,{...o,...l,ref:a,disabled:s,className:ee(e,t,s&&"disabled",u.isActive&&"active")})});dN.displayName="NavLink";const t8=dN,fN=w.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:o=!1,navbar:a,navbarScroll:l,className:u,activeKey:c,...h}=t0(t,{activeKey:"onSelect"}),d=le(r,"nav");let f,p,g=!1;const E=w.useContext(Co),y=w.useContext(hz);return E?(f=E.bsPrefix,g=a??!0):y&&({cardHeaderBsPrefix:p}=y),T.jsx(b7,{as:n,ref:e,activeKey:c,className:ee(u,{[d]:!g,[`${f}-nav`]:g,[`${f}-nav-scroll`]:g&&l,[`${p}-${i}`]:!!p,[`${d}-${i}`]:!!i,[`${d}-fill`]:s,[`${d}-justified`]:o}),...h})});fN.displayName="Nav";const jl=Object.assign(fN,{Item:e8,Link:t8}),pN=w.forwardRef(({bsPrefix:t,className:e,as:n,...r},i)=>{t=le(t,"navbar-brand");const s=n||(r.href?"a":"span");return T.jsx(s,{...r,ref:i,className:ee(e,t)})});pN.displayName="NavbarBrand";const n8=pN,mN=w.forwardRef(({children:t,bsPrefix:e,...n},r)=>{e=le(e,"navbar-collapse");const i=w.useContext(Co);return T.jsx(jk,{in:!!(i&&i.expanded),...n,children:T.jsx("div",{ref:r,className:e,children:t})})});mN.displayName="NavbarCollapse";const r8=mN,gN=w.forwardRef(({bsPrefix:t,className:e,children:n,label:r="Toggle navigation",as:i="button",onClick:s,...o},a)=>{t=le(t,"navbar-toggler");const{onToggle:l,expanded:u}=w.useContext(Co)||{},c=ut(h=>{s&&s(h),l&&l()});return i==="button"&&(o.type="button"),T.jsx(i,{...o,ref:a,onClick:c,"aria-label":r,className:ee(e,t,!u&&"collapsed"),children:n||T.jsx("span",{className:`${t}-icon`})})});gN.displayName="NavbarToggle";const i8=gN,cv=new WeakMap,KI=(t,e)=>{if(!t||!e)return;const n=cv.get(e)||new Map;cv.set(e,n);let r=n.get(t);return r||(r=e.matchMedia(t),r.refCount=0,n.set(r.media,r)),r};function s8(t,e=typeof window>"u"?void 0:window){const n=KI(t,e),[r,i]=w.useState(()=>n?n.matches:!1);return uf(()=>{let s=KI(t,e);if(!s)return i(!1);let o=cv.get(e);const a=()=>{i(s.matches)};return s.refCount++,s.addListener(a),a(),()=>{s.removeListener(a),s.refCount--,s.refCount<=0&&(o==null||o.delete(s.media)),s=void 0}},[t]),r}function o8(t){const e=Object.keys(t);function n(a,l){return a===l?l:a?`${a} and ${l}`:l}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function i(a){const l=r(a);let u=t[l];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function s(a){let l=t[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function o(a,l,u){let c;typeof a=="object"?(c=a,u=l,l=!0):(l=l||!0,c={[a]:l});let h=w.useMemo(()=>Object.entries(c).reduce((d,[f,p])=>((p==="up"||p===!0)&&(d=n(d,s(f))),(p==="down"||p===!0)&&(d=n(d,i(f))),d),""),[JSON.stringify(c)]);return s8(h,u)}return o}const a8=o8({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),yN=w.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=le(e,"offcanvas-body"),T.jsx(n,{ref:i,className:ee(t,e),...r})));yN.displayName="OffcanvasBody";const l8=yN,u8={[sr]:"show",[Br]:"show"},vN=w.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:s=!1,appear:o=!1,...a},l)=>(t=le(t,"offcanvas"),T.jsx(i0,{ref:l,addEndListener:r0,in:r,mountOnEnter:i,unmountOnExit:s,appear:o,...a,childRef:n.ref,children:(u,c)=>w.cloneElement(n,{...c,className:ee(e,n.props.className,(u===sr||u===hc)&&`${t}-toggling`,u8[u])})})));vN.displayName="OffcanvasToggling";const c8=vN,_N=w.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=le(t,"offcanvas-header"),T.jsx(aN,{ref:s,...i,className:ee(e,t),closeLabel:n,closeButton:r})));_N.displayName="OffcanvasHeader";const h8=_N,d8=Uk("h5"),wN=w.forwardRef(({className:t,bsPrefix:e,as:n=d8,...r},i)=>(e=le(e,"offcanvas-title"),T.jsx(n,{ref:i,className:ee(t,e),...r})));wN.displayName="OffcanvasTitle";const f8=wN;function p8(t){return T.jsx(c8,{...t})}function m8(t){return T.jsx(a0,{...t})}const EN=w.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:i="start",responsive:s,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:u=!1,onEscapeKeyDown:c,onShow:h,onHide:d,container:f,autoFocus:p=!0,enforceFocus:g=!0,restoreFocus:E=!0,restoreFocusOptions:y,onEntered:v,onExit:_,onExiting:m,onEnter:I,onEntering:S,onExited:R,backdropClassName:x,manager:N,renderStaticNode:O=!1,...j},Q)=>{const X=w.useRef();t=le(t,"offcanvas");const{onToggle:ve}=w.useContext(Co)||{},[re,fe]=w.useState(!1),de=a8(s||"xs","up");w.useEffect(()=>{fe(s?o&&!de:o)},[o,s,de]);const F=ut(()=>{ve==null||ve(),d==null||d()}),z=w.useMemo(()=>({onHide:F}),[F]);function q(){return N||(u?(X.current||(X.current=new tN({handleContainerOverflow:!1})),X.current):nN())}const se=(_e,...$e)=>{_e&&(_e.style.visibility="visible"),I==null||I(_e,...$e)},oe=(_e,...$e)=>{_e&&(_e.style.visibility=""),R==null||R(...$e)},be=w.useCallback(_e=>T.jsx("div",{..._e,className:ee(`${t}-backdrop`,x)}),[x,t]),Pe=_e=>T.jsx("div",{..._e,...j,className:ee(e,s?`${t}-${s}`:t,`${t}-${i}`),"aria-labelledby":r,children:n});return T.jsxs(T.Fragment,{children:[!re&&(s||O)&&Pe({}),T.jsx(S0.Provider,{value:z,children:T.jsx(eN,{show:re,ref:Q,backdrop:a,container:f,keyboard:l,autoFocus:p,enforceFocus:g&&!u,restoreFocus:E,restoreFocusOptions:y,onEscapeKeyDown:c,onShow:h,onHide:F,onEnter:se,onEntering:S,onEntered:v,onExit:_,onExiting:m,onExited:oe,manager:q(),transition:p8,backdropTransition:m8,renderBackdrop:be,renderDialog:Pe})})]})});EN.displayName="Offcanvas";const g8=Object.assign(EN,{Body:l8,Header:h8,Title:f8}),TN=w.forwardRef((t,e)=>{const n=w.useContext(Co);return T.jsx(g8,{ref:e,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0})});TN.displayName="NavbarOffcanvas";const y8=TN,IN=w.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=le(e,"navbar-text"),T.jsx(n,{ref:i,className:ee(t,e),...r})));IN.displayName="NavbarText";const v8=IN,SN=w.forwardRef((t,e)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:s,fixed:o,sticky:a,className:l,as:u="nav",expanded:c,onToggle:h,onSelect:d,collapseOnSelect:f=!1,...p}=t0(t,{expanded:"onToggle"}),g=le(n,"navbar"),E=w.useCallback((..._)=>{d==null||d(..._),f&&c&&(h==null||h(!1))},[d,f,c,h]);p.role===void 0&&u!=="nav"&&(p.role="navigation");let y=`${g}-expand`;typeof r=="string"&&(y=`${y}-${r}`);const v=w.useMemo(()=>({onToggle:()=>h==null?void 0:h(!c),bsPrefix:g,expanded:!!c,expand:r}),[g,c,r,h]);return T.jsx(Co.Provider,{value:v,children:T.jsx(yo.Provider,{value:E,children:T.jsx(u,{ref:e,...p,className:ee(l,g,r&&y,i&&`${g}-${i}`,s&&`bg-${s}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});SN.displayName="Navbar";const Vh=Object.assign(SN,{Brand:n8,Collapse:r8,Offcanvas:y8,Text:v8,Toggle:i8}),RN=w.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=le(t,"row"),o=kk(),a=Dk(),l=`${s}-cols`,u=[];return o.forEach(c=>{const h=r[c];delete r[c];let d;h!=null&&typeof h=="object"?{cols:d}=h:d=h;const f=c!==a?`-${c}`:"";d!=null&&u.push(`${l}${f}-${d}`)}),T.jsx(n,{ref:i,...r,className:ee(e,s,...u)})});RN.displayName="Row";const HI=RN,GI=({children:t})=>T.jsx(T.Fragment,{children:T.jsx(cz,{size:"sm",role:"group","aria-label":"Setting text and image",style:{marginBottom:"0.5rem"},children:t})}),qs=({children:t,selectType:e,handleOnClick:n,types:r})=>{const{type:i,title:s}=r;return T.jsx(T.Fragment,{children:T.jsx(Wk,{variant:"outline-myInfo",className:"button-hover",active:e.type===i,onClick:()=>{n(i,s)},children:t})})},_8=({id:t})=>{const{showType_select:e,showType_beenSelect:n,showType_bestDamage:r,handleShowType_select:i,handleShowType_beenSelect:s,handleShowType_bestDamage:o}=Vr();let a=null,l=null;switch(t){case or:a=e,l=i;break;case g_:a=n,l=s;break;case Ff:a=r,l=o;break}return T.jsxs(T.Fragment,{children:[T.jsx(qs,{types:{type:p_,title:""},selectType:a,handleOnClick:l,children:T.jsx(QI,{color:"#22c02a",text:"草"})}),T.jsx(qs,{types:{type:m_,title:""},selectType:a,handleOnClick:l,children:T.jsx(QI,{color:"#22c02a",text:" "})}),T.jsx(qs,{types:{type:Ja,title:""},selectType:a,handleOnClick:l,children:T.jsx(pf,{text:"草"})}),T.jsx(qs,{types:{type:Jx,title:""},selectType:a,handleOnClick:l,children:T.jsx(pf,{text:"不顯示"})})]})},QI=({color:t,text:e})=>T.jsx("div",{className:"button-type-color",children:T.jsx("span",{style:{backgroundColor:t},children:e})}),w8=({id:t})=>{const{showInfo_select:e,showInfo_beenSelect:n,showInfo_bestDamage:r,handleShowInfo_select:i,handleShowInfo_beenSelect:s,handleShowInfo_bestDamage:o}=Vr();let a=null,l=null;switch(t){case or:a=e,l=i;break;case g_:a=n,l=s;break;case Ff:a=r,l=o;break}return T.jsxs(T.Fragment,{children:[T.jsx(qs,{types:{type:d_,title:""},selectType:a,handleOnClick:l,children:T.jsx(xN,{})}),T.jsx(qs,{types:{type:f_,title:""},selectType:a,handleOnClick:l,children:T.jsx(E8,{text:"Name"})}),T.jsx(qs,{types:{type:Ja,title:""},selectType:a,handleOnClick:l,children:T.jsx(pf,{text:"Name"})})]})},xN=()=>T.jsx("img",{src:SF,alt:"顯示方式",title:"顯示方式",className:"buttonImage"}),pf=({text:t})=>T.jsx("span",{children:t}),E8=({text:t})=>T.jsxs("div",{className:"buttonImageText",children:[T.jsx(xN,{}),T.jsx(pf,{text:t})]}),T8=()=>{const{filterType:t,handleFilterType:e}=Vr();return T.jsx(T.Fragment,{children:T.jsxs($l,{children:[T.jsx($l.Toggle,{variant:"outline-myInfo",className:"button-hover",id:"t-dropdownBtnFilterType",children:T.jsxs("span",{children:["塞選屬性 : ",t.zhType||"error"]})}),T.jsxs($l.Menu,{style:{width:"auto",height:"150px",overflowY:"auto"},children:[T.jsx($l.Item,{as:"button",className:"dropdown-type",style:{backgroundColor:"#17CCF0"},onClick:()=>e(Zx),children:T.jsx("span",{children:"全部"})}),Ic.map(n=>{const{zhType:r,bgColor:i}=n;return T.jsx($l.Item,{as:"button",className:"dropdown-type",style:{backgroundColor:i},onClick:()=>e(n),children:T.jsx("span",{children:r})},Wr())})]})]})})},I8=({id:t})=>T.jsxs(T.Fragment,{children:[T.jsx(GI,{children:T.jsx(w8,{id:t})}),T.jsx(GI,{children:T.jsx(_8,{id:t})}),t===or&&T.jsx(T8,{})]}),CN=w.createContext(),AN="darkTheme",S8=()=>{const t=window.matchMedia("(prefers-color-scheme:dark)").matches,e=localStorage.getItem(AN)==="true";return console.log("preferTheme",t),console.log("localTheme",e),e||t},R8=({children:t})=>{const[e,n]=w.useState(S8),r=()=>{const o=!e;n(o),localStorage.setItem(AN,o)},i=e?"dark":"light",s=e?"white-50":"mySecondary";return w.useEffect(()=>{document.body.classList.toggle("bg-darkBg",e),document.body.classList.toggle("text-white-50",e)},[e]),T.jsx(CN.Provider,{value:{isDarkMode:e,handleIsDarkMode:r,textColor:s,bgColor:i},children:t})},Ao=()=>w.useContext(CN),x8=()=>{const{searchPokemon:t,handleSearchPokemon:e}=Vr(),{bgColor:n}=Ao();return T.jsx(T.Fragment,{children:T.jsx(T7,{size:"sm",className:"search-btn",children:T.jsx(_7.Control,{"data-bs-theme":n,className:"bg-body",type:"Search",placeholder:"🔍 Search","aria-label":"Search",value:t,onChange:r=>{e(r.target.value)}})})})},C8=({title:t,id:e})=>{const{bgColor:n,textColor:r}=Ao(),[i,s]=w.useState(!1);return T.jsxs("div",{className:"group-info",children:[T.jsxs("div",{children:[T.jsx("i",{"aria-controls":"collapse","aria-expanded":i,onClick:()=>s(!i),children:T.jsx(vF,{className:"btn setting-icon"})}),T.jsx(jk,{in:i,"data-bs-theme":n,children:T.jsx("div",{id:"collapse",children:T.jsx("div",{className:"card card-body",children:T.jsx(I8,{id:e})})})})]}),T.jsx("span",{className:"title",children:t}),e===or&&T.jsx(x8,{})]})},A8=w.memo(C8);function b8(t){return Tc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"}}]})(t)}const bN="error",P8="white",PN="black",k8=({bgColor:t,zhType:e})=>T.jsx("a",{href:"#",children:T.jsx("span",{style:{color:t??P8},children:e??bN})}),D8=({bgColor:t})=>T.jsx("a",{href:"#",children:T.jsx("span",{className:"type",style:{backgroundColor:t??PN},children:" "})}),kN=({bgColor:t,zhType:e,enType:n})=>T.jsx(jo,{to:`type/${n}`,children:T.jsx("span",{className:"type",style:{backgroundColor:t??PN},children:e??bN})}),N8=({item:t,isActive:e,handleClick:n,children:r})=>T.jsxs("div",{className:`characterText ${e}`,onClick:()=>n(t),children:[T.jsx("span",{className:"characterName",children:(t==null?void 0:t.zhName)??defaultNotFound}),r]}),O8=({item:t,isActive:e,handleClick:n,children:r})=>T.jsxs("div",{style:{display:"flex"},children:[r,T.jsx("img",{src:(t==null?void 0:t.sprite)??"",alt:(t==null?void 0:t.zhName)??defaultNotFound,title:(t==null?void 0:t.zhName)??defaultNotFound,className:`characterImg ${e}`,onClick:()=>n(t)})]}),V8=({item:t,isActive:e,handleClick:n,children:r})=>T.jsxs("div",{className:`characterImgText ${e}`,onClick:()=>n(t),children:[T.jsxs("div",{children:[T.jsx("span",{className:"characterName",children:(t==null?void 0:t.zhName)??defaultNotFound}),r]}),T.jsx("img",{src:(t==null?void 0:t.sprite)??"",alt:(t==null?void 0:t.zhName)??defaultNotFound,title:(t==null?void 0:t.zhName)??defaultNotFound})]}),Zm=({title:t,typeClass:e,children:n,id:r})=>{const{isDarkMode:i}=Ao(),s=i?"darkBg":"white-50",o=w.useRef(null),{isLoadingPokemon:a,handleNextPage:l,handleIsLoadingPokemon:u,searchPokemon:c,bestDamage:h,filterType:d}=Vr(),f=()=>{const p=o.current;c!==""||d.enType!=="all"||!a&&p.scrollTop+p.offsetHeight>=p.scrollHeight&&(u(!0),l())};return w.useEffect(()=>{if(r!=or)return;const p=document.getElementById(or);return p.addEventListener("scroll",f),()=>{p.removeEventListener("scroll",f)}},[c,d]),T.jsxs("div",{className:"group-col",children:[T.jsx(A8,{title:t,id:r}),T.jsxs("div",{id:r,ref:o,className:"groups",children:[T.jsx("div",{className:`group-img group-${e}`,children:n}),r===or&&a&&T.jsx("div",{className:"loading-container",children:T.jsx("div",{className:"loading"})}),r===or&&(c!==""||d.enType!=="all")&&T.jsxs("div",{className:"search-more-container",children:[T.jsx("p",{children:"沒找到你要的嗎?"}),T.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>{u(!0),l()},children:"載入更多"})]}),r===Ff&&h.length>0&&T.jsxs("div",{className:`best-damage-container bg-${s}`,children:[T.jsx(b8,{className:"thumb-icon"}),T.jsx("span",{style:{paddingLeft:"0.5rem"},children:"推薦屬性"}),T.jsx("ul",{children:h.map(p=>T.jsx("li",{style:{margin:"0 0.1rem"},children:T.jsx(kN,{...p})},Wr()))})]})]})]})},eg=({item:t,showType_select:e,styleObj:n})=>(t==null?void 0:t.Types)===void 0?T.jsx("span",{children:"error"}):T.jsx("ul",{style:n,children:((t==null?void 0:t.Types)??[]).map(r=>{switch(e){case m_:return T.jsx("li",{children:T.jsx(D8,{...r})},Wr());case Ja:return T.jsx("li",{children:T.jsx(k8,{...r})},Wr());case p_:return T.jsx("li",{children:T.jsx(kN,{...r})},Wr())}})}),tg=({showInfo_select:t,showType_select:e,displayCharacter:n,handleClick:r,id:i})=>{const{selectImg:s,searchPokemon:o,filterType:a}=Vr();let l=n;return i===or&&(o!==""&&(l=l.filter(u=>u.zhName.includes(o))),a.enType!=="all"&&(l=l.filter(u=>u.Types.filter(h=>h.enType===a.enType).length>0))),l.map(u=>{const h=s.some(d=>d.enName===u.enName)?"hero-active":"";switch(t){case Ja:return T.jsx(N8,{isActive:h,handleClick:r,item:u,children:T.jsx(eg,{styleObj:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"},item:u,showType_select:e,showInfo_select:t})},Wr());case f_:return T.jsx(V8,{isActive:h,item:u,handleClick:r,children:T.jsx(eg,{styleObj:{display:"flex",flexDirection:"row",justifyContent:"start",gap:"0.3rem"},item:u,showType_select:e,showInfo_select:t})},Wr());case d_:return T.jsx(O8,{isActive:h,handleClick:r,item:u,children:T.jsx(eg,{styleObj:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},item:u,showType_select:e,showInfo_select:t})},Wr())}})},WI=(t,e)=>{if(t.length===0)return[];const n=t.map(i=>{const s=i==null?void 0:i.Types.map(o=>{var l,u;return(e?((l=o==null?void 0:o.damage_relations)==null?void 0:l.double_damage_from)??[]:((u=o==null?void 0:o.damage_relations)==null?void 0:u.half_damage_from)??[]).map(c=>c==null?void 0:c.name)});return[].concat(...s)}),r=new Set(n[0]);return n.forEach(i=>{const s=new Set(i);r.forEach(o=>{s.has(o)||r.delete(o)})}),Array.from(r)},M8=()=>{const{selectImg:t,handleBestDamage:e}=Vr();w.useEffect(()=>{const n=WI(t,!0),r=WI(t,!1),i=new Set(n);r.forEach(o=>{i.has(o)&&i.delete(o)});const s=Ic.filter(o=>{if(i.has(o.enType))return o});e(s)},[t])},F8=()=>{const{selectImg:t,AddRemoveImg:e,RemoveImg:n,showInfo_select:r,showType_select:i,showInfo_beenSelect:s,showType_beenSelect:o,showInfo_bestDamage:a,showType_bestDamage:l,storePokemon:u,bestDamage:c,filterBestPokemon:h}=Vr();return v9(),M8(),T.jsx("main",{children:T.jsxs("section",{className:"hero",children:[T.jsx(Zm,{title:wm[0].title,typeClass:r.type,id:or,children:T.jsx(tg,{showInfo_select:r.type,showType_select:i.type,displayCharacter:u,handleClick:e,id:or})}),T.jsx(Zm,{title:wm[1].title,typeClass:s.type,id:g_,children:T.jsx(tg,{showInfo_select:s.type,showType_select:o.type,displayCharacter:t,handleClick:n})}),T.jsx(Zm,{title:wm[2].title,typeClass:a.type,id:Ff,children:c.length>0&&(h.length>0?T.jsx(tg,{showInfo_select:a.type,showType_select:l.type,displayCharacter:h,handleClick:()=>{}}):T.jsx("p",{className:"",children:"Oops! 看起來推薦屬性還沒有pokemon被選擇呢!"}))})]})})},ng=()=>T.jsx(T.Fragment,{children:T.jsxs(_9,{children:[T.jsx(F8,{}),T.jsx(Wx,{})]})});const L8=()=>{const t=new Date().getFullYear(),{textColor:e,bgColor:n}=Ao();return T.jsx("footer",{className:`bg-${n} p-3`,children:T.jsx("div",{className:"container",children:T.jsxs("p",{className:"text-center",children:["Copyright © ",t," Pokemon Gym. All Rights Reserved."]})})})},$8="/pokemon-Gym/assets/logo-0fa1e8ab.png";function j8(t){return Tc({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z",clipRule:"evenodd"}}]})(t)}function U8(t){return Tc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.768 3.96v.001l-.002-.005a9.08 9.08 0 0 0-.218-.779c-.13-.394.21-.8.602-.67.29.096.575.205.855.328l.01.005A10.002 10.002 0 0 1 12 22a10.002 10.002 0 0 1-9.162-5.985l-.004-.01a9.722 9.722 0 0 1-.329-.855c-.13-.392.277-.732.67-.602.257.084.517.157.78.218l.004.002A9 9 0 0 0 14.999 6a9.09 9.09 0 0 0-.231-2.04ZM16.5 6c0 5.799-4.701 10.5-10.5 10.5-.426 0-.847-.026-1.26-.075A8.5 8.5 0 1 0 16.425 4.74c.05.413.075.833.075 1.259Z"}}]})(t)}function B8(t){return Tc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14Zm0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 1 0 0 11Zm-5.657.157a.75.75 0 0 1 0 1.06l-1.768 1.768a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.767-1.768a.75.75 0 0 1 1.061 0ZM3.515 3.515a.75.75 0 0 1 1.06 0l1.768 1.768a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L3.515 4.575a.75.75 0 0 1 0-1.06ZM12 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 12 0ZM4 12a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 12Zm8 8a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 12 20Zm12-8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 24 12Zm-6.343 5.657a.75.75 0 0 1 1.06 0l1.768 1.768a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-1.768-1.767a.75.75 0 0 1 0-1.061Zm2.828-14.142a.75.75 0 0 1 0 1.06l-1.768 1.768a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l1.767-1.768a.75.75 0 0 1 1.061 0Z"}}]})(t)}const z8=()=>{const{isDarkMode:t,handleIsDarkMode:e}=Ao();return T.jsx(T.Fragment,{children:T.jsx(Vh,{expand:"md","data-bs-theme":"dark",className:"bg-primary",children:T.jsxs(u0,{expand:"md",children:[T.jsxs(Vh.Brand,{as:jo,to:"Gym",children:[T.jsx("img",{src:$8,width:"30",height:"30",className:"d-inline-block align-top",alt:"Welcome to pokemon gym"}),T.jsx("span",{className:"text-capitalize",children:"pokemon gym"})]}),T.jsx(Vh.Toggle,{"aria-controls":"responsive-navbar-nav",children:T.jsx(j8,{})}),T.jsx(Vh.Collapse,{id:"responsive-navbar-nav",className:"justify-content-end",children:T.jsxs(jl,{children:[T.jsx("div",{className:"theme-toggle",onClick:()=>{e()},children:t?T.jsx(U8,{}):T.jsx(B8,{})}),T.jsx(jl.Link,{as:jo,to:"About",children:"關於"}),T.jsx(jl.Link,{as:jo,to:"Pokedex",children:"圖鑑"}),T.jsx(jl.Link,{as:jo,to:"Gym",children:"道館"}),T.jsx(jl.Link,{as:jo,to:"Login",children:"登入/註冊"})]})})]})})})},q8=()=>T.jsx(T.Fragment,{children:T.jsxs(R8,{children:[T.jsx(z8,{}),T.jsx(Wx,{}),T.jsx(L8,{})]})}),rg=()=>T.jsxs("div",{id:"error-page",className:"text-center pt-5",children:[T.jsx("h1",{className:"text-danger",children:"Oops!"}),T.jsx("p",{className:"text-secondary",children:"Sorry, an unexpected error has occurred."}),T.jsx("p",{})]}),K8="/pokemon-Gym/assets/personal-avatar-234ffb1f.jpg",H8=()=>(Ao(),T.jsx("section",{className:"text-center",children:T.jsxs(u0,{children:[T.jsx("h1",{children:"關於"}),T.jsx("hr",{}),T.jsxs(HI,{className:"justify-content-md-center",children:[T.jsx(Jl,{md:"5",children:T.jsx("p",{children:"Pokemon Gym是一款在打道館時，可以快速選擇相抗衡角色的網頁工具。"})}),T.jsx(Jl,{md:"5",children:T.jsx("p",{children:"開發理念在於不需要記下屬性相抗表、角色屬性，只需要透過搜尋、選擇，自動幫使用者帶出推薦的資料，節省查詢角色、開新視窗，進一步透過塞選屬性功能，在多選時也能夠帶出推薦的屬性。"})})]}),T.jsxs(HI,{className:"justify-content-md-center align-items-end",children:[T.jsx(Jl,{md:"auto",children:T.jsx("img",{id:"avatar",src:K8,alt:"personal avatar"})}),T.jsx(Jl,{md:"6",children:T.jsx("div",{style:{fontSize:"0.8rem"},children:"本網頁由PaddyTian獨立開發，使用JavaScript, React開發，了解更多可以留言私訊。"})})]})]})})),Lo=t=>t.map(({name:e})=>Ic.filter(({enType:n})=>e===n)[0]),$o=({title:t,detail_item:e})=>T.jsxs(T.Fragment,{children:[T.jsx("h6",{children:t}),T.jsx("div",{className:"mb-2",children:e.length===0?"-":e.map(({zhType:n,bgColor:r})=>T.jsx("span",{className:"ps-2 pe-2 ms-1 me-1 rounded-3  text-light",style:{backgroundColor:r},children:n},Wr()))})]}),YI=()=>{console.log("type view!");const{storeAllTypes:t}=Vr();let e=Kx(),{type:n}=$M(),r=Ic.filter(I=>I.enType===n)[0],i=r==null?void 0:r.zhType,s=r==null?void 0:r.bgColor,o=t.filter(I=>I.name===n)[0],{damage_relations:a}=o||{},{double_damage_from:l,double_damage_to:u,half_damage_from:c,half_damage_to:h,no_damage_from:d,no_damage_to:f}=a||{},p=Lo(l),g=Lo(u),E=Lo(c),y=Lo(h),v=Lo(d),_=Lo(f);function m(){e(-1)}return T.jsxs(Oh,{show:!0,onHide:m,id:"typeView",fullscreen:"xs-down",children:[T.jsx(Oh.Header,{closeButton:!0,children:T.jsxs(Oh.Title,{children:[T.jsx("span",{style:{color:s},children:i}),"屬性"]})}),T.jsxs(Oh.Body,{children:[T.jsx($o,{title:"效果絕佳",detail_item:g}),T.jsx($o,{title:"效果不好",detail_item:y}),T.jsx($o,{title:"沒有效果",detail_item:_}),T.jsx($o,{title:"遭受效果絕佳",detail_item:p}),T.jsx($o,{title:"遭受效果不好",detail_item:E}),T.jsx($o,{title:"沒有傷害",detail_item:v})]})]})},XI=()=>(Ao(),T.jsx("section",{className:"text-center fst-italic",children:T.jsx(u0,{children:T.jsx("h3",{children:"Coming Soon..."})})})),G8=rF([{path:"/Pokemon-Gym",element:T.jsx(q8,{}),errorElement:T.jsx(rg,{}),children:[{errorElement:T.jsx(rg,{}),children:[{index:!0,element:T.jsx(ng,{})},{path:"/Pokemon-Gym/",element:T.jsx(ng,{}),children:[{path:"type/:type",element:T.jsx(YI,{})}]},{path:"/Pokemon-Gym/Gym",element:T.jsx(ng,{}),children:[{path:"type/:type",element:T.jsx(YI,{})}]},{path:"/Pokemon-Gym/About",element:T.jsx(H8,{})},{path:"/Pokemon-Gym/Pokedex",element:T.jsx(XI,{})},{path:"/Pokemon-Gym/Login",element:T.jsx(XI,{})},{path:"*",element:T.jsx(rg,{})}]}]}]),Q8=new SV;ig.createRoot(document.getElementById("root")).render(T.jsx(He.StrictMode,{children:T.jsxs(LV,{client:Q8,children:[T.jsx(hF,{router:G8}),T.jsx(zV,{initialIsOpen:!1})]})}));
