function MN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var WI={exports:{}},pf={},YI={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vc=Symbol.for("react.element"),FN=Symbol.for("react.portal"),LN=Symbol.for("react.fragment"),$N=Symbol.for("react.strict_mode"),jN=Symbol.for("react.profiler"),BN=Symbol.for("react.provider"),UN=Symbol.for("react.context"),zN=Symbol.for("react.forward_ref"),qN=Symbol.for("react.suspense"),KN=Symbol.for("react.memo"),GN=Symbol.for("react.lazy"),A0=Symbol.iterator;function HN(t){return t===null||typeof t!="object"?null:(t=A0&&t[A0]||t["@@iterator"],typeof t=="function"?t:null)}var XI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JI=Object.assign,ZI={};function Qa(t,e,n){this.props=t,this.context=e,this.refs=ZI,this.updater=n||XI}Qa.prototype.isReactComponent={};Qa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eS(){}eS.prototype=Qa.prototype;function uv(t,e,n){this.props=t,this.context=e,this.refs=ZI,this.updater=n||XI}var cv=uv.prototype=new eS;cv.constructor=uv;JI(cv,Qa.prototype);cv.isPureReactComponent=!0;var b0=Array.isArray,tS=Object.prototype.hasOwnProperty,hv={current:null},nS={key:!0,ref:!0,__self:!0,__source:!0};function rS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tS.call(e,r)&&!nS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:vc,type:t,key:s,ref:o,props:i,_owner:hv.current}}function QN(t,e){return{$$typeof:vc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dv(t){return typeof t=="object"&&t!==null&&t.$$typeof===vc}function WN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var P0=/\/+/g;function Up(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WN(""+t.key):e.toString(36)}function Mh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vc:case FN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Up(o,0):r,b0(i)?(n="",t!=null&&(n=t.replace(P0,"$&/")+"/"),Mh(i,e,n,"",function(u){return u})):i!=null&&(dv(i)&&(i=QN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(P0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",b0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Up(s,a);o+=Mh(s,e,n,l,i)}else if(l=HN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Up(s,a++),o+=Mh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function th(t,e,n){if(t==null)return t;var r=[],i=0;return Mh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function YN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hn={current:null},Fh={transition:null},XN={ReactCurrentDispatcher:hn,ReactCurrentBatchConfig:Fh,ReactCurrentOwner:hv};ye.Children={map:th,forEach:function(t,e,n){th(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return th(t,function(){e++}),e},toArray:function(t){return th(t,function(e){return e})||[]},only:function(t){if(!dv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Qa;ye.Fragment=LN;ye.Profiler=jN;ye.PureComponent=uv;ye.StrictMode=$N;ye.Suspense=qN;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=JI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tS.call(e,l)&&!nS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:vc,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:UN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BN,_context:t},t.Consumer=t};ye.createElement=rS;ye.createFactory=function(t){var e=rS.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:zN,render:t}};ye.isValidElement=dv;ye.lazy=function(t){return{$$typeof:GN,_payload:{_status:-1,_result:t},_init:YN}};ye.memo=function(t,e){return{$$typeof:KN,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Fh.transition;Fh.transition={};try{t()}finally{Fh.transition=e}};ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ye.useCallback=function(t,e){return hn.current.useCallback(t,e)};ye.useContext=function(t){return hn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return hn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return hn.current.useEffect(t,e)};ye.useId=function(){return hn.current.useId()};ye.useImperativeHandle=function(t,e,n){return hn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return hn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return hn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return hn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return hn.current.useReducer(t,e,n)};ye.useRef=function(t){return hn.current.useRef(t)};ye.useState=function(t){return hn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return hn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return hn.current.useTransition()};ye.version="18.2.0";YI.exports=ye;var y=YI.exports;const Ke=yc(y),JN=MN({__proto__:null,default:Ke},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN=y,eO=Symbol.for("react.element"),tO=Symbol.for("react.fragment"),nO=Object.prototype.hasOwnProperty,rO=ZN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iO={key:!0,ref:!0,__self:!0,__source:!0};function iS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nO.call(e,r)&&!iO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eO,type:t,key:s,ref:o,props:i,_owner:rO.current}}pf.Fragment=tO;pf.jsx=iS;pf.jsxs=iS;WI.exports=pf;var T=WI.exports,tg={},sS={exports:{}},On={},oS={exports:{}},aS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var K=F.length;F.push(q);e:for(;0<K;){var se=K-1>>>1,oe=F[se];if(0<i(oe,q))F[se]=q,F[K]=oe,K=se;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],K=F.pop();if(K!==q){F[0]=K;e:for(var se=0,oe=F.length,pe=oe>>>1;se<pe;){var be=2*(se+1)-1,we=F[be],Le=be+1,Vt=F[Le];if(0>i(we,K))Le<oe&&0>i(Vt,we)?(F[se]=Vt,F[Le]=K,se=Le):(F[se]=we,F[be]=K,se=be);else if(Le<oe&&0>i(Vt,K))F[se]=Vt,F[Le]=K,se=Le;else break e}}return q}function i(F,q){var K=F.sortIndex-q.sortIndex;return K!==0?K:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,m=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=F)r(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(u)}}function g(F){if(m=!1,w(F),!p)if(n(l)!==null)p=!0,ce(R);else{var q=n(u);q!==null&&_e(g,q.startTime-F)}}function R(F,q){p=!1,m&&(m=!1,v(x),x=-1),f=!0;var K=d;try{for(w(q),h=n(l);h!==null&&(!(h.expirationTime>q)||F&&!j());){var se=h.callback;if(typeof se=="function"){h.callback=null,d=h.priorityLevel;var oe=se(h.expirationTime<=q);q=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(l)&&r(l),w(q)}else r(l);h=n(l)}if(h!==null)var pe=!0;else{var be=n(u);be!==null&&_e(g,be.startTime-q),pe=!1}return pe}finally{h=null,d=K,f=!1}}var S=!1,I=null,x=-1,D=5,M=-1;function j(){return!(t.unstable_now()-M<D)}function W(){if(I!==null){var F=t.unstable_now();M=F;var q=!0;try{q=I(!0,F)}finally{q?J():(S=!1,I=null)}}else S=!1}var J;if(typeof _=="function")J=function(){_(W)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ie=ve.port2;ve.port1.onmessage=W,J=function(){ie.postMessage(null)}}else J=function(){E(W,0)};function ce(F){I=F,S||(S=!0,J())}function _e(F,q){x=E(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ce(R))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(d){case 1:case 2:case 3:var q=3;break;default:q=d}var K=d;d=q;try{return F()}finally{d=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var K=d;d=F;try{return q()}finally{d=K}},t.unstable_scheduleCallback=function(F,q,K){var se=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?se+K:se):K=se,F){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=K+oe,F={id:c++,callback:q,priorityLevel:F,startTime:K,expirationTime:oe,sortIndex:-1},K>se?(F.sortIndex=K,e(u,F),n(l)===null&&F===n(u)&&(m?(v(x),x=-1):m=!0,_e(g,K-se))):(F.sortIndex=oe,e(l,F),p||f||(p=!0,ce(R))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var q=d;return function(){var K=d;d=q;try{return F.apply(this,arguments)}finally{d=K}}}})(aS);oS.exports=aS;var sO=oS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS=y,Pn=sO;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uS=new Set,Iu={};function Eo(t,e){Ta(t,e),Ta(t+"Capture",e)}function Ta(t,e){for(Iu[t]=e,t=0;t<e.length;t++)uS.add(e[t])}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ng=Object.prototype.hasOwnProperty,oO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k0={},D0={};function aO(t){return ng.call(D0,t)?!0:ng.call(k0,t)?!1:oO.test(t)?D0[t]=!0:(k0[t]=!0,!1)}function lO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uO(t,e,n,r){if(e===null||typeof e>"u"||lO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zt[t]=new dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zt[e]=new dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zt[t]=new dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zt[t]=new dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zt[t]=new dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zt[t]=new dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zt[t]=new dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zt[t]=new dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zt[t]=new dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var fv=/[\-:]([a-z])/g;function pv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fv,pv);zt[e]=new dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fv,pv);zt[e]=new dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fv,pv);zt[e]=new dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zt[t]=new dn(t,1,!1,t.toLowerCase(),null,!1,!1)});zt.xlinkHref=new dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zt[t]=new dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function mv(t,e,n,r){var i=zt.hasOwnProperty(e)?zt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uO(e,n,i,r)&&(n=null),r||i===null?aO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var di=lS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nh=Symbol.for("react.element"),Ho=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),gv=Symbol.for("react.strict_mode"),rg=Symbol.for("react.profiler"),cS=Symbol.for("react.provider"),hS=Symbol.for("react.context"),yv=Symbol.for("react.forward_ref"),ig=Symbol.for("react.suspense"),sg=Symbol.for("react.suspense_list"),vv=Symbol.for("react.memo"),Ai=Symbol.for("react.lazy"),dS=Symbol.for("react.offscreen"),N0=Symbol.iterator;function vl(t){return t===null||typeof t!="object"?null:(t=N0&&t[N0]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,zp;function zl(t){if(zp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zp=e&&e[1]||""}return`
`+zp+t}var qp=!1;function Kp(t,e){if(!t||qp)return"";qp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zl(t):""}function cO(t){switch(t.tag){case 5:return zl(t.type);case 16:return zl("Lazy");case 13:return zl("Suspense");case 19:return zl("SuspenseList");case 0:case 2:case 15:return t=Kp(t.type,!1),t;case 11:return t=Kp(t.type.render,!1),t;case 1:return t=Kp(t.type,!0),t;default:return""}}function og(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qo:return"Fragment";case Ho:return"Portal";case rg:return"Profiler";case gv:return"StrictMode";case ig:return"Suspense";case sg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hS:return(t.displayName||"Context")+".Consumer";case cS:return(t._context.displayName||"Context")+".Provider";case yv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vv:return e=t.displayName||null,e!==null?e:og(t.type)||"Memo";case Ai:e=t._payload,t=t._init;try{return og(t(e))}catch{}}return null}function hO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return og(e);case 8:return e===gv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dO(t){var e=fS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rh(t){t._valueTracker||(t._valueTracker=dO(t))}function pS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ad(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ag(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function O0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mS(t,e){e=e.checked,e!=null&&mv(t,"checked",e,!1)}function lg(t,e){mS(t,e);var n=Xi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ug(t,e.type,n):e.hasOwnProperty("defaultValue")&&ug(t,e.type,Xi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ug(t,e,n){(e!=="number"||ad(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ql=Array.isArray;function la(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function M0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(ql(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xi(n)}}function gS(t,e){var n=Xi(e.value),r=Xi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function F0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ih,vS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ih=ih||document.createElement("div"),ih.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ih.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Su(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fO=["Webkit","ms","Moz","O"];Object.keys(tu).forEach(function(t){fO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tu[e]=tu[t]})});function _S(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tu.hasOwnProperty(t)&&tu[t]?(""+e).trim():e+"px"}function wS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_S(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var pO=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dg(t,e){if(e){if(pO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function fg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pg=null;function _v(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mg=null,ua=null,ca=null;function L0(t){if(t=Ec(t)){if(typeof mg!="function")throw Error(L(280));var e=t.stateNode;e&&(e=_f(e),mg(t.stateNode,t.type,e))}}function ES(t){ua?ca?ca.push(t):ca=[t]:ua=t}function TS(){if(ua){var t=ua,e=ca;if(ca=ua=null,L0(t),e)for(t=0;t<e.length;t++)L0(e[t])}}function IS(t,e){return t(e)}function SS(){}var Gp=!1;function RS(t,e,n){if(Gp)return t(e,n);Gp=!0;try{return IS(t,e,n)}finally{Gp=!1,(ua!==null||ca!==null)&&(SS(),TS())}}function Ru(t,e){var n=t.stateNode;if(n===null)return null;var r=_f(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var gg=!1;if(ni)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){gg=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{gg=!1}function mO(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var nu=!1,ld=null,ud=!1,yg=null,gO={onError:function(t){nu=!0,ld=t}};function yO(t,e,n,r,i,s,o,a,l){nu=!1,ld=null,mO.apply(gO,arguments)}function vO(t,e,n,r,i,s,o,a,l){if(yO.apply(this,arguments),nu){if(nu){var u=ld;nu=!1,ld=null}else throw Error(L(198));ud||(ud=!0,yg=u)}}function To(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $0(t){if(To(t)!==t)throw Error(L(188))}function _O(t){var e=t.alternate;if(!e){if(e=To(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $0(i),t;if(s===r)return $0(i),e;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function CS(t){return t=_O(t),t!==null?AS(t):null}function AS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=AS(t);if(e!==null)return e;t=t.sibling}return null}var bS=Pn.unstable_scheduleCallback,j0=Pn.unstable_cancelCallback,wO=Pn.unstable_shouldYield,EO=Pn.unstable_requestPaint,pt=Pn.unstable_now,TO=Pn.unstable_getCurrentPriorityLevel,wv=Pn.unstable_ImmediatePriority,PS=Pn.unstable_UserBlockingPriority,cd=Pn.unstable_NormalPriority,IO=Pn.unstable_LowPriority,kS=Pn.unstable_IdlePriority,mf=null,Cr=null;function SO(t){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(mf,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:CO,RO=Math.log,xO=Math.LN2;function CO(t){return t>>>=0,t===0?32:31-(RO(t)/xO|0)|0}var sh=64,oh=4194304;function Kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Kl(a):(s&=o,s!==0&&(r=Kl(s)))}else o=n&~i,o!==0?r=Kl(o):s!==0&&(r=Kl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cr(e),i=1<<n,r|=t[n],e&=~i;return r}function AO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-cr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=AO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function DS(){var t=sh;return sh<<=1,!(sh&4194240)&&(sh=64),t}function Hp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _c(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cr(e),t[e]=n}function PO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-cr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ev(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function NS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var OS,Tv,VS,MS,FS,_g=!1,ah=[],ji=null,Bi=null,Ui=null,xu=new Map,Cu=new Map,Di=[],kO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function B0(t,e){switch(t){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":xu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(e.pointerId)}}function wl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ec(e),e!==null&&Tv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function DO(t,e,n,r,i){switch(e){case"focusin":return ji=wl(ji,t,e,n,r,i),!0;case"dragenter":return Bi=wl(Bi,t,e,n,r,i),!0;case"mouseover":return Ui=wl(Ui,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xu.set(s,wl(xu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Cu.set(s,wl(Cu.get(s)||null,t,e,n,r,i)),!0}return!1}function LS(t){var e=Ls(t.target);if(e!==null){var n=To(e);if(n!==null){if(e=n.tag,e===13){if(e=xS(n),e!==null){t.blockedOn=e,FS(t.priority,function(){VS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pg=r,n.target.dispatchEvent(r),pg=null}else return e=Ec(n),e!==null&&Tv(e),t.blockedOn=n,!1;e.shift()}return!0}function U0(t,e,n){Lh(t)&&n.delete(e)}function NO(){_g=!1,ji!==null&&Lh(ji)&&(ji=null),Bi!==null&&Lh(Bi)&&(Bi=null),Ui!==null&&Lh(Ui)&&(Ui=null),xu.forEach(U0),Cu.forEach(U0)}function El(t,e){t.blockedOn===e&&(t.blockedOn=null,_g||(_g=!0,Pn.unstable_scheduleCallback(Pn.unstable_NormalPriority,NO)))}function Au(t){function e(i){return El(i,t)}if(0<ah.length){El(ah[0],t);for(var n=1;n<ah.length;n++){var r=ah[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ji!==null&&El(ji,t),Bi!==null&&El(Bi,t),Ui!==null&&El(Ui,t),xu.forEach(e),Cu.forEach(e),n=0;n<Di.length;n++)r=Di[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Di.length&&(n=Di[0],n.blockedOn===null);)LS(n),n.blockedOn===null&&Di.shift()}var ha=di.ReactCurrentBatchConfig,dd=!0;function OO(t,e,n,r){var i=De,s=ha.transition;ha.transition=null;try{De=1,Iv(t,e,n,r)}finally{De=i,ha.transition=s}}function VO(t,e,n,r){var i=De,s=ha.transition;ha.transition=null;try{De=4,Iv(t,e,n,r)}finally{De=i,ha.transition=s}}function Iv(t,e,n,r){if(dd){var i=wg(t,e,n,r);if(i===null)rm(t,e,r,fd,n),B0(t,r);else if(DO(i,t,e,n,r))r.stopPropagation();else if(B0(t,r),e&4&&-1<kO.indexOf(t)){for(;i!==null;){var s=Ec(i);if(s!==null&&OS(s),s=wg(t,e,n,r),s===null&&rm(t,e,r,fd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else rm(t,e,r,null,n)}}var fd=null;function wg(t,e,n,r){if(fd=null,t=_v(r),t=Ls(t),t!==null)if(e=To(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fd=t,null}function $S(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TO()){case wv:return 1;case PS:return 4;case cd:case IO:return 16;case kS:return 536870912;default:return 16}default:return 16}}var Mi=null,Sv=null,$h=null;function jS(){if($h)return $h;var t,e=Sv,n=e.length,r,i="value"in Mi?Mi.value:Mi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return $h=i.slice(t,1<r?1-r:void 0)}function jh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lh(){return!0}function z0(){return!1}function Vn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lh:z0,this.isPropagationStopped=z0,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lh)},persist:function(){},isPersistent:lh}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rv=Vn(Wa),wc=nt({},Wa,{view:0,detail:0}),MO=Vn(wc),Qp,Wp,Tl,gf=nt({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(Qp=t.screenX-Tl.screenX,Wp=t.screenY-Tl.screenY):Wp=Qp=0,Tl=t),Qp)},movementY:function(t){return"movementY"in t?t.movementY:Wp}}),q0=Vn(gf),FO=nt({},gf,{dataTransfer:0}),LO=Vn(FO),$O=nt({},wc,{relatedTarget:0}),Yp=Vn($O),jO=nt({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),BO=Vn(jO),UO=nt({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zO=Vn(UO),qO=nt({},Wa,{data:0}),K0=Vn(qO),KO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HO[t])?!!e[t]:!1}function xv(){return QO}var WO=nt({},wc,{key:function(t){if(t.key){var e=KO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xv,charCode:function(t){return t.type==="keypress"?jh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YO=Vn(WO),XO=nt({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G0=Vn(XO),JO=nt({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xv}),ZO=Vn(JO),e2=nt({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),t2=Vn(e2),n2=nt({},gf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),r2=Vn(n2),i2=[9,13,27,32],Cv=ni&&"CompositionEvent"in window,ru=null;ni&&"documentMode"in document&&(ru=document.documentMode);var s2=ni&&"TextEvent"in window&&!ru,BS=ni&&(!Cv||ru&&8<ru&&11>=ru),H0=String.fromCharCode(32),Q0=!1;function US(t,e){switch(t){case"keyup":return i2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function o2(t,e){switch(t){case"compositionend":return zS(e);case"keypress":return e.which!==32?null:(Q0=!0,H0);case"textInput":return t=e.data,t===H0&&Q0?null:t;default:return null}}function a2(t,e){if(Wo)return t==="compositionend"||!Cv&&US(t,e)?(t=jS(),$h=Sv=Mi=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BS&&e.locale!=="ko"?null:e.data;default:return null}}var l2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!l2[t.type]:e==="textarea"}function qS(t,e,n,r){ES(r),e=pd(e,"onChange"),0<e.length&&(n=new Rv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var iu=null,bu=null;function u2(t){tR(t,0)}function yf(t){var e=Jo(t);if(pS(e))return t}function c2(t,e){if(t==="change")return e}var KS=!1;if(ni){var Xp;if(ni){var Jp="oninput"in document;if(!Jp){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),Jp=typeof Y0.oninput=="function"}Xp=Jp}else Xp=!1;KS=Xp&&(!document.documentMode||9<document.documentMode)}function X0(){iu&&(iu.detachEvent("onpropertychange",GS),bu=iu=null)}function GS(t){if(t.propertyName==="value"&&yf(bu)){var e=[];qS(e,bu,t,_v(t)),RS(u2,e)}}function h2(t,e,n){t==="focusin"?(X0(),iu=e,bu=n,iu.attachEvent("onpropertychange",GS)):t==="focusout"&&X0()}function d2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yf(bu)}function f2(t,e){if(t==="click")return yf(e)}function p2(t,e){if(t==="input"||t==="change")return yf(e)}function m2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dr=typeof Object.is=="function"?Object.is:m2;function Pu(t,e){if(dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ng.call(e,i)||!dr(t[i],e[i]))return!1}return!0}function J0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Z0(t,e){var n=J0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J0(n)}}function HS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function QS(){for(var t=window,e=ad();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ad(t.document)}return e}function Av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function g2(t){var e=QS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&HS(n.ownerDocument.documentElement,n)){if(r!==null&&Av(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Z0(n,s);var o=Z0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var y2=ni&&"documentMode"in document&&11>=document.documentMode,Yo=null,Eg=null,su=null,Tg=!1;function eE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tg||Yo==null||Yo!==ad(r)||(r=Yo,"selectionStart"in r&&Av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),su&&Pu(su,r)||(su=r,r=pd(Eg,"onSelect"),0<r.length&&(e=new Rv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Yo)))}function uh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xo={animationend:uh("Animation","AnimationEnd"),animationiteration:uh("Animation","AnimationIteration"),animationstart:uh("Animation","AnimationStart"),transitionend:uh("Transition","TransitionEnd")},Zp={},WS={};ni&&(WS=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function vf(t){if(Zp[t])return Zp[t];if(!Xo[t])return t;var e=Xo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WS)return Zp[t]=e[n];return t}var YS=vf("animationend"),XS=vf("animationiteration"),JS=vf("animationstart"),ZS=vf("transitionend"),eR=new Map,tE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){eR.set(t,e),Eo(e,[t])}for(var em=0;em<tE.length;em++){var tm=tE[em],v2=tm.toLowerCase(),_2=tm[0].toUpperCase()+tm.slice(1);hs(v2,"on"+_2)}hs(YS,"onAnimationEnd");hs(XS,"onAnimationIteration");hs(JS,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(ZS,"onTransitionEnd");Ta("onMouseEnter",["mouseout","mouseover"]);Ta("onMouseLeave",["mouseout","mouseover"]);Ta("onPointerEnter",["pointerout","pointerover"]);Ta("onPointerLeave",["pointerout","pointerover"]);Eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gl));function nE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vO(r,e,void 0,t),t.currentTarget=null}function tR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;nE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;nE(i,a,u),s=l}}}if(ud)throw t=yg,ud=!1,yg=null,t}function Ue(t,e){var n=e[Cg];n===void 0&&(n=e[Cg]=new Set);var r=t+"__bubble";n.has(r)||(nR(e,t,2,!1),n.add(r))}function nm(t,e,n){var r=0;e&&(r|=4),nR(n,t,r,e)}var ch="_reactListening"+Math.random().toString(36).slice(2);function ku(t){if(!t[ch]){t[ch]=!0,uS.forEach(function(n){n!=="selectionchange"&&(w2.has(n)||nm(n,!1,t),nm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ch]||(e[ch]=!0,nm("selectionchange",!1,e))}}function nR(t,e,n,r){switch($S(e)){case 1:var i=OO;break;case 4:i=VO;break;default:i=Iv}n=i.bind(null,e,n,t),i=void 0,!gg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function rm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ls(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}RS(function(){var u=s,c=_v(n),h=[];e:{var d=eR.get(t);if(d!==void 0){var f=Rv,p=t;switch(t){case"keypress":if(jh(n)===0)break e;case"keydown":case"keyup":f=YO;break;case"focusin":p="focus",f=Yp;break;case"focusout":p="blur",f=Yp;break;case"beforeblur":case"afterblur":f=Yp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=q0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=LO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=ZO;break;case YS:case XS:case JS:f=BO;break;case ZS:f=t2;break;case"scroll":f=MO;break;case"wheel":f=r2;break;case"copy":case"cut":case"paste":f=zO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=G0}var m=(e&4)!==0,E=!m&&t==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var _=u,w;_!==null;){w=_;var g=w.stateNode;if(w.tag===5&&g!==null&&(w=g,v!==null&&(g=Ru(_,v),g!=null&&m.push(Du(_,g,w)))),E)break;_=_.return}0<m.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==pg&&(p=n.relatedTarget||n.fromElement)&&(Ls(p)||p[ri]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?Ls(p):null,p!==null&&(E=To(p),p!==E||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(m=q0,g="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(m=G0,g="onPointerLeave",v="onPointerEnter",_="pointer"),E=f==null?d:Jo(f),w=p==null?d:Jo(p),d=new m(g,_+"leave",f,n,c),d.target=E,d.relatedTarget=w,g=null,Ls(c)===u&&(m=new m(v,_+"enter",p,n,c),m.target=w,m.relatedTarget=E,g=m),E=g,f&&p)t:{for(m=f,v=p,_=0,w=m;w;w=ko(w))_++;for(w=0,g=v;g;g=ko(g))w++;for(;0<_-w;)m=ko(m),_--;for(;0<w-_;)v=ko(v),w--;for(;_--;){if(m===v||v!==null&&m===v.alternate)break t;m=ko(m),v=ko(v)}m=null}else m=null;f!==null&&rE(h,d,f,m,!1),p!==null&&E!==null&&rE(h,E,p,m,!0)}}e:{if(d=u?Jo(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var R=c2;else if(W0(d))if(KS)R=p2;else{R=d2;var S=h2}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(R=f2);if(R&&(R=R(t,u))){qS(h,R,n,c);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&ug(d,"number",d.value)}switch(S=u?Jo(u):window,t){case"focusin":(W0(S)||S.contentEditable==="true")&&(Yo=S,Eg=u,su=null);break;case"focusout":su=Eg=Yo=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,eE(h,n,c);break;case"selectionchange":if(y2)break;case"keydown":case"keyup":eE(h,n,c)}var I;if(Cv)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Wo?US(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(BS&&n.locale!=="ko"&&(Wo||x!=="onCompositionStart"?x==="onCompositionEnd"&&Wo&&(I=jS()):(Mi=c,Sv="value"in Mi?Mi.value:Mi.textContent,Wo=!0)),S=pd(u,x),0<S.length&&(x=new K0(x,t,null,n,c),h.push({event:x,listeners:S}),I?x.data=I:(I=zS(n),I!==null&&(x.data=I)))),(I=s2?o2(t,n):a2(t,n))&&(u=pd(u,"onBeforeInput"),0<u.length&&(c=new K0("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=I))}tR(h,e)})}function Du(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ru(t,n),s!=null&&r.unshift(Du(t,s,i)),s=Ru(t,e),s!=null&&r.push(Du(t,s,i))),t=t.return}return r}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Ru(n,s),l!=null&&o.unshift(Du(n,l,a))):i||(l=Ru(n,s),l!=null&&o.push(Du(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var E2=/\r\n?/g,T2=/\u0000|\uFFFD/g;function iE(t){return(typeof t=="string"?t:""+t).replace(E2,`
`).replace(T2,"")}function hh(t,e,n){if(e=iE(e),iE(t)!==e&&n)throw Error(L(425))}function md(){}var Ig=null,Sg=null;function Rg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xg=typeof setTimeout=="function"?setTimeout:void 0,I2=typeof clearTimeout=="function"?clearTimeout:void 0,sE=typeof Promise=="function"?Promise:void 0,S2=typeof queueMicrotask=="function"?queueMicrotask:typeof sE<"u"?function(t){return sE.resolve(null).then(t).catch(R2)}:xg;function R2(t){setTimeout(function(){throw t})}function im(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Au(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Au(e)}function zi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),_r="__reactFiber$"+Ya,Nu="__reactProps$"+Ya,ri="__reactContainer$"+Ya,Cg="__reactEvents$"+Ya,x2="__reactListeners$"+Ya,C2="__reactHandles$"+Ya;function Ls(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ri]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oE(t);t!==null;){if(n=t[_r])return n;t=oE(t)}return e}t=n,n=t.parentNode}return null}function Ec(t){return t=t[_r]||t[ri],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function _f(t){return t[Nu]||null}var Ag=[],Zo=-1;function ds(t){return{current:t}}function Ge(t){0>Zo||(t.current=Ag[Zo],Ag[Zo]=null,Zo--)}function $e(t,e){Zo++,Ag[Zo]=t.current,t.current=e}var Ji={},Jt=ds(Ji),wn=ds(!1),Zs=Ji;function Ia(t,e){var n=t.type.contextTypes;if(!n)return Ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function En(t){return t=t.childContextTypes,t!=null}function gd(){Ge(wn),Ge(Jt)}function aE(t,e,n){if(Jt.current!==Ji)throw Error(L(168));$e(Jt,e),$e(wn,n)}function rR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(L(108,hO(t)||"Unknown",i));return nt({},n,r)}function yd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,Zs=Jt.current,$e(Jt,t),$e(wn,wn.current),!0}function lE(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=rR(t,e,Zs),r.__reactInternalMemoizedMergedChildContext=t,Ge(wn),Ge(Jt),$e(Jt,t)):Ge(wn),$e(wn,n)}var Br=null,wf=!1,sm=!1;function iR(t){Br===null?Br=[t]:Br.push(t)}function A2(t){wf=!0,iR(t)}function fs(){if(!sm&&Br!==null){sm=!0;var t=0,e=De;try{var n=Br;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Br=null,wf=!1}catch(i){throw Br!==null&&(Br=Br.slice(t+1)),bS(wv,fs),i}finally{De=e,sm=!1}}return null}var ea=[],ta=0,vd=null,_d=0,Un=[],zn=0,eo=null,Kr=1,Gr="";function bs(t,e){ea[ta++]=_d,ea[ta++]=vd,vd=t,_d=e}function sR(t,e,n){Un[zn++]=Kr,Un[zn++]=Gr,Un[zn++]=eo,eo=t;var r=Kr;t=Gr;var i=32-cr(r)-1;r&=~(1<<i),n+=1;var s=32-cr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Kr=1<<32-cr(e)+i|n<<i|r,Gr=s+t}else Kr=1<<s|n<<i|r,Gr=t}function bv(t){t.return!==null&&(bs(t,1),sR(t,1,0))}function Pv(t){for(;t===vd;)vd=ea[--ta],ea[ta]=null,_d=ea[--ta],ea[ta]=null;for(;t===eo;)eo=Un[--zn],Un[zn]=null,Gr=Un[--zn],Un[zn]=null,Kr=Un[--zn],Un[zn]=null}var bn=null,An=null,Qe=!1,ar=null;function oR(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,An=zi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=eo!==null?{id:Kr,overflow:Gr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,An=null,!0):!1;default:return!1}}function bg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pg(t){if(Qe){var e=An;if(e){var n=e;if(!uE(t,e)){if(bg(t))throw Error(L(418));e=zi(n.nextSibling);var r=bn;e&&uE(t,e)?oR(r,n):(t.flags=t.flags&-4097|2,Qe=!1,bn=t)}}else{if(bg(t))throw Error(L(418));t.flags=t.flags&-4097|2,Qe=!1,bn=t}}}function cE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function dh(t){if(t!==bn)return!1;if(!Qe)return cE(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rg(t.type,t.memoizedProps)),e&&(e=An)){if(bg(t))throw aR(),Error(L(418));for(;e;)oR(t,e),e=zi(e.nextSibling)}if(cE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){An=zi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}An=null}}else An=bn?zi(t.stateNode.nextSibling):null;return!0}function aR(){for(var t=An;t;)t=zi(t.nextSibling)}function Sa(){An=bn=null,Qe=!1}function kv(t){ar===null?ar=[t]:ar.push(t)}var b2=di.ReactCurrentBatchConfig;function ir(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var wd=ds(null),Ed=null,na=null,Dv=null;function Nv(){Dv=na=Ed=null}function Ov(t){var e=wd.current;Ge(wd),t._currentValue=e}function kg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function da(t,e){Ed=t,Dv=na=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function Yn(t){var e=t._currentValue;if(Dv!==t)if(t={context:t,memoizedValue:e,next:null},na===null){if(Ed===null)throw Error(L(308));na=t,Ed.dependencies={lanes:0,firstContext:t}}else na=na.next=t;return e}var $s=null;function Vv(t){$s===null?$s=[t]:$s.push(t)}function lR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Vv(e)):(n.next=i.next,i.next=n),e.interleaved=n,ii(t,r)}function ii(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bi=!1;function Mv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ii(t,n)}return i=r.interleaved,i===null?(e.next=e,Vv(r)):(e.next=i.next,i.next=e),r.interleaved=e,ii(t,n)}function Bh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ev(t,n)}}function hE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Td(t,e,n,r){var i=t.updateQueue;bi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(d=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=nt({},h,d);break e;case 2:bi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);no|=o,t.lanes=o,t.memoizedState=h}}function dE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var cR=new lS.Component().refs;function Dg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ef={isMounted:function(t){return(t=t._reactInternals)?To(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),i=Gi(t),s=Wr(r,i);s.payload=e,n!=null&&(s.callback=n),e=qi(t,s,i),e!==null&&(hr(e,t,i,r),Bh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),i=Gi(t),s=Wr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=qi(t,s,i),e!==null&&(hr(e,t,i,r),Bh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=Gi(t),i=Wr(n,r);i.tag=2,e!=null&&(i.callback=e),e=qi(t,i,r),e!==null&&(hr(e,t,r,n),Bh(e,t,r))}};function fE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Pu(n,r)||!Pu(i,s):!0}function hR(t,e,n){var r=!1,i=Ji,s=e.contextType;return typeof s=="object"&&s!==null?s=Yn(s):(i=En(e)?Zs:Jt.current,r=e.contextTypes,s=(r=r!=null)?Ia(t,i):Ji),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ef,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ef.enqueueReplaceState(e,e.state,null)}function Ng(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=cR,Mv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yn(s):(s=En(e)?Zs:Jt.current,i.context=Ia(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ef.enqueueReplaceState(i,i.state,null),Td(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Il(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===cR&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function fh(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mE(t){var e=t._init;return e(t._payload)}function dR(t){function e(v,_){if(t){var w=v.deletions;w===null?(v.deletions=[_],v.flags|=16):w.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=Hi(v,_),v.index=0,v.sibling=null,v}function s(v,_,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<_?(v.flags|=2,_):w):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,w,g){return _===null||_.tag!==6?(_=dm(w,v.mode,g),_.return=v,_):(_=i(_,w),_.return=v,_)}function l(v,_,w,g){var R=w.type;return R===Qo?c(v,_,w.props.children,g,w.key):_!==null&&(_.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ai&&mE(R)===_.type)?(g=i(_,w.props),g.ref=Il(v,_,w),g.return=v,g):(g=Hh(w.type,w.key,w.props,null,v.mode,g),g.ref=Il(v,_,w),g.return=v,g)}function u(v,_,w,g){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=fm(w,v.mode,g),_.return=v,_):(_=i(_,w.children||[]),_.return=v,_)}function c(v,_,w,g,R){return _===null||_.tag!==7?(_=Ws(w,v.mode,g,R),_.return=v,_):(_=i(_,w),_.return=v,_)}function h(v,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=dm(""+_,v.mode,w),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nh:return w=Hh(_.type,_.key,_.props,null,v.mode,w),w.ref=Il(v,null,_),w.return=v,w;case Ho:return _=fm(_,v.mode,w),_.return=v,_;case Ai:var g=_._init;return h(v,g(_._payload),w)}if(ql(_)||vl(_))return _=Ws(_,v.mode,w,null),_.return=v,_;fh(v,_)}return null}function d(v,_,w,g){var R=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return R!==null?null:a(v,_,""+w,g);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nh:return w.key===R?l(v,_,w,g):null;case Ho:return w.key===R?u(v,_,w,g):null;case Ai:return R=w._init,d(v,_,R(w._payload),g)}if(ql(w)||vl(w))return R!==null?null:c(v,_,w,g,null);fh(v,w)}return null}function f(v,_,w,g,R){if(typeof g=="string"&&g!==""||typeof g=="number")return v=v.get(w)||null,a(_,v,""+g,R);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case nh:return v=v.get(g.key===null?w:g.key)||null,l(_,v,g,R);case Ho:return v=v.get(g.key===null?w:g.key)||null,u(_,v,g,R);case Ai:var S=g._init;return f(v,_,w,S(g._payload),R)}if(ql(g)||vl(g))return v=v.get(w)||null,c(_,v,g,R,null);fh(_,g)}return null}function p(v,_,w,g){for(var R=null,S=null,I=_,x=_=0,D=null;I!==null&&x<w.length;x++){I.index>x?(D=I,I=null):D=I.sibling;var M=d(v,I,w[x],g);if(M===null){I===null&&(I=D);break}t&&I&&M.alternate===null&&e(v,I),_=s(M,_,x),S===null?R=M:S.sibling=M,S=M,I=D}if(x===w.length)return n(v,I),Qe&&bs(v,x),R;if(I===null){for(;x<w.length;x++)I=h(v,w[x],g),I!==null&&(_=s(I,_,x),S===null?R=I:S.sibling=I,S=I);return Qe&&bs(v,x),R}for(I=r(v,I);x<w.length;x++)D=f(I,v,x,w[x],g),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?x:D.key),_=s(D,_,x),S===null?R=D:S.sibling=D,S=D);return t&&I.forEach(function(j){return e(v,j)}),Qe&&bs(v,x),R}function m(v,_,w,g){var R=vl(w);if(typeof R!="function")throw Error(L(150));if(w=R.call(w),w==null)throw Error(L(151));for(var S=R=null,I=_,x=_=0,D=null,M=w.next();I!==null&&!M.done;x++,M=w.next()){I.index>x?(D=I,I=null):D=I.sibling;var j=d(v,I,M.value,g);if(j===null){I===null&&(I=D);break}t&&I&&j.alternate===null&&e(v,I),_=s(j,_,x),S===null?R=j:S.sibling=j,S=j,I=D}if(M.done)return n(v,I),Qe&&bs(v,x),R;if(I===null){for(;!M.done;x++,M=w.next())M=h(v,M.value,g),M!==null&&(_=s(M,_,x),S===null?R=M:S.sibling=M,S=M);return Qe&&bs(v,x),R}for(I=r(v,I);!M.done;x++,M=w.next())M=f(I,v,x,M.value,g),M!==null&&(t&&M.alternate!==null&&I.delete(M.key===null?x:M.key),_=s(M,_,x),S===null?R=M:S.sibling=M,S=M);return t&&I.forEach(function(W){return e(v,W)}),Qe&&bs(v,x),R}function E(v,_,w,g){if(typeof w=="object"&&w!==null&&w.type===Qo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case nh:e:{for(var R=w.key,S=_;S!==null;){if(S.key===R){if(R=w.type,R===Qo){if(S.tag===7){n(v,S.sibling),_=i(S,w.props.children),_.return=v,v=_;break e}}else if(S.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ai&&mE(R)===S.type){n(v,S.sibling),_=i(S,w.props),_.ref=Il(v,S,w),_.return=v,v=_;break e}n(v,S);break}else e(v,S);S=S.sibling}w.type===Qo?(_=Ws(w.props.children,v.mode,g,w.key),_.return=v,v=_):(g=Hh(w.type,w.key,w.props,null,v.mode,g),g.ref=Il(v,_,w),g.return=v,v=g)}return o(v);case Ho:e:{for(S=w.key;_!==null;){if(_.key===S)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(v,_.sibling),_=i(_,w.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=fm(w,v.mode,g),_.return=v,v=_}return o(v);case Ai:return S=w._init,E(v,_,S(w._payload),g)}if(ql(w))return p(v,_,w,g);if(vl(w))return m(v,_,w,g);fh(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(v,_.sibling),_=i(_,w),_.return=v,v=_):(n(v,_),_=dm(w,v.mode,g),_.return=v,v=_),o(v)):n(v,_)}return E}var Ra=dR(!0),fR=dR(!1),Tc={},Ar=ds(Tc),Ou=ds(Tc),Vu=ds(Tc);function js(t){if(t===Tc)throw Error(L(174));return t}function Fv(t,e){switch($e(Vu,e),$e(Ou,t),$e(Ar,Tc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hg(e,t)}Ge(Ar),$e(Ar,e)}function xa(){Ge(Ar),Ge(Ou),Ge(Vu)}function pR(t){js(Vu.current);var e=js(Ar.current),n=hg(e,t.type);e!==n&&($e(Ou,t),$e(Ar,n))}function Lv(t){Ou.current===t&&(Ge(Ar),Ge(Ou))}var Je=ds(0);function Id(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var om=[];function $v(){for(var t=0;t<om.length;t++)om[t]._workInProgressVersionPrimary=null;om.length=0}var Uh=di.ReactCurrentDispatcher,am=di.ReactCurrentBatchConfig,to=0,et=null,Et=null,Ct=null,Sd=!1,ou=!1,Mu=0,P2=0;function Kt(){throw Error(L(321))}function jv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dr(t[n],e[n]))return!1;return!0}function Bv(t,e,n,r,i,s){if(to=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uh.current=t===null||t.memoizedState===null?O2:V2,t=n(r,i),ou){s=0;do{if(ou=!1,Mu=0,25<=s)throw Error(L(301));s+=1,Ct=Et=null,e.updateQueue=null,Uh.current=M2,t=n(r,i)}while(ou)}if(Uh.current=Rd,e=Et!==null&&Et.next!==null,to=0,Ct=Et=et=null,Sd=!1,e)throw Error(L(300));return t}function Uv(){var t=Mu!==0;return Mu=0,t}function vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?et.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Xn(){if(Et===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=Ct===null?et.memoizedState:Ct.next;if(e!==null)Ct=e,Et=t;else{if(t===null)throw Error(L(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Ct===null?et.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Fu(t,e){return typeof e=="function"?e(t):e}function lm(t){var e=Xn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=Et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((to&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,et.lanes|=c,no|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,dr(r,e.memoizedState)||(gn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,et.lanes|=s,no|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function um(t){var e=Xn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);dr(s,e.memoizedState)||(gn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function mR(){}function gR(t,e){var n=et,r=Xn(),i=e(),s=!dr(r.memoizedState,i);if(s&&(r.memoizedState=i,gn=!0),r=r.queue,zv(_R.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,Lu(9,vR.bind(null,n,r,i,e),void 0,null),bt===null)throw Error(L(349));to&30||yR(n,e,i)}return i}function yR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vR(t,e,n,r){e.value=n,e.getSnapshot=r,wR(e)&&ER(t)}function _R(t,e,n){return n(function(){wR(e)&&ER(t)})}function wR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dr(t,n)}catch{return!0}}function ER(t){var e=ii(t,1);e!==null&&hr(e,t,1,-1)}function gE(t){var e=vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fu,lastRenderedState:t},e.queue=t,t=t.dispatch=N2.bind(null,et,t),[e.memoizedState,t]}function Lu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function TR(){return Xn().memoizedState}function zh(t,e,n,r){var i=vr();et.flags|=t,i.memoizedState=Lu(1|e,n,void 0,r===void 0?null:r)}function Tf(t,e,n,r){var i=Xn();r=r===void 0?null:r;var s=void 0;if(Et!==null){var o=Et.memoizedState;if(s=o.destroy,r!==null&&jv(r,o.deps)){i.memoizedState=Lu(e,n,s,r);return}}et.flags|=t,i.memoizedState=Lu(1|e,n,s,r)}function yE(t,e){return zh(8390656,8,t,e)}function zv(t,e){return Tf(2048,8,t,e)}function IR(t,e){return Tf(4,2,t,e)}function SR(t,e){return Tf(4,4,t,e)}function RR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xR(t,e,n){return n=n!=null?n.concat([t]):null,Tf(4,4,RR.bind(null,e,t),n)}function qv(){}function CR(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function AR(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bR(t,e,n){return to&21?(dr(n,e)||(n=DS(),et.lanes|=n,no|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function k2(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=am.transition;am.transition={};try{t(!1),e()}finally{De=n,am.transition=r}}function PR(){return Xn().memoizedState}function D2(t,e,n){var r=Gi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kR(t))DR(e,n);else if(n=lR(t,e,n,r),n!==null){var i=an();hr(n,t,r,i),NR(n,e,r)}}function N2(t,e,n){var r=Gi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kR(t))DR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,dr(a,o)){var l=e.interleaved;l===null?(i.next=i,Vv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=lR(t,e,i,r),n!==null&&(i=an(),hr(n,t,r,i),NR(n,e,r))}}function kR(t){var e=t.alternate;return t===et||e!==null&&e===et}function DR(t,e){ou=Sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function NR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ev(t,n)}}var Rd={readContext:Yn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},O2={readContext:Yn,useCallback:function(t,e){return vr().memoizedState=[t,e===void 0?null:e],t},useContext:Yn,useEffect:yE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zh(4194308,4,RR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zh(4194308,4,t,e)},useInsertionEffect:function(t,e){return zh(4,2,t,e)},useMemo:function(t,e){var n=vr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=D2.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=vr();return t={current:t},e.memoizedState=t},useState:gE,useDebugValue:qv,useDeferredValue:function(t){return vr().memoizedState=t},useTransition:function(){var t=gE(!1),e=t[0];return t=k2.bind(null,t[1]),vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,i=vr();if(Qe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),bt===null)throw Error(L(349));to&30||yR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,yE(_R.bind(null,r,s,t),[t]),r.flags|=2048,Lu(9,vR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vr(),e=bt.identifierPrefix;if(Qe){var n=Gr,r=Kr;n=(r&~(1<<32-cr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=P2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},V2={readContext:Yn,useCallback:CR,useContext:Yn,useEffect:zv,useImperativeHandle:xR,useInsertionEffect:IR,useLayoutEffect:SR,useMemo:AR,useReducer:lm,useRef:TR,useState:function(){return lm(Fu)},useDebugValue:qv,useDeferredValue:function(t){var e=Xn();return bR(e,Et.memoizedState,t)},useTransition:function(){var t=lm(Fu)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:mR,useSyncExternalStore:gR,useId:PR,unstable_isNewReconciler:!1},M2={readContext:Yn,useCallback:CR,useContext:Yn,useEffect:zv,useImperativeHandle:xR,useInsertionEffect:IR,useLayoutEffect:SR,useMemo:AR,useReducer:um,useRef:TR,useState:function(){return um(Fu)},useDebugValue:qv,useDeferredValue:function(t){var e=Xn();return Et===null?e.memoizedState=t:bR(e,Et.memoizedState,t)},useTransition:function(){var t=um(Fu)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:mR,useSyncExternalStore:gR,useId:PR,unstable_isNewReconciler:!1};function Ca(t,e){try{var n="",r=e;do n+=cO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function cm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Og(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var F2=typeof WeakMap=="function"?WeakMap:Map;function OR(t,e,n){n=Wr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cd||(Cd=!0,qg=r),Og(t,e)},n}function VR(t,e,n){n=Wr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Og(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Og(t,e),typeof r!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new F2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=X2.bind(null,t,e,n),e.then(t,t))}function _E(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wr(-1,1),e.tag=2,qi(n,e,1))),n.lanes|=1),t)}var L2=di.ReactCurrentOwner,gn=!1;function tn(t,e,n,r){e.child=t===null?fR(e,null,n,r):Ra(e,t.child,n,r)}function EE(t,e,n,r,i){n=n.render;var s=e.ref;return da(e,i),r=Bv(t,e,n,r,s,i),n=Uv(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,si(t,e,i)):(Qe&&n&&bv(e),e.flags|=1,tn(t,e,r,i),e.child)}function TE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Jv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,MR(t,e,s,r,i)):(t=Hh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Pu,n(o,r)&&t.ref===e.ref)return si(t,e,i)}return e.flags|=1,t=Hi(s,r),t.ref=e.ref,t.return=e,e.child=t}function MR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Pu(s,r)&&t.ref===e.ref)if(gn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,si(t,e,i)}return Vg(t,e,n,r,i)}function FR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ia,Cn),Cn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(ia,Cn),Cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,$e(ia,Cn),Cn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,$e(ia,Cn),Cn|=r;return tn(t,e,i,n),e.child}function LR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vg(t,e,n,r,i){var s=En(n)?Zs:Jt.current;return s=Ia(e,s),da(e,i),n=Bv(t,e,n,r,s,i),r=Uv(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,si(t,e,i)):(Qe&&r&&bv(e),e.flags|=1,tn(t,e,n,i),e.child)}function IE(t,e,n,r,i){if(En(n)){var s=!0;yd(e)}else s=!1;if(da(e,i),e.stateNode===null)qh(t,e),hR(e,n,r),Ng(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Yn(u):(u=En(n)?Zs:Jt.current,u=Ia(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&pE(e,o,r,u),bi=!1;var d=e.memoizedState;o.state=d,Td(e,r,o,i),l=e.memoizedState,a!==r||d!==l||wn.current||bi?(typeof c=="function"&&(Dg(e,n,c,r),l=e.memoizedState),(a=bi||fE(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uR(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ir(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yn(l):(l=En(n)?Zs:Jt.current,l=Ia(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&pE(e,o,r,l),bi=!1,d=e.memoizedState,o.state=d,Td(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||wn.current||bi?(typeof f=="function"&&(Dg(e,n,f,r),p=e.memoizedState),(u=bi||fE(e,n,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Mg(t,e,n,r,s,i)}function Mg(t,e,n,r,i,s){LR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&lE(e,n,!1),si(t,e,s);r=e.stateNode,L2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ra(e,t.child,null,s),e.child=Ra(e,null,a,s)):tn(t,e,a,s),e.memoizedState=r.state,i&&lE(e,n,!0),e.child}function $R(t){var e=t.stateNode;e.pendingContext?aE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aE(t,e.context,!1),Fv(t,e.containerInfo)}function SE(t,e,n,r,i){return Sa(),kv(i),e.flags|=256,tn(t,e,n,r),e.child}var Fg={dehydrated:null,treeContext:null,retryLane:0};function Lg(t){return{baseLanes:t,cachePool:null,transitions:null}}function jR(t,e,n){var r=e.pendingProps,i=Je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$e(Je,i&1),t===null)return Pg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Rf(o,r,0,null),t=Ws(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Lg(n),e.memoizedState=Fg,t):Kv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hi(a,s):(s=Ws(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Lg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Fg,r}return s=t.child,t=s.sibling,r=Hi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kv(t,e){return e=Rf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ph(t,e,n,r){return r!==null&&kv(r),Ra(e,t.child,null,n),t=Kv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=cm(Error(L(422))),ph(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Rf({mode:"visible",children:r.children},i,0,null),s=Ws(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ra(e,t.child,null,o),e.child.memoizedState=Lg(o),e.memoizedState=Fg,s);if(!(e.mode&1))return ph(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(L(419)),r=cm(s,r,void 0),ph(t,e,o,r)}if(a=(o&t.childLanes)!==0,gn||a){if(r=bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ii(t,i),hr(r,t,i,-1))}return Xv(),r=cm(Error(L(421))),ph(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=J2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,An=zi(i.nextSibling),bn=e,Qe=!0,ar=null,t!==null&&(Un[zn++]=Kr,Un[zn++]=Gr,Un[zn++]=eo,Kr=t.id,Gr=t.overflow,eo=e),e=Kv(e,r.children),e.flags|=4096,e)}function RE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kg(t.return,e,n)}function hm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function BR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(tn(t,e,r.children,n),r=Je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&RE(t,n,e);else if(t.tag===19)RE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Id(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Id(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hm(e,!0,n,null,s);break;case"together":hm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),no|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=Hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function j2(t,e,n){switch(e.tag){case 3:$R(e),Sa();break;case 5:pR(e);break;case 1:En(e.type)&&yd(e);break;case 4:Fv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;$e(wd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?jR(t,e,n):($e(Je,Je.current&1),t=si(t,e,n),t!==null?t.sibling:null);$e(Je,Je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(Je,Je.current),r)break;return null;case 22:case 23:return e.lanes=0,FR(t,e,n)}return si(t,e,n)}var UR,$g,zR,qR;UR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$g=function(){};zR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,js(Ar.current);var s=null;switch(n){case"input":i=ag(t,i),r=ag(t,r),s=[];break;case"select":i=nt({},i,{value:void 0}),r=nt({},r,{value:void 0}),s=[];break;case"textarea":i=cg(t,i),r=cg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=md)}dg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Iu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Iu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ue("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};qR=function(t,e,n,r){n!==r&&(e.flags|=4)};function Sl(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function B2(t,e,n){var r=e.pendingProps;switch(Pv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return En(e.type)&&gd(),Gt(e),null;case 3:return r=e.stateNode,xa(),Ge(wn),Ge(Jt),$v(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(Hg(ar),ar=null))),$g(t,e),Gt(e),null;case 5:Lv(e);var i=js(Vu.current);if(n=e.type,t!==null&&e.stateNode!=null)zR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Gt(e),null}if(t=js(Ar.current),dh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[_r]=e,r[Nu]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<Gl.length;i++)Ue(Gl[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":O0(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":M0(r,s),Ue("invalid",r)}dg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&hh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hh(r.textContent,a,t),i=["children",""+a]):Iu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":rh(r),V0(r,s,!0);break;case"textarea":rh(r),F0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=md)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_r]=e,t[Nu]=r,UR(t,e,!1,!1),e.stateNode=t;e:{switch(o=fg(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gl.length;i++)Ue(Gl[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":O0(t,r),i=ag(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=nt({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":M0(t,r),i=cg(t,r),Ue("invalid",t);break;default:i=r}dg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?wS(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Su(t,l):typeof l=="number"&&Su(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Iu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ue("scroll",t):l!=null&&mv(t,s,l,o))}switch(n){case"input":rh(t),V0(t,r,!1);break;case"textarea":rh(t),F0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?la(t,!!r.multiple,s,!1):r.defaultValue!=null&&la(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=md)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)qR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=js(Vu.current),js(Ar.current),dh(e)){if(r=e.stateNode,n=e.memoizedProps,r[_r]=e,(s=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:hh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_r]=e,e.stateNode=r}return Gt(e),null;case 13:if(Ge(Je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&An!==null&&e.mode&1&&!(e.flags&128))aR(),Sa(),e.flags|=98560,s=!1;else if(s=dh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(L(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[_r]=e}else Sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),s=!1}else ar!==null&&(Hg(ar),ar=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?Tt===0&&(Tt=3):Xv())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return xa(),$g(t,e),t===null&&ku(e.stateNode.containerInfo),Gt(e),null;case 10:return Ov(e.type._context),Gt(e),null;case 17:return En(e.type)&&gd(),Gt(e),null;case 19:if(Ge(Je),s=e.memoizedState,s===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Sl(s,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Id(t),o!==null){for(e.flags|=128,Sl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Je,Je.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>Aa&&(e.flags|=128,r=!0,Sl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Id(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Qe)return Gt(e),null}else 2*pt()-s.renderingStartTime>Aa&&n!==1073741824&&(e.flags|=128,r=!0,Sl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=Je.current,$e(Je,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return Yv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function U2(t,e){switch(Pv(e),e.tag){case 1:return En(e.type)&&gd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xa(),Ge(wn),Ge(Jt),$v(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lv(e),null;case 13:if(Ge(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Je),null;case 4:return xa(),null;case 10:return Ov(e.type._context),null;case 22:case 23:return Yv(),null;case 24:return null;default:return null}}var mh=!1,Qt=!1,z2=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ra(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(t,e,r)}else n.current=null}function jg(t,e,n){try{n()}catch(r){it(t,e,r)}}var xE=!1;function q2(t,e){if(Ig=dd,t=QS(),Av(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sg={focusedElem:t,selectionRange:n},dd=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,E=p.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:ir(e.type,m),E);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(g){it(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=xE,xE=!1,p}function au(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&jg(e,n,s)}i=i.next}while(i!==r)}}function If(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Bg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KR(t){var e=t.alternate;e!==null&&(t.alternate=null,KR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[Nu],delete e[Cg],delete e[x2],delete e[C2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GR(t){return t.tag===5||t.tag===3||t.tag===4}function CE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ug(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=md));else if(r!==4&&(t=t.child,t!==null))for(Ug(t,e,n),t=t.sibling;t!==null;)Ug(t,e,n),t=t.sibling}function zg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zg(t,e,n),t=t.sibling;t!==null;)zg(t,e,n),t=t.sibling}var Ft=null,sr=!1;function Ti(t,e,n){for(n=n.child;n!==null;)HR(t,e,n),n=n.sibling}function HR(t,e,n){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(mf,n)}catch{}switch(n.tag){case 5:Qt||ra(n,e);case 6:var r=Ft,i=sr;Ft=null,Ti(t,e,n),Ft=r,sr=i,Ft!==null&&(sr?(t=Ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ft.removeChild(n.stateNode));break;case 18:Ft!==null&&(sr?(t=Ft,n=n.stateNode,t.nodeType===8?im(t.parentNode,n):t.nodeType===1&&im(t,n),Au(t)):im(Ft,n.stateNode));break;case 4:r=Ft,i=sr,Ft=n.stateNode.containerInfo,sr=!0,Ti(t,e,n),Ft=r,sr=i;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jg(n,e,o),i=i.next}while(i!==r)}Ti(t,e,n);break;case 1:if(!Qt&&(ra(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){it(n,e,a)}Ti(t,e,n);break;case 21:Ti(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,Ti(t,e,n),Qt=r):Ti(t,e,n);break;default:Ti(t,e,n)}}function AE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new z2),e.forEach(function(r){var i=Z2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ft=a.stateNode,sr=!1;break e;case 3:Ft=a.stateNode.containerInfo,sr=!0;break e;case 4:Ft=a.stateNode.containerInfo,sr=!0;break e}a=a.return}if(Ft===null)throw Error(L(160));HR(s,o,i),Ft=null,sr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){it(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QR(e,t),e=e.sibling}function QR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rr(e,t),yr(t),r&4){try{au(3,t,t.return),If(3,t)}catch(m){it(t,t.return,m)}try{au(5,t,t.return)}catch(m){it(t,t.return,m)}}break;case 1:rr(e,t),yr(t),r&512&&n!==null&&ra(n,n.return);break;case 5:if(rr(e,t),yr(t),r&512&&n!==null&&ra(n,n.return),t.flags&32){var i=t.stateNode;try{Su(i,"")}catch(m){it(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mS(i,s),fg(a,o);var u=fg(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?wS(i,h):c==="dangerouslySetInnerHTML"?vS(i,h):c==="children"?Su(i,h):mv(i,c,h,u)}switch(a){case"input":lg(i,s);break;case"textarea":gS(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?la(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?la(i,!!s.multiple,s.defaultValue,!0):la(i,!!s.multiple,s.multiple?[]:"",!1))}i[Nu]=s}catch(m){it(t,t.return,m)}}break;case 6:if(rr(e,t),yr(t),r&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){it(t,t.return,m)}}break;case 3:if(rr(e,t),yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Au(e.containerInfo)}catch(m){it(t,t.return,m)}break;case 4:rr(e,t),yr(t);break;case 13:rr(e,t),yr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Qv=pt())),r&4&&AE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(u=Qt)||c,rr(e,t),Qt=u):rr(e,t),yr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Q=t,c=t.child;c!==null;){for(h=Q=c;Q!==null;){switch(d=Q,f=d.child,d.tag){case 0:case 11:case 14:case 15:au(4,d,d.return);break;case 1:ra(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){it(r,n,m)}}break;case 5:ra(d,d.return);break;case 22:if(d.memoizedState!==null){PE(h);continue}}f!==null?(f.return=d,Q=f):PE(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_S("display",o))}catch(m){it(t,t.return,m)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){it(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rr(e,t),yr(t),r&4&&AE(t);break;case 21:break;default:rr(e,t),yr(t)}}function yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GR(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Su(i,""),r.flags&=-33);var s=CE(t);zg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=CE(t);Ug(t,a,o);break;default:throw Error(L(161))}}catch(l){it(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function K2(t,e,n){Q=t,WR(t)}function WR(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Qt;a=mh;var u=Qt;if(mh=o,(Qt=l)&&!u)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?kE(i):l!==null?(l.return=o,Q=l):kE(i);for(;s!==null;)Q=s,WR(s),s=s.sibling;Q=i,mh=a,Qt=u}bE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):bE(t)}}function bE(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||If(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ir(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Au(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Qt||e.flags&512&&Bg(e)}catch(d){it(e,e.return,d)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function PE(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function kE(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{If(4,e)}catch(l){it(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){it(e,i,l)}}var s=e.return;try{Bg(e)}catch(l){it(e,s,l)}break;case 5:var o=e.return;try{Bg(e)}catch(l){it(e,o,l)}}}catch(l){it(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var G2=Math.ceil,xd=di.ReactCurrentDispatcher,Gv=di.ReactCurrentOwner,Qn=di.ReactCurrentBatchConfig,Ce=0,bt=null,vt=null,Bt=0,Cn=0,ia=ds(0),Tt=0,$u=null,no=0,Sf=0,Hv=0,lu=null,mn=null,Qv=0,Aa=1/0,jr=null,Cd=!1,qg=null,Ki=null,gh=!1,Fi=null,Ad=0,uu=0,Kg=null,Kh=-1,Gh=0;function an(){return Ce&6?pt():Kh!==-1?Kh:Kh=pt()}function Gi(t){return t.mode&1?Ce&2&&Bt!==0?Bt&-Bt:b2.transition!==null?(Gh===0&&(Gh=DS()),Gh):(t=De,t!==0||(t=window.event,t=t===void 0?16:$S(t.type)),t):1}function hr(t,e,n,r){if(50<uu)throw uu=0,Kg=null,Error(L(185));_c(t,n,r),(!(Ce&2)||t!==bt)&&(t===bt&&(!(Ce&2)&&(Sf|=n),Tt===4&&Ni(t,Bt)),Tn(t,r),n===1&&Ce===0&&!(e.mode&1)&&(Aa=pt()+500,wf&&fs()))}function Tn(t,e){var n=t.callbackNode;bO(t,e);var r=hd(t,t===bt?Bt:0);if(r===0)n!==null&&j0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&j0(n),e===1)t.tag===0?A2(DE.bind(null,t)):iR(DE.bind(null,t)),S2(function(){!(Ce&6)&&fs()}),n=null;else{switch(NS(r)){case 1:n=wv;break;case 4:n=PS;break;case 16:n=cd;break;case 536870912:n=kS;break;default:n=cd}n=rx(n,YR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YR(t,e){if(Kh=-1,Gh=0,Ce&6)throw Error(L(327));var n=t.callbackNode;if(fa()&&t.callbackNode!==n)return null;var r=hd(t,t===bt?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bd(t,r);else{e=r;var i=Ce;Ce|=2;var s=JR();(bt!==t||Bt!==e)&&(jr=null,Aa=pt()+500,Qs(t,e));do try{W2();break}catch(a){XR(t,a)}while(1);Nv(),xd.current=s,Ce=i,vt!==null?e=0:(bt=null,Bt=0,e=Tt)}if(e!==0){if(e===2&&(i=vg(t),i!==0&&(r=i,e=Gg(t,i))),e===1)throw n=$u,Qs(t,0),Ni(t,r),Tn(t,pt()),n;if(e===6)Ni(t,r);else{if(i=t.current.alternate,!(r&30)&&!H2(i)&&(e=bd(t,r),e===2&&(s=vg(t),s!==0&&(r=s,e=Gg(t,s))),e===1))throw n=$u,Qs(t,0),Ni(t,r),Tn(t,pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Ps(t,mn,jr);break;case 3:if(Ni(t,r),(r&130023424)===r&&(e=Qv+500-pt(),10<e)){if(hd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xg(Ps.bind(null,t,mn,jr),e);break}Ps(t,mn,jr);break;case 4:if(Ni(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-cr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G2(r/1960))-r,10<r){t.timeoutHandle=xg(Ps.bind(null,t,mn,jr),r);break}Ps(t,mn,jr);break;case 5:Ps(t,mn,jr);break;default:throw Error(L(329))}}}return Tn(t,pt()),t.callbackNode===n?YR.bind(null,t):null}function Gg(t,e){var n=lu;return t.current.memoizedState.isDehydrated&&(Qs(t,e).flags|=256),t=bd(t,e),t!==2&&(e=mn,mn=n,e!==null&&Hg(e)),t}function Hg(t){mn===null?mn=t:mn.push.apply(mn,t)}function H2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!dr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ni(t,e){for(e&=~Hv,e&=~Sf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cr(e),r=1<<n;t[n]=-1,e&=~r}}function DE(t){if(Ce&6)throw Error(L(327));fa();var e=hd(t,0);if(!(e&1))return Tn(t,pt()),null;var n=bd(t,e);if(t.tag!==0&&n===2){var r=vg(t);r!==0&&(e=r,n=Gg(t,r))}if(n===1)throw n=$u,Qs(t,0),Ni(t,e),Tn(t,pt()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ps(t,mn,jr),Tn(t,pt()),null}function Wv(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Aa=pt()+500,wf&&fs())}}function ro(t){Fi!==null&&Fi.tag===0&&!(Ce&6)&&fa();var e=Ce;Ce|=1;var n=Qn.transition,r=De;try{if(Qn.transition=null,De=1,t)return t()}finally{De=r,Qn.transition=n,Ce=e,!(Ce&6)&&fs()}}function Yv(){Cn=ia.current,Ge(ia)}function Qs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,I2(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(Pv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gd();break;case 3:xa(),Ge(wn),Ge(Jt),$v();break;case 5:Lv(r);break;case 4:xa();break;case 13:Ge(Je);break;case 19:Ge(Je);break;case 10:Ov(r.type._context);break;case 22:case 23:Yv()}n=n.return}if(bt=t,vt=t=Hi(t.current,null),Bt=Cn=e,Tt=0,$u=null,Hv=Sf=no=0,mn=lu=null,$s!==null){for(e=0;e<$s.length;e++)if(n=$s[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}$s=null}return t}function XR(t,e){do{var n=vt;try{if(Nv(),Uh.current=Rd,Sd){for(var r=et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sd=!1}if(to=0,Ct=Et=et=null,ou=!1,Mu=0,Gv.current=null,n===null||n.return===null){Tt=1,$u=e,vt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=_E(o);if(f!==null){f.flags&=-257,wE(f,o,a,s,e),f.mode&1&&vE(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){vE(s,u,e),Xv();break e}l=Error(L(426))}}else if(Qe&&a.mode&1){var E=_E(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),wE(E,o,a,s,e),kv(Ca(l,a));break e}}s=l=Ca(l,a),Tt!==4&&(Tt=2),lu===null?lu=[s]:lu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=OR(s,l,e);hE(s,v);break e;case 1:a=l;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ki===null||!Ki.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var g=VR(s,a,e);hE(s,g);break e}}s=s.return}while(s!==null)}ex(n)}catch(R){e=R,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(1)}function JR(){var t=xd.current;return xd.current=Rd,t===null?Rd:t}function Xv(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),bt===null||!(no&268435455)&&!(Sf&268435455)||Ni(bt,Bt)}function bd(t,e){var n=Ce;Ce|=2;var r=JR();(bt!==t||Bt!==e)&&(jr=null,Qs(t,e));do try{Q2();break}catch(i){XR(t,i)}while(1);if(Nv(),Ce=n,xd.current=r,vt!==null)throw Error(L(261));return bt=null,Bt=0,Tt}function Q2(){for(;vt!==null;)ZR(vt)}function W2(){for(;vt!==null&&!wO();)ZR(vt)}function ZR(t){var e=nx(t.alternate,t,Cn);t.memoizedProps=t.pendingProps,e===null?ex(t):vt=e,Gv.current=null}function ex(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=U2(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,vt=null;return}}else if(n=B2(n,e,Cn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);Tt===0&&(Tt=5)}function Ps(t,e,n){var r=De,i=Qn.transition;try{Qn.transition=null,De=1,Y2(t,e,n,r)}finally{Qn.transition=i,De=r}return null}function Y2(t,e,n,r){do fa();while(Fi!==null);if(Ce&6)throw Error(L(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(PO(t,s),t===bt&&(vt=bt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gh||(gh=!0,rx(cd,function(){return fa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qn.transition,Qn.transition=null;var o=De;De=1;var a=Ce;Ce|=4,Gv.current=null,q2(t,n),QR(n,t),g2(Sg),dd=!!Ig,Sg=Ig=null,t.current=n,K2(n),EO(),Ce=a,De=o,Qn.transition=s}else t.current=n;if(gh&&(gh=!1,Fi=t,Ad=i),s=t.pendingLanes,s===0&&(Ki=null),SO(n.stateNode),Tn(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cd)throw Cd=!1,t=qg,qg=null,t;return Ad&1&&t.tag!==0&&fa(),s=t.pendingLanes,s&1?t===Kg?uu++:(uu=0,Kg=t):uu=0,fs(),null}function fa(){if(Fi!==null){var t=NS(Ad),e=Qn.transition,n=De;try{if(Qn.transition=null,De=16>t?16:t,Fi===null)var r=!1;else{if(t=Fi,Fi=null,Ad=0,Ce&6)throw Error(L(331));var i=Ce;for(Ce|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Q=u;Q!==null;){var c=Q;switch(c.tag){case 0:case 11:case 15:au(8,c,s)}var h=c.child;if(h!==null)h.return=c,Q=h;else for(;Q!==null;){c=Q;var d=c.sibling,f=c.return;if(KR(c),c===u){Q=null;break}if(d!==null){d.return=f,Q=d;break}Q=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var E=m.sibling;m.sibling=null,m=E}while(m!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:au(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Q=v;break e}Q=s.return}}var _=t.current;for(Q=_;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=_;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:If(9,a)}}catch(R){it(a,a.return,R)}if(a===o){Q=null;break e}var g=a.sibling;if(g!==null){g.return=a.return,Q=g;break e}Q=a.return}}if(Ce=i,fs(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(mf,t)}catch{}r=!0}return r}finally{De=n,Qn.transition=e}}return!1}function NE(t,e,n){e=Ca(n,e),e=OR(t,e,1),t=qi(t,e,1),e=an(),t!==null&&(_c(t,1,e),Tn(t,e))}function it(t,e,n){if(t.tag===3)NE(t,t,n);else for(;e!==null;){if(e.tag===3){NE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ki===null||!Ki.has(r))){t=Ca(n,t),t=VR(e,t,1),e=qi(e,t,1),t=an(),e!==null&&(_c(e,1,t),Tn(e,t));break}}e=e.return}}function X2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Bt&n)===n&&(Tt===4||Tt===3&&(Bt&130023424)===Bt&&500>pt()-Qv?Qs(t,0):Hv|=n),Tn(t,e)}function tx(t,e){e===0&&(t.mode&1?(e=oh,oh<<=1,!(oh&130023424)&&(oh=4194304)):e=1);var n=an();t=ii(t,e),t!==null&&(_c(t,e,n),Tn(t,n))}function J2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tx(t,n)}function Z2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),tx(t,n)}var nx;nx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,j2(t,e,n);gn=!!(t.flags&131072)}else gn=!1,Qe&&e.flags&1048576&&sR(e,_d,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qh(t,e),t=e.pendingProps;var i=Ia(e,Jt.current);da(e,n),i=Bv(null,e,r,t,i,n);var s=Uv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(r)?(s=!0,yd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Mv(e),i.updater=Ef,e.stateNode=i,i._reactInternals=e,Ng(e,r,t,n),e=Mg(null,e,r,!0,s,n)):(e.tag=0,Qe&&s&&bv(e),tn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tV(r),t=ir(r,t),i){case 0:e=Vg(null,e,r,t,n);break e;case 1:e=IE(null,e,r,t,n);break e;case 11:e=EE(null,e,r,t,n);break e;case 14:e=TE(null,e,r,ir(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ir(r,i),Vg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ir(r,i),IE(t,e,r,i,n);case 3:e:{if($R(e),t===null)throw Error(L(387));r=e.pendingProps,s=e.memoizedState,i=s.element,uR(t,e),Td(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ca(Error(L(423)),e),e=SE(t,e,r,n,i);break e}else if(r!==i){i=Ca(Error(L(424)),e),e=SE(t,e,r,n,i);break e}else for(An=zi(e.stateNode.containerInfo.firstChild),bn=e,Qe=!0,ar=null,n=fR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sa(),r===i){e=si(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return pR(e),t===null&&Pg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Rg(r,i)?o=null:s!==null&&Rg(r,s)&&(e.flags|=32),LR(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&Pg(e),null;case 13:return jR(t,e,n);case 4:return Fv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ra(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ir(r,i),EE(t,e,r,i,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,$e(wd,r._currentValue),r._currentValue=o,s!==null)if(dr(s.value,o)){if(s.children===i.children&&!wn.current){e=si(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Wr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),kg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),kg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}tn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,da(e,n),i=Yn(i),r=r(i),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,i=ir(r,e.pendingProps),i=ir(r.type,i),TE(t,e,r,i,n);case 15:return MR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ir(r,i),qh(t,e),e.tag=1,En(r)?(t=!0,yd(e)):t=!1,da(e,n),hR(e,r,i),Ng(e,r,i,n),Mg(null,e,r,!0,t,n);case 19:return BR(t,e,n);case 22:return FR(t,e,n)}throw Error(L(156,e.tag))};function rx(t,e){return bS(t,e)}function eV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new eV(t,e,n,r)}function Jv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tV(t){if(typeof t=="function")return Jv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yv)return 11;if(t===vv)return 14}return 2}function Hi(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Jv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qo:return Ws(n.children,i,s,e);case gv:o=8,i|=8;break;case rg:return t=Kn(12,n,e,i|2),t.elementType=rg,t.lanes=s,t;case ig:return t=Kn(13,n,e,i),t.elementType=ig,t.lanes=s,t;case sg:return t=Kn(19,n,e,i),t.elementType=sg,t.lanes=s,t;case dS:return Rf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cS:o=10;break e;case hS:o=9;break e;case yv:o=11;break e;case vv:o=14;break e;case Ai:o=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ws(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function Rf(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=dS,t.lanes=n,t.stateNode={isHidden:!1},t}function dm(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function fm(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hp(0),this.expirationTimes=Hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zv(t,e,n,r,i,s,o,a,l){return t=new nV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mv(s),t}function rV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ix(t){if(!t)return Ji;t=t._reactInternals;e:{if(To(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(En(n))return rR(t,n,e)}return e}function sx(t,e,n,r,i,s,o,a,l){return t=Zv(n,r,!0,t,i,s,o,a,l),t.context=ix(null),n=t.current,r=an(),i=Gi(n),s=Wr(r,i),s.callback=e??null,qi(n,s,i),t.current.lanes=i,_c(t,i,r),Tn(t,r),t}function xf(t,e,n,r){var i=e.current,s=an(),o=Gi(i);return n=ix(n),e.context===null?e.context=n:e.pendingContext=n,e=Wr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qi(i,e,o),t!==null&&(hr(t,i,o,s),Bh(t,i,o)),o}function Pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function OE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function e_(t,e){OE(t,e),(t=t.alternate)&&OE(t,e)}function iV(){return null}var ox=typeof reportError=="function"?reportError:function(t){console.error(t)};function t_(t){this._internalRoot=t}Cf.prototype.render=t_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));xf(t,e,null,null)};Cf.prototype.unmount=t_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){xf(null,t,null,null)}),e[ri]=null}};function Cf(t){this._internalRoot=t}Cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=MS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Di.length&&e!==0&&e<Di[n].priority;n++);Di.splice(n,0,t),n===0&&LS(t)}};function n_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function VE(){}function sV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Pd(o);s.call(u)}}var o=sx(e,r,t,0,null,!1,!1,"",VE);return t._reactRootContainer=o,t[ri]=o.current,ku(t.nodeType===8?t.parentNode:t),ro(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Pd(l);a.call(u)}}var l=Zv(t,0,!1,null,null,!1,!1,"",VE);return t._reactRootContainer=l,t[ri]=l.current,ku(t.nodeType===8?t.parentNode:t),ro(function(){xf(e,l,n,r)}),l}function bf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Pd(o);a.call(l)}}xf(e,o,t,i)}else o=sV(n,e,t,i,r);return Pd(o)}OS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kl(e.pendingLanes);n!==0&&(Ev(e,n|1),Tn(e,pt()),!(Ce&6)&&(Aa=pt()+500,fs()))}break;case 13:ro(function(){var r=ii(t,1);if(r!==null){var i=an();hr(r,t,1,i)}}),e_(t,1)}};Tv=function(t){if(t.tag===13){var e=ii(t,134217728);if(e!==null){var n=an();hr(e,t,134217728,n)}e_(t,134217728)}};VS=function(t){if(t.tag===13){var e=Gi(t),n=ii(t,e);if(n!==null){var r=an();hr(n,t,e,r)}e_(t,e)}};MS=function(){return De};FS=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};mg=function(t,e,n){switch(e){case"input":if(lg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_f(r);if(!i)throw Error(L(90));pS(r),lg(r,i)}}}break;case"textarea":gS(t,n);break;case"select":e=n.value,e!=null&&la(t,!!n.multiple,e,!1)}};IS=Wv;SS=ro;var oV={usingClientEntryPoint:!1,Events:[Ec,Jo,_f,ES,TS,Wv]},Rl={findFiberByHostInstance:Ls,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},aV={bundleType:Rl.bundleType,version:Rl.version,rendererPackageName:Rl.rendererPackageName,rendererConfig:Rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CS(t),t===null?null:t.stateNode},findFiberByHostInstance:Rl.findFiberByHostInstance||iV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{mf=yh.inject(aV),Cr=yh}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oV;On.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n_(e))throw Error(L(200));return rV(t,e,null,n)};On.createRoot=function(t,e){if(!n_(t))throw Error(L(299));var n=!1,r="",i=ox;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zv(t,1,!1,null,null,n,!1,r,i),t[ri]=e.current,ku(t.nodeType===8?t.parentNode:t),new t_(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=CS(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return ro(t)};On.hydrate=function(t,e,n){if(!Af(e))throw Error(L(200));return bf(null,t,e,!0,n)};On.hydrateRoot=function(t,e,n){if(!n_(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ox;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sx(e,null,t,1,n??null,i,!1,s,o),t[ri]=e.current,ku(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cf(e)};On.render=function(t,e,n){if(!Af(e))throw Error(L(200));return bf(null,t,e,!1,n)};On.unmountComponentAtNode=function(t){if(!Af(t))throw Error(L(40));return t._reactRootContainer?(ro(function(){bf(null,null,t,!1,function(){t._reactRootContainer=null,t[ri]=null})}),!0):!1};On.unstable_batchedUpdates=Wv;On.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Af(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return bf(t,e,n,!1,r)};On.version="18.2.0-next-9e3b772b8-20220608";function ax(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ax)}catch(t){console.error(t)}}ax(),sS.exports=On;var lx=sS.exports;const sa=yc(lx);var ME=lx;tg.createRoot=ME.createRoot,tg.hydrateRoot=ME.hydrateRoot;class Xa{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const ju=typeof window>"u"||"Deno"in window;function jn(){}function lV(t,e){return typeof t=="function"?t(e):t}function Qg(t){return typeof t=="number"&&t>=0&&t!==1/0}function FE(t,e){return t.filter(n=>!e.includes(n))}function uV(t,e,n){const r=t.slice(0);return r[e]=n,r}function ux(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Hl(t,e,n){return Pf(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function Pi(t,e,n){return Pf(t)?[{...e,queryKey:t},n]:[t||{},e]}function LE(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(Pf(o)){if(r){if(e.queryHash!==r_(o,e.options))return!1}else if(!kd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function $E(t,e){const{exact:n,fetching:r,predicate:i,mutationKey:s}=t;if(Pf(s)){if(!e.options.mutationKey)return!1;if(n){if(Bs(e.options.mutationKey)!==Bs(s))return!1}else if(!kd(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function r_(t,e){return((e==null?void 0:e.queryKeyHashFn)||Bs)(t)}function Bs(t){return JSON.stringify(t,(e,n)=>Yg(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function kd(t,e){return cx(t,e)}function cx(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!cx(t[n],e[n])):!1}function hx(t,e){if(t===e)return t;const n=jE(t)&&jE(e);if(n||Yg(t)&&Yg(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,o=n?[]:{};let a=0;for(let l=0;l<s;l++){const u=n?l:i[l];o[u]=hx(t[u],e[u]),o[u]===t[u]&&a++}return r===s&&a===r?t:o}return e}function Wg(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function jE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Yg(t){if(!BE(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!BE(n)||!n.hasOwnProperty("isPrototypeOf"))}function BE(t){return Object.prototype.toString.call(t)==="[object Object]"}function Pf(t){return Array.isArray(t)}function dx(t){return new Promise(e=>{setTimeout(e,t)})}function UE(t){dx(0).then(t)}function cV(){if(typeof AbortController=="function")return new AbortController}function Xg(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?hx(t,e):e}class hV extends Xa{constructor(){super(),this.setup=e=>{if(!ju&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Dd=new hV,zE=["online","offline"];class dV extends Xa{constructor(){super(),this.setup=e=>{if(!ju&&window.addEventListener){const n=()=>e();return zE.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{zE.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Nd=new dV;function fV(t){return Math.min(1e3*2**t,3e4)}function kf(t){return(t??"online")==="online"?Nd.isOnline():!0}class fx{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function Qh(t){return t instanceof fx}function px(t){let e=!1,n=0,r=!1,i,s,o;const a=new Promise((E,v)=>{s=E,o=v}),l=E=>{r||(f(new fx(E)),t.abort==null||t.abort())},u=()=>{e=!0},c=()=>{e=!1},h=()=>!Dd.isFocused()||t.networkMode!=="always"&&!Nd.isOnline(),d=E=>{r||(r=!0,t.onSuccess==null||t.onSuccess(E),i==null||i(),s(E))},f=E=>{r||(r=!0,t.onError==null||t.onError(E),i==null||i(),o(E))},p=()=>new Promise(E=>{i=v=>{const _=r||!h();return _&&E(v),_},t.onPause==null||t.onPause()}).then(()=>{i=void 0,r||t.onContinue==null||t.onContinue()}),m=()=>{if(r)return;let E;try{E=t.fn()}catch(v){E=Promise.reject(v)}Promise.resolve(E).then(d).catch(v=>{var _,w;if(r)return;const g=(_=t.retry)!=null?_:3,R=(w=t.retryDelay)!=null?w:fV,S=typeof R=="function"?R(n,v):R,I=g===!0||typeof g=="number"&&n<g||typeof g=="function"&&g(n,v);if(e||!I){f(v);return}n++,t.onFail==null||t.onFail(n,v),dx(S).then(()=>{if(h())return p()}).then(()=>{e?f(v):m()})})};return kf(t.networkMode)?m():p().then(m),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:u,continueRetry:c}}const i_=console;function pV(){let t=[],e=0,n=c=>{c()},r=c=>{c()};const i=c=>{let h;e++;try{h=c()}finally{e--,e||a()}return h},s=c=>{e?t.push(c):UE(()=>{n(c)})},o=c=>(...h)=>{s(()=>{c(...h)})},a=()=>{const c=t;t=[],c.length&&UE(()=>{r(()=>{c.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c}}}const Ze=pV();class mx{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qg(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(ju?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}let mV=class extends mx{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||i_,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||gV(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const r=Xg(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(e),r?r.then(jn).catch(jn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!ux(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const o=cV(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(a);const u=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),c={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:u};if(l(c),(r=this.options.behavior)==null||r.onFetch(c),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=c.fetchOptions)==null?void 0:i.meta)){var h;this.dispatch({type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta})}const d=f=>{if(Qh(f)&&f.silent||this.dispatch({type:"error",error:f}),!Qh(f)){var p,m,E,v;(p=(m=this.cache.config).onError)==null||p.call(m,f,this),(E=(v=this.cache.config).onSettled)==null||E.call(v,this.state.data,f,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=px({fn:c.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:f=>{var p,m,E,v;if(typeof f>"u"){d(new Error(this.queryHash+" data is undefined"));return}this.setData(f),(p=(m=this.cache.config).onSuccess)==null||p.call(m,f,this),(E=(v=this.cache.config).onSettled)==null||E.call(v,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:d,onFail:(f,p)=>{this.dispatch({type:"failed",failureCount:f,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=r=>{var i,s;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:kf(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return Qh(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Ze.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}};function gV(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class yV extends Xa{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,r){var i;const s=n.queryKey,o=(i=n.queryHash)!=null?i:r_(s,n);let a=this.get(o);return a||(a=new mV({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){Ze.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[r]=Pi(e,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>LE(r,i))}findAll(e,n){const[r]=Pi(e,n);return Object.keys(r).length>0?this.queries.filter(i=>LE(r,i)):this.queries}notify(e){Ze.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){Ze.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){Ze.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}let vV=class extends mx{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||i_,this.observers=[],this.state=e.state||_V(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var I;return this.retryer=px({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(x,D)=>{this.dispatch({type:"failed",failureCount:x,error:D})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(I=this.options.retry)!=null?I:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,i,s,o,a,l,u,c;if(!n){var h,d,f,p;this.dispatch({type:"loading",variables:this.options.variables}),await((h=(d=this.mutationCache.config).onMutate)==null?void 0:h.call(d,this.state.variables,this));const x=await((f=(p=this.options).onMutate)==null?void 0:f.call(p,this.state.variables));x!==this.state.context&&this.dispatch({type:"loading",context:x,variables:this.state.variables})}const I=await e();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,I,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,I,this.state.variables,this.state.context)),await((a=(l=this.mutationCache.config).onSettled)==null?void 0:a.call(l,I,null,this.state.variables,this.state.context,this)),await((u=(c=this.options).onSettled)==null?void 0:u.call(c,I,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:I}),I}catch(I){try{var m,E,v,_,w,g,R,S;throw await((m=(E=this.mutationCache.config).onError)==null?void 0:m.call(E,I,this.state.variables,this.state.context,this)),await((v=(_=this.options).onError)==null?void 0:v.call(_,I,this.state.variables,this.state.context)),await((w=(g=this.mutationCache.config).onSettled)==null?void 0:w.call(g,void 0,I,this.state.variables,this.state.context,this)),await((R=(S=this.options).onSettled)==null?void 0:R.call(S,void 0,I,this.state.variables,this.state.context)),I}finally{this.dispatch({type:"error",error:I})}}}dispatch(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!kf(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=n(this.state),Ze.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}};function _V(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class wV extends Xa{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,r){const i=new vV({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){Ze.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>$E(e,n))}findAll(e){return this.mutations.filter(n=>$E(e,n))}notify(e){Ze.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return Ze.batch(()=>n.reduce((r,i)=>r.then(()=>i.continue().catch(jn)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function EV(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,i,s,o;const a=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,l=(r=t.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,u=l==null?void 0:l.pageParam,c=(l==null?void 0:l.direction)==="forward",h=(l==null?void 0:l.direction)==="backward",d=((s=t.state.data)==null?void 0:s.pages)||[],f=((o=t.state.data)==null?void 0:o.pageParams)||[];let p=f,m=!1;const E=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>{var I;if((I=t.signal)!=null&&I.aborted)m=!0;else{var x;(x=t.signal)==null||x.addEventListener("abort",()=>{m=!0})}return t.signal}})},v=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),_=(S,I,x,D)=>(p=D?[I,...p]:[...p,I],D?[x,...S]:[...S,x]),w=(S,I,x,D)=>{if(m)return Promise.reject("Cancelled");if(typeof x>"u"&&!I&&S.length)return Promise.resolve(S);const M={queryKey:t.queryKey,pageParam:x,meta:t.options.meta};E(M);const j=v(M);return Promise.resolve(j).then(J=>_(S,x,J,D))};let g;if(!d.length)g=w([]);else if(c){const S=typeof u<"u",I=S?u:qE(t.options,d);g=w(d,S,I)}else if(h){const S=typeof u<"u",I=S?u:TV(t.options,d);g=w(d,S,I,!0)}else{p=[];const S=typeof t.options.getNextPageParam>"u";g=(a&&d[0]?a(d[0],0,d):!0)?w([],S,f[0]):Promise.resolve(_([],f[0],d[0]));for(let x=1;x<d.length;x++)g=g.then(D=>{if(a&&d[x]?a(d[x],x,d):!0){const j=S?f[x]:qE(t.options,D);return w(D,S,j)}return Promise.resolve(_(D,f[x],d[x]))})}return g.then(S=>({pages:S,pageParams:p}))}}}}function qE(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function TV(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class IV{constructor(e={}){this.queryCache=e.queryCache||new yV,this.mutationCache=e.mutationCache||new wV,this.logger=e.logger||i_,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Dd.subscribe(()=>{Dd.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Nd.subscribe(()=>{Nd.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[r]=Pi(e,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state.data}ensureQueryData(e,n,r){const i=Hl(e,n,r),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=lV(n,s);if(typeof o>"u")return;const a=Hl(e),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,n,r){return Ze.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state}removeQueries(e,n){const[r]=Pi(e,n),i=this.queryCache;Ze.batch(()=>{i.findAll(r).forEach(s=>{i.remove(s)})})}resetQueries(e,n,r){const[i,s]=Pi(e,n,r),o=this.queryCache,a={type:"active",...i};return Ze.batch(()=>(o.findAll(i).forEach(l=>{l.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,n,r){const[i,s={}]=Pi(e,n,r);typeof s.revert>"u"&&(s.revert=!0);const o=Ze.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(jn).catch(jn)}invalidateQueries(e,n,r){const[i,s]=Pi(e,n,r);return Ze.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(u=>{u.invalidate()}),i.refetchType==="none")return Promise.resolve();const l={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(l,s)})}refetchQueries(e,n,r){const[i,s]=Pi(e,n,r),o=Ze.batch(()=>this.queryCache.findAll(i).filter(l=>!l.isDisabled()).map(l=>{var u;return l.fetch(void 0,{...s,cancelRefetch:(u=s==null?void 0:s.cancelRefetch)!=null?u:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(jn);return s!=null&&s.throwOnError||(a=a.catch(jn)),a}fetchQuery(e,n,r){const i=Hl(e,n,r),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,n,r){return this.fetchQuery(e,n,r).then(jn).catch(jn)}fetchInfiniteQuery(e,n,r){const i=Hl(e,n,r);return i.behavior=EV(),this.fetchQuery(i)}prefetchInfiniteQuery(e,n,r){return this.fetchInfiniteQuery(e,n,r).then(jn).catch(jn)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const r=this.queryDefaults.find(i=>Bs(e)===Bs(i.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(r=>kd(e,r.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(e,n){const r=this.mutationDefaults.find(i=>Bs(e)===Bs(i.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(r=>kd(e,r.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=r_(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class gx extends Xa{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),KE(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Jg(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Jg(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Wg(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const s=this.hasListeners();s&&GE(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),r=this.createResult(n,e);return RV(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(jn)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),ju||this.currentResult.isStale||!Qg(this.options.staleTime))return;const n=ux(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(ju||this.options.enabled===!1||!Qg(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Dd.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const r=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,l=e!==r,u=l?e.state:this.currentQueryInitialState,c=l?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:d,error:f,errorUpdatedAt:p,fetchStatus:m,status:E}=h,v=!1,_=!1,w;if(n._optimisticResults){const x=this.hasListeners(),D=!x&&KE(e,n),M=x&&GE(e,r,n,i);(D||M)&&(m=kf(e.options.networkMode)?"fetching":"paused",d||(E="loading")),n._optimisticResults==="isRestoring"&&(m="idle")}if(n.keepPreviousData&&!h.dataUpdatedAt&&c!=null&&c.isSuccess&&E!=="error")w=c.data,d=c.dataUpdatedAt,E=c.status,v=!0;else if(n.select&&typeof h.data<"u")if(s&&h.data===(o==null?void 0:o.data)&&n.select===this.selectFn)w=this.selectResult;else try{this.selectFn=n.select,w=n.select(h.data),w=Xg(s==null?void 0:s.data,w,n),this.selectResult=w,this.selectError=null}catch(x){this.selectError=x}else w=h.data;if(typeof n.placeholderData<"u"&&typeof w>"u"&&E==="loading"){let x;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))x=s.data;else if(x=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof x<"u")try{x=n.select(x),this.selectError=null}catch(D){this.selectError=D}typeof x<"u"&&(E="success",w=Xg(s==null?void 0:s.data,x,n),_=!0)}this.selectError&&(f=this.selectError,w=this.selectResult,p=Date.now(),E="error");const g=m==="fetching",R=E==="loading",S=E==="error";return{status:E,fetchStatus:m,isLoading:R,isSuccess:E==="success",isError:S,isInitialLoading:R&&g,data:w,dataUpdatedAt:d,error:f,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:g,isRefetching:g&&!R,isLoadingError:S&&h.dataUpdatedAt===0,isPaused:m==="paused",isPlaceholderData:_,isPreviousData:v,isRefetchError:S&&h.dataUpdatedAt!==0,isStale:s_(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Wg(r,n))return;this.currentResult=r;const i={cache:!0},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!this.trackedProps.size)return!0;const l=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&l.add("error"),Object.keys(this.currentResult).some(u=>{const c=u;return this.currentResult[c]!==n[c]&&l.has(c)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!Qh(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){Ze.batch(()=>{if(e.onSuccess){var n,r,i,s;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,l,u;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(l=(u=this.options).onSettled)==null||l.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:c})=>{c(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function SV(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function KE(t,e){return SV(t,e)||t.state.dataUpdatedAt>0&&Jg(t,e,e.refetchOnMount)}function Jg(t,e,n){if(e.enabled!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&s_(t,e)}return!1}function GE(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&s_(t,n)}function s_(t,e){return t.isStaleByTime(e.staleTime)}function RV(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:!Wg(t.getCurrentResult(),e)}class xV extends Xa{constructor(e,n){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},n&&this.setQueries(n)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(e=>{e.subscribe(n=>{this.onUpdate(e,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(e=>{e.destroy()})}setQueries(e,n){this.queries=e,Ze.batch(()=>{const r=this.observers,i=this.findMatchingObservers(this.queries);i.forEach(u=>u.observer.setOptions(u.defaultedQueryOptions,n));const s=i.map(u=>u.observer),o=Object.fromEntries(s.map(u=>[u.options.queryHash,u])),a=s.map(u=>u.getCurrentResult()),l=s.some((u,c)=>u!==r[c]);r.length===s.length&&!l||(this.observers=s,this.observersMap=o,this.result=a,this.hasListeners()&&(FE(r,s).forEach(u=>{u.destroy()}),FE(s,r).forEach(u=>{u.subscribe(c=>{this.onUpdate(u,c)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(n=>n.observer.getOptimisticResult(n.defaultedQueryOptions))}findMatchingObservers(e){const n=this.observers,r=new Map(n.map(f=>[f.options.queryHash,f])),i=e.map(f=>this.client.defaultQueryOptions(f)),s=i.flatMap(f=>{const p=r.get(f.queryHash);return p!=null?[{defaultedQueryOptions:f,observer:p}]:[]}),o=new Set(s.map(f=>f.defaultedQueryOptions.queryHash)),a=i.filter(f=>!o.has(f.queryHash)),l=new Set(s.map(f=>f.observer)),u=n.filter(f=>!l.has(f)),c=f=>{const p=this.client.defaultQueryOptions(f),m=this.observersMap[p.queryHash];return m??new gx(this.client,p)},h=a.map((f,p)=>{if(f.keepPreviousData){const m=u[p];if(m!==void 0)return{defaultedQueryOptions:f,observer:m}}return{defaultedQueryOptions:f,observer:c(f)}}),d=(f,p)=>i.indexOf(f.defaultedQueryOptions)-i.indexOf(p.defaultedQueryOptions);return s.concat(h).sort(d)}onUpdate(e,n){const r=this.observers.indexOf(e);r!==-1&&(this.result=uV(this.result,r,n),this.notify())}notify(){Ze.batch(()=>{this.listeners.forEach(({listener:e})=>{e(this.result)})})}}var yx={exports:{}},vx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=y;function CV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var AV=typeof Object.is=="function"?Object.is:CV,bV=ba.useState,PV=ba.useEffect,kV=ba.useLayoutEffect,DV=ba.useDebugValue;function NV(t,e){var n=e(),r=bV({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return kV(function(){i.value=n,i.getSnapshot=e,pm(i)&&s({inst:i})},[t,n,e]),PV(function(){return pm(i)&&s({inst:i}),t(function(){pm(i)&&s({inst:i})})},[t]),DV(n),n}function pm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!AV(t,n)}catch{return!0}}function OV(t,e){return e()}var VV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?OV:NV;vx.useSyncExternalStore=ba.useSyncExternalStore!==void 0?ba.useSyncExternalStore:VV;yx.exports=vx;var MV=yx.exports;const _x=MV.useSyncExternalStore,HE=y.createContext(void 0),wx=y.createContext(!1);function Ex(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=HE),window.ReactQueryClientContext):HE)}const Tx=({context:t}={})=>{const e=y.useContext(Ex(t,y.useContext(wx)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},FV=({client:t,children:e,context:n,contextSharing:r=!1})=>{y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const i=Ex(n,r);return y.createElement(wx.Provider,{value:!n&&r},y.createElement(i.Provider,{value:t},e))},Ix=y.createContext(!1),Sx=()=>y.useContext(Ix);Ix.Provider;function LV(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const $V=y.createContext(LV()),Rx=()=>y.useContext($V);function jV(t,e){return typeof t=="function"?t(...e):!!t}const xx=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},Cx=t=>{y.useEffect(()=>{t.clearReset()},[t])},Ax=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&jV(n,[t.error,r]),bx=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Px=(t,e)=>t.isLoading&&t.isFetching&&!e,Zg=(t,e,n)=>(t==null?void 0:t.suspense)&&Px(e,n),ey=(t,e,n)=>e.fetchOptimistic(t).then(({data:r})=>{t.onSuccess==null||t.onSuccess(r),t.onSettled==null||t.onSettled(r,null)}).catch(r=>{n.clearReset(),t.onError==null||t.onError(r),t.onSettled==null||t.onSettled(void 0,r)});function BV({queries:t,context:e}){const n=Tx({context:e}),r=Sx(),i=Rx(),s=y.useMemo(()=>t.map(d=>{const f=n.defaultQueryOptions(d);return f._optimisticResults=r?"isRestoring":"optimistic",f}),[t,n,r]);s.forEach(d=>{bx(d),xx(d,i)}),Cx(i);const[o]=y.useState(()=>new xV(n,s)),a=o.getOptimisticResult(s);_x(y.useCallback(d=>r?()=>{}:o.subscribe(Ze.batchCalls(d)),[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),y.useEffect(()=>{o.setQueries(s,{listeners:!1})},[s,o]);const u=a.some((d,f)=>Zg(s[f],d,r))?a.flatMap((d,f)=>{const p=s[f],m=o.getObservers()[f];if(p&&m){if(Zg(p,d,r))return ey(p,m,i);Px(d,r)&&ey(p,m,i)}return[]}):[];if(u.length>0)throw Promise.all(u);const c=o.getQueries(),h=a.find((d,f)=>{var p,m;return Ax({result:d,errorResetBoundary:i,useErrorBoundary:(p=(m=s[f])==null?void 0:m.useErrorBoundary)!=null?p:!1,query:c[f]})});if(h!=null&&h.error)throw h.error;return a}function UV(t,e){const n=Tx({context:t.context}),r=Sx(),i=Rx(),s=n.defaultQueryOptions(t);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=Ze.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=Ze.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=Ze.batchCalls(s.onSettled)),bx(s),xx(s,i),Cx(i);const[o]=y.useState(()=>new e(n,s)),a=o.getOptimisticResult(s);if(_x(y.useCallback(l=>{const u=r?()=>{}:o.subscribe(Ze.batchCalls(l));return o.updateResult(),u},[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),y.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),Zg(s,a,r))throw ey(s,o,i);if(Ax({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function kx(t,e,n){const r=Hl(t,e,n);return UV(r,gx)}const zV=function(){return null};/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function st(){return st=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st.apply(this,arguments)}var dt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dt||(dt={}));const QE="popstate";function qV(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Bu("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:so(i)}return GV(e,n,null,t)}function me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function io(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KV(){return Math.random().toString(36).substr(2,8)}function WE(t,e){return{usr:t.state,key:t.key,idx:e}}function Bu(t,e,n,r){return n===void 0&&(n=null),st({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fi(e):e,{state:n,key:e&&e.key||r||KV()})}function so(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=dt.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(st({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=dt.Pop;let E=c(),v=E==null?null:E-u;u=E,l&&l({action:a,location:m.location,delta:v})}function d(E,v){a=dt.Push;let _=Bu(m.location,E,v);n&&n(_,E),u=c()+1;let w=WE(_,u),g=m.createHref(_);try{o.pushState(w,"",g)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(g)}s&&l&&l({action:a,location:m.location,delta:1})}function f(E,v){a=dt.Replace;let _=Bu(m.location,E,v);n&&n(_,E),u=c();let w=WE(_,u),g=m.createHref(_);o.replaceState(w,"",g),s&&l&&l({action:a,location:m.location,delta:0})}function p(E){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof E=="string"?E:so(E);return me(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let m={get action(){return a},get location(){return t(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(QE,h),l=E,()=>{i.removeEventListener(QE,h),l=null}},createHref(E){return e(i,E)},createURL:p,encodeLocation(E){let v=p(E);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(E){return o.go(E)}};return m}var ft;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ft||(ft={}));const HV=new Set(["lazy","caseSensitive","path","id","index","children"]);function QV(t){return t.index===!0}function ty(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(me(i.index!==!0||!i.children,"Cannot specify children on an index route"),me(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),QV(i)){let l=st({},i,e(i),{id:a});return r[a]=l,l}else{let l=st({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=ty(i.children,e,o,r)),l}})}function oa(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?fi(e):e,i=Ja(r.pathname||"/",n);if(i==null)return null;let s=Dx(t);YV(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=sM(s[a],lM(i));return o}function WV(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Dx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Yr([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Dx(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:rM(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Nx(s.path))i(s,o,l)}),e}function Nx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Nx(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XV=/^:\w+$/,JV=3,ZV=2,eM=1,tM=10,nM=-2,YE=t=>t==="*";function rM(t,e){let n=t.split("/"),r=n.length;return n.some(YE)&&(r+=nM),e&&(r+=ZV),n.filter(i=>!YE(i)).reduce((i,s)=>i+(XV.test(s)?JV:s===""?eM:tM),r)}function iM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sM(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=oM({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;s.push({params:r,pathname:Yr([i,c.pathname]),pathnameBase:dM(Yr([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=Yr([i,c.pathnameBase]))}return s}function oM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{let{paramName:d,isOptional:f}=c;if(d==="*"){let m=a[h]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[d]=void 0:u[d]=uM(p||"",d),u},{}),pathname:s,pathnameBase:o,pattern:t}}function aM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),io(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lM(t){try{return decodeURI(t)}catch(e){return io(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uM(t,e){try{return decodeURIComponent(t)}catch(n){return io(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Ja(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?fi(t):t;return{pathname:n?n.startsWith("/")?n:hM(n,e):e,search:fM(r),hash:pM(i)}}function hM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function mm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Df(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function o_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=fi(t):(i=st({},t),me(!i.pathname||!i.pathname.includes("?"),mm("?","pathname","search",i)),me(!i.pathname||!i.pathname.includes("#"),mm("#","pathname","hash",i)),me(!i.search||!i.search.includes("#"),mm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=cM(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Yr=t=>t.join("/").replace(/\/\/+/g,"/"),dM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class a_{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Ox(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Vx=["post","put","patch","delete"],mM=new Set(Vx),gM=["get",...Vx],yM=new Set(gM),vM=new Set([301,302,303,307,308]),_M=new Set([307,308]),gm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wM={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Mx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EM=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Fx="remix-router-transitions";function TM(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;me(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let C=t.detectErrorBoundary;i=P=>({hasErrorBoundary:C(P)})}else i=EM;let s={},o=ty(t.routes,i,void 0,s),a,l=t.basename||"/",u=st({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),c=null,h=new Set,d=null,f=null,p=null,m=t.hydrationData!=null,E=oa(o,t.history.location,l),v=null;if(E==null){let C=Bn(404,{pathname:t.history.location.pathname}),{matches:P,route:O}=iT(o);E=P,v={[O.id]:C}}let _=!E.some(C=>C.route.lazy)&&(!E.some(C=>C.route.loader)||t.hydrationData!=null),w,g={historyAction:t.history.action,location:t.history.location,matches:E,initialized:_,navigation:gm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||v,fetchers:new Map,blockers:new Map},R=dt.Pop,S=!1,I,x=!1,D=new Map,M=null,j=!1,W=!1,J=[],ve=[],ie=new Map,ce=0,_e=-1,F=new Map,q=new Set,K=new Map,se=new Map,oe=new Set,pe=new Map,be=new Map,we=!1;function Le(){if(c=t.history.listen(C=>{let{action:P,location:O,delta:G}=C;if(we){we=!1;return}io(be.size===0||G!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ee=S0({currentLocation:g.location,nextLocation:O,historyAction:P});if(ee&&G!=null){we=!0,t.history.go(G*-1),Zc(ee,{state:"blocked",location:O,proceed(){Zc(ee,{state:"proceeding",proceed:void 0,reset:void 0,location:O}),t.history.go(G)},reset(){let ne=new Map(g.blockers);ne.set(ee,xl),xe({blockers:ne})}});return}return St(P,O)}),n){NM(e,D);let C=()=>OM(e,D);e.addEventListener("pagehide",C),M=()=>e.removeEventListener("pagehide",C)}return g.initialized||St(dt.Pop,g.location),w}function Vt(){c&&c(),M&&M(),h.clear(),I&&I.abort(),g.fetchers.forEach((C,P)=>Ln(P)),g.blockers.forEach((C,P)=>I0(P))}function Zt(C){return h.add(C),()=>h.delete(C)}function xe(C,P){g=st({},g,C);let O=[],G=[];u.v7_fetcherPersist&&g.fetchers.forEach((ee,ne)=>{ee.state==="idle"&&(oe.has(ne)?G.push(ne):O.push(ne))}),h.forEach(ee=>ee(g,{deletedFetchers:G,unstable_viewTransitionOpts:P})),u.v7_fetcherPersist&&(O.forEach(ee=>g.fetchers.delete(ee)),G.forEach(ee=>Ln(ee)))}function qt(C,P){var O,G;let ee=g.actionData!=null&&g.navigation.formMethod!=null&&or(g.navigation.formMethod)&&g.navigation.state==="loading"&&((O=C.state)==null?void 0:O._isRedirect)!==!0,ne;P.actionData?Object.keys(P.actionData).length>0?ne=P.actionData:ne=null:ee?ne=g.actionData:ne=null;let de=P.loaderData?rT(g.loaderData,P.loaderData,P.matches||[],P.errors):g.loaderData,re=g.blockers;re.size>0&&(re=new Map(re),re.forEach((Xe,Te)=>re.set(Te,xl)));let Z=S===!0||g.navigation.formMethod!=null&&or(g.navigation.formMethod)&&((G=C.state)==null?void 0:G._isRedirect)!==!0;a&&(o=a,a=void 0),j||R===dt.Pop||(R===dt.Push?t.history.push(C,C.state):R===dt.Replace&&t.history.replace(C,C.state));let Me;if(R===dt.Pop){let Xe=D.get(g.location.pathname);Xe&&Xe.has(C.pathname)?Me={currentLocation:g.location,nextLocation:C}:D.has(C.pathname)&&(Me={currentLocation:C,nextLocation:g.location})}else if(x){let Xe=D.get(g.location.pathname);Xe?Xe.add(C.pathname):(Xe=new Set([C.pathname]),D.set(g.location.pathname,Xe)),Me={currentLocation:g.location,nextLocation:C}}xe(st({},P,{actionData:ne,loaderData:de,historyAction:R,location:C,initialized:!0,navigation:gm,revalidation:"idle",restoreScrollPosition:x0(C,P.matches||g.matches),preventScrollReset:Z,blockers:re}),Me),R=dt.Pop,S=!1,x=!1,j=!1,W=!1,J=[],ve=[]}async function fn(C,P){if(typeof C=="number"){t.history.go(C);return}let O=ny(g.location,g.matches,l,u.v7_prependBasename,C,P==null?void 0:P.fromRouteId,P==null?void 0:P.relative),{path:G,submission:ee,error:ne}=XE(u.v7_normalizeFormMethod,!1,O,P),de=g.location,re=Bu(g.location,G,P&&P.state);re=st({},re,t.history.encodeLocation(re));let Z=P&&P.replace!=null?P.replace:void 0,Me=dt.Push;Z===!0?Me=dt.Replace:Z===!1||ee!=null&&or(ee.formMethod)&&ee.formAction===g.location.pathname+g.location.search&&(Me=dt.Replace);let Xe=P&&"preventScrollReset"in P?P.preventScrollReset===!0:void 0,Te=S0({currentLocation:de,nextLocation:re,historyAction:Me});if(Te){Zc(Te,{state:"blocked",location:re,proceed(){Zc(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:re}),fn(C,P)},reset(){let Fe=new Map(g.blockers);Fe.set(Te,xl),xe({blockers:Fe})}});return}return await St(Me,re,{submission:ee,pendingError:ne,preventScrollReset:Xe,replace:P&&P.replace,enableViewTransition:P&&P.unstable_viewTransition})}function mr(){if(gr(),xe({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){St(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}St(R||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function St(C,P,O){I&&I.abort(),I=null,R=C,j=(O&&O.startUninterruptedRevalidation)===!0,NN(g.location,g.matches),S=(O&&O.preventScrollReset)===!0,x=(O&&O.enableViewTransition)===!0;let G=a||o,ee=O&&O.overrideNavigation,ne=oa(G,P,l);if(!ne){let Fe=Bn(404,{pathname:P.pathname}),{matches:wt,route:xs}=iT(G);Fp(),qt(P,{matches:wt,loaderData:{},errors:{[xs.id]:Fe}});return}if(g.initialized&&!W&&CM(g.location,P)&&!(O&&O.submission&&or(O.submission.formMethod))){qt(P,{matches:ne});return}I=new AbortController;let de=Al(t.history,P,I.signal,O&&O.submission),re,Z;if(O&&O.pendingError)Z={[cu(ne).route.id]:O.pendingError};else if(O&&O.submission&&or(O.submission.formMethod)){let Fe=await Rn(de,P,O.submission,ne,{replace:O.replace});if(Fe.shortCircuited)return;re=Fe.pendingActionData,Z=Fe.pendingActionError,ee=ym(P,O.submission),de=new Request(de.url,{signal:de.signal})}let{shortCircuited:Me,loaderData:Xe,errors:Te}=await Pe(de,P,ne,ee,O&&O.submission,O&&O.fetcherSubmission,O&&O.replace,re,Z);Me||(I=null,qt(P,st({matches:ne},re?{actionData:re}:{},{loaderData:Xe,errors:Te})))}async function Rn(C,P,O,G,ee){ee===void 0&&(ee={}),gr();let ne=kM(P,O);xe({navigation:ne});let de,re=iy(G,P);if(!re.route.action&&!re.route.lazy)de={type:ft.error,error:Bn(405,{method:C.method,pathname:P.pathname,routeId:re.route.id})};else if(de=await Cl("action",C,re,G,s,i,l),C.signal.aborted)return{shortCircuited:!0};if(pa(de)){let Z;return ee&&ee.replace!=null?Z=ee.replace:Z=de.location===g.location.pathname+g.location.search,await Mt(g,de,{submission:O,replace:Z}),{shortCircuited:!0}}if(hu(de)){let Z=cu(G,re.route.id);return(ee&&ee.replace)!==!0&&(R=dt.Push),{pendingActionData:{},pendingActionError:{[Z.route.id]:de.error}}}if(Us(de))throw Bn(400,{type:"defer-action"});return{pendingActionData:{[re.route.id]:de.data}}}async function Pe(C,P,O,G,ee,ne,de,re,Z){let Me=G||ym(P,ee),Xe=ee||ne||aT(Me),Te=a||o,[Fe,wt]=JE(t.history,g,O,Xe,P,W,J,ve,K,q,Te,l,re,Z);if(Fp(Oe=>!(O&&O.some(nr=>nr.route.id===Oe))||Fe&&Fe.some(nr=>nr.route.id===Oe)),_e=++ce,Fe.length===0&&wt.length===0){let Oe=$n();return qt(P,st({matches:O,loaderData:{},errors:Z||null},re?{actionData:re}:{},Oe?{fetchers:new Map(g.fetchers)}:{})),{shortCircuited:!0}}if(!j){wt.forEach(nr=>{let Ei=g.fetchers.get(nr.key),ht=bl(void 0,Ei?Ei.data:void 0);g.fetchers.set(nr.key,ht)});let Oe=re||g.actionData;xe(st({navigation:Me},Oe?Object.keys(Oe).length===0?{actionData:null}:{actionData:Oe}:{},wt.length>0?{fetchers:new Map(g.fetchers)}:{}))}wt.forEach(Oe=>{ie.has(Oe.key)&&le(Oe.key),Oe.controller&&ie.set(Oe.key,Oe.controller)});let xs=()=>wt.forEach(Oe=>le(Oe.key));I&&I.signal.addEventListener("abort",xs);let{results:Cs,loaderResults:gl,fetcherResults:Lp}=await tr(g.matches,O,Fe,wt,C);if(C.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",xs),wt.forEach(Oe=>ie.delete(Oe.key));let $r=sT(Cs);if($r){if($r.idx>=Fe.length){let Oe=wt[$r.idx-Fe.length].key;q.add(Oe)}return await Mt(g,$r.result,{replace:de}),{shortCircuited:!0}}let{loaderData:wi,errors:eh}=nT(g,O,Fe,gl,Z,wt,Lp,pe);pe.forEach((Oe,nr)=>{Oe.subscribe(Ei=>{(Ei||Oe.done)&&pe.delete(nr)})});let $p=$n(),jp=Lr(_e),Bp=$p||jp||wt.length>0;return st({loaderData:wi,errors:eh},Bp?{fetchers:new Map(g.fetchers)}:{})}function Mn(C){return u.v7_fetcherPersist&&(se.set(C,(se.get(C)||0)+1),oe.has(C)&&oe.delete(C)),g.fetchers.get(C)||wM}function Fn(C,P,O,G){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ie.has(C)&&le(C);let ee=a||o,ne=ny(g.location,g.matches,l,u.v7_prependBasename,O,P,G==null?void 0:G.relative),de=oa(ee,ne,l);if(!de){xn(C,P,Bn(404,{pathname:ne}));return}let{path:re,submission:Z,error:Me}=XE(u.v7_normalizeFormMethod,!0,ne,G);if(Me){xn(C,P,Me);return}let Xe=iy(de,re);if(S=(G&&G.preventScrollReset)===!0,Z&&or(Z.formMethod)){Ss(C,P,re,Xe,de,Z);return}K.set(C,{routeId:P,path:re}),Rs(C,P,re,Xe,de,Z)}async function Ss(C,P,O,G,ee,ne){if(gr(),K.delete(C),!G.route.action&&!G.route.lazy){let ht=Bn(405,{method:ne.formMethod,pathname:O,routeId:P});xn(C,P,ht);return}let de=g.fetchers.get(C),re=DM(ne,de);g.fetchers.set(C,re),xe({fetchers:new Map(g.fetchers)});let Z=new AbortController,Me=Al(t.history,O,Z.signal,ne);ie.set(C,Z);let Xe=ce,Te=await Cl("action",Me,G,ee,s,i,l);if(Me.signal.aborted){ie.get(C)===Z&&ie.delete(C);return}if(oe.has(C)){g.fetchers.set(C,Ci(void 0)),xe({fetchers:new Map(g.fetchers)});return}if(pa(Te))if(ie.delete(C),_e>Xe){let ht=Ci(void 0);g.fetchers.set(C,ht),xe({fetchers:new Map(g.fetchers)});return}else{q.add(C);let ht=bl(ne);return g.fetchers.set(C,ht),xe({fetchers:new Map(g.fetchers)}),Mt(g,Te,{fetcherSubmission:ne})}if(hu(Te)){xn(C,P,Te.error);return}if(Us(Te))throw Bn(400,{type:"defer-action"});let Fe=g.navigation.location||g.location,wt=Al(t.history,Fe,Z.signal),xs=a||o,Cs=g.navigation.state!=="idle"?oa(xs,g.navigation.location,l):g.matches;me(Cs,"Didn't find any matches after fetcher action");let gl=++ce;F.set(C,gl);let Lp=bl(ne,Te.data);g.fetchers.set(C,Lp);let[$r,wi]=JE(t.history,g,Cs,ne,Fe,W,J,ve,K,q,xs,l,{[G.route.id]:Te.data},void 0);wi.filter(ht=>ht.key!==C).forEach(ht=>{let yl=ht.key,C0=g.fetchers.get(yl),VN=bl(void 0,C0?C0.data:void 0);g.fetchers.set(yl,VN),ie.has(yl)&&le(yl),ht.controller&&ie.set(yl,ht.controller)}),xe({fetchers:new Map(g.fetchers)});let eh=()=>wi.forEach(ht=>le(ht.key));Z.signal.addEventListener("abort",eh);let{results:$p,loaderResults:jp,fetcherResults:Bp}=await tr(g.matches,Cs,$r,wi,wt);if(Z.signal.aborted)return;Z.signal.removeEventListener("abort",eh),F.delete(C),ie.delete(C),wi.forEach(ht=>ie.delete(ht.key));let Oe=sT($p);if(Oe){if(Oe.idx>=$r.length){let ht=wi[Oe.idx-$r.length].key;q.add(ht)}return Mt(g,Oe.result)}let{loaderData:nr,errors:Ei}=nT(g,g.matches,$r,jp,void 0,wi,Bp,pe);if(g.fetchers.has(C)){let ht=Ci(Te.data);g.fetchers.set(C,ht)}Lr(gl),g.navigation.state==="loading"&&gl>_e?(me(R,"Expected pending action"),I&&I.abort(),qt(g.navigation.location,{matches:Cs,loaderData:nr,errors:Ei,fetchers:new Map(g.fetchers)})):(xe({errors:Ei,loaderData:rT(g.loaderData,nr,Cs,Ei),fetchers:new Map(g.fetchers)}),W=!1)}async function Rs(C,P,O,G,ee,ne){let de=g.fetchers.get(C),re=bl(ne,de?de.data:void 0);g.fetchers.set(C,re),xe({fetchers:new Map(g.fetchers)});let Z=new AbortController,Me=Al(t.history,O,Z.signal);ie.set(C,Z);let Xe=ce,Te=await Cl("loader",Me,G,ee,s,i,l);if(Us(Te)&&(Te=await jx(Te,Me.signal,!0)||Te),ie.get(C)===Z&&ie.delete(C),Me.signal.aborted)return;if(oe.has(C)){g.fetchers.set(C,Ci(void 0)),xe({fetchers:new Map(g.fetchers)});return}if(pa(Te))if(_e>Xe){let wt=Ci(void 0);g.fetchers.set(C,wt),xe({fetchers:new Map(g.fetchers)});return}else{q.add(C),await Mt(g,Te);return}if(hu(Te)){xn(C,P,Te.error);return}me(!Us(Te),"Unhandled fetcher deferred data");let Fe=Ci(Te.data);g.fetchers.set(C,Fe),xe({fetchers:new Map(g.fetchers)})}async function Mt(C,P,O){let{submission:G,fetcherSubmission:ee,replace:ne}=O===void 0?{}:O;P.revalidate&&(W=!0);let de=Bu(C.location,P.location,{_isRedirect:!0});if(me(de,"Expected a location on the redirect navigation"),n){let Fe=!1;if(P.reloadDocument)Fe=!0;else if(Mx.test(P.location)){const wt=t.history.createURL(P.location);Fe=wt.origin!==e.location.origin||Ja(wt.pathname,l)==null}if(Fe){ne?e.location.replace(P.location):e.location.assign(P.location);return}}I=null;let re=ne===!0?dt.Replace:dt.Push,{formMethod:Z,formAction:Me,formEncType:Xe}=C.navigation;!G&&!ee&&Z&&Me&&Xe&&(G=aT(C.navigation));let Te=G||ee;if(_M.has(P.status)&&Te&&or(Te.formMethod))await St(re,de,{submission:st({},Te,{formAction:P.location}),preventScrollReset:S});else{let Fe=ym(de,G);await St(re,de,{overrideNavigation:Fe,fetcherSubmission:ee,preventScrollReset:S})}}async function tr(C,P,O,G,ee){let ne=await Promise.all([...O.map(Z=>Cl("loader",ee,Z,P,s,i,l)),...G.map(Z=>Z.matches&&Z.match&&Z.controller?Cl("loader",Al(t.history,Z.path,Z.controller.signal),Z.match,Z.matches,s,i,l):{type:ft.error,error:Bn(404,{pathname:Z.path})})]),de=ne.slice(0,O.length),re=ne.slice(O.length);return await Promise.all([oT(C,O,de,de.map(()=>ee.signal),!1,g.loaderData),oT(C,G.map(Z=>Z.match),re,G.map(Z=>Z.controller?Z.controller.signal:null),!0)]),{results:ne,loaderResults:de,fetcherResults:re}}function gr(){W=!0,J.push(...Fp()),K.forEach((C,P)=>{ie.has(P)&&(ve.push(P),le(P))})}function xn(C,P,O){let G=cu(g.matches,P);Ln(C),xe({errors:{[G.route.id]:O},fetchers:new Map(g.fetchers)})}function Ln(C){let P=g.fetchers.get(C);ie.has(C)&&!(P&&P.state==="loading"&&F.has(C))&&le(C),K.delete(C),F.delete(C),q.delete(C),oe.delete(C),g.fetchers.delete(C)}function $(C){if(u.v7_fetcherPersist){let P=(se.get(C)||0)-1;P<=0?(se.delete(C),oe.add(C)):se.set(C,P)}else Ln(C);xe({fetchers:new Map(g.fetchers)})}function le(C){let P=ie.get(C);me(P,"Expected fetch controller: "+C),P.abort(),ie.delete(C)}function Rt(C){for(let P of C){let O=Mn(P),G=Ci(O.data);g.fetchers.set(P,G)}}function $n(){let C=[],P=!1;for(let O of q){let G=g.fetchers.get(O);me(G,"Expected fetcher: "+O),G.state==="loading"&&(q.delete(O),C.push(O),P=!0)}return Rt(C),P}function Lr(C){let P=[];for(let[O,G]of F)if(G<C){let ee=g.fetchers.get(O);me(ee,"Expected fetcher: "+O),ee.state==="loading"&&(le(O),F.delete(O),P.push(O))}return Rt(P),P.length>0}function kN(C,P){let O=g.blockers.get(C)||xl;return be.get(C)!==P&&be.set(C,P),O}function I0(C){g.blockers.delete(C),be.delete(C)}function Zc(C,P){let O=g.blockers.get(C)||xl;me(O.state==="unblocked"&&P.state==="blocked"||O.state==="blocked"&&P.state==="blocked"||O.state==="blocked"&&P.state==="proceeding"||O.state==="blocked"&&P.state==="unblocked"||O.state==="proceeding"&&P.state==="unblocked","Invalid blocker state transition: "+O.state+" -> "+P.state);let G=new Map(g.blockers);G.set(C,P),xe({blockers:G})}function S0(C){let{currentLocation:P,nextLocation:O,historyAction:G}=C;if(be.size===0)return;be.size>1&&io(!1,"A router only supports one blocker at a time");let ee=Array.from(be.entries()),[ne,de]=ee[ee.length-1],re=g.blockers.get(ne);if(!(re&&re.state==="proceeding")&&de({currentLocation:P,nextLocation:O,historyAction:G}))return ne}function Fp(C){let P=[];return pe.forEach((O,G)=>{(!C||C(G))&&(O.cancel(),P.push(G),pe.delete(G))}),P}function DN(C,P,O){if(d=C,p=P,f=O||null,!m&&g.navigation===gm){m=!0;let G=x0(g.location,g.matches);G!=null&&xe({restoreScrollPosition:G})}return()=>{d=null,p=null,f=null}}function R0(C,P){return f&&f(C,P.map(G=>WV(G,g.loaderData)))||C.key}function NN(C,P){if(d&&p){let O=R0(C,P);d[O]=p()}}function x0(C,P){if(d){let O=R0(C,P),G=d[O];if(typeof G=="number")return G}return null}function ON(C){s={},a=ty(C,i,void 0,s)}return w={get basename(){return l},get state(){return g},get routes(){return o},get window(){return e},initialize:Le,subscribe:Zt,enableScrollRestoration:DN,navigate:fn,fetch:Fn,revalidate:mr,createHref:C=>t.history.createHref(C),encodeLocation:C=>t.history.encodeLocation(C),getFetcher:Mn,deleteFetcher:$,dispose:Vt,getBlocker:kN,deleteBlocker:I0,_internalFetchControllers:ie,_internalActiveDeferreds:pe,_internalSetRoutes:ON},w}function IM(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function ny(t,e,n,r,i,s,o){let a,l;if(s!=null&&o!=="path"){a=[];for(let c of e)if(a.push(c),c.route.id===s){l=c;break}}else a=e,l=e[e.length-1];let u=o_(i||".",Df(a).map(c=>c.pathnameBase),Ja(t.pathname,n)||t.pathname,o==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!l_(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Yr([n,u.pathname])),so(u)}function XE(t,e,n,r){if(!r||!IM(r))return{path:n};if(r.formMethod&&!PM(r.formMethod))return{path:n,error:Bn(405,{method:r.formMethod})};let i=()=>({path:n,error:Bn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=$x(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!or(o))return i();let d=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[m,E]=p;return""+f+m+"="+E+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}else if(r.formEncType==="application/json"){if(!or(o))return i();try{let d=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch{return i()}}}me(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=ry(r.formData),u=r.formData;else if(r.body instanceof FormData)l=ry(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=tT(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=tT(l)}catch{return i()}let c={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(or(c.formMethod))return{path:n,submission:c};let h=fi(n);return e&&h.search&&l_(h.search)&&l.append("index",""),h.search="?"+l,{path:so(h),submission:c}}function SM(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function JE(t,e,n,r,i,s,o,a,l,u,c,h,d,f){let p=f?Object.values(f)[0]:d?Object.values(d)[0]:void 0,m=t.createURL(e.location),E=t.createURL(i),v=f?Object.keys(f)[0]:void 0,w=SM(n,v).filter((R,S)=>{if(R.route.lazy)return!0;if(R.route.loader==null)return!1;if(RM(e.loaderData,e.matches[S],R)||o.some(D=>D===R.route.id))return!0;let I=e.matches[S],x=R;return ZE(R,st({currentUrl:m,currentParams:I.params,nextUrl:E,nextParams:x.params},r,{actionResult:p,defaultShouldRevalidate:s||m.pathname+m.search===E.pathname+E.search||m.search!==E.search||Lx(I,x)}))}),g=[];return l.forEach((R,S)=>{if(!n.some(j=>j.route.id===R.routeId))return;let I=oa(c,R.path,h);if(!I){g.push({key:S,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let x=e.fetchers.get(S),D=iy(I,R.path),M=!1;u.has(S)?M=!1:a.includes(S)?M=!0:x&&x.state!=="idle"&&x.data===void 0?M=s:M=ZE(D,st({currentUrl:m,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:p,defaultShouldRevalidate:s})),M&&g.push({key:S,routeId:R.routeId,path:R.path,matches:I,match:D,controller:new AbortController})}),[w,g]}function RM(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Lx(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function ZE(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function eT(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];me(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";io(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!HV.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,st({},e(i),{lazy:void 0}))}async function Cl(t,e,n,r,i,s,o,a){a===void 0&&(a={});let l,u,c,h=p=>{let m,E=new Promise((v,_)=>m=_);return c=()=>m(),e.signal.addEventListener("abort",c),Promise.race([p({request:e,params:n.params,context:a.requestContext}),E])};try{let p=n.route[t];if(n.route.lazy)if(p){let m,E=await Promise.all([h(p).catch(v=>{m=v}),eT(n.route,s,i)]);if(m)throw m;u=E[0]}else if(await eT(n.route,s,i),p=n.route[t],p)u=await h(p);else if(t==="action"){let m=new URL(e.url),E=m.pathname+m.search;throw Bn(405,{method:e.method,pathname:E,routeId:n.route.id})}else return{type:ft.data,data:void 0};else if(p)u=await h(p);else{let m=new URL(e.url),E=m.pathname+m.search;throw Bn(404,{pathname:E})}me(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(p){l=ft.error,u=p}finally{c&&e.signal.removeEventListener("abort",c)}if(bM(u)){let p=u.status;if(vM.has(p)){let v=u.headers.get("Location");if(me(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!Mx.test(v))v=ny(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,v);else if(!a.isStaticRequest){let _=new URL(e.url),w=v.startsWith("//")?new URL(_.protocol+v):new URL(v),g=Ja(w.pathname,o)!=null;w.origin===_.origin&&g&&(v=w.pathname+w.search+w.hash)}if(a.isStaticRequest)throw u.headers.set("Location",v),u;return{type:ft.redirect,status:p,location:v,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(a.isRouteRequest)throw{type:l===ft.error?ft.error:ft.data,response:u};let m,E=u.headers.get("Content-Type");return E&&/\bapplication\/json\b/.test(E)?m=await u.json():m=await u.text(),l===ft.error?{type:l,error:new a_(p,u.statusText,m),headers:u.headers}:{type:ft.data,data:m,statusCode:u.status,headers:u.headers}}if(l===ft.error)return{type:l,error:u};if(AM(u)){var d,f;return{type:ft.deferred,deferredData:u,statusCode:(d=u.init)==null?void 0:d.status,headers:((f=u.init)==null?void 0:f.headers)&&new Headers(u.init.headers)}}return{type:ft.data,data:u}}function Al(t,e,n,r){let i=t.createURL($x(e)).toString(),s={signal:n};if(r&&or(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=ry(r.formData):s.body=r.formData}return new Request(i,s)}function ry(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function tT(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function xM(t,e,n,r,i){let s={},o=null,a,l=!1,u={};return n.forEach((c,h)=>{let d=e[h].route.id;if(me(!pa(c),"Cannot handle redirect results in processLoaderData"),hu(c)){let f=cu(t,d),p=c.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=p),s[d]=void 0,l||(l=!0,a=Ox(c.error)?c.error.status:500),c.headers&&(u[d]=c.headers)}else Us(c)?(i.set(d,c.deferredData),s[d]=c.deferredData.data):s[d]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(a=c.statusCode),c.headers&&(u[d]=c.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function nT(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=xM(e,n,r,i,a);for(let c=0;c<s.length;c++){let{key:h,match:d,controller:f}=s[c];me(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let p=o[c];if(!(f&&f.signal.aborted))if(hu(p)){let m=cu(t.matches,d==null?void 0:d.route.id);u&&u[m.route.id]||(u=st({},u,{[m.route.id]:p.error})),t.fetchers.delete(h)}else if(pa(p))me(!1,"Unhandled fetcher revalidation redirect");else if(Us(p))me(!1,"Unhandled fetcher deferred data");else{let m=Ci(p.data);t.fetchers.set(h,m)}}return{loaderData:l,errors:u}}function rT(t,e,n,r){let i=st({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function cu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function iT(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Bn(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new a_(t||500,o,new Error(a),!0)}function sT(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(pa(n))return{result:n,idx:e}}}function $x(t){let e=typeof t=="string"?fi(t):t;return so(st({},e,{hash:""}))}function CM(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Us(t){return t.type===ft.deferred}function hu(t){return t.type===ft.error}function pa(t){return(t&&t.type)===ft.redirect}function AM(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function bM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function PM(t){return yM.has(t.toLowerCase())}function or(t){return mM.has(t.toLowerCase())}async function oT(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let u=t.find(h=>h.route.id===l.route.id),c=u!=null&&!Lx(u,l)&&(s&&s[l.route.id])!==void 0;if(Us(a)&&(i||c)){let h=r[o];me(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await jx(a,h,i).then(d=>{d&&(n[o]=d||n[o])})}}}async function jx(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ft.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ft.error,error:i}}return{type:ft.data,data:t.deferredData.data}}}function l_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function iy(t,e){let n=typeof e=="string"?fi(e).search:e.search;if(t[t.length-1].route.index&&l_(n||""))return t[t.length-1];let r=Df(t);return r[r.length-1]}function aT(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function ym(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function kM(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function bl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function DM(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ci(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function NM(t,e){try{let n=t.sessionStorage.getItem(Fx);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function OM(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Fx,JSON.stringify(n))}catch(r){io(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(this,arguments)}const Nf=y.createContext(null),Bx=y.createContext(null),Za=y.createContext(null),Of=y.createContext(null),pi=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Ux=y.createContext(null);function VM(t,e){let{relative:n}=e===void 0?{}:e;Ic()||me(!1);let{basename:r,navigator:i}=y.useContext(Za),{hash:s,pathname:o,search:a}=Kx(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Yr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ic(){return y.useContext(Of)!=null}function Vf(){return Ic()||me(!1),y.useContext(Of).location}function zx(t){y.useContext(Za).static||y.useLayoutEffect(t)}function qx(){let{isDataRoute:t}=y.useContext(pi);return t?YM():MM()}function MM(){Ic()||me(!1);let t=y.useContext(Nf),{basename:e,navigator:n}=y.useContext(Za),{matches:r}=y.useContext(pi),{pathname:i}=Vf(),s=JSON.stringify(Df(r).map(l=>l.pathnameBase)),o=y.useRef(!1);return zx(()=>{o.current=!0}),y.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=o_(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Yr([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}const FM=y.createContext(null);function LM(t){let e=y.useContext(pi).outlet;return e&&y.createElement(FM.Provider,{value:t},e)}function $M(){let{matches:t}=y.useContext(pi),e=t[t.length-1];return e?e.params:{}}function Kx(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=y.useContext(pi),{pathname:i}=Vf(),s=JSON.stringify(Df(r).map(o=>o.pathnameBase));return y.useMemo(()=>o_(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function jM(t,e,n){Ic()||me(!1);let{navigator:r}=y.useContext(Za),{matches:i}=y.useContext(pi),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Vf(),u;if(e){var c;let m=typeof e=="string"?fi(e):e;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||me(!1),u=m}else u=l;let h=u.pathname||"/",d=a==="/"?h:h.slice(a.length)||"/",f=oa(t,{pathname:d}),p=KM(f&&f.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Yr([a,r.encodeLocation?r.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:Yr([a,r.encodeLocation?r.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,n);return e&&p?y.createElement(Of.Provider,{value:{location:Od({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:dt.Pop}},p):p}function BM(){let t=WM(),e=Ox(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,s)}const UM=y.createElement(BM,null);class zM extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?y.createElement(pi.Provider,{value:this.props.routeContext},y.createElement(Ux.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qM(t){let{routeContext:e,match:n,children:r}=t,i=y.useContext(Nf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(pi.Provider,{value:e},r)}function KM(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||me(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let c=l.route.id?o==null?void 0:o[l.route.id]:null,h=null;n&&(h=l.route.errorElement||UM);let d=e.concat(s.slice(0,u+1)),f=()=>{let p;return c?p=h:l.route.Component?p=y.createElement(l.route.Component,null):l.route.element?p=l.route.element:p=a,y.createElement(qM,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:n!=null},children:p})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?y.createElement(zM,{location:n.location,revalidation:n.revalidation,component:h,error:c,children:f(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):f()},null)}var Gx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Gx||{}),Vd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vd||{});function GM(t){let e=y.useContext(Nf);return e||me(!1),e}function HM(t){let e=y.useContext(Bx);return e||me(!1),e}function QM(t){let e=y.useContext(pi);return e||me(!1),e}function Hx(t){let e=QM(),n=e.matches[e.matches.length-1];return n.route.id||me(!1),n.route.id}function WM(){var t;let e=y.useContext(Ux),n=HM(Vd.UseRouteError),r=Hx(Vd.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function YM(){let{router:t}=GM(Gx.UseNavigateStable),e=Hx(Vd.UseNavigateStable),n=y.useRef(!1);return zx(()=>{n.current=!0}),y.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Od({fromRouteId:e},s)))},[t,e])}function Qx(t){return LM(t.context)}function XM(t){let{basename:e="/",children:n=null,location:r,navigationType:i=dt.Pop,navigator:s,static:o=!1}=t;Ic()&&me(!1);let a=e.replace(/^\/*/,"/"),l=y.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=fi(r));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=r,p=y.useMemo(()=>{let m=Ja(u,a);return m==null?null:{location:{pathname:m,search:c,hash:h,state:d,key:f},navigationType:i}},[a,u,c,h,d,f,i]);return p==null?null:y.createElement(Za.Provider,{value:l},y.createElement(Of.Provider,{children:n,value:p}))}new Promise(()=>{});function JM(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:y.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:y.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uu(){return Uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uu.apply(this,arguments)}function ZM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function eF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tF(t,e){return t.button===0&&(!e||e==="_self")&&!eF(t)}const nF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function rF(t,e){return TM({basename:e==null?void 0:e.basename,future:Uu({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:qV({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||iF(),routes:t,mapRouteProperties:JM,window:e==null?void 0:e.window}).initialize()}function iF(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Uu({},e,{errors:sF(e.errors)})),e}function sF(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new a_(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const oF=y.createContext({isTransitioning:!1}),aF=y.createContext(new Map),lF="startTransition",lT=JN[lF];function uF(t){lT?lT(t):t()}let cF=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function hF(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=y.useState(n.state),[o,a]=y.useState(),[l,u]=y.useState({isTransitioning:!1}),[c,h]=y.useState(),[d,f]=y.useState(),[p,m]=y.useState(),E=y.useRef(new Map),{v7_startTransition:v}=r||{},_=y.useCallback(I=>{v?uF(I):I()},[v]),w=y.useCallback((I,x)=>{let{deletedFetchers:D,unstable_viewTransitionOpts:M}=x;D.forEach(j=>E.current.delete(j)),I.fetchers.forEach((j,W)=>{j.data!==void 0&&E.current.set(W,j.data)}),!M||n.window==null||typeof n.window.document.startViewTransition!="function"?_(()=>s(I)):d&&c?(c.resolve(),d.skipTransition(),m({state:I,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(a(I),u({isTransitioning:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,d,c,E,_]);y.useLayoutEffect(()=>n.subscribe(w),[n,w]),y.useEffect(()=>{l.isTransitioning&&h(new cF)},[l.isTransitioning]),y.useEffect(()=>{if(c&&o&&n.window){let I=o,x=c.promise,D=n.window.document.startViewTransition(async()=>{_(()=>s(I)),await x});D.finished.finally(()=>{h(void 0),f(void 0),a(void 0),u({isTransitioning:!1})}),f(D)}},[_,o,c,n.window]),y.useEffect(()=>{c&&o&&i.location.key===o.location.key&&c.resolve()},[c,d,i.location,o]),y.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),u({isTransitioning:!0,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[l.isTransitioning,p]);let g=y.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:I=>n.navigate(I),push:(I,x,D)=>n.navigate(I,{state:x,preventScrollReset:D==null?void 0:D.preventScrollReset}),replace:(I,x,D)=>n.navigate(I,{replace:!0,state:x,preventScrollReset:D==null?void 0:D.preventScrollReset})}),[n]),R=n.basename||"/",S=y.useMemo(()=>({router:n,navigator:g,static:!1,basename:R}),[n,g,R]);return y.createElement(y.Fragment,null,y.createElement(Nf.Provider,{value:S},y.createElement(Bx.Provider,{value:i},y.createElement(aF.Provider,{value:E.current},y.createElement(oF.Provider,{value:l},y.createElement(XM,{basename:R,location:i.location,navigationType:i.historyAction,navigator:g},i.initialized?y.createElement(dF,{routes:n.routes,state:i}):e))))),null)}function dF(t){let{routes:e,state:n}=t;return jM(e,void 0,n)}const fF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bo=y.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:h}=e,d=ZM(e,nF),{basename:f}=y.useContext(Za),p,m=!1;if(typeof u=="string"&&pF.test(u)&&(p=u,fF))try{let w=new URL(window.location.href),g=u.startsWith("//")?new URL(w.protocol+u):new URL(u),R=Ja(g.pathname,f);g.origin===w.origin&&R!=null?u=R+g.search+g.hash:m=!0}catch{}let E=VM(u,{relative:i}),v=mF(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:h});function _(w){r&&r(w),w.defaultPrevented||v(w)}return y.createElement("a",Uu({},d,{href:p||E,onClick:m||s?r:_,ref:n,target:l}))});var uT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(uT||(uT={}));var cT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cT||(cT={}));function mF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=qx(),u=Vf(),c=Kx(t,{relative:o});return y.useCallback(h=>{if(tF(h,n)){h.preventDefault();let d=r!==void 0?r:so(u)===so(c);l(t,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}const gF="modulepreload",yF=function(t){return"/pokemon-Gym/"+t},hT={},vF=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=yF(s),s in hT)return;hT[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":gF,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Wx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dT=Ke.createContext&&Ke.createContext(Wx),Qi=globalThis&&globalThis.__assign||function(){return Qi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Qi.apply(this,arguments)},_F=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Yx(t){return t&&t.map(function(e,n){return Ke.createElement(e.tag,Qi({key:n},e.attr),Yx(e.child))})}function Sc(t){return function(e){return Ke.createElement(wF,Qi({attr:Qi({},t.attr)},e),Yx(t.child))}}function wF(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=_F(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Ke.createElement("svg",Qi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Qi(Qi({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Ke.createElement("title",null,s),t.children)};return dT!==void 0?Ke.createElement(dT.Consumer,null,function(n){return e(n)}):e(Wx)}function EF(t){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 7h-9"}},{tag:"path",attr:{d:"M14 17H5"}},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"}},{tag:"circle",attr:{cx:"7",cy:"7",r:"3"}}]})(t)}let br=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const u_="onlyImage",el="onlyText",c_="imageText",h_="colorText",d_="onlyColor",Xx="defaultNothing",TF="選擇",oi="SelectGroup",IF="你選擇的",f_="BeenSelectGroup",SF="推薦有傷害的",Mf="DamageGroup",vm=[{id:1,title:TF},{id:2,title:IF},{id:3,title:SF}],RF=[{id:1,default:!0,type:u_,title:"只顯示圖片"},{id:2,default:!1,type:el,title:"只顯示文字"},{id:3,default:!1,type:c_,title:"顯示圖片和文字"}],xF=[{id:3,default:!0,type:h_,title:"預設顯示顏色和文字"},{id:1,default:!1,type:d_,title:"只顯示顏色"},{id:2,default:!1,type:el,title:"只顯示文字"},{id:4,default:!1,type:Xx,title:"都不顯示"}],Jx={enType:"all",zhType:"全部",bgColor:"#17CCF0"},Rc=[{enType:"normal",zhType:"一般",bgColor:"#a8a8a8"},{enType:"fighting",zhType:"格鬥",bgColor:"#c03028"},{enType:"flying",zhType:"飛行",bgColor:"#9096f0"},{enType:"poison",zhType:"毒",bgColor:"#a040a0"},{enType:"ground",zhType:"地面",bgColor:"#e0b668"},{enType:"rock",zhType:"岩石",bgColor:"#b8a038"},{enType:"bug",zhType:"蟲",bgColor:"#9cb820"},{enType:"ghost",zhType:"幽靈",bgColor:"#705898"},{enType:"steel",zhType:"鋼",bgColor:"#6d8f9c"},{enType:"fire",zhType:"火",bgColor:"#f08030"},{enType:"water",zhType:"水",bgColor:"#6890f0"},{enType:"grass",zhType:"草",bgColor:"#22c02a"},{enType:"electric",zhType:"電",bgColor:"#f8d030"},{enType:"psychic",zhType:"超能力",bgColor:"#f85888"},{enType:"ice",zhType:"冰",bgColor:"#98d8d8"},{enType:"dragon",zhType:"龍",bgColor:"#7038f8"},{enType:"dark",zhType:"惡",bgColor:"#504843"},{enType:"fairy",zhType:"妖精",bgColor:"#f09ad9"}],CF="/pokemon-Gym/assets/25-759ceafd.png";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new bF;const d=s<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const p=u<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PF=function(t){const e=Zx(t);return eC.encodeByteArray(e,!0)},Md=function(t){return PF(t).replace(/\./g,"")},kF=function(t){try{return eC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fd(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!DF(n)||(t[n]=Fd(t[n],e[n]));return t}function DF(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=()=>NF().__FIREBASE_DEFAULTS__,VF=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kF(t[1]);return e&&JSON.parse(e)},tC=()=>{try{return OF()||VF()||MF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nC=()=>{var t;return(t=tC())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Md(JSON.stringify(n)),Md(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iC(){var t;const e=(t=tC())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LF(){return typeof self=="object"&&self.self===self}function $F(){return!iC()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sC(){try{return typeof indexedDB=="object"}catch{return!1}}function jF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="FirebaseError";class ps extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BF,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ff.prototype.create)}}class Ff{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?UF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ps(i,a,r)}}function UF(t,e){return t.replace(zF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function oy(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(pT(s)&&pT(o)){if(!oy(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function pT(t){return t!==null&&typeof t=="object"}function qF(t,e){const n=new KF(t,e);return n.subscribe.bind(n)}class KF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_m),i.error===void 0&&(i.error=_m),i.complete===void 0&&(i.complete=_m);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return t&&t._delegate?t._delegate:t}class ai{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new FF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WF(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QF(t){return t===ks?void 0:t}function WF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=[];var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const oC={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},XF=Ee.INFO,JF={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},ZF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=JF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class m_{constructor(e){this.name=e,this._logLevel=XF,this._logHandler=ZF,this._userLogHandler=null,p_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}function eL(t){p_.forEach(e=>{e.setLogLevel(t)})}function tL(t,e){for(const n of p_){let r=null;e&&e.level&&(r=oC[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:Ee[s].toLowerCase(),message:a,args:o,type:i.name})}}}const nL=(t,e)=>e.some(n=>t instanceof n);let mT,gT;function rL(){return mT||(mT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iL(){return gT||(gT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aC=new WeakMap,ay=new WeakMap,lC=new WeakMap,wm=new WeakMap,g_=new WeakMap;function sL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Wi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aC.set(n,t)}).catch(()=>{}),g_.set(e,t),e}function oL(t){if(ay.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ay.set(t,e)}let ly={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ay.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aL(t){ly=t(ly)}function lL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Em(this),e,...n);return lC.set(r,e.sort?e.sort():[e]),Wi(r)}:iL().includes(t)?function(...e){return t.apply(Em(this),e),Wi(aC.get(this))}:function(...e){return Wi(t.apply(Em(this),e))}}function uL(t){return typeof t=="function"?lL(t):(t instanceof IDBTransaction&&oL(t),nL(t,rL())?new Proxy(t,ly):t)}function Wi(t){if(t instanceof IDBRequest)return sL(t);if(wm.has(t))return wm.get(t);const e=uL(t);return e!==t&&(wm.set(t,e),g_.set(e,t)),e}const Em=t=>g_.get(t);function cL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Wi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Wi(o.result),l.oldVersion,l.newVersion,Wi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const hL=["get","getKey","getAll","getAllKeys","count"],dL=["put","add","delete","clear"],Tm=new Map;function yT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tm.get(e))return Tm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Tm.set(e,s),s}aL(t=>({...t,get:(e,n,r)=>yT(e,n)||t.get(e,n,r),has:(e,n)=>!!yT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uy="@firebase/app",vT="0.9.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new m_("@firebase/app"),mL="@firebase/app-compat",gL="@firebase/analytics-compat",yL="@firebase/analytics",vL="@firebase/app-check-compat",_L="@firebase/app-check",wL="@firebase/auth",EL="@firebase/auth-compat",TL="@firebase/database",IL="@firebase/database-compat",SL="@firebase/functions",RL="@firebase/functions-compat",xL="@firebase/installations",CL="@firebase/installations-compat",AL="@firebase/messaging",bL="@firebase/messaging-compat",PL="@firebase/performance",kL="@firebase/performance-compat",DL="@firebase/remote-config",NL="@firebase/remote-config-compat",OL="@firebase/storage",VL="@firebase/storage-compat",ML="@firebase/firestore",FL="@firebase/firestore-compat",LL="firebase",$L="10.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="[DEFAULT]",jL={[uy]:"fire-core",[mL]:"fire-core-compat",[yL]:"fire-analytics",[gL]:"fire-analytics-compat",[_L]:"fire-app-check",[vL]:"fire-app-check-compat",[wL]:"fire-auth",[EL]:"fire-auth-compat",[TL]:"fire-rtdb",[IL]:"fire-rtdb-compat",[SL]:"fire-fn",[RL]:"fire-fn-compat",[xL]:"fire-iid",[CL]:"fire-iid-compat",[AL]:"fire-fcm",[bL]:"fire-fcm-compat",[PL]:"fire-perf",[kL]:"fire-perf-compat",[DL]:"fire-rc",[NL]:"fire-rc-compat",[OL]:"fire-gcs",[VL]:"fire-gcs-compat",[ML]:"fire-fst",[FL]:"fire-fst-compat","fire-js":"fire-js",[LL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new Map,zu=new Map;function Ld(t,e){try{t.container.addComponent(e)}catch(n){oo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function uC(t,e){t.container.addOrOverwriteComponent(e)}function ao(t){const e=t.name;if(zu.has(e))return oo.debug(`There were multiple attempts to register component ${e}.`),!1;zu.set(e,t);for(const n of es.values())Ld(n,t);return!0}function cC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function BL(t,e,n=Zi){cC(t,e).clearInstance(n)}function UL(){zu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xr=new Ff("app","Firebase",zL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qL=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=$L;function y_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xr.create("bad-app-name",{appName:String(i)});if(n||(n=nC()),!n)throw Xr.create("no-options");const s=es.get(i);if(s){if(oy(n,s.options)&&oy(r,s.config))return s;throw Xr.create("duplicate-app",{appName:i})}const o=new YF(i);for(const l of zu.values())o.addComponent(l);const a=new qL(n,r,o);return es.set(i,a),a}function KL(t=Zi){const e=es.get(t);if(!e&&t===Zi&&nC())return y_();if(!e)throw Xr.create("no-app",{appName:t});return e}function GL(){return Array.from(es.values())}async function hC(t){const e=t.name;es.has(e)&&(es.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Pr(t,e,n){var r;let i=(r=jL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oo.warn(a.join(" "));return}ao(new ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function dC(t,e){if(t!==null&&typeof t!="function")throw Xr.create("invalid-log-argument");tL(t,e)}function fC(t){eL(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="firebase-heartbeat-database",QL=1,qu="firebase-heartbeat-store";let Im=null;function pC(){return Im||(Im=cL(HL,QL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(qu)}}}).catch(t=>{throw Xr.create("idb-open",{originalErrorMessage:t.message})})),Im}async function WL(t){try{return await(await pC()).transaction(qu).objectStore(qu).get(mC(t))}catch(e){if(e instanceof ps)oo.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oo.warn(n.message)}}}async function _T(t,e){try{const r=(await pC()).transaction(qu,"readwrite");await r.objectStore(qu).put(e,mC(t)),await r.done}catch(n){if(n instanceof ps)oo.warn(n.message);else{const r=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});oo.warn(r.message)}}}function mC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=1024,XL=30*24*60*60*1e3;class JL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wT();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=XL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=wT(),{heartbeatsToSend:n,unsentEntries:r}=ZL(this._heartbeatsCache.heartbeats),i=Md(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function wT(){return new Date().toISOString().substring(0,10)}function ZL(t,e=YL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ET(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ET(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class e${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sC()?jF().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await WL(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _T(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _T(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ET(t){return Md(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(t){ao(new ai("platform-logger",e=>new fL(e),"PRIVATE")),ao(new ai("heartbeat",e=>new JL(e),"PRIVATE")),Pr(uy,vT,t),Pr(uy,vT,"esm2017"),Pr("fire-js","")}t$("");const n$=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ps,SDK_VERSION:Lf,_DEFAULT_ENTRY_NAME:Zi,_addComponent:Ld,_addOrOverwriteComponent:uC,_apps:es,_clearComponents:UL,_components:zu,_getProvider:cC,_registerComponent:ao,_removeServiceInstance:BL,deleteApp:hC,getApp:KL,getApps:GL,initializeApp:y_,onLog:dC,registerVersion:Pr,setLogLevel:fC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,n){this._delegate=e,this.firebase=n,Ld(e,new ai("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),hC(this._delegate)))}_getService(e,n=Zi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Zi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ld(this._delegate,e)}_addOrOverwriteComponent(e){uC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},TT=new Ff("app-compat","Firebase",i$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Pr,setLogLevel:fC,onLog:dC,apps:null,SDK_VERSION:Lf,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:n$}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Zi,!fT(e,u))throw TT.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const h=y_(u,c);if(fT(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,h=c.replace("-compat","");if(ao(u)&&u.type==="PUBLIC"){const d=(f=i())=>{if(typeof f[h]!="function")throw TT.create("invalid-app-argument",{appName:c});return f[h]()};u.serviceProps!==void 0&&Fd(d,u.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,c).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){const t=s$(r$);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:gC,extendNamespace:e,createSubscribe:qF,ErrorFactory:Ff,deepExtend:Fd});function e(n){Fd(t,n)}return t}const o$=gC();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=new m_("@firebase/app-compat"),a$="@firebase/app-compat",l$="0.2.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u$(t){Pr(a$,l$,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(LF()&&self.firebase!==void 0){IT.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&IT.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const tl=o$;u$();var c$="firebase",h$="10.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tl.registerVersion(c$,h$,"app-compat");var d$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,v_=v_||{},ae=d$||self;function $f(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function xc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function f$(t){return Object.prototype.hasOwnProperty.call(t,Sm)&&t[Sm]||(t[Sm]=++p$)}var Sm="closure_uid_"+(1e9*Math.random()>>>0),p$=0;function m$(t,e,n){return t.call.apply(t.bind,arguments)}function g$(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Yt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Yt=m$:Yt=g$,Yt.apply(null,arguments)}function vh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Dt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ms(){this.s=this.s,this.o=this.o}var y$=0;ms.prototype.s=!1;ms.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),y$!=0)&&f$(this)};ms.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function __(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function ST(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if($f(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var v$=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ae.addEventListener("test",()=>{},e),ae.removeEventListener("test",()=>{},e)}catch{}return t}();function Ku(t){return/^[\s\xa0]*$/.test(t)}function jf(){var t=ae.navigator;return t&&(t=t.userAgent)?t:""}function wr(t){return jf().indexOf(t)!=-1}function w_(t){return w_[" "](t),t}w_[" "]=function(){};function _$(t,e){var n=hj;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var w$=wr("Opera"),Pa=wr("Trident")||wr("MSIE"),vC=wr("Edge"),cy=vC||Pa,_C=wr("Gecko")&&!(jf().toLowerCase().indexOf("webkit")!=-1&&!wr("Edge"))&&!(wr("Trident")||wr("MSIE"))&&!wr("Edge"),E$=jf().toLowerCase().indexOf("webkit")!=-1&&!wr("Edge");function wC(){var t=ae.document;return t?t.documentMode:void 0}var hy;e:{var Rm="",xm=function(){var t=jf();if(_C)return/rv:([^\);]+)(\)|;)/.exec(t);if(vC)return/Edge\/([\d\.]+)/.exec(t);if(Pa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(E$)return/WebKit\/(\S+)/.exec(t);if(w$)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(xm&&(Rm=xm?xm[1]:""),Pa){var Cm=wC();if(Cm!=null&&Cm>parseFloat(Rm)){hy=String(Cm);break e}}hy=Rm}var dy;if(ae.document&&Pa){var RT=wC();dy=RT||parseInt(hy,10)||void 0}else dy=void 0;var T$=dy;function Gu(t,e){if(Xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(_C){e:{try{w_(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:I$[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gu.$.h.call(this)}}Dt(Gu,Xt);var I$={2:"touch",3:"pen",4:"mouse"};Gu.prototype.h=function(){Gu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cc="closure_listenable_"+(1e6*Math.random()|0),S$=0;function R$(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++S$,this.fa=this.ia=!1}function Bf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function E_(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function x$(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function EC(t){const e={};for(const n in t)e[n]=t[n];return e}const xT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<xT.length;s++)n=xT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Uf(t){this.src=t,this.g={},this.h=0}Uf.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=py(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new R$(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function fy(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=yC(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Bf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function py(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var T_="closure_lm_"+(1e6*Math.random()|0),Am={};function IC(t,e,n,r,i){if(r&&r.once)return RC(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)IC(t,e[s],n,r,i);return null}return n=R_(n),t&&t[Cc]?t.O(e,n,xc(r)?!!r.capture:!!r,i):SC(t,e,n,!1,r,i)}function SC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=xc(i)?!!i.capture:!!i,a=S_(t);if(a||(t[T_]=a=new Uf(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=C$(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)v$||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(CC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function C$(){function t(n){return e.call(t.src,t.listener,n)}const e=A$;return t}function RC(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)RC(t,e[s],n,r,i);return null}return n=R_(n),t&&t[Cc]?t.P(e,n,xc(r)?!!r.capture:!!r,i):SC(t,e,n,!0,r,i)}function xC(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)xC(t,e[s],n,r,i);else r=xc(r)?!!r.capture:!!r,n=R_(n),t&&t[Cc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=py(s,n,r,i),-1<n&&(Bf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=S_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=py(e,n,r,i)),(n=-1<t?e[t]:null)&&I_(n))}function I_(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Cc])fy(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(CC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=S_(e))?(fy(n,t),n.h==0&&(n.src=null,e[T_]=null)):Bf(t)}}}function CC(t){return t in Am?Am[t]:Am[t]="on"+t}function A$(t,e){if(t.fa)t=!0;else{e=new Gu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&I_(t),t=n.call(r,e)}return t}function S_(t){return t=t[T_],t instanceof Uf?t:null}var bm="__closure_events_fn_"+(1e9*Math.random()>>>0);function R_(t){return typeof t=="function"?t:(t[bm]||(t[bm]=function(e){return t.handleEvent(e)}),t[bm])}function kt(){ms.call(this),this.i=new Uf(this),this.S=this,this.J=null}Dt(kt,ms);kt.prototype[Cc]=!0;kt.prototype.removeEventListener=function(t,e,n,r){xC(this,t,e,n,r)};function Ut(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Xt(e,t);else if(e instanceof Xt)e.target=e.target||t;else{var i=e;e=new Xt(r,t),TC(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=_h(o,r,!0,e)&&i}if(o=e.g=t,i=_h(o,r,!0,e)&&i,i=_h(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=_h(o,r,!1,e)&&i}kt.prototype.N=function(){if(kt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bf(n[r]);delete t.g[e],t.h--}}this.J=null};kt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};kt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function _h(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&fy(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var x_=ae.JSON.stringify;class b${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function P$(){var t=C_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class k${constructor(){this.h=this.g=null}add(e,n){const r=AC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var AC=new b$(()=>new D$,t=>t.reset());class D${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function N$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function O$(t){ae.setTimeout(()=>{throw t},0)}let Hu,Qu=!1,C_=new k$,bC=()=>{const t=ae.Promise.resolve(void 0);Hu=()=>{t.then(V$)}};var V$=()=>{for(var t;t=P$();){try{t.h.call(t.g)}catch(n){O$(n)}var e=AC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qu=!1};function zf(t,e){kt.call(this),this.h=t||1,this.g=e||ae,this.j=Yt(this.qb,this),this.l=Date.now()}Dt(zf,kt);z=zf.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ut(this,"tick"),this.ga&&(A_(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function A_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){zf.$.N.call(this),A_(this),delete this.g};function b_(t,e,n){if(typeof t=="function")n&&(t=Yt(t,n));else if(t&&typeof t.handleEvent=="function")t=Yt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ae.setTimeout(t,e||0)}function PC(t){t.g=b_(()=>{t.g=null,t.i&&(t.i=!1,PC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class M$ extends ms{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:PC(this)}N(){super.N(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wu(t){ms.call(this),this.h=t,this.g={}}Dt(Wu,ms);var CT=[];function kC(t,e,n,r){Array.isArray(n)||(n&&(CT[0]=n.toString()),n=CT);for(var i=0;i<n.length;i++){var s=IC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function DC(t){E_(t.g,function(e,n){this.g.hasOwnProperty(n)&&I_(e)},t),t.g={}}Wu.prototype.N=function(){Wu.$.N.call(this),DC(this)};Wu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function qf(){this.g=!0}qf.prototype.Ea=function(){this.g=!1};function F$(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function L$(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function aa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+j$(t,n)+(r?" "+r:"")})}function $$(t,e){t.info(function(){return"TIMEOUT: "+e})}qf.prototype.info=function(){};function j$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return x_(n)}catch{return e}}var Io={},AT=null;function Kf(){return AT=AT||new kt}Io.Ta="serverreachability";function NC(t){Xt.call(this,Io.Ta,t)}Dt(NC,Xt);function Yu(t){const e=Kf();Ut(e,new NC(e))}Io.STAT_EVENT="statevent";function OC(t,e){Xt.call(this,Io.STAT_EVENT,t),this.stat=e}Dt(OC,Xt);function on(t){const e=Kf();Ut(e,new OC(e,t))}Io.Ua="timingevent";function VC(t,e){Xt.call(this,Io.Ua,t),this.size=e}Dt(VC,Xt);function Ac(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){t()},e)}var Gf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},MC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function P_(){}P_.prototype.h=null;function bT(t){return t.h||(t.h=t.i())}function FC(){}var bc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function k_(){Xt.call(this,"d")}Dt(k_,Xt);function D_(){Xt.call(this,"c")}Dt(D_,Xt);var my;function Hf(){}Dt(Hf,P_);Hf.prototype.g=function(){return new XMLHttpRequest};Hf.prototype.i=function(){return{}};my=new Hf;function Pc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Wu(this),this.P=B$,t=cy?125:void 0,this.V=new zf(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new LC}function LC(){this.i=null,this.g="",this.h=!1}var B$=45e3,gy={},$d={};z=Pc.prototype;z.setTimeout=function(t){this.P=t};function yy(t,e,n){t.L=1,t.v=Wf(li(e)),t.s=n,t.S=!0,$C(t,null)}function $C(t,e){t.G=Date.now(),kc(t),t.A=li(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),HC(n.i,"t",r),t.C=0,n=t.l.J,t.h=new LC,t.g=pA(t.l,n?e:null,!t.s),0<t.O&&(t.M=new M$(Yt(t.Pa,t,t.g),t.O)),kC(t.U,t.g,"readystatechange",t.nb),e=t.I?EC(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Yu(),F$(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&Tr(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const c=Tr(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||cy||this.g&&(this.h.h||this.g.ja()||NT(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Yu(3):Yu(2)),Qf(this);var n=this.g.da();this.ca=n;t:if(jC(this)){var r=NT(this.g);t="";var i=r.length,s=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zs(this),du(this);var o="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,L$(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ku(a)){var u=a;break t}}u=null}if(n=u)aa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vy(this,n);else{this.i=!1,this.o=3,on(12),zs(this),du(this);break e}}this.S?(BC(this,c,o),cy&&this.i&&c==3&&(kC(this.U,this.V,"tick",this.mb),this.V.start())):(aa(this.j,this.m,o,null),vy(this,o)),c==4&&zs(this),this.i&&!this.J&&(c==4?cA(this.l,this):(this.i=!1,kc(this)))}else lj(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,on(12)):(this.o=0,on(13)),zs(this),du(this)}}}catch{}finally{}};function jC(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function BC(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=U$(t,n),i==$d){e==4&&(t.o=4,on(14),r=!1),aa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==gy){t.o=4,on(15),aa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else aa(t.j,t.m,i,null),vy(t,i);jC(t)&&i!=$d&&i!=gy&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,on(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),L_(e),e.M=!0,on(11))):(aa(t.j,t.m,n,"[Invalid Chunked Response]"),zs(t),du(t))}z.mb=function(){if(this.g){var t=Tr(this.g),e=this.g.ja();this.C<e.length&&(Qf(this),BC(this,t,e),this.i&&t!=4&&kc(this))}};function U$(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?$d:(n=Number(e.substring(n,r)),isNaN(n)?gy:(r+=1,r+n>e.length?$d:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,zs(this)};function kc(t){t.Y=Date.now()+t.P,UC(t,t.P)}function UC(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Ac(Yt(t.lb,t),e)}function Qf(t){t.B&&(ae.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?($$(this.j,this.A),this.L!=2&&(Yu(),on(17)),zs(this),this.o=2,du(this)):UC(this,this.Y-t)};function du(t){t.l.H==0||t.J||cA(t.l,t)}function zs(t){Qf(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,A_(t.V),DC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function vy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||_y(n.i,t))){if(!t.K&&_y(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ud(n),Zf(n);else break e;F_(n),on(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ac(Yt(n.ib,n),6e3));if(1>=YC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else qs(n,11)}else if((t.K||n.g==t)&&Ud(n),!Ku(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(N_(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,ze(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=fA(r,r.J?r.pa:null,r.Y),o.K){XC(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Qf(a),kc(a)),r.g=o}else lA(r);0<n.j.length&&ep(n)}else u[0]!="stop"&&u[0]!="close"||qs(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?qs(n,7):M_(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Yu(4)}catch{}}function z$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if($f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function q$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if($f(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function zC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if($f(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=q$(t),r=z$(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var qC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function K$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ys(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ys){this.h=t.h,jd(this,t.j),this.s=t.s,this.g=t.g,Bd(this,t.m),this.l=t.l;var e=t.i,n=new Xu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),PT(this,n),this.o=t.o}else t&&(e=String(t).match(qC))?(this.h=!1,jd(this,e[1]||"",!0),this.s=Ql(e[2]||""),this.g=Ql(e[3]||"",!0),Bd(this,e[4]),this.l=Ql(e[5]||"",!0),PT(this,e[6]||"",!0),this.o=Ql(e[7]||"")):(this.h=!1,this.i=new Xu(null,this.h))}Ys.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Wl(e,kT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Wl(e,kT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Wl(n,n.charAt(0)=="/"?Q$:H$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Wl(n,Y$)),t.join("")};function li(t){return new Ys(t)}function jd(t,e,n){t.j=n?Ql(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Bd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function PT(t,e,n){e instanceof Xu?(t.i=e,X$(t.i,t.h)):(n||(e=Wl(e,W$)),t.i=new Xu(e,t.h))}function ze(t,e,n){t.i.set(e,n)}function Wf(t){return ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ql(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,G$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function G$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var kT=/[#\/\?@]/g,H$=/[#\?:]/g,Q$=/[#\?]/g,W$=/[#\?@]/g,Y$=/#/g;function Xu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gs(t){t.g||(t.g=new Map,t.h=0,t.i&&K$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=Xu.prototype;z.add=function(t,e){gs(this),this.i=null,t=nl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function KC(t,e){gs(t),e=nl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function GC(t,e){return gs(t),e=nl(t,e),t.g.has(e)}z.forEach=function(t,e){gs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};z.ta=function(){gs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};z.Z=function(t){gs(this);let e=[];if(typeof t=="string")GC(this,t)&&(e=e.concat(this.g.get(nl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return gs(this),this.i=null,t=nl(this,t),GC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function HC(t,e,n){KC(t,e),0<n.length&&(t.i=null,t.g.set(nl(t,e),__(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function nl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function X$(t,e){e&&!t.j&&(gs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(KC(this,r),HC(this,i,n))},t)),t.j=e}var J$=class{constructor(t,e){this.g=t,this.map=e}};function QC(t){this.l=t||Z$,ae.PerformanceNavigationTiming?(t=ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ae.g&&ae.g.Ka&&ae.g.Ka()&&ae.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Z$=10;function WC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function YC(t){return t.h?1:t.g?t.g.size:0}function _y(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function N_(t,e){t.g?t.g.add(e):t.h=e}function XC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}QC.prototype.cancel=function(){if(this.i=JC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function JC(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return __(t.i)}var ej=class{stringify(t){return ae.JSON.stringify(t,void 0)}parse(t){return ae.JSON.parse(t,void 0)}};function tj(){this.g=new ej}function nj(t,e,n){const r=n||"";try{zC(t,function(i,s){let o=i;xc(i)&&(o=x_(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function rj(t,e){const n=new qf;if(ae.Image){const r=new Image;r.onload=vh(wh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=vh(wh,n,r,"TestLoadImage: error",!1,e),r.onabort=vh(wh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=vh(wh,n,r,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function wh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Yf(t){this.l=t.ec||null,this.j=t.ob||!1}Dt(Yf,P_);Yf.prototype.g=function(){return new Xf(this.l,this.j)};Yf.prototype.i=function(t){return function(){return t}}({});function Xf(t,e){kt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=O_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Dt(Xf,kt);var O_=0;z=Xf.prototype;z.open=function(t,e){if(this.readyState!=O_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ju(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dc(this)),this.readyState=O_};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ju(this)),this.g&&(this.readyState=3,Ju(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ZC(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ZC(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Dc(this):Ju(this),this.readyState==3&&ZC(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,Dc(this))};z.Ya=function(t){this.g&&(this.response=t,Dc(this))};z.ka=function(){this.g&&Dc(this)};function Dc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ju(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ju(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var ij=ae.JSON.parse;function ut(t){kt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eA,this.L=this.M=!1}Dt(ut,kt);var eA="",sj=/^https?$/i,oj=["POST","PUT"];z=ut.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():my.g(),this.C=this.u?bT(this.u):bT(my),this.g.onreadystatechange=Yt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){DT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ae.FormData&&t instanceof ae.FormData,!(0<=yC(oj,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rA(this),0<this.B&&((this.L=aj(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yt(this.ua,this)):this.A=b_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){DT(this,s)}};function aj(t){return Pa&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof v_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ut(this,"timeout"),this.abort(8))};function DT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,tA(t),Jf(t)}function tA(t){t.F||(t.F=!0,Ut(t,"complete"),Ut(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ut(this,"complete"),Ut(this,"abort"),Jf(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jf(this,!0)),ut.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?nA(this):this.kb())};z.kb=function(){nA(this)};function nA(t){if(t.h&&typeof v_<"u"&&(!t.C[1]||Tr(t)!=4||t.da()!=2)){if(t.v&&Tr(t)==4)b_(t.La,0,t);else if(Ut(t,"readystatechange"),Tr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(qC)[1]||null;!i&&ae.self&&ae.self.location&&(i=ae.self.location.protocol.slice(0,-1)),r=!sj.test(i?i.toLowerCase():"")}n=r}if(n)Ut(t,"complete"),Ut(t,"success");else{t.m=6;try{var s=2<Tr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",tA(t)}}finally{Jf(t)}}}}function Jf(t,e){if(t.g){rA(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ut(t,"ready");try{n.onreadystatechange=r}catch{}}}function rA(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ae.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function Tr(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),ij(e)}};function NT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case eA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function lj(t){const e={};t=(t.g&&2<=Tr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ku(t[r]))continue;var n=N$(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}x$(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function iA(t){let e="";return E_(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function V_(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=iA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ze(t,e,n))}function Pl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sA(t){this.Ga=0,this.j=[],this.l=new qf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pl("baseRetryDelayMs",5e3,t),this.hb=Pl("retryDelaySeedMs",1e4,t),this.eb=Pl("forwardChannelMaxRetries",2,t),this.xa=Pl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new QC(t&&t.concurrentRequestLimit),this.Ja=new tj,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=sA.prototype;z.ra=8;z.H=1;function M_(t){if(oA(t),t.H==3){var e=t.W++,n=li(t.I);if(ze(n,"SID",t.K),ze(n,"RID",e),ze(n,"TYPE","terminate"),Nc(t,n),e=new Pc(t,t.l,e),e.L=2,e.v=Wf(li(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon)try{n=ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=pA(e.l,null),e.g.ha(e.v)),e.G=Date.now(),kc(e)}dA(t)}function Zf(t){t.g&&(L_(t),t.g.cancel(),t.g=null)}function oA(t){Zf(t),t.u&&(ae.clearTimeout(t.u),t.u=null),Ud(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ae.clearTimeout(t.m),t.m=null)}function ep(t){if(!WC(t.i)&&!t.m){t.m=!0;var e=t.Na;Hu||bC(),Qu||(Hu(),Qu=!0),C_.add(e,t),t.C=0}}function uj(t,e){return YC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ac(Yt(t.Na,t,e),hA(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Pc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=EC(s),TC(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aA(this,i,e),n=li(this.I),ze(n,"RID",t),ze(n,"CVER",22),this.F&&ze(n,"X-HTTP-Session-Id",this.F),Nc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(iA(s)))+"&"+e:this.o&&V_(n,this.o,s)),N_(this.i,i),this.bb&&ze(n,"TYPE","init"),this.P?(ze(n,"$req",e),ze(n,"SID","null"),i.aa=!0,yy(i,n,null)):yy(i,n,e),this.H=2}}else this.H==3&&(t?OT(this,t):this.j.length==0||WC(this.i)||OT(this))};function OT(t,e){var n;e?n=e.m:n=t.W++;const r=li(t.I);ze(r,"SID",t.K),ze(r,"RID",n),ze(r,"AID",t.V),Nc(t,r),t.o&&t.s&&V_(r,t.o,t.s),n=new Pc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=aA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),N_(t.i,n),yy(n,r,e)}function Nc(t,e){t.na&&E_(t.na,function(n,r){ze(e,r,n)}),t.h&&zC({},function(n,r){ze(e,r,n)})}function aA(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Yt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{nj(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function lA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Hu||bC(),Qu||(Hu(),Qu=!0),C_.add(e,t),t.A=0}}function F_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ac(Yt(t.Ma,t),hA(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,uA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ac(Yt(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,on(10),Zf(this),uA(this))};function L_(t){t.B!=null&&(ae.clearTimeout(t.B),t.B=null)}function uA(t){t.g=new Pc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=li(t.wa);ze(e,"RID","rpc"),ze(e,"SID",t.K),ze(e,"AID",t.V),ze(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ze(e,"TO",t.qa),ze(e,"TYPE","xmlhttp"),Nc(t,e),t.o&&t.s&&V_(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Wf(li(e)),n.s=null,n.S=!0,$C(n,t)}z.ib=function(){this.v!=null&&(this.v=null,Zf(this),F_(this),on(19))};function Ud(t){t.v!=null&&(ae.clearTimeout(t.v),t.v=null)}function cA(t,e){var n=null;if(t.g==e){Ud(t),L_(t),t.g=null;var r=2}else if(_y(t.i,e))n=e.F,XC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Kf(),Ut(r,new VC(r,n)),ep(t)}else lA(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&uj(t,e)||r==2&&F_(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:qs(t,5);break;case 4:qs(t,10);break;case 3:qs(t,6);break;default:qs(t,2)}}}function hA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function qs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Yt(t.pb,t);n||(n=new Ys("//www.google.com/images/cleardot.gif"),ae.location&&ae.location.protocol=="http"||jd(n,"https"),Wf(n)),rj(n.toString(),r)}else on(2);t.H=0,t.h&&t.h.za(e),dA(t),oA(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),on(2)):(this.l.info("Failed to ping google.com"),on(1))};function dA(t){if(t.H=0,t.ma=[],t.h){const e=JC(t.i);(e.length!=0||t.j.length!=0)&&(ST(t.ma,e),ST(t.ma,t.j),t.i.i.length=0,__(t.j),t.j.length=0),t.h.ya()}}function fA(t,e,n){var r=n instanceof Ys?li(n):new Ys(n);if(r.g!="")e&&(r.g=e+"."+r.g),Bd(r,r.m);else{var i=ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ys(null);r&&jd(s,r),e&&(s.g=e),i&&Bd(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ze(r,n,e),ze(r,"VER",t.ra),Nc(t,r),r}function pA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ut(new Yf({ob:!0})):new ut(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function mA(){}z=mA.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function zd(){if(Pa&&!(10<=Number(T$)))throw Error("Environmental error: no available transport.")}zd.prototype.g=function(t,e){return new kn(t,e)};function kn(t,e){kt.call(this),this.g=new sA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ku(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ku(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new rl(this)}Dt(kn,kt);kn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;on(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=fA(t,null,t.Y),ep(t)};kn.prototype.close=function(){M_(this.g)};kn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=x_(t),t=n);e.j.push(new J$(e.fb++,t)),e.H==3&&ep(e)};kn.prototype.N=function(){this.g.h=null,delete this.j,M_(this.g),delete this.g,kn.$.N.call(this)};function gA(t){k_.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Dt(gA,k_);function yA(){D_.call(this),this.status=1}Dt(yA,D_);function rl(t){this.g=t}Dt(rl,mA);rl.prototype.Ba=function(){Ut(this.g,"a")};rl.prototype.Aa=function(t){Ut(this.g,new gA(t))};rl.prototype.za=function(t){Ut(this.g,new yA)};rl.prototype.ya=function(){Ut(this.g,"b")};function cj(){this.blockSize=-1}function fr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Dt(fr,cj);fr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Pm(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}fr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Pm(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Pm(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Pm(this,r),i=0;break}}this.h=i,this.i+=e};fr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ne(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var hj={};function $_(t){return-128<=t&&128>t?_$(t,function(e){return new Ne([e|0],0>e?-1:0)}):new Ne([t|0],0>t?-1:0)}function Ir(t){if(isNaN(t)||!isFinite(t))return ma;if(0>t)return $t(Ir(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=wy;return new Ne(e,0)}function vA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return $t(vA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ir(Math.pow(e,8)),r=ma,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ir(Math.pow(e,s)),r=r.R(s).add(Ir(o))):(r=r.R(n),r=r.add(Ir(o)))}return r}var wy=4294967296,ma=$_(0),Ey=$_(1),VT=$_(16777216);z=Ne.prototype;z.ea=function(){if(qn(this))return-$t(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:wy+r)*e,e*=wy}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Hr(this))return"0";if(qn(this))return"-"+$t(this).toString(t);for(var e=Ir(Math.pow(t,6)),n=this,r="";;){var i=Kd(n,e).g;n=qd(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Hr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Hr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function qn(t){return t.h==-1}z.X=function(t){return t=qd(this,t),qn(t)?-1:Hr(t)?0:1};function $t(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ne(n,~t.h).add(Ey)}z.abs=function(){return qn(this)?$t(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ne(n,n[n.length-1]&-2147483648?-1:0)};function qd(t,e){return t.add($t(e))}z.R=function(t){if(Hr(this)||Hr(t))return ma;if(qn(this))return qn(t)?$t(this).R($t(t)):$t($t(this).R(t));if(qn(t))return $t(this.R($t(t)));if(0>this.X(VT)&&0>t.X(VT))return Ir(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Eh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Eh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Eh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Eh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ne(n,0)};function Eh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function kl(t,e){this.g=t,this.h=e}function Kd(t,e){if(Hr(e))throw Error("division by zero");if(Hr(t))return new kl(ma,ma);if(qn(t))return e=Kd($t(t),e),new kl($t(e.g),$t(e.h));if(qn(e))return e=Kd(t,$t(e)),new kl($t(e.g),e.h);if(30<t.g.length){if(qn(t)||qn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ey,r=e;0>=r.X(t);)n=MT(n),r=MT(r);var i=Do(n,1),s=Do(r,1);for(r=Do(r,2),n=Do(n,2);!Hr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Do(r,1),n=Do(n,1)}return e=qd(t,i.R(e)),new kl(i,e)}for(i=ma;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ir(n),o=s.R(e);qn(o)||0<o.X(t);)n-=r,s=Ir(n),o=s.R(e);Hr(s)&&(s=Ey),i=i.add(s),t=qd(t,o)}return new kl(i,t)}z.gb=function(t){return Kd(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ne(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ne(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ne(n,this.h^t.h)};function MT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ne(n,t.h)}function Do(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ne(i,t.h)}zd.prototype.createWebChannel=zd.prototype.g;kn.prototype.send=kn.prototype.u;kn.prototype.open=kn.prototype.m;kn.prototype.close=kn.prototype.close;Gf.NO_ERROR=0;Gf.TIMEOUT=8;Gf.HTTP_ERROR=6;MC.COMPLETE="complete";FC.EventType=bc;bc.OPEN="a";bc.CLOSE="b";bc.ERROR="c";bc.MESSAGE="d";kt.prototype.listen=kt.prototype.O;ut.prototype.listenOnce=ut.prototype.P;ut.prototype.getLastError=ut.prototype.Sa;ut.prototype.getLastErrorCode=ut.prototype.Ia;ut.prototype.getStatus=ut.prototype.da;ut.prototype.getResponseJson=ut.prototype.Wa;ut.prototype.getResponseText=ut.prototype.ja;ut.prototype.send=ut.prototype.ha;ut.prototype.setWithCredentials=ut.prototype.Oa;fr.prototype.digest=fr.prototype.l;fr.prototype.reset=fr.prototype.reset;fr.prototype.update=fr.prototype.j;Ne.prototype.add=Ne.prototype.add;Ne.prototype.multiply=Ne.prototype.R;Ne.prototype.modulo=Ne.prototype.gb;Ne.prototype.compare=Ne.prototype.X;Ne.prototype.toNumber=Ne.prototype.ea;Ne.prototype.toString=Ne.prototype.toString;Ne.prototype.getBits=Ne.prototype.D;Ne.fromNumber=Ir;Ne.fromString=vA;var dj=function(){return new zd},fj=function(){return Kf()},km=Gf,pj=MC,mj=Io,FT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Th=FC,gj=ut,yj=fr,ga=Ne;const LT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="10.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new m_("@firebase/firestore");function Uo(){return ts.logLevel}function vj(t){ts.setLogLevel(t)}function V(t,...e){if(ts.logLevel<=Ee.DEBUG){const n=e.map(j_);ts.debug(`Firestore (${il}): ${t}`,...n)}}function mt(t,...e){if(ts.logLevel<=Ee.ERROR){const n=e.map(j_);ts.error(`Firestore (${il}): ${t}`,...n)}}function pr(t,...e){if(ts.logLevel<=Ee.WARN){const n=e.map(j_);ts.warn(`Firestore (${il}): ${t}`,...n)}}function j_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t="Unexpected state"){const e=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: `+t;throw mt(e),new Error(e)}function X(t,e){t||H()}function _j(t,e){t||H()}function U(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class N extends ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class Ej{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Tj{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X(typeof r.accessToken=="string"),new _A(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string"),new At(e)}}class Ij{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Sj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ij(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X(typeof n.token=="string"),this.R=n.token,new Rj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Cj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function ka(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function EA(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new N(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new N(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new N(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new N(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new Ye(0,0))}static max(){return new Y(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(),r===void 0?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Zu{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new N(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const Aj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Zu{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return Aj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new N(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new N(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new N(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new N(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.path=e}static fromPath(e){return new B(Re.fromString(e))}static fromName(e){return new B(Re.fromString(e).popFirst(5))}static empty(){return new B(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new B(new Re(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Ty(t){return t.fields.find(e=>e.kind===2)}function Ds(t){return t.fields.filter(e=>e.kind!==2)}Gd.UNKNOWN_ID=-1;class Wh{constructor(e,n){this.fieldPath=e,this.kind=n}}class ec{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ec(0,Dn.min())}}function TA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Dn(i,B.empty(),e)}function IA(t){return new Dn(t.readTime,t.key,-1)}class Dn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dn(Y.min(),B.empty(),-1)}static max(){return new Dn(Y.max(),B.empty(),-1)}}function B_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ys(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==SA)throw t;V("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new A((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof A?n:A.resolve(n)}catch(n){return A.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):A.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):A.reject(n)}static resolve(e){return new A((n,r)=>{n(e)})}static reject(e){return new A((n,r)=>{r(e)})}static waitFor(e){return new A((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=A.resolve(!1);for(const r of e)n=n.next(i=>i?A.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new A((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new A((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.m=new Pt,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new fu(e,n.error)):this.m.resolve()},this.transaction.onerror=r=>{const i=U_(r.target.error);this.m.reject(new fu(e,i))}}static open(e,n,r,i){try{return new tp(n,e.transaction(i,r))}catch(s){throw new fu(n,s)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(V("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Pj(n)}}class ur{constructor(e,n,r){this.name=e,this.version=n,this.S=r,ur.D(sy())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return V("SimpleDb","Removing database:",e),Ns(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!sC())return!1;if(ur.v())return!0;const e=sy(),n=ur.D(e),r=0<n&&n<10,i=ur.F(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static F(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async N(e){return this.db||(V("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new N(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new N(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new fu(e,o))},i.onupgradeneeded=s=>{V("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.B(o,i.transaction,s.oldVersion,this.version).next(()=>{V("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const a=tp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.p(),u)).catch(u=>(a.abort(u),A.reject(u))).toPromise();return l.catch(()=>{}),await a.g,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(V("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class bj{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return Ns(this.q.delete())}}class fu extends N{constructor(e,n){super(b.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function vs(t){return t.name==="IndexedDbTransactionError"}class Pj{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(V("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(V("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ns(r)}add(e){return V("SimpleDb","ADD",this.store.name,e,e),Ns(this.store.add(e))}get(e){return Ns(this.store.get(e)).next(n=>(n===void 0&&(n=null),V("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return V("SimpleDb","DELETE",this.store.name,e),Ns(this.store.delete(e))}count(){return V("SimpleDb","COUNT",this.store.name),Ns(this.store.count())}G(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.j(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new A((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new A((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,n){V("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.j(i,(s,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.j(i,n)}X(e){const n=this.cursor({});return new A((r,i)=>{n.onerror=s=>{const o=U_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}j(e,n){const r=[];return new A((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new bj(a),u=n(a.primaryKey,a.value,l);if(u instanceof A){const c=u.catch(h=>(l.done(),A.reject(h)));r.push(c)}l.isDone?i():l.U===null?a.continue():a.continue(l.U)}}).next(()=>A.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ns(t){return new A((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=U_(r.target.error);n(i)}})}let $T=!1;function U_(t){const e=ur.D(sy());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new N("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $T||($T=!0,setTimeout(()=>{throw r},0)),r}}return t}class kj{constructor(e,n){this.asyncQueue=e,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){V("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{V("IndexBackiller",`Documents written: ${await this.ee.ne()}`)}catch(n){vs(n)?V("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await ys(n)}await this.te(6e4)})}}class Dj{constructor(e,n){this.localStore=e,this.persistence=n}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,e))}re(e,n){const r=new Set;let i=n,s=!0;return A.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return V("IndexBackiller",`Processing collection: ${o}`),this.ie(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ie(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(i,s)).next(a=>(V("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}se(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=IA(s);B_(o,r)>0&&(r=o)}),new Dn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}yn.ae=-1;function Oc(t){return t==null}function tc(t){return t===0&&1/t==-1/0}function xA(t){return typeof t=="number"&&Number.isInteger(t)&&!tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jT(e)),e=Nj(t.get(n),e);return jT(e)}function Nj(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function jT(t){return t+""}function Sr(t){const e=t.length;if(X(e>=2),e===2)return X(t.charAt(0)===""&&t.charAt(1)===""),Re.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&H(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:H()}s=o+2}return new Re(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t,e){return[t,ln(e)]}function CA(t,e,n){return[t,ln(e),n]}const Oj={},Vj=["prefixPath","collectionGroup","readTime","documentId"],Mj=["prefixPath","collectionGroup","documentId"],Fj=["collectionGroup","readTime","prefixPath","documentId"],Lj=["canonicalId","targetId"],$j=["targetId","path"],jj=["path","targetId"],Bj=["collectionId","parent"],Uj=["indexId","uid"],zj=["uid","sequenceNumber"],qj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Kj=["indexId","uid","orderedDocumentKey"],Gj=["userId","collectionPath","documentId"],Hj=["userId","collectionPath","largestBatchId"],Qj=["userId","collectionGroup","largestBatchId"],AA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Wj=[...AA,"documentOverlays"],bA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PA=bA,Yj=[...PA,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy extends RA{constructor(e,n){super(),this.ue=e,this.currentSequenceNumber=n}}function Nt(t,e){const n=U(t);return ur.O(n.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Lt.RED,this.left=i??Lt.EMPTY,this.right=s??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Lt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Lt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zT(this.data.getIterator())}getIteratorFrom(e){return new zT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class zT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function No(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new vn([])}unionWith(e){let n=new je(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DA("Invalid base64 string: "+s):s}}(e);return new It(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const Jj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(X(!!t),typeof t=="string"){let e=0;const n=Jj.exec(t);if(X(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function z_(t){const e=t.mapValue.fields.__previous_value__;return np(e)?z_(e):e}function nc(t){const e=ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class is{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new is("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof is&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xh={nullValue:"NULL_VALUE"};function lo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?np(t)?4:NA(t)?9007199254740991:10:H()}function Vr(t,e){if(t===e)return!0;const n=lo(t);if(n!==lo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nc(t).isEqual(nc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ns(i.timestampValue),a=ns(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return rs(i.bytesValue).isEqual(rs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ot(i.doubleValue),a=ot(s.doubleValue);return o===a?tc(o)===tc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ka(t.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UT(o)!==UT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Vr(o[l],a[l])))return!1;return!0}(t,e);default:return H()}}function rc(t,e){return(t.values||[]).find(n=>Vr(n,e))!==void 0}function ss(t,e){if(t===e)return 0;const n=lo(t),r=lo(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ot(s.integerValue||s.doubleValue),l=ot(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return qT(t.timestampValue,e.timestampValue);case 4:return qT(nc(t),nc(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,o){const a=rs(s),l=rs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=he(a[u],l[u]);if(c!==0)return c}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(ot(s.latitude),ot(o.latitude));return a!==0?a:he(ot(s.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=ss(a[u],l[u]);if(c)return c}return he(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Li.mapValue&&o===Li.mapValue)return 0;if(s===Li.mapValue)return 1;if(o===Li.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=he(l[h],c[h]);if(d!==0)return d;const f=ss(a[l[h]],u[c[h]]);if(f!==0)return f}return he(l.length,c.length)}(t.mapValue,e.mapValue);default:throw H()}}function qT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=ns(t),r=ns(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function Da(t){return Sy(t)}function Sy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return B.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Sy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Sy(n.fields[o])}`;return i+"}"}(t.mapValue):H()}function uo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ry(t){return!!t&&"integerValue"in t}function ic(t){return!!t&&"arrayValue"in t}function KT(t){return!!t&&"nullValue"in t}function GT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jh(t){return!!t&&"mapValue"in t}function pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return So(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function e4(t){return"nullValue"in t?Xh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?uo(is.empty(),B.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:H()}function t4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?uo(is.empty(),B.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Li:H()}function HT(t,e){const n=ss(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function QT(t,e){const n=ss(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=at.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=pu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Jh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){So(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jt(pu(this.value))}}function OA(t){const e=[];return So(t.fields,(n,r)=>{const i=new at([n]);if(Jh(r)){const s=OA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qe(e,0,Y.min(),Y.min(),Y.min(),jt.empty(),0)}static newFoundDocument(e,n,r,i){return new qe(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new qe(e,2,n,Y.min(),Y.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new qe(e,3,n,Y.min(),Y.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){this.position=e,this.inclusive=n}}function WT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=B.comparator(B.fromName(o.referenceValue),n.key):r=ss(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function YT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n="asc"){this.field=e,this.dir=n}}function n4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{}class ge extends VA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new r4(e,n,r):n==="array-contains"?new o4(e,r):n==="in"?new BA(e,r):n==="not-in"?new a4(e,r):n==="array-contains-any"?new l4(e,r):new ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new i4(e,r):new s4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ss(n,this.value)):n!==null&&lo(this.value)===lo(n)&&this.matchesComparison(ss(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ke extends VA{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ke(e,n)}matches(e){return Na(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Na(t){return t.op==="and"}function xy(t){return t.op==="or"}function q_(t){return MA(t)&&Na(t)}function MA(t){for(const e of t.filters)if(e instanceof ke)return!1;return!0}function Cy(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(q_(t))return t.filters.map(e=>Cy(e)).join(",");{const e=t.filters.map(n=>Cy(n)).join(",");return`${t.op}(${e})`}}function FA(t,e){return t instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&Vr(r.value,i.value)}(t,e):t instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&FA(o,i.filters[a]),!0):!1}(t,e):void H()}function LA(t,e){const n=t.filters.concat(e);return ke.create(n,t.op)}function $A(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Da(n.value)}`}(t):t instanceof ke?function(n){return n.op.toString()+" {"+n.getFilters().map($A).join(" ,")+"}"}(t):"Filter"}class r4 extends ge{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){const n=B.comparator(e.key,this.key);return this.matchesComparison(n)}}class i4 extends ge{constructor(e,n){super(e,"in",n),this.keys=jA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class s4 extends ge{constructor(e,n){super(e,"not-in",n),this.keys=jA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}class o4 extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ic(n)&&rc(n.arrayValue,this.value)}}class BA extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rc(this.value.arrayValue,n)}}class a4 extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rc(this.value.arrayValue,n)}}class l4 extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ic(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function Ay(t,e=null,n=[],r=[],i=null,s=null,o=null){return new u4(t,e,n,r,i,s,o)}function co(t){const e=U(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Da(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Da(r)).join(",")),e.he=n}return e.he}function Vc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YT(t.startAt,e.startAt)&&YT(t.endAt,e.endAt)}function Hd(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qd(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function XT(t,e,n){let r=Xh,i=!0;for(const s of Qd(t,e)){let o=Xh,a=!0;switch(s.op){case"<":case"<=":o=e4(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Xh}HT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];HT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function JT(t,e,n){let r=Li,i=!0;for(const s of Qd(t,e)){let o=Li,a=!0;switch(s.op){case">=":case">":o=t4(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Li}QT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];QT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function UA(t,e,n,r,i,s,o,a){return new mi(t,e,n,r,i,s,o,a)}function sl(t){return new mi(t)}function ZT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function K_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function rp(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function G_(t){return t.collectionGroup!==null}function va(t){const e=U(t);if(e.Pe===null){e.Pe=[];const n=rp(e),r=K_(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new ya(n)),e.Pe.push(new ya(at.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new ya(at.keyField(),s))}}}return e.Pe}function un(t){const e=U(t);return e.Ie||(e.Ie=c4(e,va(t))),e.Ie}function c4(t,e){if(t.limitType==="F")return Ay(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ya(i.field,s)});const n=t.endAt?new os(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new os(t.startAt.position,t.startAt.inclusive):null;return Ay(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function by(t,e){e.getFirstInequalityField(),rp(t);const n=t.filters.concat([e]);return new mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wd(t,e,n){return new mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mc(t,e){return Vc(un(t),un(e))&&t.limitType===e.limitType}function zA(t){return`${co(un(t))}|lt:${t.limitType}`}function zo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$A(i)).join(", ")}]`),Oc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Da(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Da(i)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function Fc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):B.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of va(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=WT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,va(r),i)||r.endAt&&!function(o,a,l){const u=WT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,va(r),i))}(t,e)}function qA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KA(t){return(e,n)=>{let r=!1;for(const i of va(t)){const s=h4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function h4(t,e,n){const r=t.field.isKeyField()?B.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ss(l,u):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return kA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new Be(B.comparator);function _n(){return d4}const GA=new Be(B.comparator);function Yl(...t){let e=GA;for(const n of t)e=e.insert(n.key,n);return e}function HA(t){let e=GA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rr(){return mu()}function QA(){return mu()}function mu(){return new _s(t=>t.toString(),(t,e)=>t.isEqual(e))}const f4=new Be(B.comparator),p4=new je(B.comparator);function fe(...t){let e=p4;for(const n of t)e=e.add(n);return e}const m4=new je(he);function H_(){return m4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function YA(t){return{integerValue:""+t}}function XA(t,e){return xA(e)?YA(e):WA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this._=void 0}}function g4(t,e,n){return t instanceof Oa?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&np(s)&&(s=z_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ho?ZA(t,e):t instanceof fo?eb(t,e):function(i,s){const o=JA(i,s),a=e1(o)+e1(i.Te);return Ry(o)&&Ry(i.Te)?YA(a):WA(i.serializer,a)}(t,e)}function y4(t,e,n){return t instanceof ho?ZA(t,e):t instanceof fo?eb(t,e):n}function JA(t,e){return t instanceof Va?function(r){return Ry(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Oa extends ip{}class ho extends ip{constructor(e){super(),this.elements=e}}function ZA(t,e){const n=tb(e);for(const r of t.elements)n.some(i=>Vr(i,r))||n.push(r);return{arrayValue:{values:n}}}class fo extends ip{constructor(e){super(),this.elements=e}}function eb(t,e){let n=tb(e);for(const r of t.elements)n=n.filter(i=>!Vr(i,r));return{arrayValue:{values:n}}}class Va extends ip{constructor(e,n){super(),this.serializer=e,this.Te=n}}function e1(t){return ot(t.integerValue||t.doubleValue)}function tb(t){return ic(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.field=e,this.transform=n}}function v4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ho&&i instanceof ho||r instanceof fo&&i instanceof fo?ka(r.elements,i.elements,Vr):r instanceof Va&&i instanceof Va?Vr(r.Te,i.Te):r instanceof Oa&&i instanceof Oa}(t.transform,e.transform)}class _4{constructor(e,n){this.version=e,this.transformResults=n}}class We{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new We}static exists(e){return new We(void 0,e)}static updateTime(e){return new We(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sp{}function nb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new al(t.key,We.none()):new ol(t.key,t.data,We.none());{const n=t.data,r=jt.empty();let i=new je(at.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new gi(t.key,r,new vn(i.toArray()),We.none())}}function w4(t,e,n){t instanceof ol?function(i,s,o){const a=i.value.clone(),l=n1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gi?function(i,s,o){if(!Zh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=n1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(rb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,r){return t instanceof ol?function(s,o,a,l){if(!Zh(s.precondition,o))return a;const u=s.value.clone(),c=r1(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof gi?function(s,o,a,l){if(!Zh(s.precondition,o))return a;const u=r1(s.fieldTransforms,l,o),c=o.data;return c.setAll(rb(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Zh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function E4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=JA(r.transform,i||null);s!=null&&(n===null&&(n=jt.empty()),n.set(r.field,s))}return n||null}function t1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ka(r,i,(s,o)=>v4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ol extends sp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gi extends sp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function n1(t,e,n){const r=new Map;X(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,y4(o,a,n[i]))}return r}function r1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,g4(s,o,e))}return r}class al extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q_ extends sp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&w4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QA();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=nb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,(n,r)=>t1(n,r))&&ka(this.baseMutations,e.baseMutations,(n,r)=>t1(n,r))}}class Y_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){X(e.mutations.length===r.length);let i=function(){return f4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Y_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Ie;function ib(t){switch(t){default:return H();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function sb(t){if(t===void 0)return mt("GRPC error has no .code"),b.UNKNOWN;switch(t){case yt.OK:return b.OK;case yt.CANCELLED:return b.CANCELLED;case yt.UNKNOWN:return b.UNKNOWN;case yt.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case yt.INTERNAL:return b.INTERNAL;case yt.UNAVAILABLE:return b.UNAVAILABLE;case yt.UNAUTHENTICATED:return b.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case yt.NOT_FOUND:return b.NOT_FOUND;case yt.ALREADY_EXISTS:return b.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return b.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case yt.ABORTED:return b.ABORTED;case yt.OUT_OF_RANGE:return b.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return b.UNIMPLEMENTED;case yt.DATA_LOSS:return b.DATA_LOSS;default:return H()}}(Ie=yt||(yt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new ga([4294967295,4294967295],0);function i1(t){const e=ob().encode(t),n=new yj;return n.update(e),new Uint8Array(n.digest())}function s1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ga([n,r],0),new ga([i,s],0)]}class J_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xl(`Invalid padding: ${n}`);if(r<0)throw new Xl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=ga.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(ga.fromNumber(r)));return i.compare(I4)===1&&(i=new ga([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=i1(e),[r,i]=s1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new J_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ae===0)return;const n=i1(e),[r,i]=s1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $c(Y.min(),i,new Be(he),_n(),fe())}}class jc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jc(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class ab{constructor(e,n){this.targetId=e,this.ye=n}}class lb{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class o1{constructor(){this.we=0,this.Se=l1(),this.be=It.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return this.we!==0}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=fe(),n=fe(),r=fe();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new jc(this.be,this.De,e,n,r)}Oe(){this.Ce=!1,this.Se=l1()}Ne(e,n){this.Ce=!0,this.Se=this.Se.insert(e,n)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class S4{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=_n(),this.Ue=a1(),this.We=new Be(he)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(Hd(s))if(r===0){const o=new B(s.path);this.je(n,o,qe.newNoDocument(o,Y.min()))}else X(r===1);else{const o=this.tt(n);if(o!==r){const a=this.nt(e),l=a?this.rt(a,e,o):1;if(l!==0){this.Ze(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,u)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=rs(r).toUint8Array()}catch(l){if(l instanceof DA)return pr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new J_(o,i,s)}catch(l){return pr(l instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ae===0?null:a}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const a=this.et(o);if(a){if(s.current&&Hd(a.target)){const l=new B(a.target.path);this.$e.get(l)!==null||this.ut(o,l)||this.je(o,l,qe.newNoDocument(l,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=fe();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.et(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new $c(e,n,this.We,this.$e,r);return this.$e=_n(),this.Ue=a1(),this.We=new Be(he),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new o1,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new je(he),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new o1),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function a1(){return new Be(B.comparator)}function l1(){return new Be(B.comparator)}const R4=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),x4=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),C4=(()=>({and:"AND",or:"OR"}))();class A4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Py(t,e){return t.useProto3Json||Oc(e)?e:{value:e}}function Ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ub(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b4(t,e){return Ma(t,e.toTimestamp())}function gt(t){return X(!!t),Y.fromTimestamp(function(n){const r=ns(n);return new Ye(r.seconds,r.nanos)}(t))}function Z_(t,e){return function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function cb(t){const e=Re.fromString(t);return X(_b(e)),e}function sc(t,e){return Z_(t.databaseId,e.path)}function kr(t,e){const n=cb(e);if(n.get(1)!==t.databaseId.projectId)throw new N(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new N(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(db(n))}function ky(t,e){return Z_(t.databaseId,e)}function hb(t){const e=cb(t);return e.length===4?Re.emptyPath():db(e)}function oc(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function db(t){return X(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function u1(t,e,n){return{name:sc(t,e),fields:n.value.mapValue.fields}}function fb(t,e,n){const r=kr(t,e.name),i=gt(e.updateTime),s=e.createTime?gt(e.createTime):Y.min(),o=new jt({mapValue:{fields:e.fields}}),a=qe.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function P4(t,e){return"found"in e?function(r,i){X(!!i.found),i.found.name,i.found.updateTime;const s=kr(r,i.found.name),o=gt(i.found.updateTime),a=i.found.createTime?gt(i.found.createTime):Y.min(),l=new jt({mapValue:{fields:i.found.fields}});return qe.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){X(!!i.missing),X(!!i.readTime);const s=kr(r,i.missing),o=gt(i.readTime);return qe.newNoDocument(s,o)}(t,e):H()}function k4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(X(c===void 0||typeof c=="string"),It.fromBase64String(c||"")):(X(c===void 0||c instanceof Uint8Array),It.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?b.UNKNOWN:sb(u.code);return new N(c,u.message||"")}(o);n=new lb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kr(t,r.document.name),s=gt(r.document.updateTime),o=r.document.createTime?gt(r.document.createTime):Y.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=qe.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new ed(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kr(t,r.document),s=r.readTime?gt(r.readTime):Y.min(),o=qe.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ed([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kr(t,r.document),s=r.removedTargetIds||[];n=new ed([],s,i,null)}else{if(!("filter"in e))return H();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new T4(i,s),a=r.targetId;n=new ab(a,o)}}return n}function ac(t,e){let n;if(e instanceof ol)n={update:u1(t,e.key,e.value)};else if(e instanceof al)n={delete:sc(t,e.key)};else if(e instanceof gi)n={update:u1(t,e.key,e.data),updateMask:F4(e.fieldMask)};else{if(!(e instanceof Q_))return H();n={verify:sc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Oa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Va)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:b4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(t,e.precondition)),n}function Dy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?We.updateTime(gt(s.updateTime)):s.exists!==void 0?We.exists(s.exists):We.none()}(e.currentDocument):We.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)X(a.setToServerValue==="REQUEST_TIME"),l=new Oa;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new ho(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new fo(c)}else"increment"in a?l=new Va(o,a.increment):H();const u=at.fromServerFormat(a.fieldPath);return new Lc(u,l)}(t,i)):[];if(e.update){e.update.name;const i=kr(t,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new vn(u.map(c=>at.fromServerFormat(c)))}(e.updateMask);return new gi(i,s,o,n,r)}return new ol(i,s,n,r)}if(e.delete){const i=kr(t,e.delete);return new al(i,n)}if(e.verify){const i=kr(t,e.verify);return new Q_(i,n)}return H()}function D4(t,e){return t&&t.length>0?(X(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?gt(i.updateTime):gt(s);return o.isEqual(Y.min())&&(o=gt(s)),new _4(o,i.transformResults||[])}(n,e))):[]}function pb(t,e){return{documents:[ky(t,e.path)]}}function mb(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=ky(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ky(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return vb(ke.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:qo(h.field),direction:O4(h.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Py(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function gb(t){let e=hb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){X(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const d=yb(h);return d instanceof ke&&q_(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new ya(Ko(p.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Oc(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new os(f,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new os(f,d)}(n.endAt)),UA(e,i,o,s,a,"F",l,u)}function N4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ko(n.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ko(n.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ko(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ko(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(Ko(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ke.create(n.compositeFilter.filters.map(r=>yb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(n.compositeFilter.op))}(t):H()}function O4(t){return R4[t]}function V4(t){return x4[t]}function M4(t){return C4[t]}function qo(t){return{fieldPath:t.canonicalString()}}function Ko(t){return at.fromServerFormat(t.fieldPath)}function vb(t){return t instanceof ge?function(n){if(n.op==="=="){if(GT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(KT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(KT(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:V4(n.op),value:n.value}}}(t):t instanceof ke?function(n){const r=n.getFilters().map(i=>vb(i));return r.length===1?r[0]:{compositeFilter:{op:M4(n.op),filters:r}}}(t):H()}function F4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _b(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r,i,s=Y.min(),o=Y.min(),a=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.ht=e}}function L4(t,e){let n;if(e.document)n=fb(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=B.fromSegments(e.noDocument.path),i=mo(e.noDocument.readTime);n=qe.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{const r=B.fromSegments(e.unknownDocument.path),i=mo(e.unknownDocument.version);n=qe.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ye(i[0],i[1]);return Y.fromTimestamp(s)}(e.readTime)),n}function c1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Yd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:sc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ma(s,o.version.toTimestamp()),createTime:Ma(s,o.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:po(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:n.path.toArray(),version:po(e.version)}}return r}function Yd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function po(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mo(t){const e=new Ye(t.seconds,t.nanoseconds);return Y.fromTimestamp(e)}function Os(t,e){const n=(e.baseMutations||[]).map(s=>Dy(t.ht,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Dy(t.ht,s)),i=Ye.fromMillis(e.localWriteTimeMs);return new W_(e.batchId,i,n,r)}function Jl(t){const e=mo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?mo(t.lastLimboFreeSnapshotVersion):Y.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return X(s.documents.length===1),un(sl(hb(s.documents[0])))}(t.query):function(s){return un(gb(s))}(t.query),new Qr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,It.fromBase64String(t.resumeToken))}function Eb(t,e){const n=po(e.snapshotVersion),r=po(e.lastLimboFreeSnapshotVersion);let i;i=Hd(e.target)?pb(t.ht,e.target):mb(t.ht,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:co(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ew(t){const e=gb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wd(e,e.limit,"L"):e}function Dm(t,e){return new X_(e.largestBatchId,Dy(t.ht,e.overlayMutation))}function h1(t,e){const n=e.path.lastSegment();return[t,ln(e.path.popLast()),n]}function d1(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:po(r.readTime),documentKey:ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{getBundleMetadata(e,n){return f1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:mo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return f1(e).put(function(i){return{bundleId:i.id,createTime:po(gt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return p1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:ew(s.bundledQuery),readTime:mo(s.readTime)}}(r)})}saveNamedQuery(e,n){return p1(e).put(function(i){return{name:i.name,readTime:po(gt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function f1(t){return Nt(t,"bundles")}function p1(t){return Nt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){this.serializer=e,this.userId=n}static Pt(e,n){const r=n.uid||"";return new op(e,r)}getOverlay(e,n){return Dl(e).get(h1(this.userId,n)).next(r=>r?Dm(this.serializer,r):null)}getOverlays(e,n){const r=Rr();return A.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new X_(n,o);i.push(this.It(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ln(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Dl(e).J("collectionPathOverlayIndex",a))}),A.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Rr(),s=ln(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Dl(e).G("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Dm(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Rr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Dl(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=Dm(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}It(e,n){return Dl(e).put(function(i,s,o){const[a,l,u]=h1(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ac(i.ht,o.mutation)}}(this.serializer,this.userId,n))}}function Dl(t){return Nt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){}dt(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.At(n,5);else if("booleanValue"in e)this.At(n,10),n.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(n,15),n.Rt(ot(e.integerValue));else if("doubleValue"in e){const r=ot(e.doubleValue);isNaN(r)?this.At(n,13):(this.At(n,15),tc(r)?n.Rt(0):n.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(n,20),typeof r=="string"?n.Vt(r):(n.Vt(`${r.seconds||""}`),n.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,n),this.gt(n);else if("bytesValue"in e)this.At(n,30),n.yt(rs(e.bytesValue)),this.gt(n);else if("referenceValue"in e)this.wt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(n,45),n.Rt(r.latitude||0),n.Rt(r.longitude||0)}else"mapValue"in e?NA(e)?this.At(n,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,n),this.gt(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.gt(n)):H()}ft(e,n){this.At(n,25),this.Dt(e,n)}Dt(e,n){n.Vt(e)}St(e,n){const r=e.fields||{};this.At(n,55);for(const i of Object.keys(r))this.ft(i,n),this.Tt(r[i],n)}bt(e,n){const r=e.values||[];this.At(n,50);for(const i of r)this.Tt(i,n)}wt(e,n){this.At(n,37),B.fromName(e).path.forEach(r=>{this.At(n,60),this.Dt(r,n)})}At(e,n){e.Rt(n)}gt(e){e.Rt(2)}}Vs.Ct=new Vs;function j4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function m1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=j4(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class B4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=m1(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=m1(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class U4{constructor(e){this.jt=e}yt(e){this.jt.vt(e)}Vt(e){this.jt.Bt(e)}Rt(e){this.jt.kt(e)}Et(){this.jt.$t()}}class z4{constructor(e){this.jt=e}yt(e){this.jt.xt(e)}Vt(e){this.jt.Lt(e)}Rt(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Nl{constructor(){this.jt=new B4,this.Ht=new U4(this.jt),this.Jt=new z4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ms(this.indexId,this.documentKey,this.arrayValue,r)}}function Ii(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=g1(t.arrayValue,e.arrayValue),n!==0?n:(n=g1(t.directionalValue,e.directionalValue),n!==0?n:B.comparator(t.documentKey,e.documentKey)))}function g1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const n of e.filters){const r=n;r.isInequality()?this.tn=r:this.en.push(r)}}nn(e){X(e.collectionGroup===this.collectionId);const n=Ty(e);if(n!==void 0&&!this.rn(n))return!1;const r=Ds(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.rn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.tn!==void 0){if(!i.has(this.tn.field.canonicalString())){const a=r[s];if(!this.sn(this.tn,a)||!this.on(this.Xt[o++],a))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Xt.length||!this.on(this.Xt[o++],a))return!1}return!0}_n(){let e=new je(at.comparator);const n=[];for(const r of this.en)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Wh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Wh(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Wh(r.field,r.dir==="asc"?0:1)));return new Gd(Gd.UNKNOWN_ID,this.collectionId,n,ec.empty())}rn(e){for(const n of this.en)if(this.sn(n,e))return!0;return!1}sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}on(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){var e,n;if(X(t instanceof ge||t instanceof ke),t instanceof ge){if(t instanceof BA){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ge.create(t.field,"==",s)))||[];return ke.create(i,"or")}return t}const r=t.filters.map(i=>Tb(i));return ke.create(r,t.op)}function q4(t){if(t.getFilters().length===0)return[];const e=Vy(Tb(t));return X(Ib(e)),Ny(e)||Oy(e)?[e]:e.getFilters()}function Ny(t){return t instanceof ge}function Oy(t){return t instanceof ke&&q_(t)}function Ib(t){return Ny(t)||Oy(t)||function(n){if(n instanceof ke&&xy(n)){for(const r of n.getFilters())if(!Ny(r)&&!Oy(r))return!1;return!0}return!1}(t)}function Vy(t){if(X(t instanceof ge||t instanceof ke),t instanceof ge)return t;if(t.filters.length===1)return Vy(t.filters[0]);const e=t.filters.map(r=>Vy(r));let n=ke.create(e,t.op);return n=Xd(n),Ib(n)?n:(X(n instanceof ke),X(Na(n)),X(n.filters.length>1),n.filters.reduce((r,i)=>tw(r,i)))}function tw(t,e){let n;return X(t instanceof ge||t instanceof ke),X(e instanceof ge||e instanceof ke),n=t instanceof ge?e instanceof ge?function(i,s){return ke.create([i,s],"and")}(t,e):v1(t,e):e instanceof ge?v1(e,t):function(i,s){if(X(i.filters.length>0&&s.filters.length>0),Na(i)&&Na(s))return LA(i,s.getFilters());const o=xy(i)?i:s,a=xy(i)?s:i,l=o.filters.map(u=>tw(u,a));return ke.create(l,"or")}(t,e),Xd(n)}function v1(t,e){if(Na(e))return LA(e,t.getFilters());{const n=e.filters.map(r=>tw(t,r));return ke.create(n,"or")}}function Xd(t){if(X(t instanceof ge||t instanceof ke),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return Xd(e[0]);if(MA(t))return t;const n=e.map(i=>Xd(i)),r=[];return n.forEach(i=>{i instanceof ge?r.push(i):i instanceof ke&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ke.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.an=new nw}addToCollectionParentIndex(e,n){return this.an.add(n),A.resolve()}getCollectionParents(e,n){return A.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return A.resolve()}deleteFieldIndex(e,n){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,n){return A.resolve()}getDocumentsMatchingTarget(e,n){return A.resolve(null)}getIndexType(e,n){return A.resolve(0)}getFieldIndexes(e,n){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,n){return A.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,n){return A.resolve(Dn.min())}updateCollectionGroup(e,n,r){return A.resolve()}updateIndexEntries(e,n){return A.resolve()}}class nw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new je(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Uint8Array(0);class G4{constructor(e,n){this.user=e,this.databaseId=n,this.un=new nw,this.cn=new _s(r=>co(r),(r,i)=>Vc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.un.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.un.add(n)});const s={collectionId:r,parent:ln(i)};return _1(e).put(s)}return A.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[EA(n),""],!1,!0);return _1(e).G(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Sr(o.parent))}return r})}addFieldIndex(e,n){const r=Ol(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Vo(e);return s.next(a=>{o.put(d1(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ol(e),i=Vo(e),s=Oo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ol(e),r=Oo(e),i=Vo(e);return n.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,n){return A.forEach(this.ln(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new y1(r);return this.addFieldIndex(e,s._n())}}))}getDocumentsMatchingTarget(e,n){const r=Oo(e);let i=!0;const s=new Map;return A.forEach(this.ln(n),o=>this.hn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=fe();const a=[];return A.forEach(s,(l,u)=>{V("IndexedDbIndexManager",`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(g=>`${g.fieldPath}:${g.kind}`).join(",")}`}(l)} to execute ${co(n)}`);const c=function(w,g){const R=Ty(g);if(R===void 0)return null;for(const S of Qd(w,R.fieldPath))switch(S.op){case"array-contains-any":return S.value.arrayValue.values||[];case"array-contains":return[S.value]}return null}(u,l),h=function(w,g){const R=new Map;for(const S of Ds(g))for(const I of Qd(w,S.fieldPath))switch(I.op){case"==":case"in":R.set(S.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return R.set(S.fieldPath.canonicalString(),I.value),Array.from(R.values())}return null}(u,l),d=function(w,g){const R=[];let S=!0;for(const I of Ds(g)){const x=I.kind===0?XT(w,I.fieldPath,w.startAt):JT(w,I.fieldPath,w.startAt);R.push(x.value),S&&(S=x.inclusive)}return new os(R,S)}(u,l),f=function(w,g){const R=[];let S=!0;for(const I of Ds(g)){const x=I.kind===0?JT(w,I.fieldPath,w.endAt):XT(w,I.fieldPath,w.endAt);R.push(x.value),S&&(S=x.inclusive)}return new os(R,S)}(u,l),p=this.Pn(l,u,d),m=this.Pn(l,u,f),E=this.In(l,u,h),v=this.dn(l.indexId,c,p,d.inclusive,m,f.inclusive,E);return A.forEach(v,_=>r.H(_,n.limit).next(w=>{w.forEach(g=>{const R=B.fromSegments(g.documentKey);o.has(R)||(o=o.add(R),a.push(R))})}))}).next(()=>a)}return A.resolve(null)})}ln(e){let n=this.cn.get(e);return n||(e.filters.length===0?n=[e]:n=q4(ke.create(e.filters,"and")).map(r=>Ay(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,n),n)}dn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const d=n?this.Tn(n[h/u]):Sh,f=this.En(e,d,r[h%u],i),p=this.An(e,d,s[h%u],o),m=a.map(E=>this.En(e,d,E,!0));c.push(...this.createRange(f,p,m))}return c}En(e,n,r,i){const s=new Ms(e,B.empty(),n,r);return i?s:s.Zt()}An(e,n,r,i){const s=new Ms(e,B.empty(),n,r);return i?s.Zt():s}hn(e,n){const r=new y1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.nn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.ln(n);return A.forEach(i,s=>this.hn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new je(at.comparator),c=!1;for(const h of l.filters)for(const d of h.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?c=!0:u=u.add(d.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Rn(e,n){const r=new Nl;for(const i of Ds(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Vs.Ct.dt(s,o)}return r.zt()}Tn(e){const n=new Nl;return Vs.Ct.dt(e,n.Yt(0)),n.zt()}Vn(e,n){const r=new Nl;return Vs.Ct.dt(uo(this.databaseId,n),r.Yt(function(s){const o=Ds(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}In(e,n,r){if(r===null)return[];let i=[];i.push(new Nl);let s=0;for(const o of Ds(e)){const a=r[s++];for(const l of i)if(this.mn(n,o.fieldPath)&&ic(a))i=this.fn(i,o,a);else{const u=l.Yt(o.kind);Vs.Ct.dt(a,u)}}return this.gn(i)}Pn(e,n,r){return this.In(e,n,r.position)}gn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}fn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Nl;l.seed(a.zt()),Vs.Ct.dt(o,l.Yt(n.kind)),s.push(l)}return s}mn(e,n){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ol(e),i=Vo(e);return(n?r.G("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.G()).next(s=>{const o=[];return A.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,h){const d=h?new ec(h.sequenceNumber,new Dn(mo(h.readTime),new B(Sr(h.documentKey)),h.largestBatchId)):ec.empty(),f=c.fields.map(([p,m])=>new Wh(at.fromServerFormat(p),m));return new Gd(c.indexId,c.collectionGroup,f,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ol(e),s=Vo(e);return this.pn(e).next(o=>i.G("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>A.forEach(a,l=>s.put(d1(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return A.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?A.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,l=>this.yn(e,i,l).next(u=>{const c=this.wn(s,l);return u.isEqual(c)?A.resolve():this.Sn(e,s,l,u,c)}))))})}bn(e,n,r,i){return Oo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,n.key),documentKey:n.key.path.toArray()})}Dn(e,n,r,i){return Oo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,n.key),n.key.path.toArray()])}yn(e,n,r){const i=Oo(e);let s=new je(Ii);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,n)])},(o,a)=>{s=s.add(new Ms(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(e,n){let r=new je(Ii);const i=this.Rn(n,e);if(i==null)return r;const s=Ty(n);if(s!=null){const o=e.data.field(s.fieldPath);if(ic(o))for(const a of o.arrayValue.values||[])r=r.add(new Ms(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Ms(n.indexId,e.key,Sh,i));return r}Sn(e,n,r,i,s){V("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,h,d){const f=l.getIterator(),p=u.getIterator();let m=No(f),E=No(p);for(;m||E;){let v=!1,_=!1;if(m&&E){const w=c(m,E);w<0?_=!0:w>0&&(v=!0)}else m!=null?_=!0:v=!0;v?(h(E),E=No(p)):_?(d(m),m=No(f)):(m=No(f),E=No(p))}}(i,s,Ii,a=>{o.push(this.bn(e,n,r,a))},a=>{o.push(this.Dn(e,n,r,a))}),A.waitFor(o)}pn(e){let n=1;return Vo(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ii(o,a)).filter((o,a,l)=>!a||Ii(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ii(o,e),l=Ii(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Sh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Sh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return Ii(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(w1)}getMinOffset(e,n){return A.mapArray(this.ln(n),r=>this.hn(e,r).next(i=>i||H())).next(w1)}}function _1(t){return Nt(t,"collectionParents")}function Oo(t){return Nt(t,"indexEntries")}function Ol(t){return Nt(t,"indexConfiguration")}function Vo(t){return Nt(t,"indexState")}function w1(t){X(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;B_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Dn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class pn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},(c,h,d)=>(a++,d.delete()));s.push(l.next(()=>{X(a===1)}));const u=[];for(const c of n.mutations){const h=CA(e,c.key.path,n.batchId);s.push(i.delete(h)),u.push(c.key)}return A.waitFor(s).next(()=>u)}function Jd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw H();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(41943040,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);class ap{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static Pt(e,n,r,i){X(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new ap(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Si(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Go(e),o=Si(e);return o.add({}).next(a=>{X(typeof a=="number");const l=new W_(a,n,r,i),u=function(f,p,m){const E=m.baseMutations.map(_=>ac(f.ht,_)),v=m.mutations.map(_=>ac(f.ht,_));return{userId:p,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:E,mutations:v}}(this.serializer,this.userId,l),c=[];let h=new je((d,f)=>he(d.canonicalString(),f.canonicalString()));for(const d of i){const f=CA(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,Oj))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.vn[a]=l.keys()}),A.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Si(e).get(n).next(r=>r?(X(r.userId===this.userId),Os(this.serializer,r)):null)}Fn(e,n){return this.vn[n]?A.resolve(this.vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Si(e).Z({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(X(a.batchId>=r),s=Os(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Si(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Si(e).G("userMutationsIndex",n).next(r=>r.map(i=>Os(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Yh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Go(e).Z({range:i},(o,a,l)=>{const[u,c,h]=o,d=Sr(c);if(u===this.userId&&n.path.isEqual(d))return Si(e).get(h).next(f=>{if(!f)throw H();X(f.userId===this.userId),s.push(Os(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(he);const i=[];return n.forEach(s=>{const o=Yh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Go(e).Z({range:a},(u,c,h)=>{const[d,f,p]=u,m=Sr(f);d===this.userId&&s.path.isEqual(m)?r=r.add(p):h.done()});i.push(l)}),A.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Yh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new je(he);return Go(e).Z({range:o},(l,u,c)=>{const[h,d,f]=l,p=Sr(d);h===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):c.done()}).next(()=>this.Mn(e,a))}Mn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Si(e).get(s).next(o=>{if(o===null)throw H();X(o.userId===this.userId),r.push(Os(this.serializer,o))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Sb(e.ue,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.xn(n.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return A.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Go(e).Z({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Sr(s[1]);i.push(l)}else a.done()}).next(()=>{X(i.length===0)})})}containsKey(e,n){return Rb(e,this.userId,n)}On(e){return xb(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Rb(t,e,n){const r=Yh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Go(t).Z({range:s,Y:!0},(a,l,u)=>{const[c,h,d]=a;c===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function Si(t){return Nt(t,"mutations")}function Go(t){return Nt(t,"documentMutations")}function xb(t){return Nt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new go(0)}static Ln(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.kn(e).next(n=>{const r=new go(n.highestTargetId);return n.highestTargetId=r.next(),this.qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(n=>Y.fromTimestamp(new Ye(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.qn(e,i)))}addTargetData(e,n){return this.Qn(e,n).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(n,r),this.qn(e,r))))}updateTargetData(e,n){return this.Qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Mo(e).delete(n.targetId)).next(()=>this.kn(e)).next(r=>(X(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Mo(e).Z((o,a)=>{const l=Jl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>A.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Mo(e).Z((r,i)=>{const s=Jl(i);n(s)})}kn(e){return T1(e).get("targetGlobalKey").next(n=>(X(n!==null),n))}qn(e,n){return T1(e).put("targetGlobalKey",n)}Qn(e,n){return Mo(e).put(Eb(this.serializer,n))}Kn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=co(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Mo(e).Z({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=Jl(a);Vc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Oi(e);return n.forEach(o=>{const a=ln(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),A.waitFor(i)}removeMatchingKeys(e,n,r){const i=Oi(e);return A.forEach(n,s=>{const o=ln(s.path);return A.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Oi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Oi(e);let s=fe();return i.Z({range:r,Y:!0},(o,a,l)=>{const u=Sr(o[1]),c=new B(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=ln(n.path),i=IDBKeyRange.bound([r],[EA(r)],!1,!0);let s=0;return Oi(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}lt(e,n){return Mo(e).get(n).next(r=>r?Jl(r):null)}}function Mo(t){return Nt(t,"targets")}function T1(t){return Nt(t,"targetGlobal")}function Oi(t){return Nt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class Q4{constructor(e){this.$n=e,this.buffer=new je(I1),this.Un=0}Wn(){return++this.Un}Gn(e){const n=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();I1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class W4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.zn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return this.zn!==null}jn(e){V("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.zn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vs(n)?V("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ys(n)}await this.jn(3e5)})}}class Y4{constructor(e,n){this.Hn=e,this.params=n}calculateTargetCount(e,n){return this.Hn.Jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return A.resolve(yn.ae);const r=new Q4(n);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Hn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Hn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(E1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E1):this.Zn(e,n))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Uo()<=Ee.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function X4(t,e){return new Y4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.db=e,this.garbageCollector=X4(this,n)}Jn(e){const n=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Xn(e){let n=0;return this.Yn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Yn(e,n){return this.er(e,(r,i)=>n(i))}addReference(e,n,r){return Rh(e,r)}removeReference(e,n,r){return Rh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Rh(e,n)}tr(e,n){return function(i,s){let o=!1;return xb(i).X(a=>Rb(i,a,s).next(l=>(l&&(o=!0),A.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.er(e,(o,a)=>{if(a<=n){const l=this.tr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Y.min()),Oi(e).delete(function(h){return[0,ln(h.path)]}(o))))});i.push(l)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Rh(e,n)}er(e,n){const r=Oi(e);let i,s=yn.ae;return r.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==yn.ae&&n(new B(Sr(i)),s),s=u,i=l):s=yn.ae}).next(()=>{s!==yn.ae&&n(new B(Sr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rh(t,e){return Oi(t).put(function(r,i){return{targetId:0,path:ln(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.changes=new _s(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?A.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return As(e).put(r)}removeEntry(e,n,r){return As(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Yd(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.nr(e,r)))}getEntry(e,n){let r=qe.newInvalidDocument(n);return As(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vl(n))},(i,s)=>{r=this.rr(n,s)}).next(()=>r)}ir(e,n){let r={size:0,document:qe.newInvalidDocument(n)};return As(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vl(n))},(i,s)=>{r={document:this.rr(n,s),size:Jd(s)}}).next(()=>r)}getEntries(e,n){let r=_n();return this.sr(e,n,(i,s)=>{const o=this.rr(i,s);r=r.insert(i,o)}).next(()=>r)}_r(e,n){let r=_n(),i=new Be(B.comparator);return this.sr(e,n,(s,o)=>{const a=this.rr(s,o);r=r.insert(s,a),i=i.insert(s,Jd(o))}).next(()=>({documents:r,ar:i}))}sr(e,n,r){if(n.isEmpty())return A.resolve();let i=new je(x1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Vl(i.first()),Vl(i.last())),o=i.getIterator();let a=o.getNext();return As(e).Z({index:"documentKeyIndex",range:s},(l,u,c)=>{const h=B.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&x1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.W(Vl(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Yd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return As(e).G(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=_n();for(const h of u){const d=this.rr(B.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d.isFoundDocument()&&(Fc(n,d)||i.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=_n();const o=R1(n,r),a=R1(n,Dn.max());return As(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.rr(B.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new eB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return S1(e).get("remoteDocumentGlobalKey").next(n=>(X(!!n),n))}nr(e,n){return S1(e).put("remoteDocumentGlobalKey",n)}rr(e,n){if(n){const r=L4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Y.min())))return r}return qe.newInvalidDocument(e)}}function Ab(t){return new Z4(t)}class eB extends Cb{constructor(e,n){super(),this.ur=e,this.trackRemovals=n,this.cr=new _s(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new je((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.cr.get(s);if(n.push(this.ur.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=c1(this.ur.serializer,o);i=i.add(s.path.popLast());const u=Jd(l);r+=u-a.size,n.push(this.ur.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=c1(this.ur.serializer,o.convertToNoDocument(Y.min()));n.push(this.ur.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.ur.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ur.updateMetadata(e,r)),A.waitFor(n)}getFromCache(e,n){return this.ur.ir(e,n).next(r=>(this.cr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ur._r(e,n).next(({documents:r,ar:i})=>(i.forEach((s,o)=>{this.cr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function S1(t){return Nt(t,"remoteDocumentGlobal")}function As(t){return Nt(t,"remoteDocumentsV14")}function Vl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function R1(t,e){const n=e.documentKey.path.toArray();return[t,Yd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function x1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gu(r.mutation,i,vn.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=Rr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Rr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=_n();const o=mu(),a=function(){return mu()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof gi)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),gu(c.mutation,u,c.mutation.getFieldMask(),Ye.now())):o.set(u.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new tB(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=mu();let i=new Be((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||vn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||fe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=QA();c.forEach(d=>{if(!s.has(d)){const f=nb(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return A.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return B.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):G_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):A.resolve(Rr());let a=-1,l=s;return o.next(u=>A.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?A.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,fe())).next(c=>({batchId:a,changes:HA(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Yl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Yl();return this.indexManager.getCollectionParents(e,s).next(a=>A.forEach(a,l=>{const u=function(h,d){return new mi(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,qe.newInvalidDocument(c)))});let a=Yl();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&gu(c.mutation,u,vn.empty(),Ye.now()),Fc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return A.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gt(i.createTime)}}(n)),A.resolve()}getNamedQuery(e,n){return A.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(i){return{name:i.name,query:ew(i.bundledQuery),readTime:gt(i.readTime)}}(n)),A.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(){this.overlays=new Be(B.comparator),this.Pr=new Map}getOverlay(e,n){return A.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rr();return A.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),A.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Pr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),A.resolve()}getOverlaysForCollection(e,n,r){const i=Rr(),s=n.length+1,o=new B(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return A.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Be((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Rr(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Rr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return A.resolve(a)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new X_(n,r));let s=this.Pr.get(n);s===void 0&&(s=fe(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.Ir=new je(xt.dr),this.Tr=new je(xt.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new xt(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new B(new Re([])),r=new xt(n,e),i=new xt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new B(new Re([])),r=new xt(n,e),i=new xt(n,e+1);let s=fe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return B.comparator(e.key,n.key)||he(e.yr,n.yr)}static Er(e,n){return he(e.yr,n.yr)||B.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new je(xt.dr)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new W_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(o)}lookupMutationBatch(e,n){return A.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Dr(r),s=i<0?0:i;return A.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),i=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const a=this.br(o.yr);s.push(a)}),A.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(he);return n.forEach(i=>{const s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;B.isDocumentKey(s)||(s=s.child(""));const o=new xt(new B(s),0);let a=new je(he);return this.Sr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.yr)),!0)},o),A.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){X(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return A.forEach(n.mutations,i=>{const s=new xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new xt(n,0),i=this.Sr.firstAfterOrEqual(r);return A.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.Fr=e,this.docs=function(){return new Be(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return A.resolve(r?r.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let r=_n();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qe.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_n();const o=n.path,a=new B(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||B_(IA(c),r)<=0||(i.has(c.key)||Fc(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return A.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}Mr(e,n){return A.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oB(this)}getSize(e){return A.resolve(this.size)}}class oB extends Cb{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),A.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.persistence=e,this.Or=new _s(n=>co(n),Vc),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Nr=0,this.Br=new rw,this.targetCount=0,this.Lr=go.Bn()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),A.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,A.resolve()}updateTargetData(e,n){return this.Qn(n),A.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(s).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return A.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),A.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),A.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),A.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return A.resolve(r)}containsKey(e,n){return A.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n){this.kr={},this.overlays={},this.qr=new yn(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new aB(this),this.indexManager=new K4,this.remoteDocumentCache=function(i){return new sB(i)}(r=>this.referenceDelegate.$r(r)),this.serializer=new wb(n),this.Ur=new nB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new iB(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);const i=new lB(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,n){return A.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class lB extends RA{constructor(e){super(),this.currentSequenceNumber=e}}class lp{constructor(e){this.persistence=e,this.jr=new rw,this.Hr=null}static Jr(e){return new lp(e)}get Yr(){if(this.Hr)return this.Hr;throw H()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),A.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),A.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Yr,r=>{const i=B.fromPath(r);return this.Zr(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return A.or([()=>A.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.serializer=e}B(e,n,r,i){const s=new tp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BT,{unique:!0}),l.createObjectStore("documentMutations")}(e),C1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=A.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),C1(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").G().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BT,{unique:!0});const h=u.store("mutations"),d=c.map(f=>h.put(f));return A.waitFor(d)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ei(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ti(s)))),r<7&&i>=7&&(o=o.next(()=>this.ni(s))),r<8&&i>=8&&(o=o.next(()=>this.ri(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ii(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:Gj});u.createIndex("collectionPathOverlayIndex",Hj,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Qj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:Vj});u.createIndex("documentKeyIndex",Mj),u.createIndex("collectionGroupIndex",Fj)}(e)).next(()=>this.si(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.oi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Uj}).createIndex("sequenceNumberIndex",zj,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:qj}).createIndex("documentKeyIndex",Kj,{unique:!1})}(e))),o}ti(e){let n=0;return e.store("remoteDocuments").Z((r,i)=>{n+=Jd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ei(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next(i=>A.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",o).next(a=>A.forEach(a,l=>{X(l.userId===s.userId);const u=Os(this.serializer,l);return Sb(e,s.userId,u).next(()=>{})}))}))}ni(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,a)=>{const l=new Re(o),u=function(h){return[0,ln(h)]}(l);s.push(n.get(u).next(c=>c?A.resolve():(h=>n.put({targetId:0,path:ln(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>A.waitFor(s))})}ri(e,n){e.createObjectStore("collectionParents",{keyPath:Bj});const r=n.store("collectionParents"),i=new nw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ln(l)})}};return n.store("remoteDocuments").Z({Y:!0},(o,a)=>{const l=new Re(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Z({Y:!0},([o,a,l],u)=>{const c=Sr(a);return s(c.popLast())}))}ii(e){const n=e.store("targets");return n.Z((r,i)=>{const s=Jl(i),o=Eb(this.serializer,s);return n.put(o)})}si(e,n){const r=n.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new B(Re.fromString(h.document.name).popFirst(5)):h.noDocument?B.fromSegments(h.noDocument.path):h.unknownDocument?B.fromSegments(h.unknownDocument.path):H()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>A.waitFor(i))}oi(e,n){const r=n.store("mutations"),i=Ab(this.serializer),s=new Pb(lp.Jr,this.serializer.ht);return r.G().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:fe();Os(this.serializer,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),A.forEach(a,(l,u)=>{const c=new At(u),h=op.Pt(this.serializer,c),d=s.getIndexManager(c),f=ap.Pt(c,this.serializer,d,s.referenceDelegate);return new bb(i,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new Iy(n,yn.ae),l).next()})})}}function C1(t){t.createObjectStore("targetDocuments",{keyPath:$j}).createIndex("documentTargetsIndex",jj,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Lj,{unique:!0}),t.createObjectStore("targetGlobal")}const Nm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iw{constructor(e,n,r,i,s,o,a,l,u,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this._i=s,this.window=o,this.document=a,this.ai=u,this.ui=c,this.ci=h,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=d=>Promise.resolve(),!iw.C())throw new N(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new J4(this,i),this.Ti=n+"main",this.serializer=new wb(l),this.Ei=new ur(this.Ti,this.ci,new uB(this.serializer)),this.Kr=new H4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ab(this.serializer),this.Ur=new $4,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,c===!1&&mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ri().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new N(b.FAILED_PRECONDITION,Nm);return this.Vi(),this.mi(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Kr.getHighestSequenceNumber(e))}).then(e=>{this.qr=new yn(e,this.ai)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}gi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.k(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(async()=>{this.started&&await this.Ri()}))}Ri(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.pi(e).next(n=>{n||(this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.yi(e)).next(n=>this.isPrimary&&!n?this.wi(e).next(()=>!1):!!n&&this.Si(e).next(()=>!0))).catch(e=>{if(vs(e))return V("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return V("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this._i.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}pi(e){return Ml(e).get("owner").next(n=>A.resolve(this.bi(n)))}Di(e){return xh(e).delete(this.clientId)}async Ci(){if(this.isPrimary&&!this.vi(this.Ii,18e5)){this.Ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Nt(n,"clientMetadata");return r.G().next(i=>{const s=this.Fi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return A.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ai)for(const n of e)this.Ai.removeItem(this.Mi(n.clientId))}}fi(){this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ri().then(()=>this.Ci()).then(()=>this.fi()))}bi(e){return!!e&&e.ownerId===this.clientId}yi(e){return this.ui?A.resolve(!0):Ml(e).get("owner").next(n=>{if(n!==null&&this.vi(n.leaseTimestampMs,5e3)&&!this.xi(n.ownerId)){if(this.bi(n)&&this.networkEnabled)return!0;if(!this.bi(n)){if(!n.allowTabSynchronization)throw new N(b.FAILED_PRECONDITION,Nm);return!1}}return!(!this.networkEnabled||!this.inForeground)||xh(e).G().next(r=>this.Fi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&V("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Iy(e,yn.ae);return this.wi(n).next(()=>this.Di(n))}),this.Ei.close(),this.Li()}Fi(e,n){return e.filter(r=>this.vi(r.updateTimeMs,n)&&!this.xi(r.clientId))}ki(){return this.runTransaction("getActiveClients","readonly",e=>xh(e).G().next(n=>this.Fi(n,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getMutationQueue(e,n){return ap.Pt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new G4(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return op.Pt(this.serializer,e)}getBundleCache(){return this.Ur}runTransaction(e,n,r){V("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?Yj:l===14?PA:l===13?bA:l===12?Wj:l===11?AA:void H()}(this.ci);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new Iy(a,this.qr?this.qr.next():yn.ae),n==="readwrite-primary"?this.pi(o).next(l=>!!l||this.yi(o)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)),new N(b.FAILED_PRECONDITION,SA);return r(o)}).next(l=>this.Si(o).next(()=>l)):this.qi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}qi(e){return Ml(e).get("owner").next(n=>{if(n!==null&&this.vi(n.leaseTimestampMs,5e3)&&!this.xi(n.ownerId)&&!this.bi(n)&&!(this.ui||this.allowTabSynchronization&&n.allowTabSynchronization))throw new N(b.FAILED_PRECONDITION,Nm)})}Si(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ml(e).put("owner",n)}static C(){return ur.C()}wi(e){const n=Ml(e);return n.get("owner").next(r=>this.bi(r)?(V("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):A.resolve())}vi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Vi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.hi=()=>{this._i.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ri()))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}mi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.li=()=>{this.Oi();const n=/(?:Version|Mobile)\/1[456]/;$F()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this._i.enterRestrictedMode(!0),this._i.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.li))}Bi(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}xi(e){var n;try{const r=((n=this.Ai)===null||n===void 0?void 0:n.getItem(this.Mi(e)))!==null;return V("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Oi(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}Li(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch{}}Mi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ml(t){return Nt(t,"owner")}function xh(t){return Nt(t,"clientMetadata")}function sw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=i}static $i(e,n){let r=fe(),i=fe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ow(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Hi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cB;return this.Yi(e,n,o).next(a=>{if(s.result=a,this.Wi)return this.Zi(e,n,o,a.size)})}).next(()=>s.result)}Zi(e,n,r,i){return r.documentReadCount<this.Gi?(Uo()<=Ee.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),A.resolve()):(Uo()<=Ee.DEBUG&&V("QueryEngine","Query:",zo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(Uo()<=Ee.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):A.resolve())}Hi(e,n){if(ZT(n))return A.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Wd(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=fe(...s);return this.ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Xi(n,a);return this.es(n,u,o,l.readTime)?this.Hi(e,Wd(n,null,"F")):this.ts(e,u,n,l)}))})))}Ji(e,n,r,i){return ZT(n)||i.isEqual(Y.min())?A.resolve(null):this.ji.getDocuments(e,r).next(s=>{const o=this.Xi(n,s);return this.es(n,o,r,i)?A.resolve(null):(Uo()<=Ee.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zo(n)),this.ts(e,o,n,TA(i,-1)).next(a=>a))})}Xi(e,n){let r=new je(KA(e));return n.forEach((i,s)=>{Fc(e,s)&&(r=r.add(s))}),r}es(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,n,r){return Uo()<=Ee.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",zo(n)),this.ji.getDocumentsMatchingQuery(e,n,Dn.min(),r)}ts(e,n,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r,i){this.persistence=e,this.ns=n,this.serializer=i,this.rs=new Be(he),this.ss=new _s(s=>co(s),Vc),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bb(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function Db(t,e,n,r){return new hB(t,e,n,r)}async function Nb(t,e){const n=U(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=fe();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({cs:u,removedBatchIds:o,addedBatchIds:a}))})})}function dB(t,e){const n=U(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n._s.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,d=h.keys();let f=A.resolve();return d.forEach(p=>{f=f.next(()=>c.getEntry(l,p)).next(m=>{const E=u.docVersions.get(p);X(E!==null),m.version.compareTo(E)<0&&(h.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=fe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ob(t){const e=U(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function fB(t,e){const n=U(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.Kr.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Kr.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(It.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(h,f),function(m,E,v){return m.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,f,c)&&a.push(n.Kr.updateTargetData(s,f))});let l=_n(),u=fe();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Vb(s,o,e.documentUpdates).next(c=>{l=c.ls,u=c.hs})),!r.isEqual(Y.min())){const c=n.Kr.getLastRemoteSnapshotVersion(s).next(h=>n.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return A.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.rs=i,s))}function Vb(t,e,n){let r=fe(),i=fe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_n();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Y.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ls:o,hs:i}})}function pB(t,e){const n=U(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fa(t,e){const n=U(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Kr.getTargetData(r,e).next(s=>s?(i=s,A.resolve(i)):n.Kr.allocateTargetId(r).next(o=>(i=new Qr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.rs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.rs=n.rs.insert(r.targetId,r),n.ss.set(e,r.targetId)),r})}async function La(t,e,n){const r=U(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!vs(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}function Zd(t,e,n){const r=U(t);let i=Y.min(),s=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=U(l),d=h.ss.get(c);return d!==void 0?A.resolve(h.rs.get(d)):h.Kr.getTargetData(u,c)}(r,o,un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:fe())).next(a=>(Lb(r,qA(e),a),{documents:a,Ps:s})))}function Mb(t,e){const n=U(t),r=U(n.Kr),i=n.rs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.lt(s,e).next(o=>o?o.target:null))}function Fb(t,e){const n=U(t),r=n.os.get(e)||Y.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n._s.getAllFromCollectionGroup(i,e,TA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Lb(n,e,i),i))}function Lb(t,e,n){let r=t.os.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.os.set(e,r)}async function mB(t,e,n,r){const i=U(t);let s=fe(),o=_n();for(const u of n){const c=e.Is(u.metadata.name);u.document&&(s=s.add(c));const h=e.ds(u);h.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(c,h)}const a=i._s.newChangeBuffer({trackRemovals:!0}),l=await Fa(i,function(c){return un(sl(Re.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Vb(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Kr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Kr.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.ls,c.hs)).next(()=>c.ls)))}async function gB(t,e,n=fe()){const r=await Fa(t,un(ew(e.bundledQuery))),i=U(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=gt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ur.saveNamedQuery(s,e);const a=r.withResumeToken(It.EMPTY_BYTE_STRING,o);return i.rs=i.rs.insert(a.targetId,a),i.Kr.updateTargetData(s,a).next(()=>i.Kr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Kr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ur.saveNamedQuery(s,e))})}function A1(t,e){return`firestore_clients_${t}_${e}`}function b1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Om(t,e){return`firestore_targets_${t}_${e}`}class ef{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new N(i.error.code,i.error.message))),o?new ef(e,n,i.state,s):(mt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new N(r.error.code,r.error.message))),s?new yu(e,r.state,i):(mt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=H_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=xA(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new tf(e,s):(mt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class aw{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new aw(n.clientId,n.onlineState):(mt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class My{constructor(){this.activeTargetIds=H_()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vm{constructor(e,n,r,i,s){this.window=e,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new Be(he),this.started=!1,this.ws=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ss=A1(this.persistenceKey,this.fs),this.bs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new My),this.Ds=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Cs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.vs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Fs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Ms=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.ki();for(const r of e){if(r===this.fs)continue;const i=this.getItem(A1(this.persistenceKey,r));if(i){const s=tf.Es(r,i);s&&(this.ys=this.ys.insert(s.clientId,s))}}this.xs();const n=this.storage.getItem(this.Fs);if(n){const r=this.Os(n);r&&this.Ns(r)}for(const r of this.ws)this.ps(r);this.ws=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ys)}isActiveQueryTarget(e){let n=!1;return this.ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.ks(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Om(this.persistenceKey,e));if(r){const i=yu.Es(e,r);i&&(n=i.state)}}return this.qs.Rs(e),this.xs(),n}removeLocalQueryTarget(e){this.qs.Vs(e),this.xs()}isLocalQueryTarget(e){return this.qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Om(this.persistenceKey,e))}updateQueryState(e,n,r){this.Qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.ks(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ks(e)}notifyBundleLoaded(e){this.$s(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return V("SharedClientState","READ",e,n),n}setItem(e,n){V("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){V("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ps(e){const n=e;if(n.storageArea===this.storage){if(V("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ds.test(n.key)){if(n.newValue==null){const r=this.Us(n.key);return this.Ws(r,null)}{const r=this.Gs(n.key,n.newValue);if(r)return this.Ws(r.clientId,r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(this.vs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(n.key===this.Fs){if(n.newValue!==null){const r=this.Os(n.newValue);if(r)return this.Ns(r)}}else if(n.key===this.bs){const r=function(s){let o=yn.ae;if(s!=null)try{const a=JSON.parse(s);X(typeof a=="number"),o=a}catch(a){mt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==yn.ae&&this.sequenceNumberHandler(r)}else if(n.key===this.Ms){const r=this.Ys(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Zs(i)))}}}else this.ws.push(n)})}}get qs(){return this.ys.get(this.fs)}xs(){this.setItem(this.Ss,this.qs.As())}Ls(e,n,r){const i=new ef(this.currentUser,e,n,r),s=b1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.As())}ks(e){const n=b1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Ks(e){const n={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(n))}Qs(e,n,r){const i=Om(this.persistenceKey,e),s=new yu(e,n,r);this.setItem(i,s.As())}$s(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Ms,n)}Us(e){const n=this.Ds.exec(e);return n?n[1]:null}Gs(e,n){const r=this.Us(e);return tf.Es(r,n)}zs(e,n){const r=this.Cs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ef.Es(new At(s),i,n)}Hs(e,n){const r=this.vs.exec(e),i=Number(r[1]);return yu.Es(i,n)}Os(e){return aw.Es(e)}Ys(e){return JSON.parse(e)}async js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Xs(e.batchId,e.state,e.error);V("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Js(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}Ws(e,n){const r=n?this.ys.insert(e,n):this.ys.remove(e),i=this.Bs(this.ys),s=this.Bs(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.no(o,a).then(()=>{this.ys=r})}Ns(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let n=H_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class $b{constructor(){this.ro=new My,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new My,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{so(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function Mm(){return Ch===null?Ch=function(){return 268435456+Math.round(2147483648*Math.random())}():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht="WebChannelConnection";class wB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(n,r,i,s,o){const a=Mm(),l=this.Do(n,r);V("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,s,o),this.vo(n,l,u,i).then(c=>(V("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw pr("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Fo(n,r,i,s,o,a){return this.bo(n,r,i,s,o)}Co(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+il}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Do(n,r){const i=vB[n];return`${this.po}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=Mm();return new Promise((o,a)=>{const l=new gj;l.setWithCredentials(!0),l.listenOnce(pj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case km.NO_ERROR:const c=l.getResponseJson();V(Ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case km.TIMEOUT:V(Ht,`RPC '${e}' ${s} timed out`),a(new N(b.DEADLINE_EXCEEDED,"Request time out"));break;case km.HTTP_ERROR:const h=l.getStatus();if(V(Ht,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(v)>=0?v:b.UNKNOWN}(f.status);a(new N(p,f.message))}else a(new N(b.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new N(b.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{V(Ht,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);V(Ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Mo(e,n,r){const i=Mm(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dj(),a=fj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Co(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");V(Ht,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,f=!1;const p=new _B({ho:E=>{f?V(Ht,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(d||(V(Ht,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),V(Ht,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},Po:()=>h.close()}),m=(E,v,_)=>{E.listen(v,w=>{try{_(w)}catch(g){setTimeout(()=>{throw g},0)}})};return m(h,Th.EventType.OPEN,()=>{f||V(Ht,`RPC '${e}' stream ${i} transport opened.`)}),m(h,Th.EventType.CLOSE,()=>{f||(f=!0,V(Ht,`RPC '${e}' stream ${i} transport closed`),p.mo())}),m(h,Th.EventType.ERROR,E=>{f||(f=!0,pr(Ht,`RPC '${e}' stream ${i} transport errored:`,E),p.mo(new N(b.UNAVAILABLE,"The operation could not be completed")))}),m(h,Th.EventType.MESSAGE,E=>{var v;if(!f){const _=E.data[0];X(!!_);const w=_,g=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(g){V(Ht,`RPC '${e}' stream ${i} received error:`,g);const R=g.status;let S=function(D){const M=yt[D];if(M!==void 0)return sb(M)}(R),I=g.message;S===void 0&&(S=b.INTERNAL,I="Unknown error status: "+R+" with message "+g.message),f=!0,p.mo(new N(S,I)),h.close()}else V(Ht,`RPC '${e}' stream ${i} received:`,_),p.fo(_)}}),m(a,mj.STAT_EVENT,E=>{E.stat===FT.PROXY?V(Ht,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===FT.NOPROXY&&V(Ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Vo()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){return typeof window<"u"?window:null}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){return new A4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,r,i,s,o,a,l){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new lw(e,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(e,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,e!==4?this.Ho.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===n&&this.__(r,i)},r=>{e(()=>{const i=new N(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EB extends Bb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}u_(e,n){return this.connection.Mo("Listen",e,n)}onMessage(e){this.Ho.reset();const n=k4(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?gt(o.readTime):Y.min()}(e);return this.listener.c_(n,r)}l_(e){const n={};n.database=oc(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Hd(l)?{documents:pb(s,l)}:{query:mb(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ub(s,o.resumeToken);const u=Py(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=Ma(s,o.snapshotVersion.toTimestamp());const u=Py(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=N4(this.serializer,e);r&&(n.labels=r),this.n_(n)}h_(e){const n={};n.database=oc(this.serializer),n.removeTarget=e,this.n_(n)}}class TB extends Bb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,n){return this.connection.Mo("Write",e,n)}onMessage(e){if(X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const n=D4(e.writeResults,e.commitTime),r=gt(e.commitTime);return this.listener.T_(r,n)}return X(!e.writeResults||e.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=oc(this.serializer),this.n_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ac(this.serializer,r))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new N(b.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new N(b.UNKNOWN,i.toString())})}Fo(e,n,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new N(b.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}class SB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,e==="Online"&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(mt(n),this.p_=!1):V("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(o=>{r.enqueueAndForget(async()=>{ws(this)&&(V("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=U(l);u.F_.add(4),await ll(u),u.O_.set("Unknown"),u.F_.delete(4),await Uc(u)}(this))})}),this.O_=new SB(r,i)}}async function Uc(t){if(ws(t))for(const e of t.M_)await e(!0)}async function ll(t){for(const e of t.M_)await e(!1)}function up(t,e){const n=U(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),hw(n)?cw(n):cl(n).Yo()&&uw(n,e))}function lc(t,e){const n=U(t),r=cl(n);n.v_.delete(e),r.Yo()&&Ub(n,e),n.v_.size===0&&(r.Yo()?r.e_():ws(n)&&n.O_.set("Unknown"))}function uw(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cl(t).l_(e)}function Ub(t,e){t.N_.Le(e),cl(t).h_(e)}function cw(t){t.N_=new S4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),cl(t).start(),t.O_.y_()}function hw(t){return ws(t)&&!cl(t).Jo()&&t.v_.size>0}function ws(t){return U(t).F_.size===0}function zb(t){t.N_=void 0}async function xB(t){t.v_.forEach((e,n)=>{uw(t,e)})}async function CB(t,e){zb(t),hw(t)?(t.O_.b_(e),cw(t)):t.O_.set("Unknown")}async function AB(t,e,n){if(t.O_.set("Online"),e instanceof lb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.v_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.v_.delete(a),i.N_.removeTarget(a))}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nf(t,r)}else if(e instanceof ed?t.N_.Ge(e):e instanceof ab?t.N_.Xe(e):t.N_.He(e),!n.isEqual(Y.min()))try{const r=await Ob(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.N_._t(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.v_.get(u);c&&s.v_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.v_.get(l);if(!c)return;s.v_.set(l,c.withResumeToken(It.EMPTY_BYTE_STRING,c.snapshotVersion)),Ub(s,l);const h=new Qr(c.target,l,u,c.sequenceNumber);uw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){V("RemoteStore","Failed to raise snapshot:",r),await nf(t,r)}}async function nf(t,e,n){if(!vs(e))throw e;t.F_.add(1),await ll(t),t.O_.set("Offline"),n||(n=()=>Ob(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{V("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await Uc(t)})}function qb(t,e){return e().catch(n=>nf(t,n,e))}async function ul(t){const e=U(t),n=as(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;bB(e);)try{const i=await pB(e.localStore,r);if(i===null){e.C_.length===0&&n.e_();break}r=i.batchId,PB(e,i)}catch(i){await nf(e,i)}Kb(e)&&Gb(e)}function bB(t){return ws(t)&&t.C_.length<10}function PB(t,e){t.C_.push(e);const n=as(t);n.Yo()&&n.I_&&n.d_(e.mutations)}function Kb(t){return ws(t)&&!as(t).Jo()&&t.C_.length>0}function Gb(t){as(t).start()}async function kB(t){as(t).A_()}async function DB(t){const e=as(t);for(const n of t.C_)e.d_(n.mutations)}async function NB(t,e,n){const r=t.C_.shift(),i=Y_.from(r,e,n);await qb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ul(t)}async function OB(t,e){e&&as(t).I_&&await async function(r,i){if(function(o){return ib(o)&&o!==b.ABORTED}(i.code)){const s=r.C_.shift();as(r).Xo(),await qb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ul(r)}}(t,e),Kb(t)&&Gb(t)}async function k1(t,e){const n=U(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");const r=ws(n);n.F_.add(3),await ll(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await Uc(n)}async function Fy(t,e){const n=U(t);e?(n.F_.delete(2),await Uc(n)):e||(n.F_.add(2),await ll(n),n.O_.set("Unknown"))}function cl(t){return t.B_||(t.B_=function(n,r,i){const s=U(n);return s.V_(),new EB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:xB.bind(null,t),Eo:CB.bind(null,t),c_:AB.bind(null,t)}),t.M_.push(async e=>{e?(t.B_.Xo(),hw(t)?cw(t):t.O_.set("Unknown")):(await t.B_.stop(),zb(t))})),t.B_}function as(t){return t.L_||(t.L_=function(n,r,i){const s=U(n);return s.V_(),new TB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:kB.bind(null,t),Eo:OB.bind(null,t),E_:DB.bind(null,t),T_:NB.bind(null,t)}),t.M_.push(async e=>{e?(t.L_.Xo(),await ul(t)):(await t.L_.stop(),t.C_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.C_.length} pending writes`),t.C_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new dw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new N(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hl(t,e){if(mt("AsyncQueue",`${e}: ${t}`),vs(t))return new N(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Yl(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new _a(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.k_=new Be(B.comparator)}track(e){const n=e.doc.key,r=this.k_.get(n);r?e.type!==0&&r.type===3?this.k_=this.k_.insert(n,e):e.type===3&&r.type!==1?this.k_=this.k_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.k_=this.k_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.k_=this.k_.remove(n):e.type===1&&r.type===2?this.k_=this.k_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):H():this.k_=this.k_.insert(n,e)}q_(){const e=[];return this.k_.inorderTraversal((n,r)=>{e.push(r)}),e}}class $a{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $a(e,n,_a.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(){this.Q_=void 0,this.listeners=[]}}class MB{constructor(){this.queries=new _s(e=>zA(e),Mc),this.onlineState="Unknown",this.K_=new Set}}async function fw(t,e){const n=U(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new VB),i)try{s.Q_=await n.onListen(r)}catch(o){const a=hl(o,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&mw(n)}async function pw(t,e){const n=U(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function FB(t,e){const n=U(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.W_(i)&&(r=!0);o.Q_=i}}r&&mw(n)}function LB(t,e,n){const r=U(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function mw(t){t.K_.forEach(e=>{e.next()})}class gw{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.serializer=e}Is(e){return kr(this.serializer,e)}ds(e){return e.metadata.exists?fb(this.serializer,e.document,!1):qe.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return gt(e)}}class jB{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Hb(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const r=Re.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,r=new N1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Is(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||fe()).add(s);n.set(o,a)}}return n}async complete(){const e=await mB(this.localStore,new N1(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(const r of this.queries)await gB(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function Hb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.key=e}}class Wb{constructor(e){this.key=e}}class Yb{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=fe(),this.mutatedKeys=fe(),this.ua=KA(e),this.ca=new _a(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new D1,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=Fc(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let E=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),E=!0):this.Ia(d,f)||(r.track({type:2,doc:f}),E=!0,(l&&this.ua(f,l)>0||u&&this.ua(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),E=!0):d&&!f&&(r.track({type:1,doc:d}),E=!0,(l||u)&&(a=!0)),E&&(f?(o=o.add(f),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ca:o,Pa:r,es:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((u,c)=>function(d,f){const p=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return p(d)-p(f)}(u.type,c.type)||this.ua(u.doc,c.doc)),this.da(r);const o=n?this.Ta():[],a=this.aa.size===0&&this.current?1:0,l=a!==this._a;return this._a=a,s.length!==0||l?{snapshot:new $a(this.query,e.ca,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new D1,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=fe(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new Wb(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Qb(r))}),n}Ra(e){this.oa=e.Ps,this.aa=fe();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return $a.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class BB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UB{constructor(e){this.key=e,this.ma=!1}}class zB{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new _s(a=>zA(a),Mc),this.pa=new Map,this.ya=new Set,this.wa=new Be(B.comparator),this.Sa=new Map,this.ba=new rw,this.Da={},this.Ca=new Map,this.va=go.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function qB(t,e){const n=Ew(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=await Fa(n.localStore,un(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await yw(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&up(n.remoteStore,o)}return i}async function yw(t,e,n,r,i){t.Ma=(h,d,f)=>async function(m,E,v,_){let w=E.view.ha(v);w.es&&(w=await Zd(m.localStore,E.query,!1).then(({documents:S})=>E.view.ha(S,w)));const g=_&&_.targetChanges.get(E.targetId),R=E.view.applyChanges(w,m.isPrimaryClient,g);return Ly(m,E.targetId,R.Ea),R.snapshot}(t,h,d,f);const s=await Zd(t.localStore,e,!0),o=new Yb(e,s.Ps),a=o.ha(s.documents),l=jc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Ly(t,n,u.Ea);const c=new BB(e,n,o);return t.ga.set(e,c),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot}async function KB(t,e){const n=U(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!Mc(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await La(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),lc(n.remoteStore,r.targetId),ja(n,r.targetId)}).catch(ys)):(ja(n,r.targetId),await La(n.localStore,r.targetId,!0))}async function GB(t,e,n){const r=Tw(t);try{const i=await function(o,a){const l=U(o),u=Ye.now(),c=a.reduce((f,p)=>f.add(p.key),fe());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=_n(),m=fe();return l._s.getEntries(f,c).next(E=>{p=E,p.forEach((v,_)=>{_.isValidDocument()||(m=m.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(E=>{h=E;const v=[];for(const _ of a){const w=E4(_,h.get(_.key).overlayedDocument);w!=null&&v.push(new gi(_.key,w,OA(w.value.mapValue),We.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,v,a)}).next(E=>{d=E;const v=E.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,E.batchId,v)})}).then(()=>({batchId:d.batchId,changes:HA(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Da[o.currentUser.toKey()];u||(u=new Be(he)),u=u.insert(a,l),o.Da[o.currentUser.toKey()]=u}(r,i.batchId,n),await yi(r,i.changes),await ul(r.remoteStore)}catch(i){const s=hl(i,"Failed to persist write");n.reject(s)}}async function Xb(t,e){const n=U(t);try{const r=await fB(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(X(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?X(o.ma):i.removedDocuments.size>0&&(X(o.ma),o.ma=!1))}),await yi(n,r,e)}catch(r){await ys(r)}}function O1(t,e,n){const r=U(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=U(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.listeners)d.U_(a)&&(u=!0)}),u&&mw(l)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HB(t,e,n){const r=U(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Be(B.comparator);o=o.insert(s,qe.newNoDocument(s,Y.min()));const a=fe().add(s),l=new $c(Y.min(),new Map,new Be(he),o,a);await Xb(r,l),r.wa=r.wa.remove(s),r.Sa.delete(e),ww(r)}else await La(r.localStore,e,!1).then(()=>ja(r,e,n)).catch(ys)}async function QB(t,e){const n=U(t),r=e.batch.batchId;try{const i=await dB(n.localStore,e);_w(n,r,null),vw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yi(n,i)}catch(i){await ys(i)}}async function WB(t,e,n){const r=U(t);try{const i=await function(o,a){const l=U(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(X(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);_w(r,e,n),vw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yi(r,i)}catch(i){await ys(i)}}async function YB(t,e){const n=U(t);ws(n.remoteStore)||V("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=U(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){const i=hl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function vw(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function _w(t,e,n){const r=U(t);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function ja(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach(r=>{t.ba.containsKey(r)||Jb(t,r)})}function Jb(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(lc(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),ww(t))}function Ly(t,e,n){for(const r of n)r instanceof Qb?(t.ba.addReference(r.key,e),XB(t,r)):r instanceof Wb?(V("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||Jb(t,r.key)):H()}function XB(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(V("SyncEngine","New document in limbo: "+n),t.ya.add(r),ww(t))}function ww(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new B(Re.fromString(e)),r=t.va.next();t.Sa.set(r,new UB(n)),t.wa=t.wa.insert(n,r),up(t.remoteStore,new Qr(un(sl(n.path)),r,"TargetPurposeLimboResolution",yn.ae))}}async function yi(t,e,n){const r=U(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=ow.$i(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.fa.c_(i),await async function(l,u){const c=U(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>A.forEach(u,d=>A.forEach(d.Qi,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>A.forEach(d.Ki,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!vs(h))throw h;V("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=c.rs.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);c.rs=c.rs.insert(d,m)}}}(r.localStore,s))}async function JB(t,e){const n=U(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());const r=await Nb(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(l=>{l.reject(new N(b.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yi(n,r.cs)}}function ZB(t,e){const n=U(t),r=n.Sa.get(e);if(r&&r.ma)return fe().add(r.key);{let i=fe();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}async function eU(t,e){const n=U(t),r=await Zd(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&Ly(n,e.targetId,i.Ea),i}async function tU(t,e){const n=U(t);return Fb(n.localStore,e).then(r=>yi(n,r))}async function nU(t,e,n,r){const i=U(t),s=await function(a,l){const u=U(a),c=U(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>c.Fn(h,l).next(d=>d?u.localDocuments.getDocuments(h,d):A.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ul(i.remoteStore):n==="acknowledged"||n==="rejected"?(_w(i,e,r||null),vw(i,e),function(a,l){U(U(a).mutationQueue).xn(l)}(i.localStore,e)):H(),await yi(i,s)):V("SyncEngine","Cannot apply mutation batch with id: "+e)}async function rU(t,e){const n=U(t);if(Ew(n),Tw(n),e===!0&&n.Fa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await V1(n,r.toArray());n.Fa=!0,await Fy(n.remoteStore,!0);for(const s of i)up(n.remoteStore,s)}else if(e===!1&&n.Fa!==!1){const r=[];let i=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ja(n,o),La(n.localStore,o,!0))),lc(n.remoteStore,o)}),await i,await V1(n,r),function(o){const a=U(o);a.Sa.forEach((l,u)=>{lc(a.remoteStore,u)}),a.ba.gr(),a.Sa=new Map,a.wa=new Be(B.comparator)}(n),n.Fa=!1,await Fy(n.remoteStore,!1)}}async function V1(t,e,n){const r=U(t),i=[],s=[];for(const o of e){let a;const l=r.pa.get(o);if(l&&l.length!==0){a=await Fa(r.localStore,un(l[0]));for(const u of l){const c=r.ga.get(u),h=await eU(r,c);h.snapshot&&s.push(h.snapshot)}}else{const u=await Mb(r.localStore,o);a=await Fa(r.localStore,u),await yw(r,Zb(u),o,!1,a.resumeToken)}i.push(a)}return r.fa.c_(s),i}function Zb(t){return UA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function iU(t){return function(n){return U(U(n).persistence).ki()}(U(t).localStore)}async function sU(t,e,n,r){const i=U(t);if(i.Fa)return void V("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Fb(i.localStore,qA(s[0])),a=$c.createSynthesizedRemoteEventForCurrentChange(e,n==="current",It.EMPTY_BYTE_STRING);await yi(i,o,a);break}case"rejected":await La(i.localStore,e,!0),ja(i,e,r);break;default:H()}}async function oU(t,e,n){const r=Ew(t);if(r.Fa){for(const i of e){if(r.pa.has(i)){V("SyncEngine","Adding an already active target "+i);continue}const s=await Mb(r.localStore,i),o=await Fa(r.localStore,s);await yw(r,Zb(s),o.targetId,!1,o.resumeToken),up(r.remoteStore,o)}for(const i of n)r.pa.has(i)&&await La(r.localStore,i,!1).then(()=>{lc(r.remoteStore,i),ja(r,i)}).catch(ys)}}function Ew(t){const e=U(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HB.bind(null,e),e.fa.c_=FB.bind(null,e.eventManager),e.fa.xa=LB.bind(null,e.eventManager),e}function Tw(t){const e=U(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WB.bind(null,e),e}function aU(t,e,n){const r=U(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(f,p){const m=U(f),E=gt(p.createTime);return m.persistence.runTransaction("hasNewerBundle","readonly",v=>m.Ur.getBundleMetadata(v,p.id)).then(v=>!!v&&v.createTime.compareTo(E)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(Hb(l));const u=new jB(l,s.localStore,o.serializer);let c=await o.Oa();for(;c;){const d=await u.na(c);d&&a._updateProgress(d),c=await o.Oa()}const h=await u.complete();return await yi(s,h.sa,void 0),await function(f,p){const m=U(f);return m.persistence.runTransaction("Save bundle","readwrite",E=>m.Ur.saveBundleMetadata(E,p))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.ia)}catch(l){return pr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class $y{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Db(this.persistence,new kb,e.initialUser,this.serializer)}createPersistence(e){return new Pb(lp.Jr,this.serializer)}createSharedClientState(e){return new $b}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class eP extends $y{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Tw(this.Na.syncEngine),await ul(this.Na.remoteStore),await this.persistence.gi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return Db(this.persistence,new kb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new W4(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Dj(n,this.persistence);return new kj(e.asyncQueue,r)}createPersistence(e){const n=sw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new iw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,jb(),td(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $b}}class lU extends eP{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Na.syncEngine;this.sharedClientState instanceof Vm&&(this.sharedClientState.syncEngine={Xs:nU.bind(null,n),eo:sU.bind(null,n),no:oU.bind(null,n),ki:iU.bind(null,n),Zs:tU.bind(null,n)},await this.sharedClientState.start()),await this.persistence.gi(async r=>{await rU(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=jb();if(!Vm.C(n))throw new N(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Iw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JB.bind(null,this.syncEngine),await Fy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MB}()}createDatastore(e){const n=Bc(e.databaseInfo.databaseId),r=function(s){return new wB(s)}(e.databaseInfo);return function(s,o,a,l){return new IB(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new RB(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>O1(this.syncEngine,n,0),function(){return P1.C()?new P1:new yB}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const h=new zB(i,s,o,a,l,u);return c&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=U(n);V("RemoteStore","RemoteStore shutting down."),r.F_.add(5),await ll(r),r.x_.shutdown(),r.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Pt,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(e===null)return null;const n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);const i=await this.Ua(r);return new $B(JSON.parse(i),e.length+r)}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(this.buffer.length===0)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ga(){const e=await this.ka.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new N(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=U(i),a=oc(o.serializer)+"/documents",l={documents:s.map(d=>sc(o.serializer,d))},u=await o.Fo("BatchGetDocuments",a,l,s.length),c=new Map;u.forEach(d=>{const f=P4(o.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());X(!!f),h.push(f)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new al(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=B.fromPath(r);this.mutations.push(new Q_(i,this.precondition(i)))}),await async function(r,i){const s=U(r),o=oc(s.serializer)+"/documents",a={writes:i.map(l=>ac(s.serializer,l))};await s.bo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw H();n=Y.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new N(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Y.min())?We.exists(!1):We.updateTime(n):We.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Y.min()))throw new N(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(n)}return We.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.Ho=new lw(this.asyncQueue,"transaction_retry")}run(){this.za-=1,this.ja()}ja(){this.Ho.Qo(async()=>{const e=new cU(this.datastore),n=this.Ha(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ja(i)}))}).catch(r=>{this.Ja(r)})})}Ha(e){try{const n=this.updateFunction(e);return!Oc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ja(e){this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.ja(),Promise.resolve()))):this.deferred.reject(e)}Ya(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ib(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=wA.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{V("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new N(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nd(t,e){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Nb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Sw(t);V("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>k1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>k1(e.remoteStore,s)),t._onlineComponents=e}function tP(t){return t.name==="FirebaseError"?t.code===b.FAILED_PRECONDITION||t.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Sw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{await nd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!tP(n))throw n;pr("Error using user provided cache. Falling back to memory cache: "+n),await nd(t,new $y)}}else V("FirestoreClient","Using default OfflineComponentProvider"),await nd(t,new $y);return t._offlineComponents}async function hp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),await jy(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),await jy(t,new Iw))),t._onlineComponents}function nP(t){return Sw(t).then(e=>e.persistence)}function Rw(t){return Sw(t).then(e=>e.localStore)}function rP(t){return hp(t).then(e=>e.remoteStore)}function xw(t){return hp(t).then(e=>e.syncEngine)}function fU(t){return hp(t).then(e=>e.datastore)}async function Ba(t){const e=await hp(t),n=e.eventManager;return n.onListen=qB.bind(null,e.syncEngine),n.onUnlisten=KB.bind(null,e.syncEngine),n}function pU(t){return t.asyncQueue.enqueue(async()=>{const e=await nP(t),n=await rP(t);return e.setNetworkEnabled(!0),function(i){const s=U(i);return s.F_.delete(0),Uc(s)}(n)})}function mU(t){return t.asyncQueue.enqueue(async()=>{const e=await nP(t),n=await rP(t);return e.setNetworkEnabled(!1),async function(i){const s=U(i);s.F_.add(0),await ll(s),s.O_.set("Offline")}(n)})}function gU(t,e){const n=new Pt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,c){const h=U(u);return h.persistence.runTransaction("read document","readonly",d=>h.localDocuments.getDocument(d,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new N(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=hl(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Rw(t),e,n)),n.promise}function iP(t,e,n={}){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new cp({next:d=>{o.enqueueAndForget(()=>pw(s,h));const f=d.docs.has(a);!f&&d.fromCache?u.reject(new N(b.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?u.reject(new N(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new gw(sl(a.path),c,{includeMetadataChanges:!0,Z_:!0});return fw(s,h)}(await Ba(t),t.asyncQueue,e,n,r)),r.promise}function yU(t,e){const n=new Pt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Zd(i,s,!0),l=new Yb(s,a.Ps),u=l.ha(a.documents),c=l.applyChanges(u,!1);o.resolve(c.snapshot)}catch(a){const l=hl(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Rw(t),e,n)),n.promise}function sP(t,e,n={}){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new cp({next:d=>{o.enqueueAndForget(()=>pw(s,h)),d.fromCache&&l.source==="server"?u.reject(new N(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new gw(a,c,{includeMetadataChanges:!0,Z_:!0});return fw(s,h)}(await Ba(t),t.asyncQueue,e,n,r)),r.promise}function vU(t,e){const n=new cp(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){U(i).K_.add(s),s.next()}(await Ba(t),n)),()=>{n.La(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){U(i).K_.delete(s)}(await Ba(t),n))}}function _U(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?ob().encode(o):o,function(c,h){return new uU(c,h)}(function(c,h){if(c instanceof Uint8Array)return M1(c,h);if(c instanceof ArrayBuffer)return M1(new Uint8Array(c),h);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Bc(e));t.asyncQueue.enqueueAndForget(async()=>{aU(await xw(t),i,r)})}function wU(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=U(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ur.getNamedQuery(o,i))}(await Rw(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e,n){if(!n)throw new N(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aP(t,e,n,r){if(e===!0&&r===!0)throw new N(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function L1(t){if(!B.isDocumentKey(t))throw new N(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $1(t){if(B.isDocumentKey(t))throw new N(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function Ae(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new N(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dp(t);throw new N(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function lP(t,e){if(e<=0)throw new N(b.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new N(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new N(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new N(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new N(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new N(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new N(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new N(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wj;switch(r.type){case"firstParty":return new Sj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new N(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=F1.get(n);r&&(V("ComponentProvider","Removing Datastore"),F1.delete(n),r.terminate())}(this),Promise.resolve()}}function EU(t,e,n,r={}){var i;const s=(t=Ae(t,zc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&pr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=At.MOCK_USER;else{a=rC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new N(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new At(u)}t._authCredentials=new Ej(new _A(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cn=class uP{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new uP(this.firestore,e,this._query)}},tt=class cP{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cP(this.firestore,e,this._key)}},Yi=class hP extends cn{constructor(e,n,r){super(e,n,sl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new B(e))}withConverter(e){return new hP(this.firestore,e,this._path)}};function dP(t,e,...n){if(t=Ve(t),Cw("collection","path",e),t instanceof zc){const r=Re.fromString(e,...n);return $1(r),new Yi(t,null,r)}{if(!(t instanceof tt||t instanceof Yi))throw new N(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return $1(r),new Yi(t.firestore,null,r)}}function TU(t,e){if(t=Ae(t,zc),Cw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new N(b.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new cn(t,null,function(r){return new mi(Re.emptyPath(),r)}(e))}function rf(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=wA.V()),Cw("doc","path",e),t instanceof zc){const r=Re.fromString(e,...n);return L1(r),new tt(t,null,new B(r))}{if(!(t instanceof tt||t instanceof Yi))throw new N(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return L1(r),new tt(t.firestore,t instanceof Yi?t.converter:null,new B(r))}}function fP(t,e){return t=Ve(t),e=Ve(e),(t instanceof tt||t instanceof Yi)&&(e instanceof tt||e instanceof Yi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function pP(t,e){return t=Ve(t),e=Ve(e),t instanceof cn&&e instanceof cn&&t.firestore===e.firestore&&Mc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new lw(this,"async_queue_retry"),this.ou=()=>{const n=td();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=td();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new Pt;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(e){if(!vs(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{this.nu=r,this.ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw mt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const i=dw.createAndSchedule(this,e,n,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&H()}verifyOperationInProgress(){}async lu(){let e;do e=this.Za,await e;while(e!==this.Za)}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}function By(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class SU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=-1;let ct=class extends zc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new IU}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mP(this),this._firestoreClient.terminate()}};function Ot(t){return t._firestoreClient||mP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mP(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new Zj(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,oP(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new dU(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function xU(t,e){yP(t=Ae(t,ct));const n=Ot(t);if(n._uninitializedComponentsProvider)throw new N(b.FAILED_PRECONDITION,"SDK cache is already specified.");pr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Iw;return gP(n,i,new eP(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function CU(t){yP(t=Ae(t,ct));const e=Ot(t);if(e._uninitializedComponentsProvider)throw new N(b.FAILED_PRECONDITION,"SDK cache is already specified.");pr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Iw;return gP(e,r,new lU(r,n.cacheSizeBytes))}function gP(t,e,n){const r=new Pt;return t.asyncQueue.enqueue(async()=>{try{await nd(t,n),await jy(t,e),r.resolve()}catch(i){const s=i;if(!tP(s))throw s;pr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function AU(t){if(t._initialized&&!t._terminated)throw new N(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ur.C())return Promise.resolve();const i=r+"main";await ur.delete(i)}(sw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function bU(t){return function(n){const r=new Pt;return n.asyncQueue.enqueueAndForget(async()=>YB(await xw(n),r)),r.promise}(Ot(t=Ae(t,ct)))}function PU(t){return pU(Ot(t=Ae(t,ct)))}function kU(t){return mU(Ot(t=Ae(t,ct)))}function DU(t,e){const n=Ot(t=Ae(t,ct)),r=new SU;return _U(n,t._databaseId,e,r),r}function NU(t,e){return wU(Ot(t=Ae(t,ct)),e).then(n=>n?new cn(t,null,n.query):null)}function yP(t){if(t._initialized||t._terminated)throw new N(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mr(It.fromBase64String(e))}catch(n){throw new N(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Mr(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ls=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new N(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new N(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new N(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=/^__.*__$/;class VU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ol(e,this.data,n,this.fieldTransforms)}}class vP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _P(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class pp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.du(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new pp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.Vu(e),i}mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return sf(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(e.length===0)throw this.gu("Document fields must not be empty");if(_P(this.Tu)&&OU.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class MU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bc(e)}wu(e,n,r,i=!1){return new pp({Tu:e,methodName:n,yu:r,path:at.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xo(t){const e=t._freezeSettings(),n=Bc(t._databaseId);return new MU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mp(t,e,n,r,i,s={}){const o=t.wu(s.merge||s.mergeFields?2:0,e,n,i);kw("Data must be an object, but it was:",o,r);const a=TP(r,o);let l,u;if(s.merge)l=new vn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=Uy(e,h,n);if(!o.contains(d))throw new N(b.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);SP(c,d)||c.push(d)}l=new vn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new VU(new jt(a),l,u)}class qc extends Ro{_toFieldTransform(e){if(e.Tu!==2)throw e.Tu===1?e.gu(`${this._methodName}() can only appear at the top level of your update data`):e.gu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qc}}function wP(t,e,n){return new pp({Tu:3,yu:e.settings.yu,methodName:t._methodName,Ru:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Aw extends Ro{_toFieldTransform(e){return new Lc(e.path,new Oa)}isEqual(e){return e instanceof Aw}}class FU extends Ro{constructor(e,n){super(e),this.Su=n}_toFieldTransform(e){const n=wP(this,e,!0),r=this.Su.map(s=>Co(s,n)),i=new ho(r);return new Lc(e.path,i)}isEqual(e){return this===e}}class LU extends Ro{constructor(e,n){super(e),this.Su=n}_toFieldTransform(e){const n=wP(this,e,!0),r=this.Su.map(s=>Co(s,n)),i=new fo(r);return new Lc(e.path,i)}isEqual(e){return this===e}}class $U extends Ro{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=new Va(e.serializer,XA(e.serializer,this.bu));return new Lc(e.path,n)}isEqual(e){return this===e}}function bw(t,e,n,r){const i=t.wu(1,e,n);kw("Data must be an object, but it was:",i,r);const s=[],o=jt.empty();So(r,(l,u)=>{const c=Dw(e,l,n);u=Ve(u);const h=i.mu(c);if(u instanceof qc)s.push(c);else{const d=Co(u,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new vn(s);return new vP(o,a,i.fieldTransforms)}function Pw(t,e,n,r,i,s){const o=t.wu(1,e,n),a=[Uy(e,r,n)],l=[i];if(s.length%2!=0)throw new N(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Uy(e,s[d])),l.push(s[d+1]);const u=[],c=jt.empty();for(let d=a.length-1;d>=0;--d)if(!SP(u,a[d])){const f=a[d];let p=l[d];p=Ve(p);const m=o.mu(f);if(p instanceof qc)u.push(f);else{const E=Co(p,m);E!=null&&(u.push(f),c.set(f,E))}}const h=new vn(u);return new vP(c,h,o.fieldTransforms)}function EP(t,e,n,r=!1){return Co(n,t.wu(r?4:3,e))}function Co(t,e){if(IP(t=Ve(t)))return kw("Unsupported field value:",e,t),TP(t,e);if(t instanceof Ro)return function(r,i){if(!_P(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&e.Tu!==4)throw e.gu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Co(a,i.fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ye.fromDate(r);return{timestampValue:Ma(i.serializer,s)}}if(r instanceof Ye){const s=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ma(i.serializer,s)}}if(r instanceof fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mr)return{bytesValue:ub(i.serializer,r._byteString)};if(r instanceof tt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Z_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${dp(r)}`)}(t,e)}function TP(t,e){const n={};return kA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,(r,i)=>{const s=Co(i,e.Au(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function IP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof fp||t instanceof Mr||t instanceof tt||t instanceof Ro)}function kw(t,e,n){if(!IP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=dp(n);throw r==="an object"?e.gu(t+" a custom object"):e.gu(t+" "+r)}}function Uy(t,e,n){if((e=Ve(e))instanceof ls)return e._internalPath;if(typeof e=="string")return Dw(t,e);throw sf("Field path arguments must be of type string or ",t,!1,void 0,n)}const jU=new RegExp("[~\\*/\\[\\]]");function Dw(t,e,n){if(e.search(jU)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ls(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new N(b.INVALID_ARGUMENT,a+t+l)}function SP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BU extends uc{data(){return super.data()}}function gp(t,e){return typeof e=="string"?Dw(t,e):e instanceof ls?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new N(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nw{}class Kc extends Nw{}function Ri(t,e,...n){let r=[];e instanceof Nw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Ow).length,a=s.filter(l=>l instanceof yp).length;if(o>1||o>0&&a>0)throw new N(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class yp extends Kc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yp(e,n,r)}_apply(e){const n=this._parse(e);return CP(e._query,n),new cn(e.firestore,e.converter,by(e._query,n))}_parse(e){const n=xo(e.firestore);return function(s,o,a,l,u,c,h){let d;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new N(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){U1(h,c);const f=[];for(const p of h)f.push(B1(l,s,p));d={arrayValue:{values:f}}}else d=B1(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||U1(h,c),d=EP(a,o,h,c==="in"||c==="not-in");return ge.create(u,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function UU(t,e,n){const r=e,i=gp("where",t);return yp._create(i,r,n)}class Ow extends Nw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ow(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ke.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)CP(o,l),o=by(o,l)}(e._query,n),new cn(e.firestore,e.converter,by(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vw extends Kc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new N(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new N(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new ya(s,o);return function(u,c){if(K_(u)===null){const h=rp(u);h!==null&&AP(u,h,c.field)}}(i,a),a}(e._query,this._field,this._direction);return new cn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new mi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function zU(t,e="asc"){const n=e,r=gp("orderBy",t);return Vw._create(r,n)}class vp extends Kc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new vp(e,n,r)}_apply(e){return new cn(e.firestore,e.converter,Wd(e._query,this._limit,this._limitType))}}function qU(t){return lP("limit",t),vp._create("limit",t,"F")}function KU(t){return lP("limitToLast",t),vp._create("limitToLast",t,"L")}class _p extends Kc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new _p(e,n,r)}_apply(e){const n=xP(e,this.type,this._docOrFields,this._inclusive);return new cn(e.firestore,e.converter,function(i,s){return new mi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function GU(...t){return _p._create("startAt",t,!0)}function HU(...t){return _p._create("startAfter",t,!1)}class wp extends Kc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new wp(e,n,r)}_apply(e){const n=xP(e,this.type,this._docOrFields,this._inclusive);return new cn(e.firestore,e.converter,function(i,s){return new mi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function QU(...t){return wp._create("endBefore",t,!1)}function WU(...t){return wp._create("endAt",t,!0)}function xP(t,e,n,r){if(n[0]=Ve(n[0]),n[0]instanceof uc)return function(s,o,a,l,u){if(!l)throw new N(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const h of va(s))if(h.field.isKeyField())c.push(uo(o,l.key));else{const d=l.data.field(h.field);if(np(d))throw new N(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const f=h.field.canonicalString();throw new N(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}c.push(d)}return new os(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=xo(t.firestore);return function(o,a,l,u,c,h){const d=o.explicitOrderBy;if(c.length>d.length)throw new N(b.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<c.length;p++){const m=c[p];if(d[p].field.isKeyField()){if(typeof m!="string")throw new N(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof m}`);if(!G_(o)&&m.indexOf("/")!==-1)throw new N(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${m}' contains a slash.`);const E=o.path.child(Re.fromString(m));if(!B.isDocumentKey(E))throw new N(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const v=new B(E);f.push(uo(a,v))}else{const E=EP(l,u,m);f.push(E)}}return new os(f,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function B1(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new N(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!G_(e)&&n.indexOf("/")!==-1)throw new N(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!B.isDocumentKey(r))throw new N(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uo(t,new B(r))}if(n instanceof tt)return uo(t,n._key);throw new N(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dp(n)}.`)}function U1(t,e){if(!Array.isArray(t)||t.length===0)throw new N(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CP(t,e){if(e.isInequality()){const r=rp(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new N(b.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=K_(t);s!==null&&AP(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new N(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new N(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function AP(t,e,n){if(!n.isEqual(e))throw new N(b.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Mw{convertValue(e,n="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return So(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new fp(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=z_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);X(_b(r));const i=new is(r.get(1),r.get(3)),s=new B(r.popFirst(5));return i.isEqual(n)||mt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class YU extends Mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ui=class extends uc{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},vu=class extends ui{data(e={}){return super.data(e)}},us=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ks(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vu(this._firestore,this._userDataWriter,r.key,r,new Ks(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new N(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ks(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new vu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ks(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:XU(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function XU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function bP(t,e){return t instanceof ui&&e instanceof ui?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof us&&e instanceof us&&t._firestore===e._firestore&&pP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t){t=Ae(t,tt);const e=Ae(t.firestore,ct);return iP(Ot(e),t._key).then(n=>Fw(e,t,n))}class Ao extends Mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}function ZU(t){t=Ae(t,tt);const e=Ae(t.firestore,ct),n=Ot(e),r=new Ao(e);return gU(n,t._key).then(i=>new ui(e,r,t._key,i,new Ks(i!==null&&i.hasLocalMutations,!0),t.converter))}function e5(t){t=Ae(t,tt);const e=Ae(t.firestore,ct);return iP(Ot(e),t._key,{source:"server"}).then(n=>Fw(e,t,n))}function t5(t){t=Ae(t,cn);const e=Ae(t.firestore,ct),n=Ot(e),r=new Ao(e);return RP(t._query),sP(n,t._query).then(i=>new us(e,r,t,i))}function n5(t){t=Ae(t,cn);const e=Ae(t.firestore,ct),n=Ot(e),r=new Ao(e);return yU(n,t._query).then(i=>new us(e,r,t,i))}function r5(t){t=Ae(t,cn);const e=Ae(t.firestore,ct),n=Ot(e),r=new Ao(e);return sP(n,t._query,{source:"server"}).then(i=>new us(e,r,t,i))}function z1(t,e,n){t=Ae(t,tt);const r=Ae(t.firestore,ct),i=Ep(t.converter,e,n);return Gc(r,[mp(xo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,We.none())])}function q1(t,e,n,...r){t=Ae(t,tt);const i=Ae(t.firestore,ct),s=xo(i);let o;return o=typeof(e=Ve(e))=="string"||e instanceof ls?Pw(s,"updateDoc",t._key,e,n,r):bw(s,"updateDoc",t._key,e),Gc(i,[o.toMutation(t._key,We.exists(!0))])}function i5(t){return Gc(Ae(t.firestore,ct),[new al(t._key,We.none())])}function s5(t,e){const n=Ae(t.firestore,ct),r=rf(t),i=Ep(t.converter,e);return Gc(n,[mp(xo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,We.exists(!1))]).then(()=>r)}function PP(t,...e){var n,r,i;t=Ve(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||By(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(By(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof tt)u=Ae(t.firestore,ct),c=sl(t._key.path),l={next:h=>{e[o]&&e[o](Fw(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Ae(t,cn);u=Ae(h.firestore,ct),c=h._query;const d=new Ao(u);l={next:f=>{e[o]&&e[o](new us(u,d,h,f))},error:e[o+1],complete:e[o+2]},RP(t._query)}return function(d,f,p,m){const E=new cp(m),v=new gw(f,E,p);return d.asyncQueue.enqueueAndForget(async()=>fw(await Ba(d),v)),()=>{E.La(),d.asyncQueue.enqueueAndForget(async()=>pw(await Ba(d),v))}}(Ot(u),c,a,l)}function o5(t,e){return vU(Ot(t=Ae(t,ct)),By(e)?e:{next:e})}function Gc(t,e){return function(r,i){const s=new Pt;return r.asyncQueue.enqueueAndForget(async()=>GB(await xw(r),i,s)),s.promise}(Ot(t),e)}function Fw(t,e,n){const r=n.docs.get(e._key),i=new Ao(t);return new ui(t,i,e._key,r,new Ks(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l5=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=xo(e)}set(e,n,r){this._verifyNotCommitted();const i=Vi(e,this._firestore),s=Ep(i.converter,n,r),o=mp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,We.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Vi(e,this._firestore);let o;return o=typeof(n=Ve(n))=="string"||n instanceof ls?Pw(this._dataReader,"WriteBatch.update",s._key,n,r,i):bw(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,We.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vi(e,this._firestore);return this._mutations=this._mutations.concat(new al(n._key,We.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new N(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Vi(t,e){if((t=Ve(t)).firestore!==e)throw new N(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u5=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=xo(n)}get(n){const r=Vi(n,this._firestore),i=new YU(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return H();const o=s[0];if(o.isFoundDocument())return new uc(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new uc(this._firestore,i,r._key,null,r.converter);throw H()})}set(n,r,i){const s=Vi(n,this._firestore),o=Ep(s.converter,r,i),a=mp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Vi(n,this._firestore);let a;return a=typeof(r=Ve(r))=="string"||r instanceof ls?Pw(this._dataReader,"Transaction.update",o._key,r,i,s):bw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Vi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Vi(e,this._firestore),r=new Ao(this._firestore);return super.get(e).then(i=>new ui(this._firestore,r,n._key,i._document,new Ks(!1,!1),n.converter))}};function c5(t,e,n){t=Ae(t,ct);const r=Object.assign(Object.assign({},a5),n);return function(s){if(s.maxAttempts<1)throw new N(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Pt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await fU(s);new hU(s.asyncQueue,u,a,o,l).run()}),l.promise}(Ot(t),i=>e(new u5(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(){return new qc("deleteField")}function d5(){return new Aw("serverTimestamp")}function f5(...t){return new FU("arrayUnion",t)}function p5(...t){return new LU("arrayRemove",t)}function m5(t){return new $U("increment",t)}(function(e,n=!0){(function(i){il=i})(Lf),ao(new ai("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ct(new Tj(r.getProvider("auth-internal")),new xj(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new N(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new is(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pr(LT,"4.2.0",e),Pr(LT,"4.2.0","esm2017")})();const g5={apiKey:"AIzaSyD7w6wRVPsf0DaH2YARMaFKXWJHjPsSd3s",authDomain:"pokemon-go-gym.firebaseapp.com",projectId:"pokemon-go-gym",storageBucket:"pokemon-go-gym.appspot.com",messagingSenderId:"48932195856",appId:"1:48932195856:web:93f21318228a7976e34495"};tl.initializeApp(g5);const y5="@firebase/firestore-compat",v5="0.3.18";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new N("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){if(typeof Uint8Array>"u")throw new N("unimplemented","Uint8Arrays are not available in this environment.")}function G1(){if(!Xj())throw new N("unimplemented","Blobs are unavailable in Firestore in this environment.")}let kP=class zy{constructor(e){this._delegate=e}static fromBase64String(e){return G1(),new zy(Mr.fromBase64String(e))}static fromUint8Array(e){return K1(),new zy(Mr.fromUint8Array(e))}toBase64(){return G1(),this._delegate.toBase64()}toUint8Array(){return K1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){return _5(t,["next","error","complete"])}function _5(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{enableIndexedDbPersistence(e,n){return xU(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return CU(e._delegate)}clearIndexedDbPersistence(e){return AU(e._delegate)}}class DP{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof is||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&pr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){EU(this._delegate,e,n,r)}enableNetwork(){return PU(this._delegate)}disableNetwork(){return kU(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,aP("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return bU(this._delegate)}onSnapshotsInSync(e){return o5(this._delegate,e)}get app(){if(!this._appCompat)throw new N("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ua(this,dP(this._delegate,e))}catch(n){throw rn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Gn(this,rf(this._delegate,e))}catch(n){throw rn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new nn(this,TU(this._delegate,e))}catch(n){throw rn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return c5(this._delegate,n=>e(new NP(this,n)))}batch(){return Ot(this._delegate),new OP(new l5(this._delegate,e=>Gc(this._delegate,e)))}loadBundle(e){return DU(this._delegate,e)}namedQuery(e){return NU(this._delegate,e).then(n=>n?new nn(this,n):null)}}class Tp extends Mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new kP(new Mr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Gn.forKey(n,this.firestore,null)}}function E5(t){vj(t)}class NP{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Tp(e)}get(e){const n=Gs(e);return this._delegate.get(n).then(r=>new cc(this._firestore,new ui(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Gs(e);return r?(Lw("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Gs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Gs(e);return this._delegate.delete(n),this}}class OP{constructor(e){this._delegate=e}set(e,n,r){const i=Gs(e);return r?(Lw("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Gs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Gs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class yo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new vu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=yo.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new yo(e,new Tp(e),n),i.set(n,s)),s}}yo.INSTANCES=new WeakMap;class Gn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Tp(e)}static forPath(e,n,r){if(e.length%2!==0)throw new N("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gn(n,new tt(n._delegate,r,new B(e)))}static forKey(e,n,r){return new Gn(n,new tt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ua(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ua(this.firestore,dP(this._delegate,e))}catch(n){throw rn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ve(e),e instanceof tt?fP(this._delegate,e):!1}set(e,n){n=Lw("DocumentReference.set",n);try{return n?z1(this._delegate,e,n):z1(this._delegate,e)}catch(r){throw rn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?q1(this._delegate,e):q1(this._delegate,e,n,...r)}catch(i){throw rn(i,"updateDoc()","DocumentReference.update()")}}delete(){return i5(this._delegate)}onSnapshot(...e){const n=VP(e),r=MP(e,i=>new cc(this.firestore,new ui(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return PP(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=ZU(this._delegate):(e==null?void 0:e.source)==="server"?n=e5(this._delegate):n=JU(this._delegate),n.then(r=>new cc(this.firestore,new ui(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Gn(this.firestore,e?this._delegate.withConverter(yo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function rn(t,e,n){return t.message=t.message.replace(e,n),t}function VP(t){for(const e of t)if(typeof e=="object"&&!qy(e))return e;return{}}function MP(t,e){var n,r;let i;return qy(t[0])?i=t[0]:qy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class cc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Gn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return bP(this._delegate,e._delegate)}}class hc extends cc{data(e){const n=this._delegate.data(e);return _j(n!==void 0),n}}class nn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Tp(e)}where(e,n,r){try{return new nn(this.firestore,Ri(this._delegate,UU(e,n,r)))}catch(i){throw rn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new nn(this.firestore,Ri(this._delegate,zU(e,n)))}catch(r){throw rn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new nn(this.firestore,Ri(this._delegate,qU(e)))}catch(n){throw rn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new nn(this.firestore,Ri(this._delegate,KU(e)))}catch(n){throw rn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new nn(this.firestore,Ri(this._delegate,GU(...e)))}catch(n){throw rn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new nn(this.firestore,Ri(this._delegate,HU(...e)))}catch(n){throw rn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new nn(this.firestore,Ri(this._delegate,QU(...e)))}catch(n){throw rn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new nn(this.firestore,Ri(this._delegate,WU(...e)))}catch(n){throw rn(n,"endAt()","Query.endAt()")}}isEqual(e){return pP(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=n5(this._delegate):(e==null?void 0:e.source)==="server"?n=r5(this._delegate):n=t5(this._delegate),n.then(r=>new Ky(this.firestore,new us(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=VP(e),r=MP(e,i=>new Ky(this.firestore,new us(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return PP(this._delegate,n,r)}withConverter(e){return new nn(this.firestore,e?this._delegate.withConverter(yo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class T5{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new hc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ky{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new nn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new hc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new T5(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new hc(this._firestore,r))})}isEqual(e){return bP(this._delegate,e._delegate)}}class Ua extends nn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gn(this.firestore,e):null}doc(e){try{return e===void 0?new Gn(this.firestore,rf(this._delegate)):new Gn(this.firestore,rf(this._delegate,e))}catch(n){throw rn(n,"doc()","CollectionReference.doc()")}}add(e){return s5(this._delegate,e).then(n=>new Gn(this.firestore,n))}isEqual(e){return fP(this._delegate,e._delegate)}withConverter(e){return new Ua(this.firestore,e?this._delegate.withConverter(yo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gs(t){return Ae(t,tt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(...e){this._delegate=new ls(...e)}static documentId(){return new $w(at.keyField().canonicalString())}isEqual(e){return e=Ve(e),e instanceof ls?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this._delegate=e}static serverTimestamp(){const e=d5();return e._methodName="FieldValue.serverTimestamp",new Fs(e)}static delete(){const e=h5();return e._methodName="FieldValue.delete",new Fs(e)}static arrayUnion(...e){const n=f5(...e);return n._methodName="FieldValue.arrayUnion",new Fs(n)}static arrayRemove(...e){const n=p5(...e);return n._methodName="FieldValue.arrayRemove",new Fs(n)}static increment(e){const n=m5(e);return n._methodName="FieldValue.increment",new Fs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5={Firestore:DP,GeoPoint:fp,Timestamp:Ye,Blob:kP,Transaction:NP,WriteBatch:OP,DocumentReference:Gn,DocumentSnapshot:cc,Query:nn,QueryDocumentSnapshot:hc,QuerySnapshot:Ky,CollectionReference:Ua,FieldPath:$w,FieldValue:Fs,setLogLevel:E5,CACHE_SIZE_UNLIMITED:RU};function S5(t,e){t.INTERNAL.registerComponent(new ai("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},I5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(t){S5(t,(e,n)=>new DP(e,n,new w5)),t.registerVersion(y5,v5)}R5(tl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="firebasestorage.googleapis.com",LP="storageBucket",x5=2*60*1e3,C5=10*60*1e3,A5=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt extends ps{constructor(e,n,r=0){super(Fm(e),`Firebase Storage: ${n} (${Fm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var He;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(He||(He={}));function Fm(t){return"storage/"+t}function jw(){const t="An unknown error occurred, please check the error payload for server response.";return new rt(He.UNKNOWN,t)}function b5(t){return new rt(He.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function P5(t){return new rt(He.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function k5(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rt(He.UNAUTHENTICATED,t)}function D5(){return new rt(He.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function N5(t){return new rt(He.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $P(){return new rt(He.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jP(){return new rt(He.CANCELED,"User canceled the upload/download.")}function O5(t){return new rt(He.INVALID_URL,"Invalid URL '"+t+"'.")}function V5(t){return new rt(He.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function M5(){return new rt(He.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LP+"' property when initializing the app?")}function BP(){return new rt(He.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function F5(){return new rt(He.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function L5(){return new rt(He.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $5(t){return new rt(He.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wa(t){return new rt(He.INVALID_ARGUMENT,t)}function UP(){return new rt(He.APP_DELETED,"The Firebase app was deleted.")}function zP(t){return new rt(He.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _u(t,e){return new rt(He.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fl(t){throw new rt(He.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wt.makeFromUrl(e,n)}catch{return new Wt(e,"")}if(r.path==="")return r;throw V5(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(g){g.path.charAt(g.path.length-1)==="/"&&(g.path_=g.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(g){g.path_=decodeURIComponent(g.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===FP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",v=new RegExp(`^https?://${m}/${i}/${E}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let g=0;g<w.length;g++){const R=w[g],S=R.regex.exec(e);if(S){const I=S[R.indices.bucket];let x=S[R.indices.path];x||(x=""),r=new Wt(I,x),R.postModify(r);break}}if(r==null)throw O5(e);return r}}class j5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...E){u||(u=!0,e.apply(null,E))}function h(E){i=setTimeout(()=>{i=null,t(f,l())},E)}function d(){s&&clearTimeout(s)}function f(E,...v){if(u){d();return}if(E){d(),c.call(null,E,...v);return}if(l()||o){d(),c.call(null,E,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let p=!1;function m(E){p||(p=!0,d(),!u&&(i!==null?(E||(a=2),clearTimeout(i),h(0)):E||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function U5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t){return t!==void 0}function q5(t){return typeof t=="function"}function K5(t){return typeof t=="object"&&!Array.isArray(t)}function Ip(t){return typeof t=="string"||t instanceof String}function H1(t){return Bw()&&t instanceof Blob}function Bw(){return typeof Blob<"u"&&!iC()}function Gy(t,e,n,r){if(r<e)throw wa(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw wa(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function qP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xs||(Xs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n,r,i,s,o,a,l,u,c,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ah(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Xs.NO_ERROR,l=s.getStatus();if(!a||KP(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Xs.ABORT;r(!1,new Ah(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Ah(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());z5(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=jw();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?UP():jP();o(l)}else{const l=$P();o(l)}};this.canceled_?n(!1,new Ah(!1,null,!0)):this.backoffId_=B5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&U5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ah{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function H5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Q5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function W5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Y5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function X5(t,e,n,r,i,s,o=!0){const a=qP(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return W5(u,e),H5(u,n),Q5(u,s),Y5(u,r),new G5(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Z5(...t){const e=J5();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Bw())return new Blob(t);throw new rt(He.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function e3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){if(typeof atob>"u")throw $5("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lm{constructor(e,n){this.data=e,this.contentType=n||null}}function GP(t,e){switch(t){case Hn.RAW:return new Lm(HP(e));case Hn.BASE64:case Hn.BASE64URL:return new Lm(QP(t,e));case Hn.DATA_URL:return new Lm(r3(e),i3(e))}throw jw()}function HP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function n3(t){let e;try{e=decodeURIComponent(t)}catch{throw _u(Hn.DATA_URL,"Malformed data URL.")}return HP(e)}function QP(t,e){switch(t){case Hn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw _u(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw _u(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=t3(e)}catch(i){throw i.message.includes("polyfill")?i:_u(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class WP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _u(Hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=s3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function r3(t){const e=new WP(t);return e.base64?QP(Hn.BASE64,e.rest):n3(e.rest)}function i3(t){return new WP(t).contentType}function s3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){let r=0,i="";H1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(H1(this.data_)){const r=this.data_,i=e3(r,e,n);return i===null?null:new zr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new zr(r,!0)}}static getBlob(...e){if(Bw()){const n=e.map(r=>r instanceof zr?r.data_:r);return new zr(Z5.apply(null,n))}else{const n=e.map(o=>Ip(o)?GP(Hn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new zr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){let e;try{e=JSON.parse(t)}catch{return null}return K5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function a3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function YP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t,e){return e}class en{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||l3}}let bh=null;function u3(t){return!Ip(t)||t.length<2?t:YP(t)}function Sp(){if(bh)return bh;const t=[];t.push(new en("bucket")),t.push(new en("generation")),t.push(new en("metageneration")),t.push(new en("name","fullPath",!0));function e(s,o){return u3(o)}const n=new en("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new en("size");return i.xform=r,t.push(i),t.push(new en("timeCreated")),t.push(new en("updated")),t.push(new en("md5Hash",null,!0)),t.push(new en("cacheControl",null,!0)),t.push(new en("contentDisposition",null,!0)),t.push(new en("contentEncoding",null,!0)),t.push(new en("contentLanguage",null,!0)),t.push(new en("contentType",null,!0)),t.push(new en("metadata","customMetadata",!0)),bh=t,bh}function c3(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Wt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function h3(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return c3(r,t),r}function XP(t,e,n){const r=Uw(e);return r===null?null:h3(t,r,n)}function d3(t,e,n,r){const i=Uw(e);if(i===null||!Ip(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=Es(d,n,r),p=qP({alt:"media",token:u});return f+p})[0]}function zw(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="prefixes",W1="items";function f3(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Q1])for(const i of n[Q1]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Wt(e,s));r.prefixes.push(o)}if(n[W1])for(const i of n[W1]){const s=t._makeStorageReference(new Wt(e,i.name));r.items.push(s)}return r}function p3(t,e,n){const r=Uw(n);return r===null?null:f3(t,e,r)}class vi{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t){if(!t)throw jw()}function Rp(t,e){function n(r,i){const s=XP(t,i,e);return Dr(s!==null),s}return n}function m3(t,e){function n(r,i){const s=p3(t,e,i);return Dr(s!==null),s}return n}function g3(t,e){function n(r,i){const s=XP(t,i,e);return Dr(s!==null),d3(s,i,t.host,t._protocol)}return n}function dl(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=D5():i=k5():n.getStatus()===402?i=P5(t.bucket):n.getStatus()===403?i=N5(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function xp(t){const e=dl(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=b5(t.path)),s.serverResponse=i.serverResponse,s}return n}function JP(t,e,n){const r=e.fullServerUrl(),i=Es(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new vi(i,s,Rp(t,n),o);return a.errorHandler=xp(e),a}function y3(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Es(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,c=new vi(a,l,m3(t,e.bucket),u);return c.urlParams=s,c.errorHandler=dl(e),c}function v3(t,e,n){const r=e.fullServerUrl(),i=Es(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new vi(i,s,g3(t,n),o);return a.errorHandler=xp(e),a}function _3(t,e,n,r){const i=e.fullServerUrl(),s=Es(i,t.host,t._protocol),o="PATCH",a=zw(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,c=new vi(s,o,Rp(t,r),u);return c.headers=l,c.body=a,c.errorHandler=xp(e),c}function w3(t,e){const n=e.fullServerUrl(),r=Es(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new vi(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=xp(e),a}function E3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ZP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=E3(null,e)),r}function T3(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let g=0;g<2;g++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=ZP(e,r,i),c=zw(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=zr.getBlob(h,r,d);if(f===null)throw BP();const p={name:u.fullPath},m=Es(s,t.host,t._protocol),E="POST",v=t.maxUploadRetryTime,_=new vi(m,E,Rp(t,n),v);return _.urlParams=p,_.headers=o,_.body=f.uploadData(),_.errorHandler=dl(e),_}class of{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function qw(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Dr(!1)}return Dr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function I3(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=ZP(e,r,i),a={name:o.fullPath},l=Es(s,t.host,t._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=zw(o,n),d=t.maxUploadRetryTime;function f(m){qw(m);let E;try{E=m.getResponseHeader("X-Goog-Upload-URL")}catch{Dr(!1)}return Dr(Ip(E)),E}const p=new vi(l,u,f,d);return p.urlParams=a,p.headers=c,p.body=h,p.errorHandler=dl(e),p}function S3(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const c=qw(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Dr(!1)}h||Dr(!1);const d=Number(h);return Dr(!isNaN(d)),new of(d,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,l=new vi(n,o,s,a);return l.headers=i,l.errorHandler=dl(e),l}const Y1=256*1024;function R3(t,e,n,r,i,s,o,a){const l=new of(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw F5();const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const h=l.current,d=h+c;let f="";c===0?f="finalize":u===c?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(h,d);if(m===null)throw BP();function E(g,R){const S=qw(g,["active","final"]),I=l.current+c,x=r.size();let D;return S==="final"?D=Rp(e,s)(g,R):D=null,new of(I,x,S==="final",D)}const v="POST",_=e.maxUploadRetryTime,w=new vi(n,v,E,_);return w.headers=p,w.body=m.uploadData(),w.progressCallback=a||null,w.errorHandler=dl(t),w}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3={STATE_CHANGED:"state_changed"},sn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $m(t){switch(t){case"running":case"pausing":case"canceling":return sn.RUNNING;case"paused":return sn.PAUSED;case"success":return sn.SUCCESS;case"canceled":return sn.CANCELED;case"error":return sn.ERROR;default:return sn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n,r){if(q5(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class A3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Fl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class b3 extends A3{initXhr(){this.xhr_.responseType="text"}}function Er(){return new b3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Sp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(He.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(KP(i.status,[]))if(s)i=$P();else{this.sleepTime=Math.max(this.sleepTime*2,A5),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(He.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=I3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Er,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=S3(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Er,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Y1*this._chunkMultiplier,n=new of(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=R3(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Er,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Y1*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=JP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Er,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=T3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Er,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=jP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=$m(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new C3(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch($m(this._state)){case sn.SUCCESS:Fo(this._resolve.bind(null,this.snapshot))();break;case sn.CANCELED:case sn.ERROR:const n=this._reject;Fo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($m(this._state)){case sn.RUNNING:case sn.PAUSED:e.next&&Fo(e.next.bind(e,this.snapshot))();break;case sn.SUCCESS:e.complete&&Fo(e.complete.bind(e))();break;case sn.CANCELED:case sn.ERROR:e.error&&Fo(e.error.bind(e,this._error))();break;default:e.error&&Fo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this._service=e,n instanceof Wt?this._location=n:this._location=Wt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vo(e,n)}get root(){const e=new Wt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YP(this._location.path)}get storage(){return this._service}get parent(){const e=o3(this._location.path);if(e===null)return null;const n=new Wt(this._location.bucket,e);return new vo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw zP(e)}}function P3(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ek(t,new zr(e),n)}function k3(t){const e={prefixes:[],items:[]};return tk(t,e).then(()=>e)}async function tk(t,e,n){const i=await nk(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await tk(t,e,i.nextPageToken)}function nk(t,e){e!=null&&typeof e.maxResults=="number"&&Gy("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=y3(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Er)}function D3(t){t._throwIfRoot("getMetadata");const e=JP(t.storage,t._location,Sp());return t.storage.makeRequestWithTokens(e,Er)}function N3(t,e){t._throwIfRoot("updateMetadata");const n=_3(t.storage,t._location,e,Sp());return t.storage.makeRequestWithTokens(n,Er)}function O3(t){t._throwIfRoot("getDownloadURL");const e=v3(t.storage,t._location,Sp());return t.storage.makeRequestWithTokens(e,Er).then(n=>{if(n===null)throw L5();return n})}function V3(t){t._throwIfRoot("deleteObject");const e=w3(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Er)}function rk(t,e){const n=a3(t._location.path,e),r=new Wt(t._location.bucket,n);return new vo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){return/^[A-Za-z]+:\/\//.test(t)}function F3(t,e){return new vo(t,e)}function ik(t,e){if(t instanceof Kw){const n=t;if(n._bucket==null)throw M5();const r=new vo(n,n._bucket);return e!=null?ik(r,e):r}else return e!==void 0?rk(t,e):t}function L3(t,e){if(e&&M3(e)){if(t instanceof Kw)return F3(t,e);throw wa("To use ref(service, url), the first argument must be a Storage instance.")}else return ik(t,e)}function X1(t,e){const n=e==null?void 0:e[LP];return n==null?null:Wt.makeFromBucketSpec(n,t)}function $3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:rC(i,t.app.options.projectId))}class Kw{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=FP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=x5,this._maxUploadRetryTime=C5,this._requests=new Set,i!=null?this._bucket=Wt.makeFromBucketSpec(i,this._host):this._bucket=X1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wt.makeFromBucketSpec(this._url,e):this._bucket=X1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new j5(UP());{const o=X5(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const J1="@firebase/storage",Z1="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3="storage";function B3(t,e,n){return t=Ve(t),P3(t,e,n)}function U3(t){return t=Ve(t),D3(t)}function z3(t,e){return t=Ve(t),N3(t,e)}function q3(t,e){return t=Ve(t),nk(t,e)}function K3(t){return t=Ve(t),k3(t)}function G3(t){return t=Ve(t),O3(t)}function H3(t){return t=Ve(t),V3(t)}function eI(t,e){return t=Ve(t),L3(t,e)}function Q3(t,e){return rk(t,e)}function W3(t,e,n,r={}){$3(t,e,n,r)}function Y3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Kw(n,r,i,e,Lf)}function X3(){ao(new ai(j3,Y3,"PUBLIC").setMultipleInstances(!0)),Pr(J1,Z1,""),Pr(J1,Z1,"esm2017")}X3();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ph(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Ph(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Ph(o,this,this._ref)):s={next:n.next?o=>n.next(new Ph(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class nI{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Jr(e,this._service))}get items(){return this._delegate.items.map(e=>new Jr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=Q3(this._delegate,e);return new Jr(n,this.storage)}get root(){return new Jr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Jr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new tI(B3(this._delegate,e,n),this)}putString(e,n=Hn.RAW,r){this._throwIfRoot("putString");const i=GP(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new tI(new ek(this._delegate,new zr(i.data,!0),s),this)}listAll(){return K3(this._delegate).then(e=>new nI(e,this.storage))}list(e){return q3(this._delegate,e||void 0).then(n=>new nI(n,this.storage))}getMetadata(){return U3(this._delegate)}updateMetadata(e){return z3(this._delegate,e)}getDownloadURL(){return G3(this._delegate)}delete(){return this._throwIfRoot("delete"),H3(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw zP(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(rI(e))throw wa("ref() expected a child path but got a URL, use refFromURL instead.");return new Jr(eI(this._delegate,e),this)}refFromURL(e){if(!rI(e))throw wa("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Wt.makeFromUrl(e,this._delegate.host)}catch{throw wa("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jr(eI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){W3(this._delegate,e,n,r)}}function rI(t){return/^[A-Za-z]+:\/\//.test(t)}const J3="@firebase/storage-compat",Z3="0.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6="storage-compat";function t6(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new sk(n,r)}function n6(t){const e={TaskState:sn,TaskEvent:x3,StringFormat:Hn,Storage:sk,Reference:Jr};t.INTERNAL.registerComponent(new ai(e6,t6,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(J3,Z3)}n6(tl);const Gw=tl.firestore(),r6=async(t,e)=>{try{return(await t.get()).exists?(console.log(`${e} is ready exist!`),!0):(console.log(`${e} is not exist!`),!1)}catch(n){throw n}},i6=(t,e,n)=>{const{Types:r,zhName:i,enName:s,pokeId:o,sprite:a}=n,l=Gw.batch();l.set(t,{sprite:a,pokeId:o,zhName:i,enName:s,types:r,num_shards:e});for(let u=0;u<e;u++){const c=t.collection("shards").doc(u.toString());l.set(c,{count:0})}return l.commit()},s6=(t,e,n)=>{const r=Math.floor(Math.random()*e).toString();return t.collection("shards").doc(r).update("count",tl.firestore.FieldValue.increment(n))},o6=async()=>{console.log("get all pokemon order");try{const t=await Gw.collection("popular_pokemon").get();if(!t)return;const e=t.docs.map(async r=>{const i=r.data().zhName,s=r.data().enName,o=r.data().types,a=r.data().pokeId,l=r.data().sprite,c=await r.ref.collection("shards").get();if(!c)return;let h=0;return c.forEach(d=>{h+=d.data().count}),{total:h,Types:o,enName:s,zhName:i,pokeId:a,sprite:l}});return await Promise.all(e)}catch(t){throw t}},a6=t=>{try{t.forEach((e,n)=>{l6({count:e,zhName:n})}),console.log("post success")}catch(e){console.log("post error",e)}},l6=async t=>{console.log("post data to firebase");const{zhName:e,count:n}=t,r=10,i=Gw.collection("popular_pokemon").doc(e);await r6(i,e)||i6(i,r,t).then(o=>console.log(`Create new pokemon ${e} successful.`)).catch(o=>console.log(`Something wrong when create pokemon, msg:${o.message}`)),await s6(i,r,n).then(o=>console.log(`${e} count is increase`)).catch(o=>console.log(o.message))},u6=()=>{const{handlePopularPokemon:t}=er();y.useEffect(()=>{o6().then(e=>{e.sort((n,r)=>r.total-n.total),t(e)})},[])},c6=()=>{const{bestDamage:t,popularPokemon:e,handleFilterBestPokemon:n}=er();y.useEffect(()=>{const r=(e??[]).filter(i=>{let s=!1;if(i.Types.forEach(o=>{t.forEach(a=>{a.zhType===o.zhType&&(s=!0)})}),s)return i});n(r)},[t])};function ok(t,e){return function(){return t.apply(e,arguments)}}const{toString:h6}=Object.prototype,{getPrototypeOf:Hw}=Object,Cp=(t=>e=>{const n=h6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fr=t=>(t=t.toLowerCase(),e=>Cp(e)===t),Ap=t=>e=>typeof e===t,{isArray:fl}=Array,dc=Ap("undefined");function d6(t){return t!==null&&!dc(t)&&t.constructor!==null&&!dc(t.constructor)&&Wn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ak=Fr("ArrayBuffer");function f6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ak(t.buffer),e}const p6=Ap("string"),Wn=Ap("function"),lk=Ap("number"),bp=t=>t!==null&&typeof t=="object",m6=t=>t===!0||t===!1,rd=t=>{if(Cp(t)!=="object")return!1;const e=Hw(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},g6=Fr("Date"),y6=Fr("File"),v6=Fr("Blob"),_6=Fr("FileList"),w6=t=>bp(t)&&Wn(t.pipe),E6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Wn(t.append)&&((e=Cp(t))==="formdata"||e==="object"&&Wn(t.toString)&&t.toString()==="[object FormData]"))},T6=Fr("URLSearchParams"),I6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),fl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function uk(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const ck=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),hk=t=>!dc(t)&&t!==ck;function Hy(){const{caseless:t}=hk(this)&&this||{},e={},n=(r,i)=>{const s=t&&uk(e,i)||i;rd(e[s])&&rd(r)?e[s]=Hy(e[s],r):rd(r)?e[s]=Hy({},r):fl(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Hc(arguments[r],n);return e}const S6=(t,e,n,{allOwnKeys:r}={})=>(Hc(e,(i,s)=>{n&&Wn(i)?t[s]=ok(i,n):t[s]=i},{allOwnKeys:r}),t),R6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),x6=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},C6=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Hw(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},A6=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},b6=t=>{if(!t)return null;if(fl(t))return t;let e=t.length;if(!lk(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},P6=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Hw(Uint8Array)),k6=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},D6=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},N6=Fr("HTMLFormElement"),O6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),iI=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),V6=Fr("RegExp"),dk=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Hc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},M6=t=>{dk(t,(e,n)=>{if(Wn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Wn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},F6=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return fl(t)?r(t):r(String(t).split(e)),n},L6=()=>{},$6=(t,e)=>(t=+t,Number.isFinite(t)?t:e),jm="abcdefghijklmnopqrstuvwxyz",sI="0123456789",fk={DIGIT:sI,ALPHA:jm,ALPHA_DIGIT:jm+jm.toUpperCase()+sI},j6=(t=16,e=fk.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function B6(t){return!!(t&&Wn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const U6=t=>{const e=new Array(10),n=(r,i)=>{if(bp(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=fl(r)?[]:{};return Hc(r,(o,a)=>{const l=n(o,i+1);!dc(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},z6=Fr("AsyncFunction"),q6=t=>t&&(bp(t)||Wn(t))&&Wn(t.then)&&Wn(t.catch),k={isArray:fl,isArrayBuffer:ak,isBuffer:d6,isFormData:E6,isArrayBufferView:f6,isString:p6,isNumber:lk,isBoolean:m6,isObject:bp,isPlainObject:rd,isUndefined:dc,isDate:g6,isFile:y6,isBlob:v6,isRegExp:V6,isFunction:Wn,isStream:w6,isURLSearchParams:T6,isTypedArray:P6,isFileList:_6,forEach:Hc,merge:Hy,extend:S6,trim:I6,stripBOM:R6,inherits:x6,toFlatObject:C6,kindOf:Cp,kindOfTest:Fr,endsWith:A6,toArray:b6,forEachEntry:k6,matchAll:D6,isHTMLForm:N6,hasOwnProperty:iI,hasOwnProp:iI,reduceDescriptors:dk,freezeMethods:M6,toObjectSet:F6,toCamelCase:O6,noop:L6,toFiniteNumber:$6,findKey:uk,global:ck,isContextDefined:hk,ALPHABET:fk,generateString:j6,isSpecCompliantForm:B6,toJSONObject:U6,isAsyncFn:z6,isThenable:q6};function Se(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}k.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const pk=Se.prototype,mk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mk[t]={value:t}});Object.defineProperties(Se,mk);Object.defineProperty(pk,"isAxiosError",{value:!0});Se.from=(t,e,n,r,i,s)=>{const o=Object.create(pk);return k.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Se.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const K6=null;function Qy(t){return k.isPlainObject(t)||k.isArray(t)}function gk(t){return k.endsWith(t,"[]")?t.slice(0,-2):t}function oI(t,e,n){return t?t.concat(e).map(function(i,s){return i=gk(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function G6(t){return k.isArray(t)&&!t.some(Qy)}const H6=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function Pp(t,e,n){if(!k.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,E){return!k.isUndefined(E[m])});const r=n.metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(i))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(k.isDate(p))return p.toISOString();if(!l&&k.isBlob(p))throw new Se("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(p)||k.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,E){let v=p;if(p&&!E&&typeof p=="object"){if(k.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(k.isArray(p)&&G6(p)||(k.isFileList(p)||k.endsWith(m,"[]"))&&(v=k.toArray(p)))return m=gk(m),v.forEach(function(w,g){!(k.isUndefined(w)||w===null)&&e.append(o===!0?oI([m],g,s):o===null?m:m+"[]",u(w))}),!1}return Qy(p)?!0:(e.append(oI(E,m,s),u(p)),!1)}const h=[],d=Object.assign(H6,{defaultVisitor:c,convertValue:u,isVisitable:Qy});function f(p,m){if(!k.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(p),k.forEach(p,function(v,_){(!(k.isUndefined(v)||v===null)&&i.call(e,v,k.isString(_)?_.trim():_,m,d))===!0&&f(v,m?m.concat(_):[_])}),h.pop()}}if(!k.isObject(t))throw new TypeError("data must be an object");return f(t),e}function aI(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Qw(t,e){this._pairs=[],t&&Pp(t,this,e)}const yk=Qw.prototype;yk.append=function(e,n){this._pairs.push([e,n])};yk.toString=function(e){const n=e?function(r){return e.call(this,r,aI)}:aI;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Q6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vk(t,e,n){if(!e)return t;const r=n&&n.encode||Q6,i=n&&n.serialize;let s;if(i?s=i(e,n):s=k.isURLSearchParams(e)?e.toString():new Qw(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class W6{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(r){r!==null&&e(r)})}}const lI=W6,_k={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Y6=typeof URLSearchParams<"u"?URLSearchParams:Qw,X6=typeof FormData<"u"?FormData:null,J6=typeof Blob<"u"?Blob:null,Z6=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),ez=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),xr={isBrowser:!0,classes:{URLSearchParams:Y6,FormData:X6,Blob:J6},isStandardBrowserEnv:Z6,isStandardBrowserWebWorkerEnv:ez,protocols:["http","https","file","blob","url","data"]};function tz(t,e){return Pp(t,new xr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return xr.isNode&&k.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function nz(t){return k.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rz(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function wk(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&k.isArray(i)?i.length:o,l?(k.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!k.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&k.isArray(i[o])&&(i[o]=rz(i[o])),!a)}if(k.isFormData(t)&&k.isFunction(t.entries)){const n={};return k.forEachEntry(t,(r,i)=>{e(nz(r),i,n,0)}),n}return null}function iz(t,e,n){if(k.isString(t))try{return(e||JSON.parse)(t),k.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ww={transitional:_k,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=k.isObject(e);if(s&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return i&&i?JSON.stringify(wk(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return tz(e,this.formSerializer).toString();if((a=k.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Pp(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),iz(e)):e}],transformResponse:[function(e){const n=this.transitional||Ww.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&k.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Se.from(a,Se.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xr.classes.FormData,Blob:xr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],t=>{Ww.headers[t]={}});const Yw=Ww,sz=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oz=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&sz[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},uI=Symbol("internals");function Ll(t){return t&&String(t).trim().toLowerCase()}function id(t){return t===!1||t==null?t:k.isArray(t)?t.map(id):String(t)}function az(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const lz=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Bm(t,e,n,r,i){if(k.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!k.isString(e)){if(k.isString(r))return e.indexOf(r)!==-1;if(k.isRegExp(r))return r.test(e)}}function uz(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function cz(t,e){const n=k.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class kp{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,u){const c=Ll(l);if(!c)throw new Error("header name must be a non-empty string");const h=k.findKey(i,c);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||l]=id(a))}const o=(a,l)=>k.forEach(a,(u,c)=>s(u,c,l));return k.isPlainObject(e)||e instanceof this.constructor?o(e,n):k.isString(e)&&(e=e.trim())&&!lz(e)?o(oz(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Ll(e),e){const r=k.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return az(i);if(k.isFunction(n))return n.call(this,i,r);if(k.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ll(e),e){const r=k.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Bm(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Ll(o),o){const a=k.findKey(r,o);a&&(!n||Bm(r,r[a],a,n))&&(delete r[a],i=!0)}}return k.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Bm(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return k.forEach(this,(i,s)=>{const o=k.findKey(r,s);if(o){n[o]=id(i),delete n[s];return}const a=e?uz(s):String(s).trim();a!==s&&delete n[s],n[a]=id(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return k.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&k.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[uI]=this[uI]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Ll(o);r[a]||(cz(i,o),r[a]=!0)}return k.isArray(e)?e.forEach(s):s(e),this}}kp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(kp.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});k.freezeMethods(kp);const Zr=kp;function Um(t,e){const n=this||Yw,r=e||n,i=Zr.from(r.headers);let s=r.data;return k.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Ek(t){return!!(t&&t.__CANCEL__)}function Qc(t,e,n){Se.call(this,t??"canceled",Se.ERR_CANCELED,e,n),this.name="CanceledError"}k.inherits(Qc,Se,{__CANCEL__:!0});function hz(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Se("Request failed with status code "+n.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const dz=xr.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,a){const l=[];l.push(n+"="+encodeURIComponent(r)),k.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),k.isString(s)&&l.push("path="+s),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function fz(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function pz(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Tk(t,e){return t&&!fz(e)?pz(t,e):e}const mz=xr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=k.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function gz(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function yz(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];o||(o=u),n[i]=l,r[i]=u;let h=s,d=0;for(;h!==i;)d+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const f=c&&u-c;return f?Math.round(d*1e3/f):void 0}}function cI(t,e){let n=0;const r=yz(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),u=s<=o;n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const vz=typeof XMLHttpRequest<"u",_z=vz&&function(t){return new Promise(function(n,r){let i=t.data;const s=Zr.from(t.headers).normalize(),o=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let u;k.isFormData(i)&&(xr.isStandardBrowserEnv||xr.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?k.isString(u=s.getContentType())&&s.setContentType(u.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+m))}const h=Tk(t.baseURL,t.url);c.open(t.method.toUpperCase(),vk(h,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const p=Zr.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),E={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:p,config:t,request:c};hz(function(_){n(_),l()},function(_){r(_),l()},E),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(r(new Se("Request aborted",Se.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new Se("Network Error",Se.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const E=t.transitional||_k;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),r(new Se(m,E.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,t,c)),c=null},xr.isStandardBrowserEnv){const p=(t.withCredentials||mz(h))&&t.xsrfCookieName&&dz.read(t.xsrfCookieName);p&&s.set(t.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in c&&k.forEach(s.toJSON(),function(m,E){c.setRequestHeader(E,m)}),k.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",cI(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",cI(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=p=>{c&&(r(!p||p.type?new Qc(null,t,c):p),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const f=gz(h);if(f&&xr.protocols.indexOf(f)===-1){r(new Se("Unsupported protocol "+f+":",Se.ERR_BAD_REQUEST,t));return}c.send(i||null)})},Wy={http:K6,xhr:_z};k.forEach(Wy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const hI=t=>`- ${t}`,wz=t=>k.isFunction(t)||t===null||t===!1,Ik={getAdapter:t=>{t=k.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!wz(n)&&(r=Wy[(o=String(n)).toLowerCase()],r===void 0))throw new Se(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(hI).join(`
`):" "+hI(s[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Wy};function zm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qc(null,t)}function dI(t){return zm(t),t.headers=Zr.from(t.headers),t.data=Um.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ik.getAdapter(t.adapter||Yw.adapter)(t).then(function(r){return zm(t),r.data=Um.call(t,t.transformResponse,r),r.headers=Zr.from(r.headers),r},function(r){return Ek(r)||(zm(t),r&&r.response&&(r.response.data=Um.call(t,t.transformResponse,r.response),r.response.headers=Zr.from(r.response.headers))),Promise.reject(r)})}const fI=t=>t instanceof Zr?t.toJSON():t;function za(t,e){e=e||{};const n={};function r(u,c,h){return k.isPlainObject(u)&&k.isPlainObject(c)?k.merge.call({caseless:h},u,c):k.isPlainObject(c)?k.merge({},c):k.isArray(c)?c.slice():c}function i(u,c,h){if(k.isUndefined(c)){if(!k.isUndefined(u))return r(void 0,u,h)}else return r(u,c,h)}function s(u,c){if(!k.isUndefined(c))return r(void 0,c)}function o(u,c){if(k.isUndefined(c)){if(!k.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,h){if(h in e)return r(u,c);if(h in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>i(fI(u),fI(c),!0)};return k.forEach(Object.keys(Object.assign({},t,e)),function(c){const h=l[c]||i,d=h(t[c],e[c],c);k.isUndefined(d)&&h!==a||(n[c]=d)}),n}const Sk="1.5.1",Xw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Xw[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const pI={};Xw.transitional=function(e,n,r){function i(s,o){return"[Axios v"+Sk+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Se(i(o," has been removed"+(n?" in "+n:"")),Se.ERR_DEPRECATED);return n&&!pI[o]&&(pI[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Ez(t,e,n){if(typeof t!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Se("option "+s+" must be "+l,Se.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Se("Unknown option "+s,Se.ERR_BAD_OPTION)}}const Yy={assertOptions:Ez,validators:Xw},xi=Yy.validators;class af{constructor(e){this.defaults=e,this.interceptors={request:new lI,response:new lI}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=za(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Yy.assertOptions(r,{silentJSONParsing:xi.transitional(xi.boolean),forcedJSONParsing:xi.transitional(xi.boolean),clarifyTimeoutError:xi.transitional(xi.boolean)},!1),i!=null&&(k.isFunction(i)?n.paramsSerializer={serialize:i}:Yy.assertOptions(i,{encode:xi.function,serialize:xi.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&k.merge(s.common,s[n.method]);s&&k.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Zr.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let c,h=0,d;if(!l){const p=[dI.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),d=p.length,c=Promise.resolve(n);h<d;)c=c.then(p[h++],p[h++]);return c}d=a.length;let f=n;for(h=0;h<d;){const p=a[h++],m=a[h++];try{f=p(f)}catch(E){m.call(this,E);break}}try{c=dI.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=za(this.defaults,e);const n=Tk(e.baseURL,e.url);return vk(n,e.params,e.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(e){af.prototype[e]=function(n,r){return this.request(za(r||{},{method:e,url:n,data:(r||{}).data}))}});k.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(za(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}af.prototype[e]=n(),af.prototype[e+"Form"]=n(!0)});const sd=af;class Jw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Qc(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Jw(function(i){e=i}),cancel:e}}}const Tz=Jw;function Iz(t){return function(n){return t.apply(null,n)}}function Sz(t){return k.isObject(t)&&t.isAxiosError===!0}const Xy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xy).forEach(([t,e])=>{Xy[e]=t});const Rz=Xy;function Rk(t){const e=new sd(t),n=ok(sd.prototype.request,e);return k.extend(n,sd.prototype,e,{allOwnKeys:!0}),k.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Rk(za(t,i))},n}const _t=Rk(Yw);_t.Axios=sd;_t.CanceledError=Qc;_t.CancelToken=Tz;_t.isCancel=Ek;_t.VERSION=Sk;_t.toFormData=Pp;_t.AxiosError=Se;_t.Cancel=_t.CanceledError;_t.all=function(e){return Promise.all(e)};_t.spread=Iz;_t.isAxiosError=Sz;_t.mergeConfig=za;_t.AxiosHeaders=Zr;_t.formToJSON=t=>wk(k.isHTMLForm(t)?new FormData(t):t);_t.getAdapter=Ik.getAdapter;_t.HttpStatusCode=Rz;_t.default=_t;const xk=_t,xz="https://pokeapi.co/api/v2/type/",Cz="zh-Hant",Az=50,mI=t=>xk(t).then(e=>e.data),bz=()=>{const t="pokemon_details",e=`query ${t} {
            pokemon_v2_pokemon(order_by: {id: asc}) {
                name
                id
                pokemon_v2_pokemonsprites {
                    id
                    sprites
                }
                pokemon_v2_pokemontypes {
                    pokemon_v2_type {
                        name
                    }
                }
            }
            pokemon_v2_pokemonspecies(order_by: {id: asc}) {
                name
                id
                pokemon_v2_pokemonspeciesnames {
                name
                language_id
                pokemon_v2_language {
                    name
                }
                }
            }
        }`;return kx({queryKey:["pokemonInfo"],queryFn:()=>xk({method:"POST",url:"https://beta.pokeapi.co/graphql/v1beta",data:JSON.stringify({query:e,operationName:t})}),staleTime:1/0})},Pz=()=>{var e;const t=kx({queryKey:["AllTypes"],queryFn:()=>mI(xz)});return BV({queries:(((e=t==null?void 0:t.data)==null?void 0:e.results)??[]).map(n=>{const{url:r}=n;return{queryKey:["TypeDetail",r],queryFn:()=>mI(r),enabled:!!r}})})},kz=()=>{const{handleStoreAllPokemon:t,handleStoreAllTypes:e}=er(),n=bz(),r=Pz(),i=n.data&&!n.isError&!n.isLoading&&r.every(s=>!s.isLoading&&!s.isError&&s.data);y.useEffect(()=>{var u,c;if(!i)return;e(r);const{pokemon_v2_pokemon:s,pokemon_v2_pokemonspecies:o}=(c=(u=n.data)==null?void 0:u.data)==null?void 0:c.data,l=s.map(h=>{const d=o.find(f=>h.id===f.id);return{...h,...d}}).map((h,d)=>{const{id:f,name:p,pokemon_v2_pokemonspeciesnames:m,pokemon_v2_pokemonsprites:E,pokemon_v2_pokemontypes:v}=h;try{const _=m.map(S=>{const{name:I,pokemon_v2_language:x}=S;return{type:x.name,name:I}}),w=m.filter(S=>{var I;return((I=S==null?void 0:S.pokemon_v2_language)==null?void 0:I.name)===Cz}),g=E.map(S=>{const{sprites:I}=S;return I.other["official-artwork"].front_default}),R=v.map(S=>{var M;const{pokemon_v2_type:I}=S,x=Rc.filter(j=>j.enType===I.name)[0],D=r.filter(j=>j.data.name===x.enType)[0];return{...x,damage_relations:(M=D==null?void 0:D.data)==null?void 0:M.damage_relations}});return{pokeId:f,enName:p,zhName:w[0].name,allLanguage:_,sprite:g[0],Types:R,damage_relations:0}}catch(_){console.log(d,h,_)}});t(l)},[i])},Ck=y.createContext(),Dz=({children:t})=>{const[e,n]=y.useState(""),r=$=>{n(()=>$)},[i,s]=y.useState([]),o=$=>{s(()=>$)},[a,l]=y.useState([]),[u,c]=y.useState(!1),[h,d]=y.useState(0),[f,p]=y.useState(!1),m=$=>{l(le=>[...le,...$])},E=$=>{c(()=>$??u)},v=()=>{d($=>$+Az)},_=$=>{p(()=>$)},[w,g]=y.useState(new Map),R=$=>{const{zhName:le}=$;g(Rt=>{let $n=new Map(Rt),Lr=1;return $n.has(le)&&(Lr=$n.get(le)+1),$n.set(le,Lr),console.log($n),$n})},[S,I]=y.useState([]),x=$=>{I(le=>{const Rt=[...le];return Rt.some(Lr=>Lr.enName===$.enName)?Rt.filter(Lr=>Lr.enName!==$.enName):(R($),[...Rt,$])})},D=$=>{I(le=>le.filter(Rt=>Rt.enName!==$.enName))},[M,j]=y.useState([]),W=$=>{j(()=>$)},[J,ve]=y.useState([]),ie=$=>{ve(()=>$.map(le=>le.data))},ce=RF.filter($=>$.default===!0)[0],[_e,F]=y.useState({type:ce.type,title:ce.title}),[q,K]=y.useState({type:ce.type,title:ce.title}),[se,oe]=y.useState({type:ce.type,title:ce.title}),pe=xF.filter($=>$.default===!0)[0],[be,we]=y.useState({type:pe.type,title:pe.title}),[Le,Vt]=y.useState({type:pe.type,title:pe.title}),[Zt,xe]=y.useState({type:pe.type,title:pe.title}),qt=($,le)=>{F({type:$,title:le})},fn=($,le)=>{K({type:$,title:le})},mr=($,le)=>{oe({type:$,title:le})},St=($,le)=>{we({type:$,title:le})},Rn=($,le)=>{Vt({type:$,title:le})},Pe=($,le)=>{xe({type:$,title:le})},[Mn,Fn]=y.useState(Jx),Ss=({enType:$,zhType:le,bgColor:Rt})=>{Fn(()=>({enType:$,zhType:le,bgColor:Rt}))},[Rs,Mt]=y.useState([]),[tr,gr]=y.useState([]),xn=$=>{Mt(()=>$)},Ln=$=>{gr(()=>$)};return T.jsx(Ck.Provider,{value:{clickImg:w,searchPokemon:e,handleSearchPokemon:r,storeAllPokemon:i,handleStoreAllPokemon:o,storePokemon:a,handleStorePokemon:m,isLoadingPokemon:u,handleIsLoadingPokemon:E,page:h,handleNextPage:v,searchMorePokemon:f,handleSearchMorePokemon:_,selectImg:S,AddRemoveImg:x,RemoveImg:D,bestDamage:M,handleBestDamage:W,storeAllTypes:J,handleStoreAllTypes:ie,showInfo_select:_e,showType_select:be,showInfo_beenSelect:q,showType_beenSelect:Le,showInfo_bestDamage:se,showType_bestDamage:Zt,filterType:Mn,handleShowInfo_select:qt,handleShowType_select:St,handleShowInfo_beenSelect:fn,handleShowType_beenSelect:Rn,handleShowInfo_bestDamage:mr,handleShowType_bestDamage:Pe,handleFilterType:Ss,popularPokemon:Rs,filterBestPokemon:tr,handlePopularPokemon:xn,handleFilterBestPokemon:Ln},children:t})},er=()=>y.useContext(Ck);var Ak={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Ak);var Nz=Ak.exports;const te=yc(Nz);function Jy(){return Jy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jy.apply(this,arguments)}function bk(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function gI(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function Oz(t){var e=Vz(t,"string");return typeof e=="symbol"?e:String(e)}function Vz(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mz(t,e,n){var r=y.useRef(t!==void 0),i=y.useState(e),s=i[0],o=i[1],a=t!==void 0,l=r.current;return r.current=a,!a&&l&&s!==e&&o(e),[a?t:s,y.useCallback(function(u){for(var c=arguments.length,h=new Array(c>1?c-1:0),d=1;d<c;d++)h[d-1]=arguments[d];n&&n.apply(void 0,[u].concat(h)),o(u)},[n])]}function Zw(t,e){return Object.keys(e).reduce(function(n,r){var i,s=n,o=s[gI(r)],a=s[r],l=bk(s,[gI(r),r].map(Oz)),u=e[r],c=Mz(a,o,t[u]),h=c[0],d=c[1];return Jy({},l,(i={},i[r]=h,i[u]=d,i))},t)}function Zy(t,e){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Zy(t,e)}function Fz(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Zy(t,e)}const Lz=["xxl","xl","lg","md","sm","xs"],$z="xs",Dp=y.createContext({prefixes:{},breakpoints:Lz,minBreakpoint:$z});function ue(t,e){const{prefixes:n}=y.useContext(Dp);return t||n[e]||e}function Pk(){const{breakpoints:t}=y.useContext(Dp);return t}function kk(){const{minBreakpoint:t}=y.useContext(Dp);return t}function Dk(){const{dir:t}=y.useContext(Dp);return t==="rtl"}function Wc(t){return t&&t.ownerDocument||document}function jz(t){var e=Wc(t);return e&&e.defaultView||window}function Bz(t,e){return jz(t).getComputedStyle(t,e)}var Uz=/([A-Z])/g;function zz(t){return t.replace(Uz,"-$1").toLowerCase()}var qz=/^ms-/;function kh(t){return zz(t).replace(qz,"-ms-")}var Kz=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Gz(t){return!!(t&&Kz.test(t))}function ei(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(kh(e))||Bz(t).getPropertyValue(kh(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(kh(i)):Gz(i)?r+=i+"("+s+") ":n+=kh(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}var Nk={exports:{}},Hz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qz=Hz,Wz=Qz;function Ok(){}function Vk(){}Vk.resetWarningCache=Ok;var Yz=function(){function t(r,i,s,o,a,l){if(l!==Wz){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Vk,resetWarningCache:Ok};return n.PropTypes=n,n};Nk.exports=Yz();var Xz=Nk.exports;const ti=yc(Xz),yI={disabled:!1},Mk=Ke.createContext(null);var Jz=function(e){return e.scrollTop},Zl="unmounted",ki="exited",lr="entering",qr="entered",fc="exiting",_i=function(t){Fz(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=ki,s.appearStatus=lr):l=qr:r.unmountOnExit||r.mountOnEnter?l=Zl:l=ki,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Zl?{status:ki}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==lr&&o!==qr&&(s=lr):(o===lr||o===qr)&&(s=fc)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===lr){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:sa.findDOMNode(this);o&&Jz(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ki&&this.setState({status:Zl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[sa.findDOMNode(this),a],u=l[0],c=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!i&&!o||yI.disabled){this.safeSetState({status:qr},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:lr},function(){s.props.onEntering(u,c),s.onTransitionEnd(d,function(){s.safeSetState({status:qr},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:sa.findDOMNode(this);if(!s||yI.disabled){this.safeSetState({status:ki},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:fc},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:ki},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:sa.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Zl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=bk(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ke.createElement(Mk.Provider,{value:null},typeof o=="function"?o(i,a):Ke.cloneElement(Ke.Children.only(o),a))},e}(Ke.Component);_i.contextType=Mk;_i.propTypes={};function Lo(){}_i.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Lo,onEntering:Lo,onEntered:Lo,onExit:Lo,onExiting:Lo,onExited:Lo};_i.UNMOUNTED=Zl;_i.EXITED=ki;_i.ENTERING=lr;_i.ENTERED=qr;_i.EXITING=fc;const Zz=_i,pl=!!(typeof window<"u"&&window.document&&window.document.createElement);var ev=!1,tv=!1;try{var qm={get passive(){return ev=!0},get once(){return tv=ev=!0}};pl&&(window.addEventListener("test",qm,qm),window.removeEventListener("test",qm,!0))}catch{}function e0(t,e,n,r){if(r&&typeof r!="boolean"&&!tv){var i=r.once,s=r.capture,o=n;!tv&&i&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,ev?r:s)}t.addEventListener(e,n,r)}function nv(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}function $i(t,e,n,r){return e0(t,e,n,r),function(){nv(t,e,n,r)}}function e9(t,e,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function t9(t){var e=ei(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function n9(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||e9(t,"transitionend",!0)},e+n),s=$i(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function Fk(t,e,n,r){n==null&&(n=t9(t)||0);var i=n9(t,n,r),s=$i(t,"transitionend",e);return function(){i(),s()}}function vI(t,e){const n=ei(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function t0(t,e){const n=vI(t,"transitionDuration"),r=vI(t,"transitionDelay"),i=Fk(t,s=>{s.target===t&&(i(),e(s))},n+r)}function $l(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...i){e.apply(this,i),n.apply(this,i)}},null)}function Lk(t){t.offsetHeight}const _I=t=>!t||typeof t=="function"?t:e=>{t.current=e};function r9(t,e){const n=_I(t),r=_I(e);return i=>{n&&n(i),r&&r(i)}}function bo(t,e){return y.useMemo(()=>r9(t,e),[t,e])}function i9(t){return t&&"setState"in t?sa.findDOMNode(t):t??null}const s9=Ke.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:a,childRef:l,...u},c)=>{const h=y.useRef(null),d=bo(h,l),f=S=>{d(i9(S))},p=S=>I=>{S&&h.current&&S(h.current,I)},m=y.useCallback(p(t),[t]),E=y.useCallback(p(e),[e]),v=y.useCallback(p(n),[n]),_=y.useCallback(p(r),[r]),w=y.useCallback(p(i),[i]),g=y.useCallback(p(s),[s]),R=y.useCallback(p(o),[o]);return T.jsx(Zz,{ref:c,...u,onEnter:m,onEntered:v,onEntering:E,onExit:_,onExited:g,onExiting:w,addEndListener:R,nodeRef:h,children:typeof a=="function"?(S,I)=>a(S,{...I,ref:f}):Ke.cloneElement(a,{ref:f})})}),n0=s9,o9={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function a9(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,r=e[n],i=o9[t];return r+parseInt(ei(e,i[0]),10)+parseInt(ei(e,i[1]),10)}const l9={[ki]:"collapse",[fc]:"collapsing",[lr]:"collapsing",[qr]:"collapse show"},u9=Ke.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,className:s,children:o,dimension:a="height",in:l=!1,timeout:u=300,mountOnEnter:c=!1,unmountOnExit:h=!1,appear:d=!1,getDimensionValue:f=a9,...p},m)=>{const E=typeof a=="function"?a():a,v=y.useMemo(()=>$l(S=>{S.style[E]="0"},t),[E,t]),_=y.useMemo(()=>$l(S=>{const I=`scroll${E[0].toUpperCase()}${E.slice(1)}`;S.style[E]=`${S[I]}px`},e),[E,e]),w=y.useMemo(()=>$l(S=>{S.style[E]=null},n),[E,n]),g=y.useMemo(()=>$l(S=>{S.style[E]=`${f(E,S)}px`,Lk(S)},r),[r,f,E]),R=y.useMemo(()=>$l(S=>{S.style[E]=null},i),[E,i]);return T.jsx(n0,{ref:m,addEndListener:t0,...p,"aria-expanded":p.role?l:null,onEnter:v,onEntering:_,onEntered:w,onExit:g,onExiting:R,childRef:o.ref,in:l,timeout:u,mountOnEnter:c,unmountOnExit:h,appear:d,children:(S,I)=>Ke.cloneElement(o,{...I,className:te(s,o.props.className,l9[S],E==="width"&&"collapse-horizontal")})})}),$k=u9;function c9(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t},[t]),e}function lt(t){const e=c9(t);return y.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const jk=t=>y.forwardRef((e,n)=>T.jsx("div",{...e,ref:n,className:te(e.className,t)}));function Bk(){return y.useState(null)}function h9(t,e,n,r=!1){const i=lt(n);y.useEffect(()=>{const s=typeof t=="function"?t():t;return s.addEventListener(e,i,r),()=>s.removeEventListener(e,i,r)},[t])}function Uk(){const t=y.useRef(!0),e=y.useRef(()=>t.current);return y.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function zk(t){const e=y.useRef(null);return y.useEffect(()=>{e.current=t}),e.current}const d9=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",f9=typeof document<"u",lf=f9||d9?y.useLayoutEffect:y.useEffect,p9=["as","disabled"];function m9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function g9(t){return!t||t.trim()==="#"}function r0({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||r!=null||i!=null?t="a":t="button");const u={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},u];const c=d=>{if((e||t==="a"&&g9(n))&&d.preventDefault(),e){d.stopPropagation();return}o==null||o(d)},h=d=>{d.key===" "&&(d.preventDefault(),c(d))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:c,onKeyDown:h},u]}const i0=y.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=m9(t,p9);const[s,{tagName:o}]=r0(Object.assign({tagName:n,disabled:r},i));return T.jsx(o,Object.assign({},i,s,{ref:e}))});i0.displayName="Button";const y9=["onKeyDown"];function v9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function _9(t){return!t||t.trim()==="#"}const qk=y.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=v9(t,y9);const[i]=r0(Object.assign({tagName:"a"},r)),s=lt(o=>{i.onKeyDown(o),n==null||n(o)});return _9(r.href)||r.role==="button"?T.jsx("a",Object.assign({ref:e},r,i,{onKeyDown:s})):T.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});qk.displayName="Anchor";const Kk=qk,w9={[lr]:"show",[qr]:"show"},Gk=y.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=y.useCallback((l,u)=>{Lk(l),r==null||r(l,u)},[r]);return T.jsx(n0,{ref:s,addEndListener:t0,...o,onEnter:a,childRef:e.ref,children:(l,u)=>y.cloneElement(e,{...u,className:te("fade",t,e.props.className,w9[l],n[l])})})});Gk.displayName="Fade";const s0=Gk,E9={"aria-label":ti.string,onClick:ti.func,variant:ti.oneOf(["white"])},o0=y.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>T.jsx("button",{ref:i,type:"button",className:te("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));o0.displayName="CloseButton";o0.propTypes=E9;const T9=o0,Hk=y.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:o,...a},l)=>{const u=ue(e,"btn"),[c,{tagName:h}]=r0({tagName:t,disabled:s,...a}),d=h;return T.jsx(d,{...c,...a,ref:l,disabled:s,className:te(o,u,i&&"active",n&&`${u}-${n}`,r&&`${u}-${r}`,a.href&&s&&"disabled")})});Hk.displayName="Button";const Qk=Hk,Wk=y.forwardRef(({bsPrefix:t,size:e,vertical:n=!1,className:r,role:i="group",as:s="div",...o},a)=>{const l=ue(t,"btn-group");let u=l;return n&&(u=`${l}-vertical`),T.jsx(s,{...o,ref:a,role:i,className:te(r,u,e&&`${l}-${e}`)})});Wk.displayName="ButtonGroup";const I9=Wk,Yk=y.createContext(null);Yk.displayName="CardHeaderContext";const S9=Yk;function R9(t){const e=y.useRef(t);return e.current=t,e}function Xk(t){const e=R9(t);y.useEffect(()=>()=>e.current(),[])}function x9(t,e){return y.Children.toArray(t).some(n=>y.isValidElement(n)&&n.type===e)}function C9({as:t,bsPrefix:e,className:n,...r}){e=ue(e,"col");const i=Pk(),s=kk(),o=[],a=[];return i.forEach(l=>{const u=r[l];delete r[l];let c,h,d;typeof u=="object"&&u!=null?{span:c,offset:h,order:d}=u:c=u;const f=l!==s?`-${l}`:"";c&&o.push(c===!0?`${e}${f}`:`${e}${f}-${c}`),d!=null&&a.push(`order${f}-${d}`),h!=null&&a.push(`offset${f}-${h}`)}),[{...r,className:te(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const Jk=y.forwardRef((t,e)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=C9(t);return T.jsx(i,{...r,ref:e,className:te(n,!o.length&&s)})});Jk.displayName="Col";const eu=Jk,Zk=y.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...i},s)=>{const o=ue(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return T.jsx(n,{ref:s,...i,className:te(r,e?`${o}${a}`:o)})});Zk.displayName="Container";const a0=Zk;var A9=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ur(t,e){return A9(t.querySelectorAll(e))}function b9(t,e,n){const r=y.useRef(t!==void 0),[i,s]=y.useState(e),o=t!==void 0,a=r.current;return r.current=o,!o&&a&&i!==e&&s(e),[o?t:i,y.useCallback((...l)=>{const[u,...c]=l;let h=n==null?void 0:n(u,...c);return s(u),h},[n])]}function eD(){const[,t]=y.useReducer(e=>!e,!1);return t}const P9=y.createContext(null),Np=P9;var wI=Object.prototype.hasOwnProperty;function EI(t,e,n){for(n of t.keys())if(wu(n,e))return n}function wu(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&wu(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=EI(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=EI(e,i),!i)||!wu(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(wI.call(t,n)&&++r&&!wI.call(e,n)||!(n in e)||!wu(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function k9(t){const e=Uk();return[t[0],y.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var In="top",Jn="bottom",Zn="right",Sn="left",l0="auto",Yc=[In,Jn,Zn,Sn],qa="start",pc="end",D9="clippingParents",tD="viewport",jl="popper",N9="reference",TI=Yc.reduce(function(t,e){return t.concat([e+"-"+qa,e+"-"+pc])},[]),nD=[].concat(Yc,[l0]).reduce(function(t,e){return t.concat([e,e+"-"+qa,e+"-"+pc])},[]),O9="beforeRead",V9="read",M9="afterRead",F9="beforeMain",L9="main",$9="afterMain",j9="beforeWrite",B9="write",U9="afterWrite",z9=[O9,V9,M9,F9,L9,$9,j9,B9,U9];function Nr(t){return t.split("-")[0]}function Nn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function _o(t){var e=Nn(t).Element;return t instanceof e||t instanceof Element}function Or(t){var e=Nn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function u0(t){if(typeof ShadowRoot>"u")return!1;var e=Nn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Js=Math.max,uf=Math.min,Ka=Math.round;function rv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function rD(){return!/^((?!chrome|android).)*safari/i.test(rv())}function Ga(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Or(t)&&(i=t.offsetWidth>0&&Ka(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Ka(r.height)/t.offsetHeight||1);var o=_o(t)?Nn(t):window,a=o.visualViewport,l=!rD()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/s,h=r.width/i,d=r.height/s;return{width:h,height:d,top:c,right:u+h,bottom:c+d,left:u,x:u,y:c}}function c0(t){var e=Ga(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function iD(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&u0(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function cs(t){return t?(t.nodeName||"").toLowerCase():null}function ci(t){return Nn(t).getComputedStyle(t)}function q9(t){return["table","td","th"].indexOf(cs(t))>=0}function Ts(t){return((_o(t)?t.ownerDocument:t.document)||window.document).documentElement}function Op(t){return cs(t)==="html"?t:t.assignedSlot||t.parentNode||(u0(t)?t.host:null)||Ts(t)}function II(t){return!Or(t)||ci(t).position==="fixed"?null:t.offsetParent}function K9(t){var e=/firefox/i.test(rv()),n=/Trident/i.test(rv());if(n&&Or(t)){var r=ci(t);if(r.position==="fixed")return null}var i=Op(t);for(u0(i)&&(i=i.host);Or(i)&&["html","body"].indexOf(cs(i))<0;){var s=ci(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Xc(t){for(var e=Nn(t),n=II(t);n&&q9(n)&&ci(n).position==="static";)n=II(n);return n&&(cs(n)==="html"||cs(n)==="body"&&ci(n).position==="static")?e:n||K9(t)||e}function h0(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Eu(t,e,n){return Js(t,uf(e,n))}function G9(t,e,n){var r=Eu(t,e,n);return r>n?n:r}function sD(){return{top:0,right:0,bottom:0,left:0}}function oD(t){return Object.assign({},sD(),t)}function aD(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var H9=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,oD(typeof e!="number"?e:aD(e,Yc))};function Q9(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Nr(n.placement),l=h0(a),u=[Sn,Zn].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var h=H9(i.padding,n),d=c0(s),f=l==="y"?In:Sn,p=l==="y"?Jn:Zn,m=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],E=o[l]-n.rects.reference[l],v=Xc(s),_=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,w=m/2-E/2,g=h[f],R=_-d[c]-h[p],S=_/2-d[c]/2+w,I=Eu(g,S,R),x=l;n.modifiersData[r]=(e={},e[x]=I,e.centerOffset=I-S,e)}}function W9(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||iD(e.elements.popper,i)&&(e.elements.arrow=i))}const Y9={name:"arrow",enabled:!0,phase:"main",fn:Q9,effect:W9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ha(t){return t.split("-")[1]}var X9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function J9(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ka(n*i)/i||0,y:Ka(r*i)/i||0}}function SI(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,h=t.isFixed,d=o.x,f=d===void 0?0:d,p=o.y,m=p===void 0?0:p,E=typeof c=="function"?c({x:f,y:m}):{x:f,y:m};f=E.x,m=E.y;var v=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),w=Sn,g=In,R=window;if(u){var S=Xc(n),I="clientHeight",x="clientWidth";if(S===Nn(n)&&(S=Ts(n),ci(S).position!=="static"&&a==="absolute"&&(I="scrollHeight",x="scrollWidth")),S=S,i===In||(i===Sn||i===Zn)&&s===pc){g=Jn;var D=h&&S===R&&R.visualViewport?R.visualViewport.height:S[I];m-=D-r.height,m*=l?1:-1}if(i===Sn||(i===In||i===Jn)&&s===pc){w=Zn;var M=h&&S===R&&R.visualViewport?R.visualViewport.width:S[x];f-=M-r.width,f*=l?1:-1}}var j=Object.assign({position:a},u&&X9),W=c===!0?J9({x:f,y:m},Nn(n)):{x:f,y:m};if(f=W.x,m=W.y,l){var J;return Object.assign({},j,(J={},J[g]=_?"0":"",J[w]=v?"0":"",J.transform=(R.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",J))}return Object.assign({},j,(e={},e[g]=_?m+"px":"",e[w]=v?f+"px":"",e.transform="",e))}function Z9(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Nr(e.placement),variation:Ha(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,SI(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,SI(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const eq={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Z9,data:{}};var Dh={passive:!0};function tq(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Nn(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,Dh)}),a&&l.addEventListener("resize",n.update,Dh),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Dh)}),a&&l.removeEventListener("resize",n.update,Dh)}}const nq={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tq,data:{}};var rq={left:"right",right:"left",bottom:"top",top:"bottom"};function od(t){return t.replace(/left|right|bottom|top/g,function(e){return rq[e]})}var iq={start:"end",end:"start"};function RI(t){return t.replace(/start|end/g,function(e){return iq[e]})}function d0(t){var e=Nn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function f0(t){return Ga(Ts(t)).left+d0(t).scrollLeft}function sq(t,e){var n=Nn(t),r=Ts(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=rD();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+f0(t),y:l}}function oq(t){var e,n=Ts(t),r=d0(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Js(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Js(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+f0(t),l=-r.scrollTop;return ci(i||n).direction==="rtl"&&(a+=Js(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function p0(t){var e=ci(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function lD(t){return["html","body","#document"].indexOf(cs(t))>=0?t.ownerDocument.body:Or(t)&&p0(t)?t:lD(Op(t))}function Tu(t,e){var n;e===void 0&&(e=[]);var r=lD(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Nn(r),o=i?[s].concat(s.visualViewport||[],p0(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Tu(Op(o)))}function iv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function aq(t,e){var n=Ga(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function xI(t,e,n){return e===tD?iv(sq(t,n)):_o(e)?aq(e,n):iv(oq(Ts(t)))}function lq(t){var e=Tu(Op(t)),n=["absolute","fixed"].indexOf(ci(t).position)>=0,r=n&&Or(t)?Xc(t):t;return _o(r)?e.filter(function(i){return _o(i)&&iD(i,r)&&cs(i)!=="body"}):[]}function uq(t,e,n,r){var i=e==="clippingParents"?lq(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,u){var c=xI(t,u,r);return l.top=Js(c.top,l.top),l.right=uf(c.right,l.right),l.bottom=uf(c.bottom,l.bottom),l.left=Js(c.left,l.left),l},xI(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function uD(t){var e=t.reference,n=t.element,r=t.placement,i=r?Nr(r):null,s=r?Ha(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case In:l={x:o,y:e.y-n.height};break;case Jn:l={x:o,y:e.y+e.height};break;case Zn:l={x:e.x+e.width,y:a};break;case Sn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?h0(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case qa:l[u]=l[u]-(e[c]/2-n[c]/2);break;case pc:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function mc(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?D9:a,u=n.rootBoundary,c=u===void 0?tD:u,h=n.elementContext,d=h===void 0?jl:h,f=n.altBoundary,p=f===void 0?!1:f,m=n.padding,E=m===void 0?0:m,v=oD(typeof E!="number"?E:aD(E,Yc)),_=d===jl?N9:jl,w=t.rects.popper,g=t.elements[p?_:d],R=uq(_o(g)?g:g.contextElement||Ts(t.elements.popper),l,c,o),S=Ga(t.elements.reference),I=uD({reference:S,element:w,strategy:"absolute",placement:i}),x=iv(Object.assign({},w,I)),D=d===jl?x:S,M={top:R.top-D.top+v.top,bottom:D.bottom-R.bottom+v.bottom,left:R.left-D.left+v.left,right:D.right-R.right+v.right},j=t.modifiersData.offset;if(d===jl&&j){var W=j[i];Object.keys(M).forEach(function(J){var ve=[Zn,Jn].indexOf(J)>=0?1:-1,ie=[In,Jn].indexOf(J)>=0?"y":"x";M[J]+=W[ie]*ve})}return M}function cq(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?nD:l,c=Ha(r),h=c?a?TI:TI.filter(function(p){return Ha(p)===c}):Yc,d=h.filter(function(p){return u.indexOf(p)>=0});d.length===0&&(d=h);var f=d.reduce(function(p,m){return p[m]=mc(t,{placement:m,boundary:i,rootBoundary:s,padding:o})[Nr(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function hq(t){if(Nr(t)===l0)return[];var e=od(t);return[RI(t),e,RI(e)]}function dq(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,m=n.allowedAutoPlacements,E=e.options.placement,v=Nr(E),_=v===E,w=l||(_||!p?[od(E)]:hq(E)),g=[E].concat(w).reduce(function(be,we){return be.concat(Nr(we)===l0?cq(e,{placement:we,boundary:c,rootBoundary:h,padding:u,flipVariations:p,allowedAutoPlacements:m}):we)},[]),R=e.rects.reference,S=e.rects.popper,I=new Map,x=!0,D=g[0],M=0;M<g.length;M++){var j=g[M],W=Nr(j),J=Ha(j)===qa,ve=[In,Jn].indexOf(W)>=0,ie=ve?"width":"height",ce=mc(e,{placement:j,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),_e=ve?J?Zn:Sn:J?Jn:In;R[ie]>S[ie]&&(_e=od(_e));var F=od(_e),q=[];if(s&&q.push(ce[W]<=0),a&&q.push(ce[_e]<=0,ce[F]<=0),q.every(function(be){return be})){D=j,x=!1;break}I.set(j,q)}if(x)for(var K=p?3:1,se=function(we){var Le=g.find(function(Vt){var Zt=I.get(Vt);if(Zt)return Zt.slice(0,we).every(function(xe){return xe})});if(Le)return D=Le,"break"},oe=K;oe>0;oe--){var pe=se(oe);if(pe==="break")break}e.placement!==D&&(e.modifiersData[r]._skip=!0,e.placement=D,e.reset=!0)}}const fq={name:"flip",enabled:!0,phase:"main",fn:dq,requiresIfExists:["offset"],data:{_skip:!1}};function CI(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function AI(t){return[In,Zn,Jn,Sn].some(function(e){return t[e]>=0})}function pq(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=mc(e,{elementContext:"reference"}),a=mc(e,{altBoundary:!0}),l=CI(o,r),u=CI(a,i,s),c=AI(l),h=AI(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}const mq={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pq};function gq(t,e,n){var r=Nr(t),i=[Sn,In].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Sn,Zn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function yq(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=nD.reduce(function(c,h){return c[h]=gq(h,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const vq={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yq};function _q(t){var e=t.state,n=t.name;e.modifiersData[n]=uD({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const wq={name:"popperOffsets",enabled:!0,phase:"read",fn:_q,data:{}};function Eq(t){return t==="x"?"y":"x"}function Tq(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,h=n.padding,d=n.tether,f=d===void 0?!0:d,p=n.tetherOffset,m=p===void 0?0:p,E=mc(e,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),v=Nr(e.placement),_=Ha(e.placement),w=!_,g=h0(v),R=Eq(g),S=e.modifiersData.popperOffsets,I=e.rects.reference,x=e.rects.popper,D=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,M=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,W={x:0,y:0};if(S){if(s){var J,ve=g==="y"?In:Sn,ie=g==="y"?Jn:Zn,ce=g==="y"?"height":"width",_e=S[g],F=_e+E[ve],q=_e-E[ie],K=f?-x[ce]/2:0,se=_===qa?I[ce]:x[ce],oe=_===qa?-x[ce]:-I[ce],pe=e.elements.arrow,be=f&&pe?c0(pe):{width:0,height:0},we=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:sD(),Le=we[ve],Vt=we[ie],Zt=Eu(0,I[ce],be[ce]),xe=w?I[ce]/2-K-Zt-Le-M.mainAxis:se-Zt-Le-M.mainAxis,qt=w?-I[ce]/2+K+Zt+Vt+M.mainAxis:oe+Zt+Vt+M.mainAxis,fn=e.elements.arrow&&Xc(e.elements.arrow),mr=fn?g==="y"?fn.clientTop||0:fn.clientLeft||0:0,St=(J=j==null?void 0:j[g])!=null?J:0,Rn=_e+xe-St-mr,Pe=_e+qt-St,Mn=Eu(f?uf(F,Rn):F,_e,f?Js(q,Pe):q);S[g]=Mn,W[g]=Mn-_e}if(a){var Fn,Ss=g==="x"?In:Sn,Rs=g==="x"?Jn:Zn,Mt=S[R],tr=R==="y"?"height":"width",gr=Mt+E[Ss],xn=Mt-E[Rs],Ln=[In,Sn].indexOf(v)!==-1,$=(Fn=j==null?void 0:j[R])!=null?Fn:0,le=Ln?gr:Mt-I[tr]-x[tr]-$+M.altAxis,Rt=Ln?Mt+I[tr]+x[tr]-$-M.altAxis:xn,$n=f&&Ln?G9(le,Mt,Rt):Eu(f?le:gr,Mt,f?Rt:xn);S[R]=$n,W[R]=$n-Mt}e.modifiersData[r]=W}}const Iq={name:"preventOverflow",enabled:!0,phase:"main",fn:Tq,requiresIfExists:["offset"]};function Sq(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Rq(t){return t===Nn(t)||!Or(t)?d0(t):Sq(t)}function xq(t){var e=t.getBoundingClientRect(),n=Ka(e.width)/t.offsetWidth||1,r=Ka(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Cq(t,e,n){n===void 0&&(n=!1);var r=Or(e),i=Or(e)&&xq(e),s=Ts(e),o=Ga(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((cs(e)!=="body"||p0(s))&&(a=Rq(e)),Or(e)?(l=Ga(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=f0(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Aq(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function bq(t){var e=Aq(t);return z9.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Pq(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function kq(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var bI={placement:"bottom",modifiers:[],strategy:"absolute"};function PI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Dq(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?bI:i;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},bI,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],d=!1,f={state:c,setOptions:function(v){var _=typeof v=="function"?v(c.options):v;m(),c.options=Object.assign({},s,c.options,_),c.scrollParents={reference:_o(a)?Tu(a):a.contextElement?Tu(a.contextElement):[],popper:Tu(l)};var w=bq(kq([].concat(r,c.options.modifiers)));return c.orderedModifiers=w.filter(function(g){return g.enabled}),p(),f.update()},forceUpdate:function(){if(!d){var v=c.elements,_=v.reference,w=v.popper;if(PI(_,w)){c.rects={reference:Cq(_,Xc(w),c.options.strategy==="fixed"),popper:c0(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(M){return c.modifiersData[M.name]=Object.assign({},M.data)});for(var g=0;g<c.orderedModifiers.length;g++){if(c.reset===!0){c.reset=!1,g=-1;continue}var R=c.orderedModifiers[g],S=R.fn,I=R.options,x=I===void 0?{}:I,D=R.name;typeof S=="function"&&(c=S({state:c,options:x,name:D,instance:f})||c)}}}},update:Pq(function(){return new Promise(function(E){f.forceUpdate(),E(c)})}),destroy:function(){m(),d=!0}};if(!PI(a,l))return f;f.setOptions(u).then(function(E){!d&&u.onFirstUpdate&&u.onFirstUpdate(E)});function p(){c.orderedModifiers.forEach(function(E){var v=E.name,_=E.options,w=_===void 0?{}:_,g=E.effect;if(typeof g=="function"){var R=g({state:c,name:v,instance:f,options:w}),S=function(){};h.push(R||S)}})}function m(){h.forEach(function(E){return E()}),h=[]}return f}}const Nq=Dq({defaultModifiers:[mq,wq,eq,nq,vq,fq,Iq,Y9]}),Oq=["enabled","placement","strategy","modifiers"];function Vq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Mq={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Fq={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:r}=t.elements,i=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},Lq=[];function $q(t,e,n={}){let{enabled:r=!0,placement:i="bottom",strategy:s="absolute",modifiers:o=Lq}=n,a=Vq(n,Oq);const l=y.useRef(o),u=y.useRef(),c=y.useCallback(()=>{var E;(E=u.current)==null||E.update()},[]),h=y.useCallback(()=>{var E;(E=u.current)==null||E.forceUpdate()},[]),[d,f]=k9(y.useState({placement:i,update:c,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),p=y.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:E})=>{const v={},_={};Object.keys(E.elements).forEach(w=>{v[w]=E.styles[w],_[w]=E.attributes[w]}),f({state:E,styles:v,attributes:_,update:c,forceUpdate:h,placement:E.placement})}}),[c,h,f]),m=y.useMemo(()=>(wu(l.current,o)||(l.current=o),l.current),[o]);return y.useEffect(()=>{!u.current||!r||u.current.setOptions({placement:i,strategy:s,modifiers:[...m,p,Mq]})},[s,i,p,r,m]),y.useEffect(()=>{if(!(!r||t==null||e==null))return u.current=Nq(t,e,Object.assign({},a,{placement:i,strategy:s,modifiers:[...m,Fq,p]})),()=>{u.current!=null&&(u.current.destroy(),u.current=void 0,f(E=>Object.assign({},E,{attributes:{},styles:{popper:{}}})))}},[r,t,e]),d}function cf(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var jq=function(){},Bq=jq;const Uq=yc(Bq),kI=()=>{};function zq(t){return t.button===0}function qq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Km=t=>t&&("current"in t?t.current:t),DI={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Kq(t,e=kI,{disabled:n,clickTrigger:r="click"}={}){const i=y.useRef(!1),s=y.useRef(!1),o=y.useCallback(u=>{const c=Km(t);Uq(!!c,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!c||qq(u)||!zq(u)||!!cf(c,u.target)||s.current,s.current=!1},[t]),a=lt(u=>{const c=Km(t);c&&cf(c,u.target)&&(s.current=!0)}),l=lt(u=>{i.current||e(u)});y.useEffect(()=>{var u,c;if(n||t==null)return;const h=Wc(Km(t)),d=h.defaultView||window;let f=(u=d.event)!=null?u:(c=d.parent)==null?void 0:c.event,p=null;DI[r]&&(p=$i(h,DI[r],a,!0));const m=$i(h,r,o,!0),E=$i(h,r,_=>{if(_===f){f=void 0;return}l(_)});let v=[];return"ontouchstart"in h.documentElement&&(v=[].slice.call(h.body.children).map(_=>$i(_,"mousemove",kI))),()=>{p==null||p(),m(),E(),v.forEach(_=>_())}},[t,n,r,o,a,l])}function Gq(t){const e={};return Array.isArray(t)?(t==null||t.forEach(n=>{e[n.name]=n}),e):t||e}function Hq(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function Qq({enabled:t,enableEvents:e,placement:n,flip:r,offset:i,fixed:s,containerPadding:o,arrowElement:a,popperConfig:l={}}){var u,c,h,d,f;const p=Gq(l.modifiers);return Object.assign({},l,{placement:n,enabled:t,strategy:s?"fixed":l.strategy,modifiers:Hq(Object.assign({},p,{eventListeners:{enabled:e,options:(u=p.eventListeners)==null?void 0:u.options},preventOverflow:Object.assign({},p.preventOverflow,{options:o?Object.assign({padding:o},(c=p.preventOverflow)==null?void 0:c.options):(h=p.preventOverflow)==null?void 0:h.options}),offset:{options:Object.assign({offset:i},(d=p.offset)==null?void 0:d.options)},arrow:Object.assign({},p.arrow,{enabled:!!a,options:Object.assign({},(f=p.arrow)==null?void 0:f.options,{element:a})}),flip:Object.assign({enabled:!!r},p.flip)}))})}const Wq=["children"];function Yq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Xq=()=>{};function cD(t={}){const e=y.useContext(Np),[n,r]=Bk(),i=y.useRef(!1),{flip:s,offset:o,rootCloseEvent:a,fixed:l=!1,placement:u,popperConfig:c={},enableEventListeners:h=!0,usePopper:d=!!e}=t,f=(e==null?void 0:e.show)==null?!!t.show:e.show;f&&!i.current&&(i.current=!0);const p=S=>{e==null||e.toggle(!1,S)},{placement:m,setMenu:E,menuElement:v,toggleElement:_}=e||{},w=$q(_,v,Qq({placement:u||m||"bottom-start",enabled:d,enableEvents:h??f,offset:o,flip:s,fixed:l,arrowElement:n,popperConfig:c})),g=Object.assign({ref:E||Xq,"aria-labelledby":_==null?void 0:_.id},w.attributes.popper,{style:w.styles.popper}),R={show:f,placement:m,hasShown:i.current,toggle:e==null?void 0:e.toggle,popper:d?w:null,arrowProps:d?Object.assign({ref:r},w.attributes.arrow,{style:w.styles.arrow}):{}};return Kq(v,p,{clickTrigger:a,disabled:!f}),[g,R]}const Jq={usePopper:!0};function m0(t){let{children:e}=t,n=Yq(t,Wq);const[r,i]=cD(n);return T.jsx(T.Fragment,{children:e(r,i)})}m0.displayName="DropdownMenu";m0.defaultProps=Jq;const hf={prefix:String(Math.round(Math.random()*1e10)),current:0},hD=Ke.createContext(hf),Zq=Ke.createContext(!1);let e7=!!(typeof window<"u"&&window.document&&window.document.createElement),Gm=new WeakMap;function t7(t=!1){let e=y.useContext(hD),n=y.useRef(null);if(n.current===null&&!t){var r,i;let s=(r=Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(s){let o=Gm.get(s);o==null?Gm.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==o.state&&(e.current=o.id,Gm.delete(s))}n.current=++e.current}return n.current}function n7(t){let e=y.useContext(hD);e===hf&&!e7&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=t7(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function r7(t){let e=Ke.useId(),[n]=y.useState(l7()),r=n?"react-aria":`react-aria${hf.prefix}`;return t||`${r}-${e}`}const i7=typeof Ke.useId=="function"?r7:n7;function s7(){return!1}function o7(){return!0}function a7(t){return()=>{}}function l7(){return typeof Ke.useSyncExternalStore=="function"?Ke.useSyncExternalStore(a7,s7,o7):y.useContext(Zq)}const dD=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},NI=()=>{};function fD(){const t=i7(),{show:e=!1,toggle:n=NI,setToggle:r,menuElement:i}=y.useContext(Np)||{},s=y.useCallback(a=>{n(!e,a)},[e,n]),o={id:t,ref:r||NI,onClick:s,"aria-expanded":!!e};return i&&dD(i)&&(o["aria-haspopup"]=!0),[o,{show:e,toggle:n}]}function pD({children:t}){const[e,n]=fD();return T.jsx(T.Fragment,{children:t(e,n)})}pD.displayName="DropdownToggle";const u7=y.createContext(null),gc=(t,e=null)=>t!=null?String(t):e||null,wo=u7,mD=y.createContext(null);mD.displayName="NavContext";const g0=mD,c7="data-rr-ui-",h7="rrUi";function ml(t){return`${c7}${t}`}function d7(t){return`${h7}${t}`}const f7=["eventKey","disabled","onClick","active","as"];function p7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function gD({key:t,href:e,active:n,disabled:r,onClick:i}){const s=y.useContext(wo),o=y.useContext(g0),{activeKey:a}=o||{},l=gc(t,e),u=n==null&&t!=null?gc(a)===l:n;return[{onClick:lt(h=>{r||(i==null||i(h),s&&!h.isPropagationStopped()&&s(l,h))}),"aria-disabled":r||void 0,"aria-selected":u,[ml("dropdown-item")]:""},{isActive:u}]}const yD=y.forwardRef((t,e)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:o=i0}=t,a=p7(t,f7);const[l]=gD({key:n,href:a.href,disabled:r,onClick:i,active:s});return T.jsx(o,Object.assign({},a,{ref:e},l))});yD.displayName="DropdownItem";const vD=y.createContext(pl?window:void 0);vD.Provider;function Vp(){return y.useContext(vD)}function OI(){const t=eD(),e=y.useRef(null),n=y.useCallback(r=>{e.current=r,t()},[t]);return[e,n]}function Jc({defaultShow:t,show:e,onSelect:n,onToggle:r,itemSelector:i=`* [${ml("dropdown-item")}]`,focusFirstItemOnShow:s,placement:o="bottom-start",children:a}){const l=Vp(),[u,c]=b9(e,t,r),[h,d]=OI(),f=h.current,[p,m]=OI(),E=p.current,v=zk(u),_=y.useRef(null),w=y.useRef(!1),g=y.useContext(wo),R=y.useCallback((j,W,J=W==null?void 0:W.type)=>{c(j,{originalEvent:W,source:J})},[c]),S=lt((j,W)=>{n==null||n(j,W),R(!1,W,"select"),W.isPropagationStopped()||g==null||g(j,W)}),I=y.useMemo(()=>({toggle:R,placement:o,show:u,menuElement:f,toggleElement:E,setMenu:d,setToggle:m}),[R,o,u,f,E,d,m]);f&&v&&!u&&(w.current=f.contains(f.ownerDocument.activeElement));const x=lt(()=>{E&&E.focus&&E.focus()}),D=lt(()=>{const j=_.current;let W=s;if(W==null&&(W=h.current&&dD(h.current)?"keyboard":!1),W===!1||W==="keyboard"&&!/^key.+$/.test(j))return;const J=Ur(h.current,i)[0];J&&J.focus&&J.focus()});y.useEffect(()=>{u?D():w.current&&(w.current=!1,x())},[u,w,x,D]),y.useEffect(()=>{_.current=null});const M=(j,W)=>{if(!h.current)return null;const J=Ur(h.current,i);let ve=J.indexOf(j)+W;return ve=Math.max(0,Math.min(ve,J.length)),J[ve]};return h9(y.useCallback(()=>l.document,[l]),"keydown",j=>{var W,J;const{key:ve}=j,ie=j.target,ce=(W=h.current)==null?void 0:W.contains(ie),_e=(J=p.current)==null?void 0:J.contains(ie);if(/input|textarea/i.test(ie.tagName)&&(ve===" "||ve!=="Escape"&&ce||ve==="Escape"&&ie.type==="search")||!ce&&!_e||ve==="Tab"&&(!h.current||!u))return;_.current=j.type;const q={originalEvent:j,source:j.type};switch(ve){case"ArrowUp":{const K=M(ie,-1);K&&K.focus&&K.focus(),j.preventDefault();return}case"ArrowDown":if(j.preventDefault(),!u)c(!0,q);else{const K=M(ie,1);K&&K.focus&&K.focus()}return;case"Tab":e0(ie.ownerDocument,"keyup",K=>{var se;(K.key==="Tab"&&!K.target||!((se=h.current)!=null&&se.contains(K.target)))&&c(!1,q)},{once:!0});break;case"Escape":ve==="Escape"&&(j.preventDefault(),j.stopPropagation()),c(!1,q);break}}),T.jsx(wo.Provider,{value:S,children:T.jsx(Np.Provider,{value:I,children:a})})}Jc.displayName="Dropdown";Jc.Menu=m0;Jc.Toggle=pD;Jc.Item=yD;const _D=y.createContext({});_D.displayName="DropdownContext";const wD=_D,ED=y.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:r="separator",...i},s)=>(e=ue(e,"dropdown-divider"),T.jsx(n,{ref:s,className:te(t,e),role:r,...i})));ED.displayName="DropdownDivider";const m7=ED,TD=y.forwardRef(({className:t,bsPrefix:e,as:n="div",role:r="heading",...i},s)=>(e=ue(e,"dropdown-header"),T.jsx(n,{ref:s,className:te(t,e),role:r,...i})));TD.displayName="DropdownHeader";const g7=TD,ID=y.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:r=!1,onClick:i,active:s,as:o=Kk,...a},l)=>{const u=ue(t,"dropdown-item"),[c,h]=gD({key:n,href:a.href,disabled:r,onClick:i,active:s});return T.jsx(o,{...a,...c,ref:l,className:te(e,u,h.isActive&&"active",r&&"disabled")})});ID.displayName="DropdownItem";const y7=ID,SD=y.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=ue(e,"dropdown-item-text"),T.jsx(n,{ref:i,className:te(t,e),...r})));SD.displayName="DropdownItemText";const v7=SD,RD=y.createContext(null);RD.displayName="InputGroupContext";const y0=RD,xD=y.createContext(null);xD.displayName="NavbarContext";const Po=xD;function CD(t,e){return t}function AD(t,e,n){const r=n?"top-end":"top-start",i=n?"top-start":"top-end",s=n?"bottom-end":"bottom-start",o=n?"bottom-start":"bottom-end",a=n?"right-start":"left-start",l=n?"right-end":"left-end",u=n?"left-start":"right-start",c=n?"left-end":"right-end";let h=t?o:s;return e==="up"?h=t?i:r:e==="end"?h=t?c:u:e==="start"?h=t?l:a:e==="down-centered"?h="bottom":e==="up-centered"&&(h="top"),h}const bD=y.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:r,flip:i=!0,show:s,renderOnMount:o,as:a="div",popperConfig:l,variant:u,...c},h)=>{let d=!1;const f=y.useContext(Po),p=ue(t,"dropdown-menu"),{align:m,drop:E,isRTL:v}=y.useContext(wD);n=n||m;const _=y.useContext(y0),w=[];if(n)if(typeof n=="object"){const j=Object.keys(n);if(j.length){const W=j[0],J=n[W];d=J==="start",w.push(`${p}-${W}-${J}`)}}else n==="end"&&(d=!0);const g=AD(d,E,v),[R,{hasShown:S,popper:I,show:x,toggle:D}]=cD({flip:i,rootCloseEvent:r,show:s,usePopper:!f&&w.length===0,offset:[0,2],popperConfig:l,placement:g});if(R.ref=bo(CD(h),R.ref),lf(()=>{x&&(I==null||I.update())},[x]),!S&&!o&&!_)return null;typeof a!="string"&&(R.show=x,R.close=()=>D==null?void 0:D(!1),R.align=n);let M=c.style;return I!=null&&I.placement&&(M={...c.style,...R.style},c["x-placement"]=I.placement),T.jsx(a,{...c,...R,style:M,...(w.length||f)&&{"data-bs-popper":"static"},className:te(e,p,x&&"show",d&&`${p}-end`,u&&`${p}-${u}`,...w)})});bD.displayName="DropdownMenu";const _7=bD,PD=y.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:r,as:i=Qk,...s},o)=>{const a=ue(t,"dropdown-toggle"),l=y.useContext(Np);r!==void 0&&(s.bsPrefix=r);const[u]=fD();return u.ref=bo(u.ref,CD(o)),T.jsx(i,{className:te(n,a,e&&`${a}-split`,(l==null?void 0:l.show)&&"show"),...u,...s})});PD.displayName="DropdownToggle";const w7=PD,kD=y.forwardRef((t,e)=>{const{bsPrefix:n,drop:r="down",show:i,className:s,align:o="start",onSelect:a,onToggle:l,focusFirstItemOnShow:u,as:c="div",navbar:h,autoClose:d=!0,...f}=Zw(t,{show:"onToggle"}),p=y.useContext(y0),m=ue(n,"dropdown"),E=Dk(),v=I=>d===!1?I==="click":d==="inside"?I!=="rootClose":d==="outside"?I!=="select":!0,_=lt((I,x)=>{x.originalEvent.currentTarget===document&&(x.source!=="keydown"||x.originalEvent.key==="Escape")&&(x.source="rootClose"),v(x.source)&&(l==null||l(I,x))}),g=AD(o==="end",r,E),R=y.useMemo(()=>({align:o,drop:r,isRTL:E}),[o,r,E]),S={down:m,"down-centered":`${m}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return T.jsx(wD.Provider,{value:R,children:T.jsx(Jc,{placement:g,show:i,onSelect:a,onToggle:_,focusFirstItemOnShow:u,itemSelector:`.${m}-item:not(.disabled):not(:disabled)`,children:p?f.children:T.jsx(c,{...f,ref:e,className:te(s,i&&"show",S[r])})})})});kD.displayName="Dropdown";const Bl=Object.assign(kD,{Toggle:w7,Menu:_7,Item:y7,ItemText:v7,Divider:m7,Header:g7}),E7={type:ti.string,tooltip:ti.bool,as:ti.elementType},v0=y.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...i},s)=>T.jsx(t,{...i,ref:s,className:te(e,`${n}-${r?"tooltip":"feedback"}`)}));v0.displayName="Feedback";v0.propTypes=E7;const DD=v0,T7=y.createContext({}),hi=T7,ND=y.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:o="input",...a},l)=>{const{controlId:u}=y.useContext(hi);return e=ue(e,"form-check-input"),T.jsx(o,{...a,ref:l,type:r,id:t||u,className:te(n,e,i&&"is-valid",s&&"is-invalid")})});ND.displayName="FormCheckInput";const Mp=ND,OD=y.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},i)=>{const{controlId:s}=y.useContext(hi);return t=ue(t,"form-check-label"),T.jsx("label",{...r,ref:i,htmlFor:n||s,className:te(e,t)})});OD.displayName="FormCheckLabel";const sv=OD,VD=y.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:u,feedbackType:c,className:h,style:d,title:f="",type:p="checkbox",label:m,children:E,as:v="input",..._},w)=>{e=ue(e,"form-check"),n=ue(n,"form-switch");const{controlId:g}=y.useContext(hi),R=y.useMemo(()=>({controlId:t||g}),[g,t]),S=!E&&m!=null&&m!==!1||x9(E,sv),I=T.jsx(Mp,{..._,type:p==="switch"?"checkbox":p,ref:w,isValid:o,isInvalid:a,disabled:s,as:v});return T.jsx(hi.Provider,{value:R,children:T.jsx("div",{style:d,className:te(h,S&&e,r&&`${e}-inline`,i&&`${e}-reverse`,p==="switch"&&n),children:E||T.jsxs(T.Fragment,{children:[I,S&&T.jsx(sv,{title:f,children:m}),u&&T.jsx(DD,{type:c,tooltip:l,children:u})]})})})});VD.displayName="FormCheck";const df=Object.assign(VD,{Input:Mp,Label:sv}),MD=y.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:i,className:s,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:u,as:c="input",...h},d)=>{const{controlId:f}=y.useContext(hi);return t=ue(t,"form-control"),T.jsx(c,{...h,type:e,size:r,ref:d,readOnly:u,id:i||f,className:te(s,l?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",a&&"is-invalid")})});MD.displayName="FormControl";const I7=Object.assign(MD,{Feedback:DD}),FD=y.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ue(e,"form-floating"),T.jsx(n,{ref:i,className:te(t,e),...r})));FD.displayName="FormFloating";const S7=FD,LD=y.forwardRef(({controlId:t,as:e="div",...n},r)=>{const i=y.useMemo(()=>({controlId:t}),[t]);return T.jsx(hi.Provider,{value:i,children:T.jsx(e,{...n,ref:r})})});LD.displayName="FormGroup";const $D=LD,jD=y.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...o},a)=>{const{controlId:l}=y.useContext(hi);e=ue(e,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const c=te(i,e,r&&"visually-hidden",n&&u);return s=s||l,n?T.jsx(eu,{ref:a,as:"label",className:c,htmlFor:s,...o}):T.jsx(t,{ref:a,className:c,htmlFor:s,...o})});jD.displayName="FormLabel";const R7=jD,BD=y.forwardRef(({bsPrefix:t,className:e,id:n,...r},i)=>{const{controlId:s}=y.useContext(hi);return t=ue(t,"form-range"),T.jsx("input",{...r,type:"range",ref:i,className:te(e,t),id:n||s})});BD.displayName="FormRange";const x7=BD,UD=y.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:o,...a},l)=>{const{controlId:u}=y.useContext(hi);return t=ue(t,"form-select"),T.jsx("select",{...a,size:n,ref:l,className:te(r,t,e&&`${t}-${e}`,i&&"is-valid",s&&"is-invalid"),id:o||u})});UD.displayName="FormSelect";const C7=UD,zD=y.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...i},s)=>(t=ue(t,"form-text"),T.jsx(n,{...i,ref:s,className:te(e,t,r&&"text-muted")})));zD.displayName="FormText";const A7=zD,qD=y.forwardRef((t,e)=>T.jsx(df,{...t,ref:e,type:"switch"}));qD.displayName="Switch";const b7=Object.assign(qD,{Input:df.Input,Label:df.Label}),KD=y.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:i,...s},o)=>(t=ue(t,"form-floating"),T.jsxs($D,{ref:o,className:te(e,t),controlId:r,...s,children:[n,T.jsx("label",{htmlFor:r,children:i})]})));KD.displayName="FloatingLabel";const P7=KD,k7={_ref:ti.any,validated:ti.bool,as:ti.elementType},_0=y.forwardRef(({className:t,validated:e,as:n="form",...r},i)=>T.jsx(n,{...r,ref:i,className:te(t,e&&"was-validated")}));_0.displayName="Form";_0.propTypes=k7;const D7=Object.assign(_0,{Group:$D,Control:I7,Floating:S7,Check:df,Switch:b7,Label:R7,Text:A7,Range:x7,Select:C7,FloatingLabel:P7}),GD=y.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=ue(e,"input-group-text"),T.jsx(n,{ref:i,className:te(t,e),...r})));GD.displayName="InputGroupText";const w0=GD,N7=t=>T.jsx(w0,{children:T.jsx(Mp,{type:"checkbox",...t})}),O7=t=>T.jsx(w0,{children:T.jsx(Mp,{type:"radio",...t})}),HD=y.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:r,as:i="div",...s},o)=>{t=ue(t,"input-group");const a=y.useMemo(()=>({}),[]);return T.jsx(y0.Provider,{value:a,children:T.jsx(i,{ref:o,...s,className:te(r,t,e&&`${t}-${e}`,n&&"has-validation")})})});HD.displayName="InputGroup";const V7=Object.assign(HD,{Text:w0,Radio:O7,Checkbox:N7}),M7=y.createContext(null),QD=M7,F7=["as","active","eventKey"];function L7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function WD({key:t,onClick:e,active:n,id:r,role:i,disabled:s}){const o=y.useContext(wo),a=y.useContext(g0),l=y.useContext(QD);let u=n;const c={role:i};if(a){!i&&a.role==="tablist"&&(c.role="tab");const h=a.getControllerId(t??null),d=a.getControlledId(t??null);c[ml("event-key")]=t,c.id=h||r,u=n==null&&t!=null?a.activeKey===t:n,(u||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(c["aria-controls"]=d)}return c.role==="tab"&&(c["aria-selected"]=u,u||(c.tabIndex=-1),s&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=lt(h=>{s||(e==null||e(h),t!=null&&o&&!h.isPropagationStopped()&&o(t,h))}),[c,{isActive:u}]}const YD=y.forwardRef((t,e)=>{let{as:n=i0,active:r,eventKey:i}=t,s=L7(t,F7);const[o,a]=WD(Object.assign({key:gc(i,s.href),active:r},s));return o[ml("active")]=a.isActive,T.jsx(n,Object.assign({},s,o,{ref:e}))});YD.displayName="NavItem";const $7=YD,j7=["as","onSelect","activeKey","role","onKeyDown"];function B7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const VI=()=>{},MI=ml("event-key"),XD=y.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:o}=t,a=B7(t,j7);const l=eD(),u=y.useRef(!1),c=y.useContext(wo),h=y.useContext(QD);let d,f;h&&(s=s||"tablist",i=h.activeKey,d=h.getControlledId,f=h.getControllerId);const p=y.useRef(null),m=w=>{const g=p.current;if(!g)return null;const R=Ur(g,`[${MI}]:not([aria-disabled=true])`),S=g.querySelector("[aria-selected=true]");if(!S||S!==document.activeElement)return null;const I=R.indexOf(S);if(I===-1)return null;let x=I+w;return x>=R.length&&(x=0),x<0&&(x=R.length-1),R[x]},E=(w,g)=>{w!=null&&(r==null||r(w,g),c==null||c(w,g))},v=w=>{if(o==null||o(w),!h)return;let g;switch(w.key){case"ArrowLeft":case"ArrowUp":g=m(-1);break;case"ArrowRight":case"ArrowDown":g=m(1);break;default:return}g&&(w.preventDefault(),E(g.dataset[d7("EventKey")]||null,w),u.current=!0,l())};y.useEffect(()=>{if(p.current&&u.current){const w=p.current.querySelector(`[${MI}][aria-selected=true]`);w==null||w.focus()}u.current=!1});const _=bo(e,p);return T.jsx(wo.Provider,{value:E,children:T.jsx(g0.Provider,{value:{role:s,activeKey:gc(i),getControlledId:d||VI,getControllerId:f||VI},children:T.jsx(n,Object.assign({},a,{onKeyDown:v,ref:_,role:s}))})})});XD.displayName="Nav";const U7=Object.assign(XD,{Item:$7});var Nh;function FI(t){if((!Nh&&Nh!==0||t)&&pl){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Nh=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Nh}function Hm(t){t===void 0&&(t=Wc());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function z7(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const LI=ml("modal-open");class q7{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return z7(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(ei(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(LI,""),ei(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(LI),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const E0=q7,Qm=(t,e)=>pl?t==null?(e||Wc()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function K7(t,e){const n=Vp(),[r,i]=y.useState(()=>Qm(t,n==null?void 0:n.document));if(!r){const s=Qm(t);s&&i(s)}return y.useEffect(()=>{e&&r&&e(r)},[e,r]),y.useEffect(()=>{const s=Qm(t);s!==r&&i(s)},[t,r]),r}function G7({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=y.useRef(null),o=y.useRef(e),a=lt(n);y.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const l=bo(s,t.ref),u=y.cloneElement(t,{ref:l});return e?u:i||!o.current&&r?null:u}function H7({in:t,onTransition:e}){const n=y.useRef(null),r=y.useRef(!0),i=lt(e);return lf(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),lf(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function Q7({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=y.useState(!e);e&&s&&o(!1);const a=H7({in:!!e,onTransition:u=>{const c=()=>{u.isStale()||(u.in?r==null||r(u.element,u.initial):(o(!0),n==null||n(u.element)))};Promise.resolve(i(u)).then(c,h=>{throw u.in||o(!0),h})}}),l=bo(a,t.ref);return s&&!e?null:y.cloneElement(t,{ref:l})}function $I(t,e,n){return t?T.jsx(t,Object.assign({},n)):e?T.jsx(Q7,Object.assign({},n,{transition:e})):T.jsx(G7,Object.assign({},n))}function W7(t){return t.code==="Escape"||t.keyCode===27}const Y7=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function X7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let Wm;function J7(t){return Wm||(Wm=new E0({ownerDocument:t==null?void 0:t.document})),Wm}function Z7(t){const e=Vp(),n=t||J7(e),r=y.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:y.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:y.useCallback(i=>{r.current.backdrop=i},[])})}const JD=y.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:c,transition:h,runTransition:d,backdropTransition:f,runBackdropTransition:p,autoFocus:m=!0,enforceFocus:E=!0,restoreFocus:v=!0,restoreFocusOptions:_,renderDialog:w,renderBackdrop:g=Pe=>T.jsx("div",Object.assign({},Pe)),manager:R,container:S,onShow:I,onHide:x=()=>{},onExit:D,onExited:M,onExiting:j,onEnter:W,onEntering:J,onEntered:ve}=t,ie=X7(t,Y7);const ce=Vp(),_e=K7(S),F=Z7(R),q=Uk(),K=zk(n),[se,oe]=y.useState(!n),pe=y.useRef(null);y.useImperativeHandle(e,()=>F,[F]),pl&&!K&&n&&(pe.current=Hm(ce==null?void 0:ce.document)),n&&se&&oe(!1);const be=lt(()=>{if(F.add(),qt.current=$i(document,"keydown",Zt),xe.current=$i(document,"focus",()=>setTimeout(Le),!0),I&&I(),m){var Pe,Mn;const Fn=Hm((Pe=(Mn=F.dialog)==null?void 0:Mn.ownerDocument)!=null?Pe:ce==null?void 0:ce.document);F.dialog&&Fn&&!cf(F.dialog,Fn)&&(pe.current=Fn,F.dialog.focus())}}),we=lt(()=>{if(F.remove(),qt.current==null||qt.current(),xe.current==null||xe.current(),v){var Pe;(Pe=pe.current)==null||Pe.focus==null||Pe.focus(_),pe.current=null}});y.useEffect(()=>{!n||!_e||be()},[n,_e,be]),y.useEffect(()=>{se&&we()},[se,we]),Xk(()=>{we()});const Le=lt(()=>{if(!E||!q()||!F.isTopModal())return;const Pe=Hm(ce==null?void 0:ce.document);F.dialog&&Pe&&!cf(F.dialog,Pe)&&F.dialog.focus()}),Vt=lt(Pe=>{Pe.target===Pe.currentTarget&&(u==null||u(Pe),a===!0&&x())}),Zt=lt(Pe=>{l&&W7(Pe)&&F.isTopModal()&&(c==null||c(Pe),Pe.defaultPrevented||x())}),xe=y.useRef(),qt=y.useRef(),fn=(...Pe)=>{oe(!0),M==null||M(...Pe)};if(!_e)return null;const mr=Object.assign({role:r,ref:F.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},ie,{style:s,className:i,tabIndex:-1});let St=w?w(mr):T.jsx("div",Object.assign({},mr,{children:y.cloneElement(o,{role:"document"})}));St=$I(h,d,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:D,onExiting:j,onExited:fn,onEnter:W,onEntering:J,onEntered:ve,children:St});let Rn=null;return a&&(Rn=g({ref:F.setBackdropRef,onClick:Vt}),Rn=$I(f,p,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Rn})),T.jsx(T.Fragment,{children:sa.createPortal(T.jsxs(T.Fragment,{children:[Rn,St]}),_e)})});JD.displayName="Modal";const ZD=Object.assign(JD,{Manager:E0});function e8(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function t8(t,e){t.classList?t.classList.add(e):e8(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function jI(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function n8(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=jI(t.className,e):t.setAttribute("class",jI(t.className&&t.className.baseVal||"",e))}const $o={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class eN extends E0{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,ei(n,{[e]:`${parseFloat(ei(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],ei(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(t8(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Ur(n,$o.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),Ur(n,$o.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),Ur(n,$o.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();n8(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Ur(n,$o.FIXED_CONTENT).forEach(s=>this.restore(r,s)),Ur(n,$o.STICKY_CONTENT).forEach(s=>this.restore(i,s)),Ur(n,$o.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let Ym;function tN(t){return Ym||(Ym=new eN(t)),Ym}const nN=y.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ue(e,"modal-body"),T.jsx(n,{ref:i,className:te(t,e),...r})));nN.displayName="ModalBody";const r8=nN,i8=y.createContext({onHide(){}}),T0=i8,rN=y.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:o,scrollable:a,...l},u)=>{t=ue(t,"modal");const c=`${t}-dialog`,h=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return T.jsx("div",{...l,ref:u,className:te(c,e,i&&`${t}-${i}`,r&&`${c}-centered`,a&&`${c}-scrollable`,s&&h),children:T.jsx("div",{className:te(`${t}-content`,n),children:o})})});rN.displayName="ModalDialog";const iN=rN,sN=y.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ue(e,"modal-footer"),T.jsx(n,{ref:i,className:te(t,e),...r})));sN.displayName="ModalFooter";const s8=sN,o8=y.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const a=y.useContext(T0),l=lt(()=>{a==null||a.onHide(),r==null||r()});return T.jsxs("div",{ref:o,...s,children:[i,n&&T.jsx(T9,{"aria-label":t,variant:e,onClick:l})]})}),oN=o8,aN=y.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=ue(t,"modal-header"),T.jsx(oN,{ref:s,...i,className:te(e,t),closeLabel:n,closeButton:r})));aN.displayName="ModalHeader";const a8=aN,l8=jk("h4"),lN=y.forwardRef(({className:t,bsPrefix:e,as:n=l8,...r},i)=>(e=ue(e,"modal-title"),T.jsx(n,{ref:i,className:te(t,e),...r})));lN.displayName="ModalTitle";const u8=lN;function c8(t){return T.jsx(s0,{...t,timeout:null})}function h8(t){return T.jsx(s0,{...t,timeout:null})}const uN=y.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:o=iN,"aria-labelledby":a,"aria-describedby":l,"aria-label":u,show:c=!1,animation:h=!0,backdrop:d=!0,keyboard:f=!0,onEscapeKeyDown:p,onShow:m,onHide:E,container:v,autoFocus:_=!0,enforceFocus:w=!0,restoreFocus:g=!0,restoreFocusOptions:R,onEntered:S,onExit:I,onExiting:x,onEnter:D,onEntering:M,onExited:j,backdropClassName:W,manager:J,...ve},ie)=>{const[ce,_e]=y.useState({}),[F,q]=y.useState(!1),K=y.useRef(!1),se=y.useRef(!1),oe=y.useRef(null),[pe,be]=Bk(),we=bo(ie,be),Le=lt(E),Vt=Dk();t=ue(t,"modal");const Zt=y.useMemo(()=>({onHide:Le}),[Le]);function xe(){return J||tN({isRTL:Vt})}function qt($){if(!pl)return;const le=xe().getScrollbarWidth()>0,Rt=$.scrollHeight>Wc($).documentElement.clientHeight;_e({paddingRight:le&&!Rt?FI():void 0,paddingLeft:!le&&Rt?FI():void 0})}const fn=lt(()=>{pe&&qt(pe.dialog)});Xk(()=>{nv(window,"resize",fn),oe.current==null||oe.current()});const mr=()=>{K.current=!0},St=$=>{K.current&&pe&&$.target===pe.dialog&&(se.current=!0),K.current=!1},Rn=()=>{q(!0),oe.current=Fk(pe.dialog,()=>{q(!1)})},Pe=$=>{$.target===$.currentTarget&&Rn()},Mn=$=>{if(d==="static"){Pe($);return}if(se.current||$.target!==$.currentTarget){se.current=!1;return}E==null||E()},Fn=$=>{f?p==null||p($):($.preventDefault(),d==="static"&&Rn())},Ss=($,le)=>{$&&qt($),D==null||D($,le)},Rs=$=>{oe.current==null||oe.current(),I==null||I($)},Mt=($,le)=>{M==null||M($,le),e0(window,"resize",fn)},tr=$=>{$&&($.style.display=""),j==null||j($),nv(window,"resize",fn)},gr=y.useCallback($=>T.jsx("div",{...$,className:te(`${t}-backdrop`,W,!h&&"show")}),[h,W,t]),xn={...n,...ce};xn.display="block";const Ln=$=>T.jsx("div",{role:"dialog",...$,style:xn,className:te(e,t,F&&`${t}-static`,!h&&"show"),onClick:d?Mn:void 0,onMouseUp:St,"aria-label":u,"aria-labelledby":a,"aria-describedby":l,children:T.jsx(o,{...ve,onMouseDown:mr,className:r,contentClassName:i,children:s})});return T.jsx(T0.Provider,{value:Zt,children:T.jsx(ZD,{show:c,ref:we,backdrop:d,container:v,keyboard:!0,autoFocus:_,enforceFocus:w,restoreFocus:g,restoreFocusOptions:R,onEscapeKeyDown:Fn,onShow:m,onHide:E,onEnter:Ss,onEntering:Mt,onEntered:S,onExit:Rs,onExiting:x,onExited:tr,manager:xe(),transition:h?c8:void 0,backdropTransition:h?h8:void 0,renderBackdrop:gr,renderDialog:Ln})})});uN.displayName="Modal";const Oh=Object.assign(uN,{Body:r8,Header:a8,Title:u8,Footer:s8,Dialog:iN,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var BI={exports:{}},ov={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function i(o,a,l,u,c,h){var d=u||"<<anonymous>>",f=h||l;if(a[l]==null)return o?new Error("Required "+c+" `"+f+"` was not specified "+("in `"+d+"`.")):null;for(var p=arguments.length,m=Array(p>6?p-6:0),E=6;E<p;E++)m[E-6]=arguments[E];return r.apply(void 0,[a,l,d,c,f].concat(m))}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}t.exports=e.default})(ov,ov.exports);var d8=ov.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=d8,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function s(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function u(){for(var c=arguments.length,h=Array(c),d=0;d<c;d++)h[d]=arguments[d];var f=null;return a.forEach(function(p){if(f==null){var m=p.apply(void 0,h);m!=null&&(f=m)}}),f}return(0,r.default)(u)}t.exports=e.default})(BI,BI.exports);const cN=y.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ue(e,"nav-item"),T.jsx(n,{ref:i,className:te(t,e),...r})));cN.displayName="NavItem";const f8=cN,hN=y.forwardRef(({bsPrefix:t,className:e,as:n=Kk,active:r,eventKey:i,disabled:s=!1,...o},a)=>{t=ue(t,"nav-link");const[l,u]=WD({key:gc(i,o.href),active:r,disabled:s,...o});return T.jsx(n,{...o,...l,ref:a,disabled:s,className:te(e,t,s&&"disabled",u.isActive&&"active")})});hN.displayName="NavLink";const p8=hN,dN=y.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:o=!1,navbar:a,navbarScroll:l,className:u,activeKey:c,...h}=Zw(t,{activeKey:"onSelect"}),d=ue(r,"nav");let f,p,m=!1;const E=y.useContext(Po),v=y.useContext(S9);return E?(f=E.bsPrefix,m=a??!0):v&&({cardHeaderBsPrefix:p}=v),T.jsx(U7,{as:n,ref:e,activeKey:c,className:te(u,{[d]:!m,[`${f}-nav`]:m,[`${f}-nav-scroll`]:m&&l,[`${p}-${i}`]:!!p,[`${d}-${i}`]:!!i,[`${d}-fill`]:s,[`${d}-justified`]:o}),...h})});dN.displayName="Nav";const Ul=Object.assign(dN,{Item:f8,Link:p8}),fN=y.forwardRef(({bsPrefix:t,className:e,as:n,...r},i)=>{t=ue(t,"navbar-brand");const s=n||(r.href?"a":"span");return T.jsx(s,{...r,ref:i,className:te(e,t)})});fN.displayName="NavbarBrand";const m8=fN,pN=y.forwardRef(({children:t,bsPrefix:e,...n},r)=>{e=ue(e,"navbar-collapse");const i=y.useContext(Po);return T.jsx($k,{in:!!(i&&i.expanded),...n,children:T.jsx("div",{ref:r,className:e,children:t})})});pN.displayName="NavbarCollapse";const g8=pN,mN=y.forwardRef(({bsPrefix:t,className:e,children:n,label:r="Toggle navigation",as:i="button",onClick:s,...o},a)=>{t=ue(t,"navbar-toggler");const{onToggle:l,expanded:u}=y.useContext(Po)||{},c=lt(h=>{s&&s(h),l&&l()});return i==="button"&&(o.type="button"),T.jsx(i,{...o,ref:a,onClick:c,"aria-label":r,className:te(e,t,!u&&"collapsed"),children:n||T.jsx("span",{className:`${t}-icon`})})});mN.displayName="NavbarToggle";const y8=mN,av=new WeakMap,UI=(t,e)=>{if(!t||!e)return;const n=av.get(e)||new Map;av.set(e,n);let r=n.get(t);return r||(r=e.matchMedia(t),r.refCount=0,n.set(r.media,r)),r};function v8(t,e=typeof window>"u"?void 0:window){const n=UI(t,e),[r,i]=y.useState(()=>n?n.matches:!1);return lf(()=>{let s=UI(t,e);if(!s)return i(!1);let o=av.get(e);const a=()=>{i(s.matches)};return s.refCount++,s.addListener(a),a(),()=>{s.removeListener(a),s.refCount--,s.refCount<=0&&(o==null||o.delete(s.media)),s=void 0}},[t]),r}function _8(t){const e=Object.keys(t);function n(a,l){return a===l?l:a?`${a} and ${l}`:l}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function i(a){const l=r(a);let u=t[l];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function s(a){let l=t[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function o(a,l,u){let c;typeof a=="object"?(c=a,u=l,l=!0):(l=l||!0,c={[a]:l});let h=y.useMemo(()=>Object.entries(c).reduce((d,[f,p])=>((p==="up"||p===!0)&&(d=n(d,s(f))),(p==="down"||p===!0)&&(d=n(d,i(f))),d),""),[JSON.stringify(c)]);return v8(h,u)}return o}const w8=_8({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),gN=y.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ue(e,"offcanvas-body"),T.jsx(n,{ref:i,className:te(t,e),...r})));gN.displayName="OffcanvasBody";const E8=gN,T8={[lr]:"show",[qr]:"show"},yN=y.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:s=!1,appear:o=!1,...a},l)=>(t=ue(t,"offcanvas"),T.jsx(n0,{ref:l,addEndListener:t0,in:r,mountOnEnter:i,unmountOnExit:s,appear:o,...a,childRef:n.ref,children:(u,c)=>y.cloneElement(n,{...c,className:te(e,n.props.className,(u===lr||u===fc)&&`${t}-toggling`,T8[u])})})));yN.displayName="OffcanvasToggling";const I8=yN,vN=y.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=ue(t,"offcanvas-header"),T.jsx(oN,{ref:s,...i,className:te(e,t),closeLabel:n,closeButton:r})));vN.displayName="OffcanvasHeader";const S8=vN,R8=jk("h5"),_N=y.forwardRef(({className:t,bsPrefix:e,as:n=R8,...r},i)=>(e=ue(e,"offcanvas-title"),T.jsx(n,{ref:i,className:te(t,e),...r})));_N.displayName="OffcanvasTitle";const x8=_N;function C8(t){return T.jsx(I8,{...t})}function A8(t){return T.jsx(s0,{...t})}const wN=y.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:i="start",responsive:s,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:u=!1,onEscapeKeyDown:c,onShow:h,onHide:d,container:f,autoFocus:p=!0,enforceFocus:m=!0,restoreFocus:E=!0,restoreFocusOptions:v,onEntered:_,onExit:w,onExiting:g,onEnter:R,onEntering:S,onExited:I,backdropClassName:x,manager:D,renderStaticNode:M=!1,...j},W)=>{const J=y.useRef();t=ue(t,"offcanvas");const{onToggle:ve}=y.useContext(Po)||{},[ie,ce]=y.useState(!1),_e=w8(s||"xs","up");y.useEffect(()=>{ce(s?o&&!_e:o)},[o,s,_e]);const F=lt(()=>{ve==null||ve(),d==null||d()}),q=y.useMemo(()=>({onHide:F}),[F]);function K(){return D||(u?(J.current||(J.current=new eN({handleContainerOverflow:!1})),J.current):tN())}const se=(we,...Le)=>{we&&(we.style.visibility="visible"),R==null||R(we,...Le)},oe=(we,...Le)=>{we&&(we.style.visibility=""),I==null||I(...Le)},pe=y.useCallback(we=>T.jsx("div",{...we,className:te(`${t}-backdrop`,x)}),[x,t]),be=we=>T.jsx("div",{...we,...j,className:te(e,s?`${t}-${s}`:t,`${t}-${i}`),"aria-labelledby":r,children:n});return T.jsxs(T.Fragment,{children:[!ie&&(s||M)&&be({}),T.jsx(T0.Provider,{value:q,children:T.jsx(ZD,{show:ie,ref:W,backdrop:a,container:f,keyboard:l,autoFocus:p,enforceFocus:m&&!u,restoreFocus:E,restoreFocusOptions:v,onEscapeKeyDown:c,onShow:h,onHide:F,onEnter:se,onEntering:S,onEntered:_,onExit:w,onExiting:g,onExited:oe,manager:K(),transition:C8,backdropTransition:A8,renderBackdrop:pe,renderDialog:be})})]})});wN.displayName="Offcanvas";const b8=Object.assign(wN,{Body:E8,Header:S8,Title:x8}),EN=y.forwardRef((t,e)=>{const n=y.useContext(Po);return T.jsx(b8,{ref:e,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0})});EN.displayName="NavbarOffcanvas";const P8=EN,TN=y.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=ue(e,"navbar-text"),T.jsx(n,{ref:i,className:te(t,e),...r})));TN.displayName="NavbarText";const k8=TN,IN=y.forwardRef((t,e)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:s,fixed:o,sticky:a,className:l,as:u="nav",expanded:c,onToggle:h,onSelect:d,collapseOnSelect:f=!1,...p}=Zw(t,{expanded:"onToggle"}),m=ue(n,"navbar"),E=y.useCallback((...w)=>{d==null||d(...w),f&&c&&(h==null||h(!1))},[d,f,c,h]);p.role===void 0&&u!=="nav"&&(p.role="navigation");let v=`${m}-expand`;typeof r=="string"&&(v=`${v}-${r}`);const _=y.useMemo(()=>({onToggle:()=>h==null?void 0:h(!c),bsPrefix:m,expanded:!!c,expand:r}),[m,c,r,h]);return T.jsx(Po.Provider,{value:_,children:T.jsx(wo.Provider,{value:E,children:T.jsx(u,{ref:e,...p,className:te(l,m,r&&v,i&&`${m}-${i}`,s&&`bg-${s}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});IN.displayName="Navbar";const Vh=Object.assign(IN,{Brand:m8,Collapse:g8,Offcanvas:P8,Text:k8,Toggle:y8}),SN=y.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=ue(t,"row"),o=Pk(),a=kk(),l=`${s}-cols`,u=[];return o.forEach(c=>{const h=r[c];delete r[c];let d;h!=null&&typeof h=="object"?{cols:d}=h:d=h;const f=c!==a?`-${c}`:"";d!=null&&u.push(`${l}${f}-${d}`)}),T.jsx(n,{ref:i,...r,className:te(e,s,...u)})});SN.displayName="Row";const zI=SN,qI=({children:t})=>T.jsx(T.Fragment,{children:T.jsx(I9,{size:"sm",role:"group","aria-label":"Setting text and image",style:{marginBottom:"0.5rem"},children:t})}),Hs=({children:t,selectType:e,handleOnClick:n,types:r})=>{const{type:i,title:s}=r;return T.jsx(T.Fragment,{children:T.jsx(Qk,{variant:"outline-myInfo",className:"button-hover",active:e.type===i,onClick:()=>{n(i,s)},children:t})})},D8=({id:t})=>{const{showType_select:e,showType_beenSelect:n,showType_bestDamage:r,handleShowType_select:i,handleShowType_beenSelect:s,handleShowType_bestDamage:o}=er();let a=null,l=null;switch(t){case oi:a=e,l=i;break;case f_:a=n,l=s;break;case Mf:a=r,l=o;break}return T.jsxs(T.Fragment,{children:[T.jsx(Hs,{types:{type:h_,title:""},selectType:a,handleOnClick:l,children:T.jsx(KI,{color:"#22c02a",text:"草"})}),T.jsx(Hs,{types:{type:d_,title:""},selectType:a,handleOnClick:l,children:T.jsx(KI,{color:"#22c02a",text:" "})}),T.jsx(Hs,{types:{type:el,title:""},selectType:a,handleOnClick:l,children:T.jsx(ff,{text:"草"})}),T.jsx(Hs,{types:{type:Xx,title:""},selectType:a,handleOnClick:l,children:T.jsx(ff,{text:"不顯示"})})]})},KI=({color:t,text:e})=>T.jsx("div",{className:"button-type-color",children:T.jsx("span",{style:{backgroundColor:t},children:e})}),N8=({id:t})=>{const{showInfo_select:e,showInfo_beenSelect:n,showInfo_bestDamage:r,handleShowInfo_select:i,handleShowInfo_beenSelect:s,handleShowInfo_bestDamage:o}=er();let a=null,l=null;switch(t){case oi:a=e,l=i;break;case f_:a=n,l=s;break;case Mf:a=r,l=o;break}return T.jsxs(T.Fragment,{children:[T.jsx(Hs,{types:{type:u_,title:""},selectType:a,handleOnClick:l,children:T.jsx(RN,{})}),T.jsx(Hs,{types:{type:c_,title:""},selectType:a,handleOnClick:l,children:T.jsx(O8,{text:"Name"})}),T.jsx(Hs,{types:{type:el,title:""},selectType:a,handleOnClick:l,children:T.jsx(ff,{text:"Name"})})]})},RN=()=>T.jsx("img",{src:CF,alt:"顯示方式",title:"顯示方式",className:"buttonImage"}),ff=({text:t})=>T.jsx("span",{children:t}),O8=({text:t})=>T.jsxs("div",{className:"buttonImageText",children:[T.jsx(RN,{}),T.jsx(ff,{text:t})]}),V8=()=>{const{filterType:t,handleFilterType:e}=er();return T.jsx(T.Fragment,{children:T.jsxs(Bl,{children:[T.jsx(Bl.Toggle,{variant:"outline-myInfo",className:"button-hover",id:"t-dropdownBtnFilterType",children:T.jsxs("span",{children:["塞選屬性 : ",t.zhType||"error"]})}),T.jsxs(Bl.Menu,{style:{width:"auto",height:"150px",overflowY:"auto"},children:[T.jsx(Bl.Item,{as:"button",className:"dropdown-type",style:{backgroundColor:"#17CCF0"},onClick:()=>e(Jx),children:T.jsx("span",{children:"全部"})}),Rc.map(n=>{const{zhType:r,bgColor:i}=n;return T.jsx(Bl.Item,{as:"button",className:"dropdown-type",style:{backgroundColor:i},onClick:()=>e(n),children:T.jsx("span",{children:r})},br())})]})]})})},M8=({id:t})=>T.jsxs(T.Fragment,{children:[T.jsx(qI,{children:T.jsx(N8,{id:t})}),T.jsx(qI,{children:T.jsx(D8,{id:t})}),t===oi&&T.jsx(V8,{})]}),xN=y.createContext(),CN="darkTheme",F8=()=>{const t=window.matchMedia("(prefers-color-scheme:dark)").matches,e=localStorage.getItem(CN)==="true";return console.log("preferTheme",t),console.log("localTheme",e),e||t},L8=({children:t})=>{const[e,n]=y.useState(F8),r=()=>{const o=!e;n(o),localStorage.setItem(CN,o)},i=e?"dark":"light",s=e?"white-50":"mySecondary";return y.useEffect(()=>{document.body.classList.toggle("bg-darkBg",e),document.body.classList.toggle("text-white-50",e)},[e]),T.jsx(xN.Provider,{value:{isDarkMode:e,handleIsDarkMode:r,textColor:s,bgColor:i},children:t})},Is=()=>y.useContext(xN),$8=()=>{const{searchPokemon:t,handleSearchPokemon:e}=er(),{bgColor:n}=Is();return T.jsx(T.Fragment,{children:T.jsx(V7,{size:"sm",className:"search-btn",children:T.jsx(D7.Control,{"data-bs-theme":n,className:"bg-body",type:"Search",placeholder:"🔍 Search","aria-label":"Search",value:t,onChange:r=>{e(r.target.value)}})})})},j8=({title:t,id:e})=>{const{bgColor:n,textColor:r}=Is(),[i,s]=y.useState(!1);return T.jsxs("div",{className:"group-info",children:[T.jsxs("div",{children:[T.jsx("i",{"aria-controls":"collapse","aria-expanded":i,onClick:()=>s(!i),children:T.jsx(EF,{className:"btn setting-icon"})}),T.jsx($k,{in:i,"data-bs-theme":n,children:T.jsx("div",{id:"collapse",children:T.jsx("div",{className:"card card-body",children:T.jsx(M8,{id:e})})})})]}),T.jsx("span",{className:"title",children:t}),e===oi&&T.jsx($8,{})]})},B8=y.memo(j8);function U8(t){return Sc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"}}]})(t)}const AN="error",z8="white",bN="black",Ea="not found",q8=({bgColor:t,zhType:e})=>T.jsx("a",{href:"#",children:T.jsx("span",{style:{color:t??z8},children:e??AN})}),K8=({bgColor:t})=>T.jsx("a",{href:"#",children:T.jsx("span",{className:"type",style:{backgroundColor:t??bN},children:" "})}),PN=({bgColor:t,zhType:e,enType:n})=>T.jsx(Bo,{to:`type/${n}`,children:T.jsx("span",{className:"type",style:{backgroundColor:t??bN},children:e??AN})}),G8=({item:t,isActive:e,handleClick:n,children:r})=>T.jsxs("div",{className:`characterText ${e}`,onClick:()=>n(t),children:[T.jsx("span",{className:"characterName",children:(t==null?void 0:t.zhName)??Ea}),r]}),H8=y.memo(({item:t,isActive:e,handleClick:n,children:r})=>T.jsxs("div",{style:{display:"flex"},children:[r,T.jsx("div",{style:{position:"relative"},children:T.jsx("img",{src:(t==null?void 0:t.sprite)??"",alt:(t==null?void 0:t.zhName)??Ea,title:(t==null?void 0:t.zhName)??Ea,className:`characterImg ${e}`,onClick:()=>n(t),loading:"lazy"})})]})),Q8=({item:t,isActive:e,handleClick:n,children:r})=>T.jsxs("div",{className:`characterImgText ${e}`,onClick:()=>n(t),children:[T.jsxs("div",{children:[T.jsx("span",{className:"characterName",children:(t==null?void 0:t.zhName)??Ea}),r]}),T.jsx("img",{src:(t==null?void 0:t.sprite)??"",alt:(t==null?void 0:t.zhName)??Ea,title:(t==null?void 0:t.zhName)??Ea})]}),Xm=({title:t,typeClass:e,children:n,id:r})=>{const{isDarkMode:i}=Is(),s=i?"darkBg":"white-50",o=y.useRef(null),{isLoadingPokemon:a,handleNextPage:l,handleIsLoadingPokemon:u,searchPokemon:c,bestDamage:h,filterType:d}=er();return T.jsxs("div",{className:"group-col",children:[T.jsx(B8,{title:t,id:r}),T.jsxs("div",{id:r,ref:o,className:"groups",children:[T.jsx("div",{className:`group-img group-${e}`,children:n}),r===oi&&c!==""&&T.jsx("div",{className:"search-more-container",children:T.jsx("p",{children:"沒有你想要的!"})}),r===oi&&d.enType!=="all"&&T.jsx("div",{className:"search-more-container",children:T.jsx("p",{children:"沒有更多了"})}),r===Mf&&h.length>0&&T.jsxs("div",{className:`best-damage-container bg-${s}`,children:[T.jsx(U8,{className:"thumb-icon"}),T.jsx("span",{style:{paddingLeft:"0.5rem"},children:"推薦屬性"}),T.jsx("ul",{children:h.map(f=>T.jsx("li",{style:{margin:"0 0.1rem"},children:T.jsx(PN,{...f})},br()))})]})]})]})},Jm=y.memo(({item:t,showType_select:e,styleObj:n})=>(t==null?void 0:t.Types)===void 0?T.jsx("span",{children:"error"}):T.jsx("ul",{style:n,children:((t==null?void 0:t.Types)??[]).map(r=>{switch(e){case d_:return T.jsx("li",{children:T.jsx(K8,{...r})},br());case el:return T.jsx("li",{children:T.jsx(q8,{...r})},br());case h_:return T.jsx("li",{children:T.jsx(PN,{...r})},br())}})})),lv=y.memo(({showInfo_select:t,showType_select:e,displayCharacter:n,handleClick:r,id:i})=>{const{selectImg:s,searchPokemon:o,filterType:a}=er();let l=n;return i===oi&&(o!==""&&(l=l.filter(u=>u==null?void 0:u.zhName.includes(o))),a.enType!=="all"&&(l=l.filter(u=>u.Types.filter(h=>h.enType===a.enType).length>0))),l.map(u=>{if(u===void 0)return;const h=s.some(d=>d.enName===u.enName)?"hero-active":"";switch(t){case el:return T.jsx(G8,{isActive:h,handleClick:r,item:u,children:T.jsx(Jm,{styleObj:{display:"flex",flexDirection:"row",justifyContent:"space-evenly"},item:u,showType_select:e,showInfo_select:t})},br());case c_:return T.jsx(Q8,{isActive:h,item:u,handleClick:r,children:T.jsx(Jm,{styleObj:{display:"flex",flexDirection:"row",justifyContent:"start",gap:"0.3rem"},item:u,showType_select:e,showInfo_select:t})},br());case u_:return T.jsx(H8,{isActive:h,handleClick:r,item:u,children:T.jsx(Jm,{styleObj:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},item:u,showType_select:e,showInfo_select:t})},br())}})}),W8=Object.freeze(Object.defineProperty({__proto__:null,default:lv},Symbol.toStringTag,{value:"Module"})),GI=(t,e)=>{if(t.length===0)return[];const n=t.map(i=>{const s=i==null?void 0:i.Types.map(o=>{var l,u;return(e?((l=o==null?void 0:o.damage_relations)==null?void 0:l.double_damage_from)??[]:((u=o==null?void 0:o.damage_relations)==null?void 0:u.half_damage_from)??[]).map(c=>c==null?void 0:c.name)});return[].concat(...s)}),r=new Set(n[0]);return n.forEach(i=>{const s=new Set(i);r.forEach(o=>{s.has(o)||r.delete(o)})}),Array.from(r)},Y8=()=>{const{selectImg:t,handleBestDamage:e}=er();y.useEffect(()=>{const n=GI(t,!0),r=GI(t,!1),i=new Set(n);r.forEach(o=>{i.has(o)&&i.delete(o)});const s=Rc.filter(o=>{if(i.has(o.enType))return o});e(s)},[t])},X8=()=>T.jsxs("main",{style:{width:"100%",textAlign:"center"},children:[T.jsx("div",{className:"loading"}),T.jsx("h4",{style:{marginTop:"1rem"},children:"Loading"})]}),J8=y.lazy(()=>vF(()=>Promise.resolve().then(()=>W8),void 0)),Z8=()=>{const{clickImg:t,selectImg:e,AddRemoveImg:n,RemoveImg:r,showInfo_select:i,showType_select:s,showInfo_beenSelect:o,showType_beenSelect:a,showInfo_bestDamage:l,showType_bestDamage:u,storePokemon:c,storeAllPokemon:h,bestDamage:d,filterBestPokemon:f}=er();return kz(),Y8(),u6(),c6(),y.useEffect(()=>{const p=m=>(m.preventDefault(),t.size>0&&a6(t),m.returnValue="Are you sure you want to exit?");return window.addEventListener("onbeforeunload",p),()=>{window.removeEventListener("onbeforeunload",p)}},[t]),T.jsx("main",{children:T.jsxs("section",{className:"hero",children:[T.jsx(Xm,{title:vm[0].title,typeClass:i.type,id:oi,children:T.jsx(y.Suspense,{fallback:T.jsx(X8,{}),children:T.jsx(J8,{showInfo_select:i.type,showType_select:s.type,displayCharacter:h,handleClick:n,id:oi})})}),T.jsx(Xm,{title:vm[1].title,typeClass:o.type,id:f_,children:T.jsx(lv,{showInfo_select:o.type,showType_select:a.type,displayCharacter:e,handleClick:r})}),T.jsx(Xm,{title:vm[2].title,typeClass:l.type,id:Mf,children:d.length>0&&(f.length>0?T.jsx(lv,{showInfo_select:l.type,showType_select:u.type,displayCharacter:f,handleClick:()=>{}}):T.jsx("p",{className:"",children:"Oops! 看起來推薦屬性還沒有pokemon被選擇呢!"}))})]})})},Zm=()=>T.jsx(T.Fragment,{children:T.jsxs(Dz,{children:[T.jsx(Z8,{}),T.jsx(Qx,{})]})}),eK=()=>{const t=new Date().getFullYear(),{textColor:e,bgColor:n}=Is();return T.jsx("footer",{className:`bg-${n} p-3`,children:T.jsx("div",{className:"container",children:T.jsxs("p",{className:"text-center",children:["Copyright © ",t," Pokemon Gym. All Rights Reserved."]})})})},tK="/pokemon-Gym/assets/logo-0fa1e8ab.png";function nK(t){return Sc({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z",clipRule:"evenodd"}}]})(t)}function rK(t){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.768 3.96v.001l-.002-.005a9.08 9.08 0 0 0-.218-.779c-.13-.394.21-.8.602-.67.29.096.575.205.855.328l.01.005A10.002 10.002 0 0 1 12 22a10.002 10.002 0 0 1-9.162-5.985l-.004-.01a9.722 9.722 0 0 1-.329-.855c-.13-.392.277-.732.67-.602.257.084.517.157.78.218l.004.002A9 9 0 0 0 14.999 6a9.09 9.09 0 0 0-.231-2.04ZM16.5 6c0 5.799-4.701 10.5-10.5 10.5-.426 0-.847-.026-1.26-.075A8.5 8.5 0 1 0 16.425 4.74c.05.413.075.833.075 1.259Z"}}]})(t)}function iK(t){return Sc({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14Zm0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 1 0 0 11Zm-5.657.157a.75.75 0 0 1 0 1.06l-1.768 1.768a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.767-1.768a.75.75 0 0 1 1.061 0ZM3.515 3.515a.75.75 0 0 1 1.06 0l1.768 1.768a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L3.515 4.575a.75.75 0 0 1 0-1.06ZM12 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 12 0ZM4 12a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 12Zm8 8a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 12 20Zm12-8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 24 12Zm-6.343 5.657a.75.75 0 0 1 1.06 0l1.768 1.768a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-1.768-1.767a.75.75 0 0 1 0-1.061Zm2.828-14.142a.75.75 0 0 1 0 1.06l-1.768 1.768a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l1.767-1.768a.75.75 0 0 1 1.061 0Z"}}]})(t)}const sK=()=>{const{isDarkMode:t,handleIsDarkMode:e}=Is();return T.jsx(T.Fragment,{children:T.jsx(Vh,{expand:"md","data-bs-theme":"dark",className:"bg-primary",children:T.jsxs(a0,{expand:"md",children:[T.jsxs(Vh.Brand,{as:Bo,to:"Gym",children:[T.jsx("img",{src:tK,width:"30",height:"30",className:"d-inline-block align-top",alt:"Welcome to pokemon gym"}),T.jsx("span",{className:"text-capitalize",children:"pokemon gym"})]}),T.jsx(Vh.Toggle,{"aria-controls":"responsive-navbar-nav",children:T.jsx(nK,{})}),T.jsx(Vh.Collapse,{id:"responsive-navbar-nav",className:"justify-content-end",children:T.jsxs(Ul,{children:[T.jsx("div",{className:"theme-toggle",onClick:()=>{e()},children:t?T.jsx(rK,{}):T.jsx(iK,{})}),T.jsx(Ul.Link,{as:Bo,to:"About",children:"關於"}),T.jsx(Ul.Link,{as:Bo,to:"Pokedex",children:"圖鑑"}),T.jsx(Ul.Link,{as:Bo,to:"Gym",children:"道館"}),T.jsx(Ul.Link,{as:Bo,to:"Login",children:"登入/註冊"})]})})]})})})},oK=()=>T.jsx(T.Fragment,{children:T.jsxs(L8,{children:[T.jsx(sK,{}),T.jsx(Qx,{}),T.jsx(eK,{})]})}),eg=()=>T.jsxs("div",{id:"error-page",className:"text-center pt-5",children:[T.jsx("h1",{className:"text-danger",children:"Oops!"}),T.jsx("p",{className:"text-secondary",children:"Sorry, an unexpected error has occurred."}),T.jsx("p",{})]}),aK="/pokemon-Gym/assets/personal-avatar-234ffb1f.jpg",lK=()=>(Is(),T.jsx("section",{className:"text-center",children:T.jsxs(a0,{children:[T.jsx("h1",{children:"關於"}),T.jsx("hr",{}),T.jsxs(zI,{className:"justify-content-md-center",children:[T.jsx(eu,{md:"5",children:T.jsx("p",{children:"Pokemon Gym是一款在打道館時，可以快速選擇相抗衡角色的網頁工具。"})}),T.jsx(eu,{md:"5",children:T.jsx("p",{children:"開發理念在於不需要記下屬性相抗表、角色屬性，只需要透過搜尋、選擇，自動幫使用者帶出推薦的資料，節省查詢角色、開新視窗，進一步透過塞選屬性功能，在多選時也能夠帶出推薦的屬性。"})})]}),T.jsxs(zI,{className:"justify-content-md-center align-items-end",children:[T.jsx(eu,{md:"auto",children:T.jsx("img",{id:"avatar",src:aK,alt:"personal avatar"})}),T.jsx(eu,{md:"6",children:T.jsx("div",{style:{fontSize:"0.8rem"},children:"本網頁由PaddyTian獨立開發，使用JavaScript, React開發，了解更多可以留言私訊。"})})]})]})})),jo=t=>t.map(({name:e})=>Rc.filter(({enType:n})=>e===n)[0]),uK=({title:t,detail_item:e,textColor:n})=>T.jsxs(T.Fragment,{children:[T.jsx("h6",{className:`text-${n}`,children:t}),T.jsx("div",{className:"mb-2",children:e.length===0?T.jsx("span",{className:`text-${n}`,children:"-"}):e.map(({zhType:r,bgColor:i})=>T.jsx("span",{className:"ps-2 pe-2 ms-1 me-1 rounded-3 text-light",style:{backgroundColor:i,cursor:"pointer"},children:r},br()))})]}),HI=()=>{const{isDarkMode:t,bgColor:e,textColor:n}=Is(),{storeAllTypes:r}=er();let i=qx(),{type:s}=$M(),o=Rc.filter(D=>D.enType===s)[0],a=o==null?void 0:o.zhType,l=o==null?void 0:o.bgColor,u=r.filter(D=>D.name===s)[0],{damage_relations:c}=u||{},{double_damage_from:h,double_damage_to:d,half_damage_from:f,half_damage_to:p,no_damage_from:m,no_damage_to:E}=c||{},v=jo(h),_=jo(d),w=jo(f),g=jo(p),R=jo(m),S=jo(E);function I(){i(-1)}const x=[{title:"效果絕佳",detail_item:_},{title:"效果不好",detail_item:g},{title:"沒有效果",detail_item:S},{title:"遭受效果絕佳",detail_item:v},{title:"遭受效果不好",detail_item:w},{title:"沒有傷害",detail_item:R}];return T.jsxs(Oh,{show:!0,onHide:I,id:"typeView",fullscreen:"xs-down",children:[T.jsx(Oh.Header,{closeButton:!0,className:t?"bg-darkBg":"text-white-50",children:T.jsxs(Oh.Title,{children:[T.jsx("span",{style:{color:l},children:a}),T.jsx("span",{className:`text-${n}`,children:"屬性"})]})}),T.jsx(Oh.Body,{className:t?"bg-darkBg":"text-white-50",children:x.map(({title:D,detail_item:M})=>T.jsx(uK,{title:D,detail_item:M,textColor:n},br()))})]})},QI=()=>(Is(),T.jsx("section",{className:"text-center fst-italic",children:T.jsx(a0,{children:T.jsx("h3",{children:"Coming Soon..."})})})),cK=rF([{path:"/Pokemon-Gym",element:T.jsx(oK,{}),errorElement:T.jsx(eg,{}),children:[{errorElement:T.jsx(eg,{}),children:[{index:!0,element:T.jsx(Zm,{})},{path:"/Pokemon-Gym/",element:T.jsx(Zm,{}),children:[{path:"type/:type",element:T.jsx(HI,{})}]},{path:"/Pokemon-Gym/Gym",element:T.jsx(Zm,{}),children:[{path:"type/:type",element:T.jsx(HI,{})}]},{path:"/Pokemon-Gym/About",element:T.jsx(lK,{})},{path:"/Pokemon-Gym/Pokedex",element:T.jsx(QI,{})},{path:"/Pokemon-Gym/Login",element:T.jsx(QI,{})},{path:"*",element:T.jsx(eg,{})}]}]}]),hK=new IV;tg.createRoot(document.getElementById("root")).render(T.jsx(Ke.StrictMode,{children:T.jsxs(FV,{client:hK,children:[T.jsx(hF,{router:cK}),T.jsx(zV,{initialIsOpen:!1})]})}));
